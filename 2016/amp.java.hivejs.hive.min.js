/*! Hive U build 3.1.0 Copyright(c) 2015 HiveStreaming AB, All rights reserved.
 * Authors: mikael.hogqvist@hivestreaming.com - riccardo.reale@hivestreaming.com - roberto.roverso@hivestreaming.com */
/*! AtatusJs - v2.3.12 - 2016-07-03
 * Copyright (c) 2016 Atatus */
!function(a){function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function c(a){return"undefined"==typeof a}if(a){var d={},e=a.TraceKit,f=[].slice,g="?";d.noConflict=function(){return a.TraceKit=e,d},d.wrap=function(a){function b(){try{return a.apply(this,arguments)}catch(b){throw d.report(b),b}}return b},d.report=function(){function c(a){i(),m.push(a)}function e(a){for(var b=m.length-1;b>=0;--b)m[b]===a&&m.splice(b,1)}function g(a,c){var e=null;if(!c||d.collectWindowErrors){for(var g in m)if(b(m,g))try{m[g].apply(null,[a].concat(f.call(arguments,2)))}catch(h){e=h}if(e)throw e}}function h(a,b,c,e,f){var h=null;if(f)h=d.computeStackTrace(f);else if(o)d.computeStackTrace.augmentStackTraceWithInitialElement(o,b,c,a),h=o,o=null,n=null;else{var i={url:b,line:c,column:e};i.func=d.computeStackTrace.guessFunctionName(i.url,i.line),i.context=d.computeStackTrace.gatherContext(i.url,i.line),h={mode:"onerror",message:a,url:document.location.href,stack:[i],useragent:navigator.userAgent}}return g(h,"from window.onerror"),k?k.apply(this,arguments):!1}function i(){l!==!0&&(k=a.onerror,a.onerror=h,l=!0)}function j(b){var c=f.call(arguments,1);if(o){if(n===b)return;var e=o;o=null,n=null,g.apply(null,[e,null].concat(c))}var h=d.computeStackTrace(b);throw o=h,n=b,a.setTimeout(function(){n===b&&(o=null,n=null,g.apply(null,[h,null].concat(c)))},h.incomplete?2e3:0),b}var k,l,m=[],n=null,o=null;return j.subscribe=c,j.unsubscribe=e,j}(),d.computeStackTrace=function(){function e(b){if(!d.remoteFetching)return"";try{var c=function(){try{return new a.XMLHttpRequest}catch(b){return new a.ActiveXObject("Microsoft.XMLHTTP")}},e=c();return e.open("GET",b,!1),e.send(""),e.responseText}catch(f){return""}}function f(a){if("string"!=typeof a)return[];if(!b(w,a)){var c="",d="";try{d=document.domain}catch(f){}-1!==a.indexOf(d)&&(c=e(a)),w[a]=c?c.split("\n"):[]}return w[a]}function h(a,b){var d,e=/function ([^(]*)\(([^)]*)\)/,h=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,i="",j=10,k=f(a);if(!k.length)return g;for(var l=0;j>l;++l)if(i=k[b-l]+i,!c(i)){if(d=h.exec(i))return d[1];if(d=e.exec(i))return d[1]}return g}function i(a,b){var e=f(a);if(!e.length)return null;var g=[],h=Math.floor(d.linesOfContext/2),i=h+d.linesOfContext%2,j=Math.max(0,b-h-1),k=Math.min(e.length,b+i-1);b-=1;for(var l=j;k>l;++l)c(e[l])||g.push(e[l]);return g.length>0?g:null}function j(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function k(a){return j(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function l(a,b){for(var c,d,e=0,g=b.length;g>e;++e)if((c=f(b[e])).length&&(c=c.join("\n"),d=a.exec(c)))return{url:b[e],line:c.substring(0,d.index).split("\n").length,column:d.index-c.lastIndexOf("\n",d.index)-1};return null}function m(a,b,c){var d,e=f(b),g=new RegExp("\\b"+j(a)+"\\b");return c-=1,e&&e.length>c&&(d=g.exec(e[c]))?d.index:null}function n(b){for(var c,d,e,f,g=[a.location.href],h=document.getElementsByTagName("script"),i=""+b,m=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,n=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,o=0;o<h.length;++o){var p=h[o];p.src&&g.push(p.src)}if(e=m.exec(i)){var q=e[1]?"\\s+"+e[1]:"",r=e[2].split(",").join("\\s*,\\s*");c=j(e[3]).replace(/;$/,";?"),d=new RegExp("function"+q+"\\s*\\(\\s*"+r+"\\s*\\)\\s*{\\s*"+c+"\\s*}")}else d=new RegExp(j(i).replace(/\s+/g,"\\s+"));if(f=l(d,g))return f;if(e=n.exec(i)){var s=e[1];if(c=k(e[2]),d=new RegExp("on"+s+"=[\\'\"]\\s*"+c+"\\s*[\\'\"]","i"),f=l(d,g[0]))return f;if(d=new RegExp(c),f=l(d,g))return f}return null}function o(a){if(!a.stack)return null;for(var b,d,e=/^\s*at (.*?) ?\(?((?:file|https?|chrome-extension):.*?):(\d+)(?::(\d+))?\)?\s*$/i,f=/^\s*(.*?)(?:\((.*?)\))?@?((?:file|https?|chrome):.*?):(\d+)(?::(\d+))?\s*$/i,j=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,k=a.stack.split("\n"),l=[],n=/^(.*) is undefined$/.exec(a.message),o=0,p=k.length;p>o;++o){if(b=f.exec(k[o]))d={url:b[3],func:b[1]||g,args:b[2]?b[2].split(","):"",line:+b[4],column:b[5]?+b[5]:null};else if(b=e.exec(k[o]))d={url:b[2],func:b[1]||g,line:+b[3],column:b[4]?+b[4]:null};else{if(!(b=j.exec(k[o])))continue;d={url:b[2],func:b[1]||g,line:+b[3],column:b[4]?+b[4]:null}}!d.func&&d.line&&(d.func=h(d.url,d.line)),d.line&&(d.context=i(d.url,d.line)),l.push(d)}return l.length?(l[0]&&l[0].line&&!l[0].column&&n?l[0].column=m(n[1],l[0].url,l[0].line):l[0].column||c(a.columnNumber)||(l[0].column=a.columnNumber+1),{mode:"stack",name:a.name,message:a.message,url:document.location.href,stack:l,useragent:navigator.userAgent}):null}function p(a){for(var b,c=a.stacktrace,d=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,e=c.split("\n"),f=[],g=0,j=e.length;j>g;g+=2)if(b=d.exec(e[g])){var k={line:+b[1],column:+b[2],func:b[3]||b[4],args:b[5]?b[5].split(","):[],url:b[6]};if(!k.func&&k.line&&(k.func=h(k.url,k.line)),k.line)try{k.context=i(k.url,k.line)}catch(l){}k.context||(k.context=[e[g+1]]),f.push(k)}return f.length?{mode:"stacktrace",name:a.name,message:a.message,url:document.location.href,stack:f,useragent:navigator.userAgent}:null}function q(c){var d=c.message.split("\n");if(d.length<4)return null;var e,g,j,m,n=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of function script\s*$/i,q=[],r=document.getElementsByTagName("script"),s=[];for(g in r)b(r,g)&&!r[g].src&&s.push(r[g]);for(g=2,j=d.length;j>g;g+=2){var t=null;if(e=n.exec(d[g]))t={url:e[2],func:e[3],line:+e[1]};else if(e=o.exec(d[g])){t={url:e[3],func:e[4]};var u=+e[1],v=s[e[2]-1];if(v&&(m=f(t.url))){m=m.join("\n");var w=m.indexOf(v.innerText);w>=0&&(t.line=u+m.substring(0,w).split("\n").length)}}else if(e=p.exec(d[g])){var x=a.location.href.replace(/#.*$/,""),y=e[1],z=new RegExp(k(d[g+1]));m=l(z,[x]),t={url:x,line:m?m.line:y,func:""}}if(t){t.func||(t.func=h(t.url,t.line));var A=i(t.url,t.line),B=A?A[Math.floor(A.length/2)]:null;t.context=A&&B.replace(/^\s*/,"")===d[g+1].replace(/^\s*/,"")?A:[d[g+1]],q.push(t)}}return q.length?{mode:"multiline",name:c.name,message:d[0],url:document.location.href,stack:q,useragent:navigator.userAgent}:null}function r(a,b,c,d){var e={url:b,line:c};if(e.url&&e.line){a.incomplete=!1,e.func||(e.func=h(e.url,e.line)),e.context||(e.context=i(e.url,e.line));var f=/ '([^']+)' /.exec(d);if(f&&(e.column=m(f[1],e.url,e.line)),a.stack.length>0&&a.stack[0].url===e.url){if(a.stack[0].line===e.line)return!1;if(!a.stack[0].line&&a.stack[0].func===e.func)return a.stack[0].line=e.line,a.stack[0].context=e.context,!1}return a.stack.unshift(e),a.partial=!0,!0}return a.incomplete=!0,!1}function s(a,b){for(var c,e,f,i=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,j=[],k={},l=!1,o=s.caller;o&&!l;o=o.caller)if(o!==t&&o!==d.report){if(e={url:null,func:g,line:null,column:null},o.name?e.func=o.name:(c=i.exec(o.toString()))&&(e.func=c[1]),"undefined"==typeof e.func)try{e.func=c.input.substring(0,c.input.indexOf("{"))}catch(p){}if(f=n(o)){e.url=f.url,e.line=f.line,e.func===g&&(e.func=h(e.url,e.line));var q=/ '([^']+)' /.exec(a.message||a.description);q&&(e.column=m(q[1],f.url,f.line))}k[""+o]?l=!0:k[""+o]=!0,j.push(e)}b&&j.splice(0,b);var u={mode:"callers",name:a.name,message:a.message,url:document.location.href,stack:j,useragent:navigator.userAgent};return r(u,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description),u}function t(a,b){var c=null;b=null==b?0:+b;try{if(c=p(a))return c}catch(d){if(v)throw d}try{if(c=o(a))return c}catch(d){if(v)throw d}try{if(c=q(a))return c}catch(d){if(v)throw d}try{if(c=s(a,b+1))return c}catch(d){if(v)throw d}return{mode:"failed"}}function u(a){a=(null==a?0:+a)+1;try{throw new Error}catch(b){return t(b,a+1)}}var v=!1,w={};return t.augmentStackTraceWithInitialElement=r,t.guessFunctionName=h,t.gatherContext=i,t.ofCaller=u,t.getSource=f,t}(),d.extendToAsynchronousCallbacks=function(){var b=function(b){var c=a[b];a[b]=function(){var a=f.call(arguments),b=a[0];return"function"==typeof b&&(a[0]=d.wrap(b)),c.apply?c.apply(this,a):c(a[0],a[1])}};b("setTimeout"),b("setInterval")},d.remoteFetching||(d.remoteFetching=!0),d.collectWindowErrors||(d.collectWindowErrors=!0),(!d.linesOfContext||d.linesOfContext<1)&&(d.linesOfContext=11),a.TraceKit=d}}("undefined"!=typeof window?window:global),function(a,b){"use strict";if(a){var c=a.event.add;a.event.add=function(d,e,f,g,h){if("function"!=typeof f&&"function"!=typeof f.handler)return c.call(this,d,e,f,g,h);var i;return f.handler?(i=f.handler,f.handler=b.wrap(f.handler)):(i=f,f=b.wrap(f)),f.guid=i.guid?i.guid:i.guid=a.guid++,c.call(this,d,e,f,g,h)};var d=a.fn.ready;a.fn.ready=function(a){return d.call(this,b.wrap(a))};var e=a.ajax;a.ajax=function(c,d){"object"==typeof c&&(d=c,c=void 0),d=d||{};for(var f,g=["complete","error","success"];f=g.pop();)a.isFunction(d[f])&&(d[f]=b.wrap(d[f]));try{return c?e.call(this,c,d):e.call(this,d)}catch(h){throw b.report(h),h}}}}(window.jQuery,window.TraceKit),function(a,b,c,d){function e(a){var b=a,c=a.split("//")[1];if(c){var d=c.indexOf("?"),e=c.toString().substring(0,d),f=e.split("/").slice(0,4).join("/"),g=e.substring(0,48);b=f.length<g.length?f:g,b!==e&&(b+="..")}return b}function f(a,b,c,f){if(K&&(L||b.getAllResponseHeaders())){var g="AJAX Error: "+(b.statusText||"unknown")+" "+(c.type||"unknown")+" "+(e(c.url)||"unknown");V.send(f||a.type,{status:b.status,statusText:b.statusText,type:c.type,url:c.url,ajaxErrorMessage:g,contentType:c.contentType,requestData:c.data&&c.data.slice?c.data.slice(0,10240):d,responseData:b.responseText&&b.responseText.slice?b.responseText.slice(0,10240):d,activeTarget:a.target&&a.target.activeElement?a.target.activeElement.outerHTML:d})}}function g(){return o&&""!==o?!0:(R.log("Atatus API key has not been configured, make sure you call atatus.config(yourApiKey)"),!1)}function h(){var c=b.documentElement,d=b.getElementsByTagName("body")[0],e=a.innerWidth||c.clientWidth||d.clientWidth,f=a.innerHeight||c.clientHeight||d.clientHeight;return{width:e,height:f}}function i(a){var b=(new Date).toJSON();try{var c="atatusjs="+b+"="+R.getRandomInt();"undefined"==typeof localStorage[c]&&(localStorage[c]=a)}catch(d){R.log("Atatus: LocalStorage full, cannot save exception")}}function j(){try{return"localStorage"in a&&null!==a.localStorage}catch(b){return!1}}function k(){if(j()&&localStorage.length>0)for(var a in localStorage)if("atatusjs="===a.substring(0,9)){try{var b=JSON.parse(localStorage[a]);"apikey"in b&&m(N,b)}catch(c){R.log("Atatus: Invalid JSON object in LocalStorage")}localStorage.removeItem(a)}}function l(a,c){if(c=c||{},!a.stack||!a.stack.length)return void R.log("Atatus: Canceling send due to no stacktrace.");R.isEmpty(c.customData)&&(c.customData="function"==typeof p?p():p),R.isEmpty(c.tags)&&(c.tags=E);var d=c.customData&&c.customData.ajaxErrorMessage||a.message;if(d&&0===d.indexOf("Uncaught ")&&(d=a.message.substring(9)),d=d||c.status||"Script error.",w&&w.test(d))return void R.log("Atatus: canceling send due to ignore errors");var e=[];a.stack&&a.stack.length&&R.forEach(a.stack,function(a,b){R.endsWith(b.url,"/atatus.js")||e.push({ln:b.line||0,cn:b.column||0,f:b.url||"anonymous",m:b.func||"[anonymous]"})});var f=[a.name,d,JSON.stringify(e)].join("|");if(f===x)return void R.log("Atatus: canceling send due to duplicate errors");x=f;var g=c.customData;try{JSON.stringify(g)}catch(h){var i="Cannot add custom data; may contain circular reference";g={error:i},R.log("Atatus: "+i)}var j=U.getAllEvents();S.clear();var k={"class":a.name,name:d,backTraces:e,userActions:j,net:null,customData:g||null,tags:c.tags,sourcemap:J,request:{url:b.location.href,ua:navigator.userAgent}};if("function"==typeof y&&(k.groupingKey=y(k)),"function"==typeof z){var l=z(k);l&&m(N,k)}else m(N,k)}function m(c,d){if(G&&G.length&&-1===G.indexOf(location.host))return void R.log("Atatus: canceling send due to not a allowed domain");if(g()){if(!d.ts){var e=a.screen||h();d.ts=(new Date).getTime(),d.apikey=o,d.request=d.request||{},d.request.url=d.request.url||b.location.href,d.request.ua=d.request.ua||navigator.userAgent,d.request.w=e.width,d.request.h=e.height,d.v=r||"",d._v=B||""}q&&(d.cid=q.userId||null),R.log("Sending data to Atatus Receiver:",d),n(c,JSON.stringify(d))}}function n(a,b){var c=new Image,d=M+a+"?data="+encodeURIComponent(b);c.crossOrigin="anonymous",c.onload=function(){k()},c.onerror=c.onabort=function(){I&&a===N&&i(b)},c.src=d}var o,p,q,r,s,t,u,v,w,x,y,z,A,B="2.3.12",C=TraceKit.noConflict(),D=a.atatus,E=[],F=!1,G=[],H=!1,I=!1,J=!1,K=!1,L=!1,M="https://br-rx.atatus.com",N="/track/browser/errors",O="/track/browser/perf",P="/track/browser/perf/ajax",Q="/track/browser/perf/txn";c&&(A=c(b));var R={isBoolean:function(a){return"undefined"!=typeof a&&"boolean"==typeof a},isString:function(a){return"string"==typeof a},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},endsWith:function(a,b){return a&&b?-1!==a.indexOf(b,a.length-b.length):!1},joinRegExp:function(a){for(var b,c=[],d=0,e=a.length;e>d;d++)b=a[d],R.isString(b)?c.push(b.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")):b&&b.source&&c.push(b.source);return new RegExp(c.join("|"),"i")},getTargetUrl:function(b){return a.XDomainRequest&&H&&(b=b.slice(6)),b},now:function(){return(new Date).getTime()},pad:function(a){return a=String(a),1===a.length&&(a="0"+a),a},merge:function(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d},mergeArray:function(a,b){return null!=b?a.concat(b):a},forEach:function(a,b){for(var c=0;c<a.length;c++)b.call(null,c,a[c])},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},getRandomInt:function(){return Math.floor(9007199254740992*Math.random())},log:function(b,c){F&&a.console&&a.console.log&&(a.console.log(b),c&&a.console.log(c))},bind:function(a,b){return function(){return a.apply(b,Array.prototype.slice.call(arguments))}},canAllowInsecureSubmissions:function(){var b=a.navigator.userAgent,c=b.match(/Trident\/([\d.]+)/),d=c&&"7.0"===c[1]?11:(b=b.match(/MSIE ([\d.]+)/))?parseInt(b[1],10):!1;return d&&9>=d},uuid4:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},addEventListener:function(b,c,d){return"undefined"!=typeof a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,d):void 0},arrayFromObject:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}},S={eventObject:{},all:function(a){for(var b=this.getEventObject(a),c=[],d=0;d<b.length;d++)c.push(b[d].value);return c},clear:function(){for(var a in this.eventObject)this.eventObject.hasOwnProperty(a)&&(this.eventObject[a].length=0)},add:function(a,b){var c=this.getEventObject(a),d=R.uuid4();return c.push({key:d,value:b}),this.truncateEventObject(a,10),d},get:function(a,b){for(var c=this.getEventObject(a),d=0;d<c.length;d++)if(c[d].key===b)return c[d].value;return!1},getEventObject:function(a){return this.eventObject[a]||(this.eventObject[a]=[]),this.eventObject[a]},truncateEventObject:function(a,b){var c=this.getEventObject(a);c.length>b&&(this.eventObject[a]=c.slice(c.length-b))}},T={attach:function(b,c,d,e,f){b=b||a.console||{};for(var g=f||["log","debug","info","warn","error"],h=g.pop(),i=function(a,b,d){c&&S.add("user",{ts:R.now(),c:"console",l:a,m:b}),"error"===a&&e&&V.notify(new Error(b),d)};h;)this.wrapConsoleMethod(b,h,d,i),h=g.pop()},wrapConsoleMethod:function(a,b,c,d){var e=a[b],f=a;b in a&&(a[b]=function(){var a=[].slice.call(arguments),g=""+a.join(" "),h={level:b,logger:"console"};d&&d(b,g,h),e&&c&&Function.prototype.apply.call(e,f,a)})}},U={attach:function(){var a=R.bind(this.onDocumentClicked,this),c=R.bind(this.onInputChanged,this);b.addEventListener?(b.addEventListener("click",a,!0),b.addEventListener("blur",c,!0)):b.attachEvent&&(b.attachEvent("onclick",a),b.attachEvent("onfocusout",c))},writeUserEvent:function(a,b,c,d){"password"===this.getElementType(a)&&(c=void 0),S.add("user",{ts:R.now(),a:b,e:this.getOuterHTML(a),v:this.getValueKind(c,d)})},onDocumentClicked:function(a){var b=this.getElementFromEvent(a);b&&b.tagName&&(this.isTarget(b,"a")||this.isTarget(b,"button")||this.isTarget(b,"input",["button","submit"])?this.writeUserEvent(b,"click"):this.isTarget(b,"input",["checkbox","radio"])&&this.writeUserEvent(b,"check",b.value,b.checked))},onInputChanged:function(a){var b=this.getElementFromEvent(a);b&&b.tagName&&(this.isTarget(b,"textarea")?this.writeUserEvent(b,"input",b.value):this.isTarget(b,"select")&&b.options&&b.options.length?this.onSelectInputChanged(b):this.isTarget(b,"input")&&!this.isTarget(b,"input",["button","submit","hidden","checkbox","radio"])&&this.writeUserEvent(b,"input",b.value))},onSelectInputChanged:function(a){if(a.multiple){for(var b=0;b<a.options.length;b++)if(a.options[b].selected){this.writeUserEvent(a,"select",a.options[b].value);break}}else 0<=a.selectedIndex&&a.options[a.selectedIndex]&&this.writeUserEvent(a,"select",a.options[a.selectedIndex].value)},getElementFromEvent:function(a){return a.target||b.elementFromPoint(a.clientX,a.clientY)},isTarget:function(a,b,c){if(a.tagName.toLowerCase()!==b.toLowerCase())return!1;if(!c)return!0;for(var d=this.getElementType(a),e=0;e<c.length;e++)if(c[e]===d)return!0;return!1},getElementType:function(a){return(a.getAttribute("type")||"").toLowerCase()},getOuterHTML:function(a){for(var b="<"+a.tagName.toLowerCase(),c=a.attributes,d=0,e=c.length;e>d;d++){var f=c[d].name;"value"!==f.toLowerCase()&&(b+=" "+f+'="'+c[d].value+'"')}return b+=" >"},getValueKind:function(a,b){return null==a?null:{length:a.length,checked:b,pattern:this.matchInputPattern(a)}},matchInputPattern:function(a){return""===a?"empty":/^[a-z0-9!#$%&'*+=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/.test(a)?"email":/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(a)||/^(\d{4}[\/\-](0?[1-9]|1[012])[\/\-]0?[1-9]|[12][0-9]|3[01])$/.test(a)?"date":/^(?:(?:\+?1\s*(?:[.\-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.\-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.\-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(a)?"phone":/^\s*$/.test(a)?"whitespace":/^\d*$/.test(a)?"numeric":"character"},getAllEvents:function(){return S.all("user")}},V={noConflict:function(){return a.atatus=D,V},isConfigured:function(){return!!o},config:function(b,c){return c=c||{},o=b,C.remoteFetching=!1,w=[],c&&(p=c.customData,E=c.tags||[],J=!(!c.enableSourcemap&&!c.sourcemap),s=!!c.disableUserActions,t=!!c.disableAjaxMonitoring,u=!!c.disableRUM,F=!!c.debugMode,c.ignoreErrors&&R.isArray(c.ignoreErrors)&&(w=c.ignoreErrors),V.setAllowedDomains(c.allowedDomains),V.setVersion(c.version),V.enableOffline(c.enableOffline||c.offline),V.onBeforeErrorSend(c.beforeErrorSend),V.setGroupingKeyCallback(c.groupingKeyCallback)),H=R.canAllowInsecureSubmissions(),w.push(/^Script error\.?$/),w.push(/^Javascript error: Script error\.? on line 0$/),w=R.joinRegExp(w),k(),v={enabled:!0,timeline:!0,display:!0,error:!0,levels:null},R.isBoolean(c.console)&&(v.enabled=c.console),R.isBoolean(c.consoleTimeline)&&(v.timeline=c.consoleTimeline),R.isBoolean(c.consoleDisplay)&&(v.display=c.consoleDisplay),R.isBoolean(c.consoleErrorNotify)&&(v.error=c.consoleErrorNotify),R.isArray(c.consoleTimelineLevels)&&(v.levels=c.consoleTimelineLevels),v.enabled&&"console"in a&&a.console.log&&T.attach(a.console,v.timeline,v.display,v.error,v.levels),s||U.attach(),t||u||V.__attachAjaxHooks(),V},install:function(){return g()?(C.report.subscribe(l),C.extendToAsynchronousCallbacks(),A&&K&&A.ajaxError(f),V):void 0},uninstall:function(){return o=null,C.report.unsubscribe(l),A&&K&&A.unbind("ajaxError",f),V},setCustomData:function(a){return p=a,V},setTags:function(a){return E=a,V},setAllowedDomains:function(a){return a&&R.isArray(a)&&(G=a),V},getAllowedDomains:function(){return G},setUser:function(a,b,c,d){return q={},a&&(q.userId=""+a),b&&(q.email=""+b),c&&(q.firstName=""+c),d&&(q.lastName=""+d),V},setVersion:function(a){return a&&(r=""+a),V},enableOffline:function(a){return R.isBoolean(a)&&(I=a),V},onBeforeErrorSend:function(a){return"function"==typeof a&&(z=a),V},setGroupingKeyCallback:function(a){return"function"==typeof a&&(y=a),V},setAPIEndpoint:function(a){return M=a,V},init:function(a,b,c){return c&&(b=b||{},b.customData=c),V.config(a,b)},withCustomData:function(a){return V.setCustomData(a)},withTags:function(a){return V.setTags(a)},attach:function(){return V.install()},detach:function(){return V.uninstall()},notify:function(a,b,c){return V.send(a,b,c)},sendPerf:function(a){return u?void R.log("RUM is disabled. Please enable it in the config options."):m(O,a)},sendAjaxPerf:function(a){return u?void R.log("RUM is disabled. Please enable it in the config options."):m(P,a)},sendTxnPerf:function(a){return m(Q,a)},send:function(a,b,c){try{l(C.computeStackTrace(a),{customData:R.merge(p,b),tags:R.mergeArray(E,c)})}catch(d){if(a!==d)throw d}return V},_helper:R};a.atatus=V}(window,document,window.jQuery),function(a,b,c){function d(a){a.pl<=0||atatus.sendPerf(a)}function e(){var b=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance,c=b.timing,e=b.navigation;if(0===c.loadEventEnd)return!1;clearInterval(i),i=null;var f=c.navigationStart;0>=f&&(f=c.fetchStart);var g={};for(var h in j)g[j[h]]=-1,h in c&&(c[h]<=0||(g[j[h]]=c[h]-f));var k={nty:e.type,rc:e.redirectCount,nt:g.rps-g.ns,dp:g.dce-g.rps,pr:g.le-g.dce,fe:g.le-g.rps,pl:g.le-g.ns};d(k)}function f(){if(!h||!h.bDone)return!1;clearInterval(i),i=!1;var a=h.getMeasures();if(null!=a&&null!=a.backend&&null!=a.frontend&&null!=a["page load time"]&&null!=a["total load time"]){var b=a.backend,c=a.backend+a.frontend,e={nty:0,rc:0,nt:b,dp:c-b,pr:a["total load time"]-c,fe:a["total load time"]-b,pl:a["total load time"]};d(e)}}var g=(new Date).getTime(),h=h||{};h.q=h.q||[],h.version="0.3",h.targetOrigin=b.location.protocol+"//"+b.location.hostname,h.bPostMessage=!1,h.beaconUrl=h.beaconUrl||"/images/beacon.gif",h.autorun=!1,h.init=function(){if(h.bDone=!1,h.bUnloaded=!1,h.marks={},h.measures={},h.starts={},h.findStartTime(),h.addEventListener("beforeunload",h.beforeUnload,!1),h.addEventListener("pagehide",h.beforeUnload,!1),h.addEventListener("unload",h.beforeUnload,!1),h.processQ(),"complete"===b.readyState){var c=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance;c&&"undefined"!=typeof c.timing&&"undefined"!=typeof c.timing.loadEventEnd&&(h.mark("firstbyte",c.timing.responseStart),h.mark("onload",c.timing.loadEventEnd)),h.done()}else h.addEventListener("load",h.onload,!1)},h.processQ=function(){for(var a=h.q.length,b=0;a>b;b++){var c=h.q[b],d=c[0];"mark"===d?h.mark(c[1],c[2]):"measure"===d?h.measure(c[1],c[2],c[3]):"done"===d&&h.done(c[1])}},h.mark=function(b,c){return h.dprint("RUM_EPISODES.mark: "+b+", "+c),b?(h.marks[b]=parseInt(c||(new Date).getTime()),h.bPostMessage&&a.postMessage("RUM_EPISODES:mark:"+b+":"+c,h.targetOrigin),void("firstbyte"===b?h.measure("backend","starttime","firstbyte"):"onload"===b?(h.measure("frontend","firstbyte","onload"),h.measure("page load time","starttime","onload")):"done"===b&&h.measure("total load time","starttime","done"))):void h.dprint("Error: markName is undefined in RUM_EPISODES.mark.")},h.measure=function(b,c,d){if(h.dprint("RUM_EPISODES.measure: "+b+", "+c+", "+d),!b)return void h.dprint("Error: episodeName is undefined in RUM_EPISODES.measure.");var e;if("undefined"==typeof c)e="number"==typeof h.marks[b]?h.marks[b]:(new Date).getTime();else if("number"==typeof h.marks[c])e=h.marks[c];else{if("number"!=typeof c)return void h.dprint("Error: unexpected startNameOrTime in RUM_EPISODES.measure: "+c);e=c}var f;if("undefined"==typeof d)f=(new Date).getTime();else if("number"==typeof h.marks[d])f=h.marks[d];else{if("number"!=typeof d)return void h.dprint("Error: unexpected endNameOrTime in RUM_EPISODES.measure: "+d);f=d}h.starts[b]=parseInt(e),h.measures[b]=parseInt(f-e),h.bPostMessage&&a.postMessage("RUM_EPISODES:measure:"+b+":"+e+":"+f,h.targetOrigin)},h.done=function(b){h.bDone=!0,h.mark("done"),h.bPostMessage&&a.postMessage("RUM_EPISODES:done",h.targetOrigin),"function"==typeof b&&b()},h.getMarks=function(){return h.marks},h.getMeasures=function(){return h.measures},h.getStarts=function(){return h.starts},h.findStartTime=function(){var a=h.findStartWebTiming()||h.findStartCookie();a&&h.mark("starttime",a)},h.findStartWebTiming=function(){var b,c=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance;return c&&"undefined"!=typeof c.timing&&"undefined"!=typeof c.timing.navigationStart&&(b=c.timing.navigationStart,h.dprint("RUM_EPISODES.findStartWebTiming: startTime = "+b)),b},h.findStartCookie=function(){for(var d=b.cookie.split(" "),e=0;e<d.length;e++)if(0===d[e].indexOf("RUM_EPISODES=")){for(var f,g,i=d[e].substring("RUM_EPISODES=".length).split("&"),j=0;j<i.length;j++)if(0===i[j].indexOf("s="))f=i[j].substring(2);else if(0===i[j].indexOf("r=")){var k=i[j].substring(2);k=k.replace(/;$/,""),g=a.escape(b.referrer)===k}if(g&&f)return h.dprint("RUM_EPISODES.findStartCookie: startTime = "+f),f}return c},h.beforeUnload=function(){h.bUnloaded||(b.cookie="RUM_EPISODES=s="+Number(new Date)+"&r="+a.escape(b.location)+"; path=/",h.bUnloaded=!0)},h.onload=function(){h.mark("onload"),h.done()},h.addEventListener=function(b,c,d){return"undefined"!=typeof a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,d):void 0},h.dprint=function(){},h.init();var i=null,j={navigationStart:"ns",redirectStart:"rds",redirectEnd:"rde",unloadEventStart:"us",unloadEventEnd:"ue",fetchStart:"fs",domainLookupStart:"dls",domainLookupEnd:"dle",connectStart:"cs",secureConnectionStart:"scs",connectEnd:"ce",handshakeStart:"hs",requestStart:"rqs",responseStart:"rps",responseEnd:"rpe",domLoading:"dl",domInteractive:"di",domContentLoadedEventStart:"dcs",domContentLoadedEventEnd:"dce",domComplete:"dc",loadEventStart:"ls",loadEventEnd:"le"},k=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance;k&&"undefined"!=typeof k.timing&&"undefined"!=typeof k.navigation?i=setInterval(e,100):(h.mark("firstbyte",g),i=setInterval(f,100))}(window,document),atatus.__attachAjaxHooks=function(){!function(a,b){var c=atatus._helper,d={queue:[],batchSize:25,processing:!1,bUnloaded:!1,push:function(a){"string"==typeof a.url&&a.url.indexOf(".html")>0||(this.queue.push(a),this.queue.length>=this.batchSize&&this._processQueue())},_processQueue:function(){if(!this.processing&&this.queue.length){this.processing=!0;try{for(var a={},b={},d=0;d<this.queue.length;d++){var e,f=this.queue[d];if(f.status<400){e=f.method+f.url;var g=f.respAvailTime-f.sendTime,h=f.respProcTime-f.respAvailTime,i=f.receivedSize,j=f.sendSize,k=a[e];if(k){k.c++;var l=k.re;l.t=l.t+g,l.lo=l.lo<g?l.lo:g,l.hi=l.hi>g?l.hi:g,l.ssq=l.ssq+g*g;var m=k.cb;m.t=m.t+h,m.lo=m.lo<h?m.lo:h,m.hi=m.hi>h?m.hi:h,m.ssq=m.ssq+h*h;var n=k.rs;n.t=n.t+i,n.lo=n.lo<i?n.lo:i,n.hi=n.hi>i?n.hi:i,n.ssq=n.ssq+i*i;var o=k.ss;o.t=o.t+j,o.lo=o.lo<j?o.lo:j,o.hi=o.hi>j?o.hi:j,o.ssq=o.ssq+j*j}else a[e]={m:f.method,url:f.url,c:1,re:{t:g,lo:g,hi:g,ssq:g*g},cb:{t:h,lo:h,hi:h,ssq:h*h},rs:{t:f.receivedSize,lo:f.receivedSize,hi:f.receivedSize,ssq:f.receivedSize*f.receivedSize},ss:{t:f.sendSize,lo:f.sendSize,hi:f.sendSize,ssq:f.sendSize*f.sendSize}}}else e=f.method+f.status+f.url,b[e]?b[e].c++:b[e]={m:f.method,url:f.url,st:f.status,c:1}}var p={xhr:c.arrayFromObject(a),xhrError:c.arrayFromObject(b)};atatus.sendAjaxPerf(p)}catch(q){c.log("Error while processing queue: ",q)}finally{this.queue=[],this.processing=!1}}},beforeUnload:function(){d.bUnloaded||(d._processQueue(),d.bUnloaded=!0)}};c.addEventListener("beforeunload",d.beforeUnload,!1);var e={support:function(a){return!a||"apply"in a},around:function(a,b,d,e){return a=a||function(){},function(){var f,g=Array.prototype.slice.call(arguments);try{b&&(f=b.apply(this,g))}catch(h){c.log(e,h)}var i;try{i=a.apply(this,f||g)}finally{try{d&&d.apply(this,g)}catch(h){c.log(e,h)}}return i}},before:function(a,b){return e.around(a,b)},after:function(a,b){return e.around(a,null,b)},timeout:function(a){setTimeout(a,0)},wrapAddEventListener:function(){return function(a,b){if(("load"===a||"error"===a)&&b&&this._atrumXhrData){var c;b.__atrumInterceptor?c=b.__atrumInterceptor:e.support(b)?(c=g.wrapXHR(b,this,"XHR.invokeEventListener"),b.__atrumInterceptor=c):c=null;var d;return c&&(d=Array.prototype.slice.call(arguments),d[1]=c),d}}},wrapRemoveEventListener:function(){return function(a,b){if(this._atrumXhrData){var c=Array.prototype.slice.call(arguments);return b.__atrumInterceptor&&(c[1]=b.__atrumInterceptor),c}}},aroundWithHandleEvent:function(a,b,c,d){var f=a;return a&&"object"==typeof a&&"toString"in a&&"[xpconnect wrapped nsIDOMEventListener]"===a.toString()&&"handleEvent"in a&&(f=function(){a.handleEvent.apply(this,Array.prototype.slice.call(arguments))}),e.around(f,b,c,d)},getFullyQualifiedUrl:function(a){var c=b.createElement("a");return c.href=a,c.href}};if(a.XMLHttpRequest&&a.XMLHttpRequest.prototype){var f=a.XMLHttpRequest.prototype;if(!("open"in f&&"send"in f))return;if(!e.support(f.open)||!e.support(f.send))return;var g={};g.captureAjaxTimings=function(a){var b=a._atrumXhrData;if(b){var c=(new Date).getTime();2===a.readyState?b.firstByteTime=b.firstByteTime||c:4===a.readyState&&(b.respAvailTime=b.respAvailTime||c,b.firstByteTime=b.firstByteTime||c)}},g.sendPayload=function(a,b){b.receivedSize=0,a.responseType&&"text"!==a.responseType||"string"==typeof a.responseText&&(b.receivedSize=a.responseText.length),b.status=a.status,d.push(b)},g.wrapXHR=function(a,b,c){return e.aroundWithHandleEvent(a,function(){g.captureAjaxTimings(this)},function(){var a=b._atrumXhrData;if(a&&4===b.readyState){var c=(new Date).getTime();a.respProcTime=a.respProcTime||c,g.sendPayload(b,a),delete b._atrumXhrData}},c)},g.ajaxDone=function(a){if(a._atrumXhrData){var b=(new Date).getTime()+3e4,c=function(){g.captureAjaxTimings(a);var d=a._atrumXhrData;if(d){var e=(new Date).getTime();4===a.readyState?(d.respProcTime=d.respProcTime||e,g.sendPayload(a,d),delete a._atrumXhrData):b>e?setTimeout(c,50):delete a._atrumXhrData}};c()}},f.open=e.around(f.open,function(){var a=1<=arguments.length?String(arguments[0]):"",b=2<=arguments.length?String(arguments[1]):"",c=atatus.getAllowedDomains(),d=!0;if(b=e.getFullyQualifiedUrl(b),b&&c&&c.length){d=!1;for(var f=0;f<c.length;f++){var g=c[f];if(g&&b.indexOf(g)>-1){d=!0;break}}}d&&(b=b&&b.split("?")[0],this._atrumXhrData={method:a,url:b,sendTime:null,sendSize:null,firstByteTime:null,respAvailTime:null,respProcTime:null,receivedSize:null,parentPhase:null})},null,"XHR.open"),f.send=e.around(f.send,function(){var a=this,b=a._atrumXhrData;if(b){var c=(new Date).getTime();b.sendTime=b.sendTime||c,b.sendSize=1<=arguments.length&&arguments[0]?arguments[0].length||0:0;var d=0,f=function(){if(4===a.readyState)g.ajaxDone(a);else{var b=null;try{b=a.onreadystatechange}catch(c){return void g.ajaxDone(a)}d++,b?e.support(b)?a.onreadystatechange=g.wrapXHR(b,a,"XHR.onReadyStateChange"):g.ajaxDone(a):5>d?e.timeout(f):g.ajaxDone(a)}};f()}},null,"XHR.send"),"addEventListener"in f&&"removeEventListener"in f&&e.support(f.addEventListener)&&e.support(f.removeEventListener)&&(f.addEventListener=e.around(f.addEventListener,e.wrapAddEventListener(),null,"XHR.addEventListener"),f.removeEventListener=e.around(f.removeEventListener,e.wrapRemoveEventListener(),null,"XHR.removeEventListener"))}}(window,document)},function(a){function b(a,b,c){if(!(0>=b)){var d={name:a,dur:b,st:c};atatus.sendTxnPerf(d)}}function c(a){return h+" "+a}function d(){try{return"localStorage"in a&&null!==a.localStorage;}catch(b){return!1}}function e(a){var b=i.now();try{localStorage.setItem(c(a),b)}catch(d){}}function f(a){var b=null,d=c(a);try{b=localStorage.getItem(d),localStorage.removeItem(d)}catch(e){}var f=0;return b&&(f=i.now()-b),f}function g(a){try{var b=c(a);localStorage.removeItem(b)}catch(d){}}var h="atatus.com/",i=atatus._helper,j=1,k=0;atatus.beginTransaction=function(a){d()&&e(a)},atatus.endTransaction=function(a){if(d()){var c=f(a);b(a,c,j)}},atatus.failTransaction=function(a){if(d()){var c=f(a);b(a,c,k)}},atatus.cancelTransaction=function(a){d()&&g(a)}}(window,document);
/*! https://github.com/ttaubert/node-arraybuffer-slice
 * (c) 2014 Tim Taubert <tim@timtaubert.de>
 * arraybuffer-slice may be freely distributed under the MIT license.*/
!function(r){"use strict";function t(r,t){return r=0|r||0,r<0?Math.max(r+t,0):Math.min(r,t)}ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,n){var f=this.byteLength,i=t(e,f),a=f;if(n!==r&&(a=t(n,f)),i>a)return new ArrayBuffer(0);var u=a-i,y=new ArrayBuffer(u),o=new Uint8Array(y),s=new Uint8Array(this,i,u);return o.set(s),y})}();
!function(e){function t(i){if(r[i])return r[i].i;var n=r[i]={i:{},id:i,loaded:!1};return e[i].call(n.i,n,n.i,t),n.loaded=!0,n.i}var r={};return t.s=e,t.c=r,t.o="",t(0)}([function(e,t,r){"use strict";var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(3),s=r(20),o=r(61),a=r(62),h=r(12),u=r(16),c=r(21),l=s.u.h,p=a.u.p.l,f=a.u.p.g,d=s.u.v;if("undefined"==typeof g)var g=91e3;var y;!function(e){var t;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setupTimeout=g,t.streamingFormats=["DASH","SMOOTH","HLS-V3"],t.onHiveSessionError=function(e){},t}return i(t,e),t}(p);e.m=t}(t=e.p||(e.p={}))}(y=t.u||(t.u={}));var v=function(e){function t(t,r){var i=e.call(this,r)||this;i.setupComplete=!1,i.sdnName="hive",i.T=!1,i.player=t;var n=new y.p.m;return h.I(r,n),h.I(i.options(),n),h.S(window.location.href,new f,n),i.options_=n,i.player.addEventListener(amp.eventName.sourceset,function(){i.R().debug(i.P+"started new sourceset: "+JSON.stringify(i.player.options().sourceList)),i.A(),i.k()}),i.setupComplete=!0,i.R().notice(i.P+"registered plugin [id: "+i.C()+"][version: "+i.O()+"]"),i}return i(t,e),t.prototype.options=function(){return this.options_},t.prototype.A=function(){var e=this;this.N&&clearTimeout(this.N),this.N=window.setTimeout(function(){var t=e.P+"Plugin setup timeout...";"debug"===e.options().debugLevel&&e.R().debug(e.P+"Source List:",e._),e.R().warn(t),e.F(d.L),e.setupComplete=!0,e.D(),e.M(),e.B()},this.options().setupTimeout),this.setupComplete=!1,this.U()},t.prototype.H=function(){this.setupComplete=!0,this.D(),clearTimeout(this.N)},t.prototype.D=function(){this.options().onSourceSetCompleted&&this.options().onSourceSetCompleted(this.q()),this.options().onLoadingCompleted&&this.options().onLoadingCompleted(this.V)},t.prototype.k=function(){void 0==this.player.options().sdn.name?this.j():this.H()},t.prototype.j=function(){var e=this;this._=JSON.stringify(this.player.options().sourceList);var t=JSON.parse(JSON.stringify(this.player.options().sourceList)),r=t[0],i=null!=this.G(r);if(i){var s=0,o=new Array,a=!1;t.map(function(t){return e.Y(t)}).reduce(function(t,r){return t.then(function(){return r}).then(function(t){s++,a=a||t.K,e.F(d.J,t.tech)},function(e){o.push(e)})},n(!0)).then(function(){s>0?e.setupComplete||(e.player.options().sourceList=t,e.R().debug(e.P+"Updating sourcelist to "+JSON.stringify(e.player.options().sourceList)),a&&(e.player.options().sdn.name=e.sdnName),e.W()):(e.F(d.X),e.M(),e.B()),e.H()})["catch"](function(t){e.F(d.X),e.R().warn("error resolving tickets: ",t),e.H()})}else this.F(d.$),this.H()},t.prototype.G=function(e){if(void 0!=e&&void 0!=e.sdnList)for(var t in e.sdnList)if(e.sdnList[t].sdnName==this.sdnName){if(void 0!=e.sdnList[t].sdnUrl)return e.sdnList[t].sdnUrl;c.ErrorMonitor.ee().Z(this.P+"missing configuration 'sdnUrl' for source: "+e.src)}return null},t.prototype.Y=function(e){var t=this,r=this.G(e);return null!=r?this.te(r).then(function(r){return e.src=r.manifest,"HiveJava"==r.tech.re()&&null!=t.options().streamingFormats&&t.options().streamingFormats instanceof Array&&(e.streamingFormats=t.options().streamingFormats),("HiveJS"===r.tech.re()||"HiveJsProxy"===r.tech.re())&&t.player.setXmlHttpRequestFactory&&window.HiveRequest&&t.player.setXmlHttpRequestFactory(function(){return new window.HiveRequest(r.id)}),t.options().authTokenEnabled&&(r.authenticationToken=t.ie(e)),r},function(e){return t.R().warn(t.P+"ticket resolve failed: "+e.message+" - "+e.detailedMessage),n.reject(e)}):n.reject("hive sdn not configured")},t.prototype.ie=function(e){if(void 0!=e&&void 0!=e.protectionInfo)for(var t in e.protectionInfo)if("AES"===e.protectionInfo[t].type)return e.protectionInfo[t].authenticationToken},t.prototype.B=function(){if(this.options()&&this.options().onHiveSessionError){var e=new Array;e.push(h.ne(null,l.se,"Timeout while resolving event, verify ticket url"));try{this.options().onHiveSessionError(e)}catch(t){this.R().warn(this.P+" onHiveSessionError callback exception:",t)}}},t.prototype.W=function(){var e=this;if(!this.T)try{this.player.addEventListener(amp.eventName.loadedmetadata,function(){try{e.R().debug("loadedmetadata"),e.oe(),e.ae(u.ce.ue.he)}catch(t){e.R().warn("error on loadedmetadata",t)}}),this.player.addEventListener(amp.eventName.loadstart,function(){try{e.R().debug("loadstart"),e.le(!1);var t=e.player.currentTechName();"AzureHtml5JS"===t||e.pe()>="1.7.0"&&"FlashSS"===t?e.fe():"FlashSS"===t?e.de():e.R().debug(e.P+"tech "+t+" has no Stats Pack telemetry support")}catch(r){e.R().warn("error on loadstart",r)}}),this.player.addEventListener(amp.eventName.waiting,function(){try{e.R().debug("waiting"),e.le(!0)}catch(t){e.R().warn("error on loadstart",t)}}),this.player.addEventListener(amp.eventName.pause,function(){try{e.R().debug("pause"),e.ae(u.ce.ue.ge)}catch(t){e.R().warn("error on loadstart",t)}}),this.player.addEventListener(amp.eventName.canplaythrough,function(){try{e.R().debug("canplaythrough"),e.ye()}catch(t){e.R().warn("error on loadstart",t)}}),this.player.addEventListener(amp.eventName.playing,function(){try{e.R().debug("playing from "+e.getCurrentTime()),e.ye(),e.ae(u.ce.ue.ve,{currentTime:e.getCurrentTime()})}catch(t){e.R().warn("error on loadstart",t)}}),this.player.addEventListener(amp.eventName.fullscreenchange,function(){try{e.R().debug("fullscreenchange"),e.ae(u.ce.ue.me,{value:e.player.isFullscreen()})}catch(t){e.R().warn("error on loadstart",t)}}),this.player.addEventListener(amp.eventName.error,function(){try{e.R().debug("error");var t=e.player.error();null!=t&&(e.R().debug("error "+JSON.stringify(t)),e.onError(t.code,null,!1)),e.U(!0)}catch(r){e.R().warn("error on loadstart",r)}}),this.player.addEventListener(amp.eventName.ended,function(){try{e.R().debug("ended"),e.ae(u.ce.ue.Te,{code:1})}catch(t){e.R().warn("error on loadstart",t)}}),this.player.addEventListener(amp.eventName.seeking,function(){try{e.R().debug("seeking"),e.ae(u.ce.ue.Ee)}catch(t){e.R().warn("error on loadstart",t)}}),this.pe()>="1.7.2"&&this.player.addEventListener(amp.eventName.disposing,function(){e.R().debug("disposing"),e.U()}),this.we(),this.T=!0}catch(t){this.R().warn(this.P+"Error registering AMP events",t)}},t.prototype.fe=function(){var e=this;this.Ie=new h.Se,this.be=new m,null!=this.player.videoBufferData()&&(this.player.videoBufferData().addEventListener("downloadcompleted",function(){e.Re(!0,e.player.videoBufferData())}),this.player.videoBufferData().addEventListener("downloadfailed",function(){e.Pe(!0,e.player.videoBufferData())})),null!=this.player.audioBufferData()&&(this.player.audioBufferData().addEventListener("downloadcompleted",function(){e.Re(!1,e.player.audioBufferData())}),this.player.audioBufferData().addEventListener("downloadfailed",function(){e.Pe(!1,e.player.audioBufferData())})),this.player.addEventListener(amp.eventName.downloadbitratechanged,function(){var t=e.player.currentDownloadBitrate();t>e.be.Ae?e.Ie.ke():e.Ie.Ce(),e.be.Ae=t})},t.prototype.Re=function(e,t){if(null!=t&&t.downloadCompleted&&t.downloadCompleted.mediaDownload){var r=t.downloadCompleted,i=r.mediaDownload.bitrate;this.Ie.Oe(e,i,r.totalBytes),e&&this.Ie.Ne(t.perceivedBandwidth)}},t.prototype.Pe=function(e,t){if(null!=t&&t.downloadFailed&&t.downloadFailed.mediaDownload){var r=t.downloadFailed.mediaDownload.bitrate;this.Ie._e(e,r)}},t.prototype.de=function(){var e=this;this.Ie=new h.Se,this.Fe=new T,this.Fe.Le=document.getElementById(this.player.id_+"_flashSS_api"),window.De=function(){var t=e.player.currentDownloadBitrate();t>e.Fe.Ae?e.Ie.ke():e.Ie.Ce(),e.Me(),e.Fe.Ae=t},this.Fe.Le.addEventListener("switchingChange","onFlashSwitchChange"),window.Be=function(){e.Me()},this.Fe.Le.addEventListener("bytesLoadedChange","onFlashBytesLoadedChange")},t.prototype.Me=function(){if(null!=this.Fe.Ae){var e=this.Fe.Le.getBytesLoaded()-this.Fe.xe;this.Ie.Oe(!0,this.Fe.Ae.toString(),e)}this.Fe.xe=this.Fe.Le.getBytesLoaded()},t.prototype.ae=function(e,t){e===u.ce.ue.Ee&&this.Ue===e||this.He(e,t),this.Ue=e},t.prototype.qe=function(){if(this.player)return this.player.currentSrc()},t.prototype.getCurrentTime=function(){if(null==this.player)return 0;var e=this.player.currentTechName();return"AzureHtml5JS"===e?Math.round(1e3*this.player.currentAbsoluteTime()):Math.round(1e3*this.player.currentTime())},t.prototype.Ve=function(){var e=null!=this.player&&null!=this.player.buffered()&&this.player.buffered().length>0?Math.max(0,Math.round(1e3*this.player.buffered().end(0))-Math.round(1e3*this.player.currentTime())):0;return e},t.prototype.je=function(){return{width:this.player.width(),height:this.player.height()}},t.prototype.isFullscreen=function(){if(this.player)return this.player.isFullscreen()},t.prototype.isLive=function(){if(this.player)return this.player.isLive()},t.prototype.Ge=function(){if(this.player)return!this.player.disposed_},t.prototype.Qe=function(){var e=this.player.currentTechName();return"AzureHtml5JS"===e?StreamProtocol.DASH:"FlashSS"===e||"SilverlightSS"===e?StreamProtocol.Ye:"html5"===e?StreamProtocol.Ke:null},t.prototype.Je=function(){var e=this.Ie;return this.Ie=new h.Se,e},t.prototype.ze=function(){return"AMP"},t.prototype.O=function(){return this.We()},t.prototype.Xe=function(){if(this.player)return this.player.currentTechName()},t.prototype.pe=function(){if(this.player)return this.player.getAmpVersion()},t}(o.u.Plugin);t.$e=v;var m=function(){function e(){}return e}(),T=function(){function e(){this.xe=0}return e}(),E=function(e){var t=new v(this,e);return E.setupDone=function(){return t.setupComplete},t};amp.plugin("hive",E)},function(e,t,r){(function(e){"use strict";var i,n=r(29),s=r(2),o=s.Ze;!function(e){function t(t){F&&console.log("Framework already initialized"),e.et(),N=new Date,t.apply(M),F=M.resolve(P.tt),D=M.resolve(P.rt),x=F.it()}function r(){L=M.resolve(P.nt),L.init()}function i(){return L}function s(){return M}function a(){return D}function h(){return F}function u(e){return B.get(e)}function c(e,t){var r=new A(e);return r.apply(t),B.set(e,r),r}function l(t){O=e.st(t)}function p(e){return null!=O?O.context.resolve(e):(console.warn("undefined context"),null)}function f(){return O}function d(){return F.time()}function g(e,t){return F.setTimeout(e,t)}function y(e){return F.clearTimeout(e)}function v(e,t){return F.setInterval(e,t)}function m(e){return F.clearInterval(e)}function T(){F.ot()}function E(){M.at(),M=new n.ht,B=new o,O=null,N=null,x=!1,_=null,F=null,L=null,D=null}function w(e){_=e}function I(){return _||(_=(new Date).getTime()),_=(9301*_+49297)%233280,_/233280}function S(){return N}function b(){return x}var R=function(){function e(){}return e}();R.ut="ws://127.0.0.1:8000/hive",e.ct=R;var P=function(){function e(){}return e}();P.tt="TimerScheduler",P.lt="identityProvider",P.nt="NetworkComponent",P.pt="rtcManager",P.ft="transport",P.dt="httpManager",P.gt="httpRequest",P.rt="logger",P.yt="serverManager",P.vt="servicesClient",e.Tt=P;var A=function(){function e(e){this.id=e,this.context=new n.ht}return e.prototype.apply=function(e){e.apply(this.context)},e}();e.Et=A;var k;!function(e){e[e.wt=0]="HTTP",e[e.It=1]="RTC",e[e.St=2]="UDP"}(k=e.bt||(e.bt={}));var C;!function(t){function r(){return"["+d()+"] ["+e.Rt().id+"]"}t.Pt=r}(C=e.At||(e.At={}));var O,N,_,F,L,D,M=new n.ht,B=new o,x=!1;e.kt=t,e.Ct=r,e.Ot=i,e.system=s,e.R=a,e.Nt=h,e.st=u,e._t=c,e.Ft=l,e.resolve=p,e.Rt=f,e.time=d,e.setTimeout=g,e.clearTimeout=y,e.setInterval=v,e.clearInterval=m,e.ot=T,e.et=E,e.Lt=w,e.random=I,e.Dt=S,e.it=b}(i=t.Framework||(t.Framework={})),"undefined"!=typeof e&&(e.Framework=i)}).call(t,function(){return this}())},function(e,t,r){var i=r(81);e.i={Ze:i.Map,Mt:i.Mt,Bt:i.Bt}},function(e,t,r){(function(t,r){/*!
	 *
	 * Copyright 2009-2016 Kris Kowal under the terms of the MIT
	 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else{e.i=t()}}(function(){"use strict";function e(e){return function(){return W.apply(e,arguments)}}function i(e){return e===Object(e)}function n(e){return"[object StopIteration]"===ne(e)||e instanceof Y}function s(e,t){if(j&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&e.stack.indexOf(se)===-1){for(var r=[],i=t;i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(e.stack);var n=r.join("\n"+se+"\n");e.stack=o(n)}}function o(e){for(var t=e.split("\n"),r=[],i=0;i<t.length;++i){var n=t[i];u(n)||a(n)||!n||r.push(n)}return r.join("\n")}function a(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function h(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var i=/.*@(.+):(\d+)$/.exec(e);return i?[i[1],Number(i[2])]:void 0}function u(e){var t=h(e);if(!t)return!1;var r=t[0],i=t[1];return r===Q&&i>=K&&i<=ce}function c(){if(j)try{throw new Error}catch(e){var t=e.stack.split("\n"),r=t[0].indexOf("@")>0?t[1]:t[2],i=h(r);if(!i)return;return Q=i[0],i[1]}}function l(e,t,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+r+" instead.",new Error("").stack),e.apply(e,arguments)}}function p(e){return e instanceof y?e:E(e)?C(e):k(e)}function f(){function e(e){t=e,p.xt&&j&&(s.source=e),$(r,function(t,r){p.Ut(function(){e.Ht.apply(e,r)})},void 0),r=void 0,i=void 0}var t,r=[],i=[],n=te(f.prototype),s=te(y.prototype);if(s.Ht=function(e,n,s){var o=X(arguments);r?(r.push(o),"when"===n&&s[1]&&i.push(s[1])):p.Ut(function(){t.Ht.apply(t,o)})},s.valueOf=function(){if(r)return s;var e=m(t);return T(e)&&(t=e),e},s.qt=function(){return t?t.qt():{state:"pending"}},p.xt&&j)try{throw new Error}catch(o){s.stack=o.stack.substring(o.stack.indexOf("\n")+1)}return n.Vt=s,n.resolve=function(r){t||e(p(r))},n.jt=function(r){t||e(k(r))},n.reject=function(r){t||e(A(r))},n.notify=function(e){t||$(i,function(t,r){p.Ut(function(){r(e)})},void 0)},n}function d(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=f();try{e(t.resolve,t.reject,t.notify)}catch(r){t.reject(r)}return t.Vt}function g(e){return d(function(t,r){for(var i=0,n=e.length;i<n;i++)p(e[i]).then(t,r)})}function y(e,t,r){void 0===t&&(t=function(e){return A(new Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var i=te(y.prototype);if(i.Ht=function(r,n,s){var o;try{o=e[n]?e[n].apply(i,s):t.call(i,n,s)}catch(a){o=A(a)}r&&r(o)},i.qt=r,r){var n=r();"rejected"===n.state&&(i.exception=n.reason),i.valueOf=function(){var e=r();return"pending"===e.state||"rejected"===e.state?i:e.value}}return i}function v(e,t,r,i){return p(e).then(t,r,i)}function m(e){if(T(e)){var t=e.qt();if("fulfilled"===t.state)return t.value}return e}function T(e){return e instanceof y}function E(e){return i(e)&&"function"==typeof e.then}function w(e){return T(e)&&"pending"===e.qt().state}function I(e){return!T(e)||"fulfilled"===e.qt().state}function S(e){return T(e)&&"rejected"===e.qt().state}function b(){oe.length=0,ae.length=0,ue||(ue=!0)}function R(e,r){ue&&("object"==typeof t&&"function"==typeof t.emit&&p.Ut.Gt(function(){Z(ae,e)!==-1&&(t.emit("unhandledRejection",r,e),he.push(e))}),ae.push(e),r&&"undefined"!=typeof r.stack?oe.push(r.stack):oe.push("(no stack) "+r))}function P(e){if(ue){var r=Z(ae,e);r!==-1&&("object"==typeof t&&"function"==typeof t.emit&&p.Ut.Gt(function(){var i=Z(he,e);i!==-1&&(t.emit("rejectionHandled",oe[r],e),he.splice(i,1))}),ae.splice(r,1),oe.splice(r,1))}}function A(e){var t=y({when:function(t){return t&&P(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return R(t,e),t}function k(e){return y({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},"delete":function(t){delete e[t]},Qt:function(t,r){return null===t||void 0===t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return ie(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function C(e){var t=f();return p.Ut(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(r){t.reject(r)}}),t.Vt}function O(e){return y({Yt:function(){}},function(t,r){return M(e,t,r)},function(){return p(e).qt()})}function N(e,t,r){return p(e).Kt(t,r)}function _(e){return function(){function t(e,t){var o;if("undefined"==typeof StopIteration){try{o=r[e](t)}catch(a){return A(a)}return o.done?p(o.value):v(o.value,i,s)}try{o=r[e](t)}catch(a){return n(a)?p(a.value):A(a)}return v(o,i,s)}var r=e.apply(this,arguments),i=t.bind(t,"next"),s=t.bind(t,"throw");return i()}}function F(e){p.done(p.async(e)())}function L(e){throw new Y(e)}function D(e){return function(){return N([this,B(arguments)],function(t,r){return e.apply(t,r)})}}function M(e,t,r){return p(e).Jt(t,r)}function B(e){return v(e,function(e){var t=0,r=f();return $(e,function(i,n,s){var o;T(n)&&"fulfilled"===(o=n.qt()).state?e[s]=o.value:(++t,v(n,function(i){e[s]=i,0===--t&&r.resolve(e)},r.reject,function(e){r.notify({index:s,value:e})}))},void 0),0===t&&r.resolve(e),r.Vt})}function x(e){if(0===e.length)return p.resolve();var t=p.defer(),r=0;return $(e,function(i,n,s){function o(e){t.resolve(e)}function a(e){r--,0===r&&(e.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+e.message,t.reject(e))}function h(e){t.notify({index:s,value:e})}var u=e[s];r++,v(u,o,a,h)},void 0),t.Vt}function U(e){return v(e,function(e){return e=ee(e,p),v(B(ee(e,function(e){return v(e,J,J)})),function(){return e})})}function H(e){return p(e).zt()}function q(e,t){return p(e).then(void 0,void 0,t)}function V(e,t){return p(e).Wt(t)}var j=!1;try{throw new Error}catch(G){j=!!G.stack}var Q,Y,K=c(),J=function(){},z=function(){function e(){for(var e,t;n.next;)n=n.next,e=n.Xt,n.Xt=void 0,t=n.domain,t&&(n.domain=void 0,t.enter()),i(e,t);for(;l.length;)e=l.pop(),i(e);o=!1}function i(t,r){try{t()}catch(i){if(h)throw r&&r.exit(),setTimeout(e,0),r&&r.enter(),i;setTimeout(function(){throw i},0)}r&&r.exit()}var n={Xt:void 0,next:null},s=n,o=!1,a=void 0,h=!1,u=!1;try{u=navigator&&("Microsoft Internet Explorer"===navigator.appName||null!=navigator.appVersion.match(/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i))}catch(c){}var l=[];if(z=function(e){"undefined"!=typeof Framework&&Framework.it()?Framework.setTimeout(e,0):(s=s.next={Xt:e,domain:h&&t.domain,next:null},o||(o=!0,a()))},"object"==typeof t&&"[object process]"===t.toString()&&t.Ut)h=!0,a=function(){t.Ut(e)};else if("function"!=typeof r||u)if("undefined"==typeof MessageChannel||u)a=function(){setTimeout(e,0)};else{var p=new MessageChannel;p.port1.onmessage=function(){a=f,p.port1.onmessage=e,e()};var f=function(){p.port2.postMessage(0)};a=function(){setTimeout(e,0),f()}}else a="undefined"!=typeof window?r.bind(window,e):function(){r(e)};return z.Gt=function(e){l.push(e),o||(o=!0,a())},z}(),W=Function.call,X=e(Array.prototype.slice),$=e(Array.prototype.reduce||function(e,t){var r=0,i=this.length;if(1===arguments.length)for(;;){if(r in this){t=this[r++];break}if(++r>=i)throw new TypeError}for(;r<i;r++)r in this&&(t=e(t,this[r],r));return t}),Z=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),ee=e(Array.prototype.map||function(e,t){var r=this,i=[];return $(r,function(n,s,o){i.push(e.call(t,s,o,r))},void 0),i}),te=Object.create||function(e){function t(){}return t.prototype=e,new t},re=e(Object.prototype.hasOwnProperty),ie=Object.keys||function(e){var t=[];for(var r in e)re(e,r)&&t.push(r);return t},ne=e(Object.prototype.toString);Y="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var se="From previous event:";p.resolve=p,p.Ut=z,p.xt=!1,"object"==typeof t&&t&&t.$t&&t.$t.Q_DEBUG&&(p.xt=!0),p.defer=f,f.prototype.Zt=function(){var e=this;return function(t,r){t?e.reject(t):arguments.length>2?e.resolve(X(arguments,1)):e.resolve(r)}},p.Promise=d,p.Vt=d,d.race=g,d.all=B,d.reject=A,d.resolve=p,p.er=function(e){return e},y.prototype.er=function(){return this},p.join=function(e,t){return p(e).join(t)},y.prototype.join=function(e){return p([this,e]).Kt(function(e,t){if(e===t)return e;throw new Error("Q can't join: not the same: "+e+" "+t)})},p.race=g,y.prototype.race=function(){return this.then(p.race)},p.tr=y,y.prototype.toString=function(){return"[object Promise]"},y.prototype.then=function(e,t,r){function i(t){try{return"function"==typeof e?e(t):t}catch(r){return A(r)}}function n(e){if("function"==typeof t){s(e,a);try{return t(e)}catch(r){return A(r)}}return A(e)}function o(e){return"function"==typeof r?r(e):e}var a=this,h=f(),u=!1;return p.Ut(function(){a.Ht(function(e){u||(u=!0,h.resolve(i(e)))},"when",[function(e){u||(u=!0,h.resolve(n(e)))}])}),a.Ht(void 0,"when",[void 0,function(e){var t,r=!1;try{t=o(e)}catch(i){if(r=!0,!p.onerror)throw i;p.onerror(i)}r||h.notify(t)}]),h.Vt},p.rr=function(e,t){return p(e).rr(t)},y.prototype.rr=function(e){return e=p(e),this.then(function(t){return e.nr(t).ir(t)})},p.when=v,y.prototype.ir=function(e){return this.then(function(){return e})},p.ir=function(e,t){return p(e).ir(t)},y.prototype.sr=function(e){return this.then(function(){throw e})},p.sr=function(e,t){return p(e).sr(t)},p.ar=m,p.hr=T,p.ur=E,p.cr=w,y.prototype.cr=function(){return"pending"===this.qt().state},p.lr=I,y.prototype.lr=function(){return"fulfilled"===this.qt().state},p.pr=S,y.prototype.pr=function(){return"rejected"===this.qt().state};var oe=[],ae=[],he=[],ue=!0;p.dr=b,p.gr=function(){return oe.slice()},p.yr=function(){b(),ue=!1},b(),p.reject=A,p.jt=k,p.vr=O,p.Kt=N,y.prototype.Kt=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},p.async=_,p.mr=F,p["Tr"]=L,p.Er=D,p.Jt=M,y.prototype.Jt=function(e,t){var r=this,i=f();return p.Ut(function(){r.Ht(i.resolve,e,t)}),i.Vt},p.get=function(e,t){return p(e).Jt("get",[t])},y.prototype.get=function(e){return this.Jt("get",[e])},p.set=function(e,t,r){return p(e).Jt("set",[t,r])},y.prototype.set=function(e,t){return this.Jt("set",[e,t])},p.wr=p["delete"]=function(e,t){return p(e).Jt("delete",[t])},y.prototype.wr=y.prototype["delete"]=function(e){return this.Jt("delete",[e])},p.Ir=p.Qt=function(e,t,r){return p(e).Jt("post",[t,r])},y.prototype.Ir=y.prototype.Qt=function(e,t){return this.Jt("post",[e,t])},p.send=p.Sr=p.br=function(e,t){return p(e).Jt("post",[t,X(arguments,2)])},y.prototype.send=y.prototype.Sr=y.prototype.br=function(e){return this.Jt("post",[e,X(arguments,1)])},p.Rr=function(e,t){return p(e).Jt("apply",[void 0,t])},y.prototype.Rr=function(e){return this.Jt("apply",[void 0,e])},p["Pr"]=p.nr=function(e){return p(e).Jt("apply",[void 0,X(arguments,1)])},y.prototype.nr=function(){return this.Jt("apply",[void 0,X(arguments)])},p.Ar=function(e){var t=p(e),r=X(arguments,1);return function(){return t.Jt("apply",[this,r.concat(X(arguments))])}},y.prototype.Ar=function(){var e=this,t=X(arguments);return function(){return e.Jt("apply",[this,t.concat(X(arguments))])}},p.keys=function(e){return p(e).Jt("keys",[])},y.prototype.keys=function(){return this.Jt("keys",[])},p.all=B,y.prototype.all=function(){return B(this)},p.kr=x,y.prototype.kr=function(){return x(this)},p.Cr=l(U,"allResolved","allSettled"),y.prototype.Cr=function(){return U(this)},p.zt=H,y.prototype.zt=function(){return this.then(function(e){return B(ee(e,function(e){function t(){return e.qt()}return e=p(e),e.then(t,t)}))})},p.fail=p["catch"]=function(e,t){return p(e).then(void 0,t)},y.prototype.fail=y.prototype["catch"]=function(e){return this.then(void 0,e)},p.progress=q,y.prototype.progress=function(e){return this.then(void 0,void 0,e)},p.Or=p["finally"]=function(e,t){return p(e)["finally"](t)},y.prototype.Or=y.prototype["finally"]=function(e){if(!e||"function"!=typeof e.apply)throw new Error("Q can't apply finally callback");return e=p(e),this.then(function(t){return e.nr().then(function(){return t})},function(t){return e.nr().then(function(){throw t})})},p.done=function(e,t,r,i){return p(e).done(t,r,i)},y.prototype.done=function(e,r,i){var n=function(e){p.Ut(function(){if(s(e,o),!p.onerror)throw e;p.onerror(e)})},o=e||r||i?this.then(e,r,i):this;"object"==typeof t&&t&&t.domain&&(n=t.domain.bind(n)),o.then(void 0,n)},p.timeout=function(e,t,r){return p(e).timeout(t,r)},y.prototype.timeout=function(e,t){var r=f(),i=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),r.reject(t)},e);return this.then(function(e){clearTimeout(i),r.resolve(e)},function(e){clearTimeout(i),r.reject(e)},r.notify),r.Vt},p.delay=function(e,t){return void 0===t&&(t=e,e=void 0),p(e).delay(t)},y.prototype.delay=function(e){return this.then(function(t){var r=f();return setTimeout(function(){r.resolve(t)},e),r.Vt})},p.Nr=function(e,t){return p(e).Nr(t)},y.prototype.Nr=function(e){var t=f(),r=X(e);return r.push(t.Zt()),this.Rr(r).fail(t.reject),t.Vt},p.Fr=function(e){var t=X(arguments,1);return p(e).Nr(t)},y.prototype.Fr=function(){var e=X(arguments),t=f();return e.push(t.Zt()),this.Rr(e).fail(t.reject),t.Vt},p.Lr=p.Dr=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var t=X(arguments,1);return function(){var r=t.concat(X(arguments)),i=f();return r.push(i.Zt()),p(e).Rr(r).fail(i.reject),i.Vt}},y.prototype.Lr=y.prototype.Dr=function(){var e=X(arguments);return e.unshift(this),p.Dr.apply(void 0,e)},p.Mr=function(e,t){var r=X(arguments,2);return function(){function i(){return e.apply(t,arguments)}var n=r.concat(X(arguments)),s=f();return n.push(s.Zt()),p(i).Rr(n).fail(s.reject),s.Vt}},y.prototype.Mr=function(){var e=X(arguments,0);return e.unshift(this),p.Mr.apply(void 0,e)},p.Br=p.xr=function(e,t,r){return p(e).xr(t,r)},y.prototype.Br=y.prototype.xr=function(e,t){var r=X(t||[]),i=f();return r.push(i.Zt()),this.Jt("post",[e,r]).fail(i.reject),i.Vt},p.Ur=p.Hr=p.qr=function(e,t){var r=X(arguments,2),i=f();return r.push(i.Zt()),p(e).Jt("post",[t,r]).fail(i.reject),i.Vt},y.prototype.Ur=y.prototype.Hr=y.prototype.qr=function(e){var t=X(arguments,1),r=f();return t.push(r.Zt()),this.Jt("post",[e,t]).fail(r.reject),r.Vt},p.Wt=V,y.prototype.Wt=function(e){return e?void this.then(function(t){p.Ut(function(){e(null,t)})},function(t){p.Ut(function(){e(t)})}):this},p.Vr=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ce=c();return p})}).call(t,r(5),r(5).setImmediate)},function(e,t){"use strict";if("undefined"==typeof r)var r="ws://127.0.0.1:8000/hive";var i;!function(e){var t=function(){function e(){}return e}();t.jr=5e3,t.Gr=5,t.Qr=1e4,t.Yr=.2,t.Kr=10,e.Jr=t;var i=function(){function e(){}return e}();i.zr="0.0.1",i.Wr=3e4,e.Xr=i;var n=function(){function e(){}return e}();n.$r=!0,n.Zr=3,n.ei=1e4,e.ti=n;var s=function(){function e(){}return e}();s.ri=1.1,e.ii=s;var o=function(){function e(){}return e}();o.ni=r,o.si=2e4,o.oi=5e3,e.ai=o;var a=function(){function e(){}return e}();a.hi=2e3,a.ui=!0,a.ci=!1,a.li=1,a.pi=.02,a.fi=30,a.di=!0,a.gi=!1,a.yi=!1,a.vi=1e4,a.mi=4e4,a.Ti=3700,a.Ei=2e4,e.wi=a;var h=function(){function e(){}return e}();h.Ii=3e7,h.Si=3e4,h.bi=!1,h.Ri=10,e.Pi=h;var u=function(){function e(){}return e}();u.Ai=3,u.ki=!1,u.Ci=3e4,u.Oi=.2,u.Ni=.2,u._i=1e4,e.Fi=u;var c=function(){function e(){}return e}();c.Li=!1,e.wt=c;var l=function(){function e(){}return e}();l.Di=64e3,l.Mi=5e3,l.Bi=1,l.xi=1,e.Ui=l;var p=function(){function e(){}return e}();p.Hi=4e3,p.qi=3e4,p.Vi=4096,p.ji=!0,p.Gi=5e3,p.Qi=1e4,e.UDPBroadcast=p;var f=function(){function e(){}return e}();f.Yi=100,f.Ki=1e3,e.Ji=f;var d=function(){function e(){}return e}();d.zi=20,d.Wi=20,d.Xi=20,d.$i=5,e.Zi=d;var g=function(){function e(){}return e}();g.en="site",g.tn="externalAs",g.rn="availableSendRate",g.in="remoteAddress",g.nn="localAddress",e.sn=g}(i=t.an||(t.an={}))},function(e,t){e.i=function(){return new Function}},function(e,t,r){"use strict";r(38);var i;!function(e){e[e.hn=0]="TRACKER",e[e.St=1]="UDP"}(i=t.un||(t.un={}));var n=function(){function e(e,t,r){this.isLeader=r,this.internalAs=0,this.externalAs=0,this.type=e,r||(this.isLeader=!1),t&&(this.guid=t.guid,this.internalAs=t.internalAs,this.externalAs=t.externalAs,this.nat=t.nat,this.bandwidth=t.bandwidth,this.watchingBitrate=t.watchingBitrate,this.rankValue=t.rankValue,this.timestamp=t.timestamp,this.privateIpString=t.privateIpString,this.publicIpString=t.publicIpString)}return e}();t.cn=n},function(e,t){"use strict";var r;!function(e){e.ln="membership",e.pn="partnership",e.fn="inPartnership",e.dn="outPartnership",e.gn="cache",e.yn="livecache",e.vn="vodcache",e.mn="objIndex",e.Tn="centrFragment",e.En="hcache",e.wn="responder",e.In="requester",e.Sn="p2pRequester",e.bn="peer",e.Rn="contextResolver",e.Pn="videoPrefetcher",e.An="prefetchManager",e.kn="picker",e.Cn="trackerClient",e.On="scoreUpdater",e.yt="serverManager",e.Nn="requestTracker",e._n="trackerManager",e.Fn="renderStats",e.Ln="udpBroadcaster",e.Dn="udpDiscovery",e.Mn="udpLeaderElection",e.Bn="nodeInfo",e.xn="ipspoofing"}(r=t.Un||(t.Un={}))},function(e,t,r){"use strict";var i,n=r(1),s=r(32),o=r(37);!function(e){function t(e,t){return t?e+"-"+t:e}function r(e,t){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer}function i(e){var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e),0),t.buffer}function a(e,t,r){void 0===r&&(r=!0);for(var i=0;i<e.length;)if(e[i]===t){if(e.splice(i,1),r)break}else i++}function h(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function u(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null==r?"":decodeURIComponent(r[1].replace(/\+/g," "))}function c(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(n.Framework.random()*(t+1)),i=e[t];e[t]=e[r],e[r]=i}return e}function l(e){var t=new Array;for(var r in e)e.hasOwnProperty(r)&&!/^\d+$/.test(r)&&t.push(r);return t}function p(e){return Object.keys(e).map(function(e){return parseInt(e,10)}).filter(function(e){return!isNaN(e)})}function f(e,t){return e[t]?e[t]:null}function d(e,t){return new o(t).Hn(e).toString()}function g(e){if(0==e.length)return 0;var t=e.reduce(function(e,t){return e+t});return t/e.length}e.qn=new s.Counter;var y=function(){function e(){this.ALPHA=.25,this.Vn=1e8,this.jn=1e4}return e.prototype.Gn=function(){return void 0!==this.Qn},e.prototype.Yn=function(e,t){return this.Qn=Math.min(this.Vn,t/e*8e3),this},e.prototype.Kn=function(e){return this.Qn=Math.max(this.Vn,e),this},e.prototype.Jn=function(e){e.Gn()&&(this.Gn()?this.Qn=this.Qn*(1-this.ALPHA)+e.Qn*this.ALPHA:this.Qn=e.Qn)},e.prototype.zn=function(e){return this.Gn()?Math.round(8e3*e/this.Qn):NaN},e.prototype.Wn=function(){return this.Gn()?this.Qn:NaN},e.prototype.Xn=function(){return this.Gn()?this.Qn/1e3:NaN},e.prototype.$n=function(){return this.Gn()?this.Qn/1e6:NaN},e.prototype.Zn=function(){return this.Gn()?this.Qn>1e6?(this.Qn/1e6).toFixed(2)+"Mb/s":this.Qn>1e3?(this.Qn/1e3).toFixed(2)+"Kb/s":this.Qn+"b/s":"NaN"},e}();e.es=y,e.rs=t,e.appendBuffer=r,e.ns=i,e.ss=a,e.as=h,e.hs=u,e.us=c,e.cs=l,e.ls=p,e.ps=f,e.fs=d,e.ds=g}(i=t.gs||(t.gs={}))},function(e,t){"use strict";var r;!function(e){e[e.ys=0]="AUDIO",e[e.vs=1]="VIDEO",e[e.ms=2]="METADATA",e[e.Ts=3]="OTHER"}(r=t.Es||(t.Es={}))},function(e,t){"use strict";var r;!function(e){e.ws="statsClient",e.vt="servicesClient",e.Is="ticketResolver",e.lt="identityProvider",e.Ss="connInfoProvider",e.bs="peerInfo",e.Rs="streamInfoProvider",e.Ps="reporting",e.As="statsStore",e.ks="trackManager",e.Cs="trackClient"}(r=t.Os||(t.Os={}))},function(e,t){"use strict";var r=!0,i={Ns:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},_s:function(e,t,r){var i=e.match(t);return i&&i.length>=r&&parseInt(i[r],10)},Fs:function(){var e={};if(e.Ls=null,e.version=null,"undefined"==typeof window||!window.navigator)return e.Ls="Not a browser.",e;if(navigator.mozGetUserMedia)e.Ls="firefox",e.version=this._s(navigator.userAgent,/Firefox\/(\d+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.Ls="chrome",e.version=this._s(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.Ls="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.Ls="safari",e.version=this._s(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))e.Ls="edge",e.version=this._s(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!navigator.mediaDevices||!navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return e.Ls="Not a supported browser.",e;e.Ls="safari",e.version=this._s(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}return e},Ds:function(){if("object"==typeof window&&window.HTMLMediaElement&&"srcObject"in window.HTMLMediaElement.prototype){var e=URL.createObjectURL.bind(URL),t=URL.revokeObjectURL.bind(URL),r=new Map,i=0;URL.createObjectURL=function(t){if("getTracks"in t){var n="polyblob:"+ ++i;return r.set(n,t),console.log("URL.createObjectURL(stream) is deprecated! Use elem.srcObject = stream instead!"),n}return e(t)},URL.revokeObjectURL=function(e){t(e),r["delete"](e)};var n=Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,"src");Object.defineProperty(window.HTMLMediaElement.prototype,"src",{get:function(){return n.get.apply(this)},set:function(e){return this.Ms=r.get(e)||null,n.set.apply(this,[e])}});var s=HTMLMediaElement.prototype.setAttribute;HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.Ms=r.get(arguments[1])||null),s.apply(this,arguments)}}}};e.i={log:i.log,Ns:i.Ns,Bs:i.Fs(),_s:i._s,Ds:i.Ds,Fs:i.Fs.bind(i)}},function(e,t,r){"use strict";function i(e,t){function r(){return e()?void y.when(t(),r,i.reject):i.resolve(!0)}var i=y.defer();return y.Ut(r),i.Vt}function n(e,t,r){return void 0===r&&(r=!0),s("GET",e,t,r)}function s(e,t,r,i){void 0===i&&(i=!0);var n=y.defer();try{var s=new XMLHttpRequest;s.open(e,t,i),void 0!=r&&null!=r&&s.setRequestHeader("Content-Type",r),s.onload=function(){200==s.status?n.resolve(s.response):n.reject({status:s.status,reason:s.statusText,body:s.responseText})},s.onerror=function(e){n.reject({status:-1,reason:"Network Error"})},s.send()}catch(o){n.reject({status:-1,reason:o})}return n.Vt}function o(e,t,r,i){void 0===i&&(i=!0);var n=y.defer();try{var s=new XMLHttpRequest;s.open("POST",e,i),void 0!=r&&null!=r&&s.setRequestHeader("Content-Type",r),s.onload=function(){200==s.status?n.resolve(s.response):n.reject({status:s.status,reason:s.statusText})},s.onerror=function(e){n.reject({status:-1,reason:"Network Error"})},s.send(t)}catch(o){n.reject({status:-1,reason:o})}return n.Vt}function a(e,t){var r,i,n=document.querySelector("base"),s=document.querySelector("head"),o=document.createElement("a"),a=n;return n?r=n.href:a=s.appendChild(document.createElement("base")),a.href=e,o.href=t,i=o.href,n?n.href=r:s.removeChild(a),i}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e[0],i=1;i<e.length;i++){var n=new RegExp("\\{"+(i-1)+"\\}","gm");r=r.replace(n,e[i])}return r}function u(e,t){for(var r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(t[r]=e[r])}function c(e,t,r){var i=g(e).query(!0);for(var n in i)try{if(i.hasOwnProperty(n)&&t.hasOwnProperty(n)&&r.hasOwnProperty(t[n])){var s=t[n],o=i[n];r[s]=l(o,r[s])}}catch(a){}}function l(e,t){var r;switch(typeof t){case"number":r=parseInt(e);break;case"boolean":r="true"===e;break;default:r=e}return r}function p(e,t,r){var i=new m;return i.ticketUrl=e,i.code=t,i.message=T(t),i.detailedMessage=r,i}var f=r(2),d=f.Ze,g=r(37),y=r(3),v=r(20),m=v.u.HiveSessionError,T=v.u.getHiveSessionErrorMessage,E=v.u.HiveSession,w=function(){function e(e,t,r,i){this.xs=!1,this.ticketUrl=e,this.ticket=t,this.manifest=r,this.Us=y.defer(),this.Hs=i,this.Hs&&this.Us.resolve(this.Hs)}return e.prototype.Ge=function(e){return null!==this.tech&&this.tech.Ge(e,this)},e.prototype.qs=function(e){this.xs!=e&&(this.xs=e,this.tech&&this.tech.Vs(this,e))},e.prototype.js=function(){return this.xs},e.prototype.close=function(e){if(null!=this.tech)return this.tech.Gs(this,e)},e.prototype.toString=function(){return this.ticket.toString()},e.prototype.Qs=function(){var e=new E;return e.id=this.id,e.ticketUrl=this.ticketUrl,e.manifest=this.manifest,e.tech=this.tech.re(),e},e.prototype.Ys=function(){return this.Us.Vt},e.prototype.Ks=function(e){this.Hs=e,this.Us.resolve(this.Hs)},e}();t.Js=w;var I=function(){function e(){}return e}();t.zs=I;var S=function(){function e(){this.success=0,this.Ws=0,this.bytes=0}return e}();t.Xs=S;var b=function(){function e(){this.$s=0,this.Zs=0,this.eo=new d,this.to=new d}return e.prototype.Oe=function(e,t,r,i){void 0===i&&(i=!0);var n=e?this.eo:this.to;n.has(t)||n.set(t,new S);var s=n.get(t);s.bytes+=r,i&&s.success++},e.prototype._e=function(e,t){var r=e?this.eo:this.to;r.has(t)||r.set(t,new S),r.get(t).Ws++},e.prototype.Ne=function(e){this.bandwidth=e},e.prototype.ke=function(){this.$s++},e.prototype.Ce=function(){this.Zs++},e.prototype.ro=function(){return this.bandwidth},e.prototype.io=function(){return this.eo},e.prototype.no=function(){return this.to},e.prototype.so=function(){return this.$s},e.prototype.oo=function(){return this.Zs},e}();t.Se=b;var R=function(){function e(){var t=this;if(e.ao)throw new Error("Error: Instantiation failed: Use VisibilityChangeListener.getInstance() instead of new.");var r,i;"undefined"!=typeof document.hidden?(r="hidden",i="visibilitychange"):"undefined"!=typeof document.msHidden?(r="msHidden",i="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(r="webkitHidden",i="webkitvisibilitychange"),"undefined"!=typeof document.addEventListener&&"undefined"!=typeof document[r]?document.addEventListener(i,function(){var e=!document[r];t.ho.forEach(function(r){r.call(t,e)})},!1):e.R&&e.R.debug("warn - visibilityChange listener not supported"),this.ho=new Array}return e.ee=function(t){return t&&(this.R=t),void 0===this.ao&&(this.ao=new e),this.ao},e.prototype.uo=function(e){this.ho.push(e)},e}();t.co=R,t.lo=i,t.po=n,t.fo=s,t.do=o,t.fs=a,t.yo=h,t.I=u,t.S=c,t.ne=p;var P=function(){function e(){}return e.getItem=function(e){return window.sessionStorage?window.sessionStorage.getItem(e):null},e.setItem=function(e,t){return!!window.sessionStorage&&(window.sessionStorage.setItem(e,t),!0)},e.removeItem=function(e){window.sessionStorage&&window.sessionStorage.removeItem(e)},e}();t.vo=P;var A=function(){function e(e){this.mo=e}return e.prototype.To=function(e){var t=Date.now();return this.isEqual(this.Eo,e)||(this.wo=t),this.Eo=e,t-this.wo>=this.mo},e.prototype.isEqual=function(e,t){if(e&&t){var r=[t.Io-e.Io,t.So-e.So,t.bo-e.bo];return r.reduce(function(e,t){return e&&Math.abs(t)<10},!0)}return!1},e}();t.Ro=A},function(e,t,r){"use strict";var i,n=r(84),s=r(22),o=r(17),a=o.Po,h=r(3),u=r(1),c=r(133),l=r(119),p=r(4),f=r(8),d=r(2),g=r(7);!function(e){e.Ao=!1;var t;!function(e){e[e.Have=1]="Have",e[e.Chunk=2]="Chunk",e[e.Request=3]="Request",e[e.Cancel=4]="Cancel",e[e.Ack=5]="Ack",e[e.Close=6]="Close",e[e.DoNotHave=7]="DoNotHave",e[e.ko=8]="OutPartRequest",e[e.Co=9]="OutPartResp",e[e.Oo=10]="UDPHandshakeReq",e[e.UDPHandshakeResponse=11]="UDPHandshakeResponse",e[e.UDPSwitchLeadershipRequest=12]="UDPSwitchLeadershipRequest",e[e.No=13]="UDPSwitchAck",e[e.Bitrate=14]="Bitrate",e[e.Haves=15]="Haves",e[e._o=16]="PeerInfo",e[e.Ping=17]="Ping",e[e.Pong=18]="Pong"}(t=e.Fo||(e.Fo={}));var i=function(){function e(e){this.Lo=new d.Ze,this.R=u.Framework.resolve(u.Framework.Tt.rt).log(),this.Do=e}return e.prototype.Mo=function(e){try{var t=null,r=u.Framework.resolve(g.Un.bn),i=r.Bo(e);return null==i?(this.R.warn("MSG RECEIVED FROM UNKNOWN SWARM"),null):(t=new c.xo(i,this.Do.Uo,this.Do.Ho,this.Do),this.Lo.has(e)||this.Lo.set(e,t),this.Lo.get(e))}catch(n){this.R.error("New dispatcher failed with error",n)}},e.prototype.qo=function(e){this.Lo["delete"](e)},e.prototype.Vo=function(e){return this.Lo.get(e)},e}();e.jo=i;var o=function(){function r(){this.Go=null,this.Qo=u.Framework.resolve(u.Framework.Tt.rt),this.Yo=new i(this),this.ao=r.Ko++,this.Jo=u.Framework.time()}return r.prototype.init=function(e,t){this.Uo=e,this.Ho=t,this.zo=u.Framework.resolve(u.Framework.Tt.pt)},r.prototype.Wo=function(){var e=!1;return this.Yo.Lo.forEach(function(t,r){(t.sender.Wo()||t.receiver.Wo())&&(e=!0)}),e},r.prototype.reset=function(){this.Yo.Lo.forEach(function(e,t){e.sender.Xo()})},r.prototype.close=function(e){return this.Yo.qo(e),0==this.Yo.Lo.length&&this.zo.disconnect(this.Ho),h("ok")},r.prototype.$o=function(r,i,n){try{this.Jo=u.Framework.time();var o=n.Zo(),h=o.byteLength,c=a.ta.ea.create(o),l=a.ra(c),f=new s;f.ia(r),f.na(i),f.ia(h),f.na(l.toString()),f.append(o),f.sa();var d=f.Zo(),g=r===t.Chunk&&u.Framework.it()?d.byteLength+p.an.Ui.Di:d.byteLength;e.Ao&&this.Qo.log(i).debug(this.ao+" SEND MSG ID "+r+","+g+" HASH "+l.toString()+" TO "+this.Ho),this.zo.send(this.Ho,d,g)||this.Qo.log().warn("dropped msg: "+e.Fo[r]+" to "+this.Ho)}catch(y){this.Qo.log(i).error("ERROR SENDING MESSAGE TO "+this.Ho+" "+y.stack)}},r.prototype.oa=function(i){var n=this;e.Ao&&this.Qo.log().debug(this.ao+" GOT MSG "+i.byteLength);try{var o=u.Framework.time();this.Jo=o,this.aa(i).then(function(h){if(e.Ao&&n.Qo.log().debug(n.ao+" RECEIVING "+h.byteLength+" after "+(u.Framework.time()-o)),h.byteLength>r.ha)throw new RangeError("P2P Message too big to be processed");var c=n.Go;if(null===c){var p=s.wrap(h),d=p.ua();if(e.Ao&&n.Qo.log().debug("MSG ID "+d),d>Object.keys(t).length)return n.Qo.log().warn("MSG OF WRONG ID RECEIVED: "+d),void(n.Go=null);if(c=n.Go=new l.ca,c.msgId=d,c.swarmId=p.la(),c.length=p.ua(),c.hash=p.la(),c.pa=p.Zo(),c.length>r.ha)throw new RangeError("P2P Message too big to be processed");e.Ao&&n.Qo.log(c.swarmId).debug("MSG ID "+c.msgId+" L "+c.length+" SWID "+c.swarmId+" H "+c.hash+" TR "+c.pa.byteLength)}else{if(e.Ao&&n.Qo.log().debug("APPENDING TO P2P MESSAGE "+c.msgId),null!=c.pa.byteLength&&c.pa.byteLength>r.ha)throw new RangeError("P2P Message too big to be processed");c.pa=f.gs.appendBuffer(c.pa,i)}if(c.pa.byteLength===c.length){var g=a.ta.ea.create(c.pa),y=a.ra(g);if(y.toString()!==c.hash){var v=" INTEGRITY CHECK FAILED ";return void n.Qo.log(c.swarmId).warn(v)}var m=n.Yo.Vo(c.swarmId);m||(m=n.Yo.Mo(c.swarmId),n.Qo.log(c.swarmId).debug("CREATED NEW DISPATCHER FOR "+n.Ho)),m.Jt(c),c.pa=null,n.Go=null}})}catch(h){this.Qo.log().error("ERROR RECEIVING MESSAGE ",h),this.Go=null}},r.prototype.aa=function(e){var t=!u.Framework.it()&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,r=h.defer();if(t){var i=new FileReader;i.onload=function(t){e=this.result,r.resolve(e)},i.onerror=r.reject,i.readAsArrayBuffer(e)}else r.resolve(e);return r.Vt},r.prototype.fa=function(){return this.Jo},r}();o.da=n.ya(r(83)).ga("HiveMsgs"),o.Ko=0,o.ha=136+Math.ceil(1.2*p.an.Ui.Di),e.Ui=o}(i=t.va||(t.va={}))},function(e,t,r){"use strict";var i=r(42),n=r(43),s=r(34);if("undefined"==typeof o)var o=!1;var a;!function(e){var t;!function(e){var t=function(){function e(){this.monitorPort=n.ct.ma?s.Ea.Ta:s.Ea.wa,this.playerPort=n.ct.ma?s.Ea.Ia:s.Ea.Sa,this.feedbackPeriod=2e3,this.idleTimePeriod=6e4,this.useSessionCheck=n.ct.ba,this.debugLevel="notice",this.hiveTechOrder=[],this.telemetryId=null,this.silent=!1,this.loggerTimestamp=i.HiveConfig.Framework.LoggerTimestamp,this.onSourceSetCompleted=function(e){},this.onLoadingCompleted=function(e){}}return e}();e.p=t;var r=function(){function e(){this.initTimeout=3e4,
this.onError=function(e){return!0},this.onActiveSession=function(e){}}return e}();e.Ra=r;var o=function(){function e(){this.hivePlayerPort="playerPort",this.hiveMonitorPort="monitorPort",this.hiveSilent="silent",this.hiveDebugLevel="debugLevel",this.hiveDebugTimestamp="loggerTimestamp",this.hiveSetupTimeout="setupTimeout",this.hiveJavaTimeout="initTimeout",this.hiveWarnJavaTimeout="warnSlowRespTimeout"}return e}();e.Pa=o}(t=e.p||(e.p={}))}(a=t.u||(t.u={}));var h;!function(e){var t=function(){function e(){}return e}();t.enabledRUM=!1,t.enableKeyCombination=!0,t.enabledErrorFilter=!0,e.ErrorMonitor=t}(h=t.HiveConfig||(t.HiveConfig={})),"undefined"!=typeof window&&("undefined"==typeof window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.ErrorMonitor=h.ErrorMonitor)},function(e,t,r){"use strict";var i,n=r(2),s=n.Ze,o=r(3),a=r(1),h=r(16),u=r(10),c=r(35);!function(e){e[e.IDLE=0]="IDLE",e[e.Aa=1]="PLAY"}(i=t.ka||(t.ka={}));var l=function(){function e(e,t,r,i){this.ticket=e,this.Ca=t,this.app=r,this.identity=i,this.Oa=a.Framework.resolve(u.Os.As),this.Na=a.Framework.resolve(u.Os.ws),this._a=a.Framework.resolve(u.Os.ks),this.Fa=new h.ce.La(this._a)}return e.prototype.Da=function(e,t,r){this.app=new p(e,t),this.Oa.Da(this.app),this._a.Da(this.app,r)},e.prototype.Vs=function(e){this.Na.Vs(e)},e}();t.Ma=l;var p=function(){function e(e,t){this.app=e,this.version=t}return e}();t.Ba=p;var f=function(){function e(){this.xa=null,this.Ua=null,this.Ha=new s,this.R=a.Framework.resolve(a.Framework.Tt.rt).log(),this.R.debug("INIT REPORTING"),this.Ca=a.Framework.resolve(u.Os.vt),this.qa=a.Framework.resolve(u.Os.lt),this.Va=a.Framework.resolve(u.Os.Is)}return e.prototype.initSession=function(e,t){var r=this,i=o.defer(),n=this.qa.ja(),s=this.Va.Ga(e);return null!=s?n.then(function(e){return r.Qa(e,s,i,t)}).fail(i.reject):i.reject("Ticket URL not valid"),i.Vt},e.prototype.close=function(){this.Ca.close()},e.prototype.Qa=function(e,t,r,i){var n=this;this.xa=e.Ya(),this.Ua=e.Ka();var s=this.Ca.init(this.xa,t),o=this.Va.resolve(s.Ja,t,i);s.Vt.then(function(t){o.then(function(t){var i=t.sessionId;if(n.Ha.has(i)){var s=n.Ha.get(i);n.R.warn("SESSION ALREADY EXISTING "+s.Oa.ticket)}else{var o=new p(c.Hive.za(),c.Hive.getVersion()),a=new l(t,n.Ca,o,e);a.Oa.init(n.Ua,t,o,i),a._a.init(n.Ua,o),a._a.Wa(t),n.Ha.set(i,a),n.R.debug("SESSION SET ",i),r.resolve(a)}}).fail(function(e){return r.reject(e?e:"Error resolving the ticket")}),t.onerror(function(e){r.reject("Error establishing connection to Hive Services")})}).fail(function(e){return r.reject(e)}),this.Ca.connect()},e.prototype.Xa=function(e,t){return e.$a()===t.$a()&&e.Za()===t.Za()&&e.eh()===t.eh()},e}();t.th=f},function(e,t,r){"use strict";var i,n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},s=r(44).rh,o=r(3),a=r(1),h=r(10),u=r(26),c=r(18);!function(e){var t="[TRACK] ";e.ih="hive-client-track",e.nh="trackevent",e.sh="NULLID",e.oh="";var r=function(){function e(){}return e}();r.ah=0,r.hh=1,r.uh=2,r.lh=100,r.ph=200,e.fh=r;var i;!function(e){e[e.ve=0]="PLAYING",e[e.he=1]="BUFFERING",e[e.ge=2]="PAUSED",e[e.Ee=3]="SKIP",e[e.Te=4]="STOPPED",e[e.ERROR=5]="ERROR",e[e.dh=6]="WINDOW_SIZE",e[e.me=7]="FULLSCREEN",e[e.gh=8]="VISIBLE",e[e.HIDDEN=9]="HIDDEN"}(i=e.ue||(e.ue={}));var l;!function(e){e[e.yh=0]="JAVA_NOT_REACHABLE",e[e.vh=1]="JAVA_NOT_READY",e[e.mh=2]="JAVA_WRONG_VERSION",e[e.Th=3]="JAVA_SESSION_BUSY",e[e.Eh=4]="JAVA_SESSION_ERROR",e[e.wh=5]="JAVA_TICKET_TIMEOUT"}(l=e.Ih||(e.Ih={}));var p=function(){function e(){}return e}();e.Sh=p;var f=function(){function e(){}return e}();e._o=f;var d=function(){function e(){}return e}();e.bh=d;var g=function(){function e(){this.type=r.uh}return e}(),y=function(){function e(){this.sessions=new Array}return e.prototype.Rh=function(e,t){var r;this.sessions.forEach(function(t){t.sessionId==e&&(r=t)}),r||(r=new v,r.sessionId=e,this.sessions.push(r)),r.events.push(t)},e}();e.Ph=y;var v=function(){function e(){this.events=new Array}return e}();e.Ah=v;var m=function(){function r(){this.R=a.Framework.resolve(a.Framework.Tt.rt).log(),this.kh=a.Framework.resolve(h.Os.Ss),this.Ch=new Array,this.Oh=new Array,this.Nh=new Array}return r.prototype._h=function(e){this.client=e},r.prototype.init=function(e,r){this.Fh=e,this.Da(r),this.R.debug(t+"INIT ID: "+e)},r.prototype.Da=function(e,t){this.app=e,t&&(this.Lh=t)},r.prototype.Dh=function(e){this.Mh=e},r.prototype.Wa=function(e){var t=new E(e,this);this.Ch.push(t),this.Bh=null,this.client.xh(!0)},r.prototype.Uh=function(e,r,i){if(!this.Bh)for(var n=0;n<this.Ch.length;n++){var s=this.Ch[n];if(s.ticket.sessionId===e){this.R.debug(t+"Activating Track for session "+e),this.Bh=s;break}}if(this.Bh){if(this.Bh.ticket.sessionId!=e)return void this.R.warn(t+"ignoring manifest not matching event "+this.Bh.ticket.sessionId+" != "+e);if(!this.Bh.Hh){var o=new w(e,r,i);this.Bh.qh(o),this.client.xh()}}},r.prototype.Vh=function(e,t,r){null!=this.Bh&&(this.Bh.Hh||this.Bh.jh.push(new R(e,t,r)))},r.prototype.Gh=function(e,t,r){this.Oh.push(new S(e,t,r)),this.client.xh()},r.prototype.Qh=function(e,t,r){this.Nh.push(new b(e,t,r)),this.client.xh()},r.prototype.Yh=function(e){var t=this;e&&e.forEach(function(e){t.Nh.push(e)})},r.prototype.Kh=function(){var e=new f;this.Lh?(e.partnerId=this.Lh.partnerId,e.customerId=this.Lh.customerId):this.Bh&&(e.partnerId=this.Bh.ticket.eh(),e.customerId=this.Bh.ticket.Za()),e.version=this.app.app+"_"+(this.Lh?this.Lh.version:this.app.version),this.Lh&&(e.installVersion=this.Lh.installVersion,e.installTs=this.Lh.installTs);var t=new s;return t.Jh(navigator.userAgent),e.os=t.zh().name+" "+t.zh().version,this.Mh&&(e.commVersion=this.Mh.commVersion,e.pluginName=this.Mh.pluginName,e.pluginVersion=this.Mh.pluginVersion,e.playerTech=this.Mh.playerTech,e.playerVersion=this.Mh.playerVersion,this.Mh.telemetryId&&(e.telemetryId=this.Mh.telemetryId)),e},r.prototype.Wh=function(){return this.Bh?this.Bh:this.Ch&&this.Ch.length>0?this.Ch[this.Ch.length-1]:void 0},r.prototype.Xh=function(){var t=this,r=o.defer();0==this.Ch.length&&0==this.Oh.length&&r.reject("nothing to send");var i=new p;i.app=e.ih,i.createdAt=a.Framework.time(),i.guid=this.Fh,i.name=e.nh;var n=this.Wh();if(n){var s=n.ticket.$h().replace(/[\[\]]/g,"");i.tags=[s],i.tags.push(n.ticket.eh()),i.tags.push(n.ticket.Za())}else i.tags=new Array;var h=new y;return h.peer=this.Kh(),this.Ch.forEach(function(e){e.Hh||h.Rh(e.ticket.sessionId,e)}),this.Oh.forEach(function(e){h.Rh(e.sessionId,e)}),this.Nh.forEach(function(e){h.Rh(e.sessionId,e)}),i.data=h,this.kh.getConnectivityInfo().then(function(e){var r=t.Zh(e);h.Rh("null",r)}).fail(function(e){})["finally"](function(){return r.resolve(i)}).done(),r.Vt},r.prototype.Zh=function(e){var t=new g;t.ts=a.Framework.time();var r=e.getNetworkChanged();return r.getPublicIp()&&(t.pubIp=r.getPublicIp()),r.getPrivateIp()&&(t.privIp=r.getPrivateIp()),e.getHostName()&&(t.hostname=e.getHostName()),r.getCidr()&&(t.netmask=r.getCidr()),r.getNic()&&(t.nic=r.getNic()),r.getNicName()&&(t.nicName=r.getNicName()),r.getMacAddress()&&(t.mac=r.getMacAddress()),t},r.prototype.eu=function(){return this.Lh?this.Lh.userAgent:navigator.userAgent},r.prototype.reset=function(){this.Ch=new Array,this.Oh=new Array,this.Nh=new Array},r.prototype.tu=function(e){},r}();e.ru=m;var T=function(){function e(e){this._a=e,this.R=a.Framework.resolve(a.Framework.Tt.rt).log(),this.client=a.Framework.resolve(h.Os.vt),this._a._h(this)}return e.prototype.xh=function(e){void 0===e&&(e=!1);var t=e?u.su.nu.iu:u.su.nu.ou;if(this.au){var r=this.hu-(new Date).getTime();r>t&&(a.Framework.clearTimeout(this.au),this.hu=null,this.uu(t))}else this.uu(t)},e.prototype.uu=function(e){var t=this;this.au=a.Framework.setTimeout(function(){t.cu()},e),this.hu=(new Date).getTime()+e},e.prototype.cu=function(){var e=this;this.au=null,this.hu=null,this.R.debug(t+"TAKING A TRACK SNAPSHOT"),this._a.Xh().then(function(t){return e.forward(t)})["finally"](function(){return e._a.reset()})},e.prototype.forward=function(e){if(this.client&&this.client.lu()){var r=JSON.stringify(e);this.R.debug(t+"TRACK EVENT:",r);var i=new c.pu(Services.fu,2,r);this.client.lu().send(i)}},e}();e.La=T;var E=function(){function e(e,t){this.createdAt=(new Date).getTime(),this.Hh=!1,this.ticket=e,this.manifests=new Array,this.jh=new Array,this._a=t}return e.prototype.qh=function(e){this.manifests.push(e)},e.prototype.toJSON=function(){var e={};e.type=r.ah,e.ticket={},e.ticket.url=this.ticket.ticketUrl,e.ticket.reqTs=this.ticket.du,e.ticket.respTs=this.ticket.gu,e.ticket.userAgent=this._a.eu(),e.manifests=[],this.manifests.forEach(function(t){var r={};r.url=t.url,r.respTs=t.gu,r.respCode=t.respCode,e.manifests.push(r)});var t=-1,i=-1,n=-1;return this.jh.forEach(function(e){e.yu>0&&(t==-1&&(t=e.ts,i=e.yu),n=e.yu)}),t!=-1&&(e.playTs=t),n!=-1&&(e.buffTime=n),i!=-1&&(e.initBuffTime=i),e},e}();e.vu=E;var w=function(){function e(e,t,r){this.eventId=e,this.url=t,this.gu=(new Date).getTime(),this.respCode=r}return e}();e.mu=w;var I=function(){function e(e,t,r,i){this.ts=(new Date).getTime(),this.sessionId=e,this.sessionId||(this.sessionId="null"),this.event=t,this.Tu=r,i&&(this.ts=i)}return e.prototype.toJSON=function(){var e={};return e.type=this.Eu+this.event,e.ts=this.ts,this.Tu&&(e.parameters=this.Tu),e},e}();e.wu=I;var S=function(e){function t(t,i,n,s){var o=e.call(this,t,i,n,s)||this;return o.Eu=r.lh,o}return n(t,e),t}(I);e.Iu=S;var b=function(e){function t(t,i,n,s){var o=e.call(this,t,i,n,s)||this;return o.Eu=r.ph,o}return n(t,e),t}(I);e.Su=b;var R=function(){function e(e,t,r){this.ts=(new Date).getTime(),this.Io=e,this.bu=t,this.yu=r}return e}();e.Ru=R}(i=t.ce||(t.ce={}))},function(e,t){function r(e,t,r){null!=e&&("number"==typeof e?this.Pu(e,t,r):null==t&&"string"!=typeof e?this.Au(e,256):this.Au(e,t))}function i(){return new r(null)}function n(e,t,r,i,n,s){for(;--s>=0;){var o=t*this[e++]+r[i]+n;n=Math.floor(o/67108864),r[i++]=67108863&o}return n}function s(e,t,r,i,n,s){for(var o=32767&t,a=t>>15;--s>=0;){var h=32767&this[e],u=this[e++]>>15,c=a*h+u*o;h=o*h+((32767&c)<<15)+r[i]+(1073741823&n),n=(h>>>30)+(c>>>15)+a*u+(n>>>30),r[i++]=1073741823&h}return n}function o(e,t,r,i,n,s){for(var o=16383&t,a=t>>14;--s>=0;){var h=16383&this[e],u=this[e++]>>14,c=a*h+u*o;h=o*h+((16383&c)<<14)+r[i]+n,n=(h>>28)+(c>>14)+a*u,r[i++]=268435455&h}return n}function a(e){return Ce.charAt(e)}function h(e,t){var r=Oe[e.charCodeAt(t)];return null==r?-1:r}function u(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.ku=this.ku}function c(e){this.t=1,this.ku=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.Cu:this.t=0}function l(e){var t=i();return t.Ou(e),t}function p(e,t){var i;if(16==t)i=4;else if(8==t)i=3;else if(256==t)i=8;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return void this.fromRadix(e,t);i=2}this.t=0,this.ku=0;for(var n=e.length,s=!1,o=0;--n>=0;){var a=8==i?255&e[n]:h(e,n);a<0?"-"==e.charAt(n)&&(s=!0):(s=!1,0==o?this[this.t++]=a:o+i>this.Nu?(this[this.t-1]|=(a&(1<<this.Nu-o)-1)<<o,this[this.t++]=a>>this.Nu-o):this[this.t-1]|=a<<o,o+=i,o>=this.Nu&&(o-=this.Nu))}8==i&&0!=(128&e[0])&&(this.ku=-1,o>0&&(this[this.t-1]|=(1<<this.Nu-o)-1<<o)),this._u(),s&&r.ZERO.Fu(this,this)}function f(){for(var e=this.ku&this.Lu;this.t>0&&this[this.t-1]==e;)--this.t}function d(e){if(this.ku<0)return"-"+this.Du().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,i=(1<<t)-1,n=!1,s="",o=this.t,h=this.Nu-o*this.Nu%t;if(o-- >0)for(h<this.Nu&&(r=this[o]>>h)>0&&(n=!0,s=a(r));o>=0;)h<t?(r=(this[o]&(1<<h)-1)<<t-h,r|=this[--o]>>(h+=this.Nu-t)):(r=this[o]>>(h-=t)&i,h<=0&&(h+=this.Nu,--o)),r>0&&(n=!0),n&&(s+=a(r));return n?s:"0"}function g(){var e=i();return r.ZERO.Fu(this,e),e}function y(){return this.ku<0?this.Du():this}function v(e){var t=this.ku-e.ku;if(0!=t)return t;var r=this.t;if(t=r-e.t,0!=t)return this.ku<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0}function m(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function T(){return this.t<=0?0:this.Nu*(this.t-1)+m(this[this.t-1]^this.ku&this.Lu)}function E(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.ku=this.ku}function w(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.ku=this.ku}function I(e,t){var r,i=e%this.Nu,n=this.Nu-i,s=(1<<n)-1,o=Math.floor(e/this.Nu),a=this.ku<<i&this.Lu;for(r=this.t-1;r>=0;--r)t[r+o+1]=this[r]>>n|a,a=(this[r]&s)<<i;for(r=o-1;r>=0;--r)t[r]=0;t[o]=a,t.t=this.t+o+1,t.ku=this.ku,t._u()}function S(e,t){t.ku=this.ku;var r=Math.floor(e/this.Nu);if(r>=this.t)return void(t.t=0);var i=e%this.Nu,n=this.Nu-i,s=(1<<i)-1;t[0]=this[r]>>i;for(var o=r+1;o<this.t;++o)t[o-r-1]|=(this[o]&s)<<n,t[o-r]=this[o]>>i;i>0&&(t[this.t-r-1]|=(this.ku&s)<<n),t.t=this.t-r,t._u()}function b(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]-e[r],t[r++]=i&this.Lu,i>>=this.Nu;if(e.t<this.t){for(i-=e.ku;r<this.t;)i+=this[r],t[r++]=i&this.Lu,i>>=this.Nu;i+=this.ku}else{for(i+=this.ku;r<e.t;)i-=e[r],t[r++]=i&this.Lu,i>>=this.Nu;i-=e.ku}t.ku=i<0?-1:0,i<-1?t[r++]=this.Cu+i:i>0&&(t[r++]=i),t.t=r,t._u()}function R(e,t){var i=this.abs(),n=e.abs(),s=i.t;for(t.t=s+n.t;--s>=0;)t[s]=0;for(s=0;s<n.t;++s)t[s+i.t]=i.Mu(0,n[s],t,s,0,i.t);t.ku=0,t._u(),this.ku!=e.ku&&r.ZERO.Fu(t,t)}function P(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.Mu(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.Mu(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.Cu&&(e[r+t.t]-=t.Cu,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.Mu(r,t[r],e,2*r,0,1)),e.ku=0,e._u()}function A(e,t,n){var s=e.abs();if(!(s.t<=0)){var o=this.abs();if(o.t<s.t)return null!=t&&t.Ou(0),void(null!=n&&this.Bu(n));null==n&&(n=i());var a=i(),h=this.ku,u=e.ku,c=this.Nu-m(s[s.t-1]);c>0?(s.xu(c,a),o.xu(c,n)):(s.Bu(a),o.Bu(n));var l=a.t,p=a[l-1];if(0!=p){var f=p*(1<<this.Uu)+(l>1?a[l-2]>>this.Hu:0),d=this.qu/f,g=(1<<this.Uu)/f,y=1<<this.Hu,v=n.t,T=v-l,E=null==t?i():t;for(a.Vu(T,E),n.ju(E)>=0&&(n[n.t++]=1,n.Fu(E,n)),r.ONE.Vu(l,E),E.Fu(a,a);a.t<l;)a[a.t++]=0;for(;--T>=0;){var w=n[--v]==p?this.Lu:Math.floor(n[v]*d+(n[v-1]+y)*g);if((n[v]+=a.Mu(0,w,n,T,0,l))<w)for(a.Vu(T,E),n.Fu(E,n);n[v]<--w;)n.Fu(E,n)}null!=t&&(n.Gu(l,t),h!=u&&r.ZERO.Fu(t,t)),n.t=l,n._u(),c>0&&n.Qu(c,n),h<0&&r.ZERO.Fu(n,n)}}}function k(e){var t=i();return this.abs().Yu(e,null,t),this.ku<0&&t.ju(r.ZERO)>0&&e.Fu(t,t),t}function C(e){this.s=e}function O(e){return e.ku<0||e.ju(this.s)>=0?e.Ku(this.s):e}function N(e){return e}function _(e){e.Yu(this.s,null,e)}function F(e,t,r){e.Ju(t,r),this.reduce(r)}function L(e,t){e.zu(t),this.reduce(t)}function D(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.Cu)%this.Cu,t>0?this.Cu-t:-t}function M(e){this.s=e,this.Wu=e.Xu(),this.$u=32767&this.Wu,this.Zu=this.Wu>>15,this.ec=(1<<e.Nu-15)-1,this.tc=2*e.t}function B(e){var t=i();return e.abs().Vu(this.s.t,t),t.Yu(this.s,null,t),e.ku<0&&t.ju(r.ZERO)>0&&this.s.Fu(t,t),t}function x(e){var t=i();return e.Bu(t),this.reduce(t),t}function U(e){for(;e.t<=this.tc;)e[e.t++]=0;for(var t=0;t<this.s.t;++t){var r=32767&e[t],i=r*this.$u+((r*this.Zu+(e[t]>>15)*this.$u&this.ec)<<15)&e.Lu;for(r=t+this.s.t,e[r]+=this.s.Mu(0,i,e,t,0,this.s.t);e[r]>=e.Cu;)e[r]-=e.Cu,e[++r]++}e._u(),e.Gu(this.s.t,e),e.ju(this.s)>=0&&e.Fu(this.s,e)}function H(e,t){e.zu(t),this.reduce(t)}function q(e,t,r){e.Ju(t,r),this.reduce(r)}function V(){return 0==(this.t>0?1&this[0]:this.ku)}function j(e,t){if(e>4294967295||e<1)return r.ONE;var n=i(),s=i(),o=t.rc(this),a=m(e)-1;for(o.Bu(n);--a>=0;)if(t.ic(n,s),(e&1<<a)>0)t.nc(s,o,n);else{var h=n;n=s,s=h}return t.sc(n)}function G(e,t){var r;return r=e<256||t.oc()?new C(t):new M(t),this.exp(e,r)}function Q(e){var t,r,i,n="",s=0;for(t=0;t<e.length&&e.charAt(t)!=_e;++t)i=Ne.indexOf(e.charAt(t)),i<0||(0==s?(n+=a(i>>2),r=3&i,s=1):1==s?(n+=a(r<<2|i>>4),r=15&i,s=2):2==s?(n+=a(r),n+=a(i>>2),r=3&i,s=3):(n+=a(r<<2|i>>4),n+=a(15&i),s=0));return 1==s&&(n+=a(r<<2)),n}function Y(e){var t,r=Q(e),i=new Array;for(t=0;2*t<r.length;++t)i[t]=parseInt(r.substring(2*t,2*t+2),16);return i}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
	 */
function K(e,t){return new r(e,t)}function J(e,t){if(t<e.length+11)return alert("Message too long for RSA"),null;for(var i=new Array,n=e.length-1;n>=0&&t>0;){var s=e.charCodeAt(n--);s<128?i[--t]=s:s>127&&s<2048?(i[--t]=63&s|128,i[--t]=s>>6|192):(i[--t]=63&s|128,i[--t]=s>>6&63|128,i[--t]=s>>12|224)}i[--t]=0;for(var o=new SecureRandom,a=new Array;t>2;){for(a[0]=0;0==a[0];)o.nextBytes(a);i[--t]=a[0]}return i[--t]=2,i[--t]=0,new r(i)}function z(e,t,r){for(var i="",n=0;i.length<t;)i+=r(String.fromCharCode.apply(String,e.concat([(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n]))),n+=1;return i}function W(e,t,i){if(e.length+2*Fe+2>t)throw"Message too long for RSA";var n,s="";for(n=0;n<t-e.length-2*Fe-2;n+=1)s+="\0";var o=rstr_sha1("")+s+""+e,a=new Array(Fe);(new SecureRandom).nextBytes(a);var h=z(a,o.length,i||rstr_sha1),u=[];for(n=0;n<o.length;n+=1)u[n]=o.charCodeAt(n)^h.charCodeAt(n);var c=z(u,a.length,rstr_sha1),l=[0];for(n=0;n<a.length;n+=1)l[n+1]=a[n]^c.charCodeAt(n);return new r(l.concat(u))}function X(){this.n=null,this.e=0,this.d=null,this.o=null,this.ac=null,this.hc=null,this.uc=null,this.cc=null}function $(e,t){this.lc=!0,"string"!=typeof e?(this.n=e,this.e=t):null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=K(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function Z(e){return e.pc(this.e,this.n)}function ee(e){var t=J(e,this.n.fc()+7>>3);if(null==t)return null;var r=this.dc(t);if(null==r)return null;var i=r.toString(16);return 0==(1&i.length)?i:"0"+i}function te(e,t){var r=W(e,this.n.fc()+7>>3,t);if(null==r)return null;var i=this.dc(r);if(null==i)return null;var n=i.toString(16);return 0==(1&n.length)?n:"0"+n}function re(e,t){for(var r="",i=t/4-e.length,n=0;n<i;n++)r+="0";return r+e}function ie(e,t){var r=function(e){return KJUR.crypto.yc.gc(e,t)},i=r(e);return this.vc(i,t)}function ne(e,t){var r=KJUR.crypto.yc.mc(e,t,this.n.fc()),i=K(r,16),n=this.doPrivate(i),s=n.toString(16);return re(s,this.n.fc())}function se(e){return ie.call(this,e,"sha1")}function oe(e){return ie.call(this,e,"sha256")}function ae(e,t,r){for(var i="",n=0;i.length<t;)i+=hextorstr(r(rstrtohex(e+String.fromCharCode.apply(String,[(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n])))),n+=1;return i}function he(e,t,r){var i=function(e){return KJUR.crypto.yc.Tc(e,t)},n=i(rstrtohex(e));return void 0===r&&(r=-1),this.Ec(n,t,r)}function ue(e,t,i){var n,s=hextorstr(e),o=s.length,a=this.n.fc()-1,h=Math.ceil(a/8),u=function(e){return KJUR.crypto.yc.Tc(e,t)};if(i===-1||void 0===i)i=o;else if(i===-2)i=h-o-2;else if(i<-2)throw"invalid salt length";if(h<o+i+2)throw"data too long";var c="";i>0&&(c=new Array(i),(new SecureRandom).nextBytes(c),c=String.fromCharCode.apply(String,c));var l=hextorstr(u(rstrtohex("\0\0\0\0\0\0\0\0"+s+c))),p=[];for(n=0;n<h-i-o-2;n+=1)p[n]=0;var f=String.fromCharCode.apply(String,p)+""+c,d=ae(l,f.length,u),g=[];for(n=0;n<f.length;n+=1)g[n]=f.charCodeAt(n)^d.charCodeAt(n);var y=65280>>8*h-a&255;for(g[0]&=~y,n=0;n<o;n++)g.push(l.charCodeAt(n));return g.push(188),re(this.doPrivate(new r(g)).toString(16),this.n.fc())}function ce(e,t,r){var i=new X;i.wc(t,r);var n=i.dc(e);return n}function le(e,t,r){var i=ce(e,t,r),n=i.toString(16).replace(/^1f+00/,"");return n}function pe(e){for(var t in KJUR.crypto.yc.Ic){var r=KJUR.crypto.yc.Ic[t],i=r.length;if(e.substring(0,i)==r){var n=[t,e.substring(i)];return n}}return[]}function fe(e,t,r,i){var n=le(t,r,i),s=pe(n);if(0==s.length)return!1;var o=s[0],a=s[1],h=function(e){return KJUR.crypto.yc.gc(e,o)},u=h(e);return a==u}function de(e,t){var r=K(e,16),i=fe(t,r,this.n.toString(16),this.e.toString(16));return i}function ge(e,t){t=t.replace(Le,""),t=t.replace(/[ \n]+/g,"");var r=K(t,16);if(r.fc()>this.n.fc())return 0;var i=this.dc(r),n=i.toString(16).replace(/^1f+00/,""),s=pe(n);if(0==s.length)return!1;var o=s[0],a=s[1],h=function(e){return KJUR.crypto.yc.gc(e,o)},u=h(e);return a==u}function ye(e,t){t=t.replace(Le,""),t=t.replace(/[ \n]+/g,"");var r=K(t,16);if(r.fc()>this.n.fc())return 0;var i=this.dc(r),n=i.toString(16).replace(/^1f+00/,""),s=pe(n);if(0==s.length)return!1;var o=(s[0],s[1]);return o==e}function ve(e,t,r,i){var n=function(e){return KJUR.crypto.yc.Tc(e,r)},s=n(rstrtohex(e));return void 0===i&&(i=-1),this.Sc(s,t,r,i)}function me(e,t,i,n){var s=new r(t,16);if(s.fc()>this.n.fc())return!1;var o,a=function(e){return KJUR.crypto.yc.Tc(e,i)},h=hextorstr(e),u=h.length,c=this.n.fc()-1,l=Math.ceil(c/8);if(n===-1||void 0===n)n=u;else if(n===-2)n=l-u-2;else if(n<-2)throw"invalid salt length";if(l<u+n+2)throw"data too long";var p=this.dc(s).toByteArray();for(o=0;o<p.length;o+=1)p[o]&=255;for(;p.length<l;)p.unshift(0);if(188!==p[l-1])throw"encoded message does not end in 0xbc";p=String.fromCharCode.apply(String,p);var f=p.substr(0,l-u-1),d=p.substr(f.length,u),g=65280>>8*l-c&255;if(0!==(f.charCodeAt(0)&g))throw"bits beyond keysize not zero";var y=ae(d,f.length,a),v=[];for(o=0;o<f.length;o+=1)v[o]=f.charCodeAt(o)^y.charCodeAt(o);v[0]&=~g;var m=l-u-n-2;for(o=0;o<m;o+=1)if(0!==v[o])throw"leftmost octets not zero";if(1!==v[m])throw"0x01 marker not found";return d===hextorstr(a(rstrtohex("\0\0\0\0\0\0\0\0"+h+String.fromCharCode.apply(String,v.slice(-n)))))}var Te={};Te.userAgent=!1;var Ee={};if("undefined"==typeof we||!we)var we={};we.bc=function(){var e,t,r,i=arguments,n=null;for(e=0;e<i.length;e+=1)for(r=(""+i[e]).split("."),n=we,t="YAHOO"==r[0]?1:0;t<r.length;t+=1)n[r[t]]=n[r[t]]||{},n=n[r[t]];return n},we.log=function(e,t,r){var i=we.widget.Logger;return!(!i||!i.log)&&i.log(e,t,r)},we.register=function(e,t,r){var i,n,s,o,a,h=we.$t.Rc;for(h[e]||(h[e]={Pc:[],Ac:[]}),i=h[e],n=r.version,s=r.ga,o=we.$t.ho,i.name=e,i.version=n,i.ga=s,i.Pc.push(n),i.Ac.push(s),i.kc=t,a=0;a<o.length;a+=1)o[a](i);t?(t.VERSION=n,t.Cc=s):we.log("mainClass is undefined for module "+e,"warn")},we.$t=we.$t||{Rc:[],ho:[]},we.$t.getVersion=function(e){return we.$t.Rc[e]||null},we.$t.Oc=function(e){var t,r=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 1==t++?"":"."}))},i=Te,n={Nc:0,opera:0,_c:0,Fc:0,chrome:0,Lc:null,Dc:0,Mc:0,Bc:0,xc:0,Uc:null,Hc:0,qc:0,Vc:i&&i.cajaVersion,jc:!1,os:null},s=e||Te&&Te.userAgent,o=Ee&&Ee.location,a=o&&o.href;return n.jc=a&&0===a.toLowerCase().indexOf("https"),s&&(/windows|win32/i.test(s)?n.os="windows":/macintosh/i.test(s)?n.os="macintosh":/rhino/i.test(s)&&(n.os="rhino"),/KHTML/.test(s)&&(n.Fc=1),t=s.match(/AppleWebKit\/([^\s]*)/),t&&t[1]&&(n.Fc=r(t[1]),/ Mobile\//.test(s)?(n.Lc="Apple",t=s.match(/OS ([^\s]*)/),t&&t[1]&&(t=r(t[1].replace("_","."))),n.Uc=t,n.Mc=n.xc=n.Bc=0,t=s.match(/iPad|iPod|iPhone/),t&&t[0]&&(n[t[0].toLowerCase()]=n.Uc)):(t=s.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),t&&(n.Lc=t[0]),/webOS/.test(s)&&(n.Lc="WebOS",t=s.match(/webOS\/([^\s]*);/),t&&t[1]&&(n.qc=r(t[1]))),/ Android/.test(s)&&(n.Lc="Android",t=s.match(/Android ([^\s]*);/),t&&t[1]&&(n.Hc=r(t[1])))),t=s.match(/Chrome\/([^\s]*)/),t&&t[1]?n.chrome=r(t[1]):(t=s.match(/AdobeAIR\/([^\s]*)/),t&&(n.Dc=t[0]))),n.Fc||(t=s.match(/Opera[\s\/]([^\s]*)/),t&&t[1]?(n.opera=r(t[1]),t=s.match(/Version\/([^\s]*)/),t&&t[1]&&(n.opera=r(t[1])),t=s.match(/Opera Mini[^;]*/),t&&(n.Lc=t[0])):(t=s.match(/MSIE\s([^;]*)/),t&&t[1]?n.Nc=r(t[1]):(t=s.match(/Gecko\/([^\s]*)/),t&&(n._c=1,t=s.match(/rv:([^\s\)]*)/),t&&t[1]&&(n._c=r(t[1]))))))),n},we.$t.Gc=we.$t.Oc(),function(){if(we.bc("util","widget","example"),"undefined"!=typeof YAHOO_config){var e,t=YAHOO_config.listener,r=we.$t.ho,i=!0;if(t){for(e=0;e<r.length;e++)if(r[e]==t){i=!1;break}i&&r.push(t)}}}(),we.lang=we.lang||{},function(){var e=we.lang,t=Object.prototype,r="[object Array]",i="[object Function]",n="[object Object]",s=[],o={Qc:"&amp;",Yc:"&lt;",Kc:"&gt;",Jc:"&quot;",zc:"&#x27;",Wc:"&#x2F;",Xc:"&#x60;"},a=["toString","valueOf"],h={isArray:function(e){return t.toString.apply(e)===r},$c:function(e){return"boolean"==typeof e},Zc:function(e){return"function"==typeof e||t.toString.apply(e)===i},el:function(e){return null===e},tl:function(e){return"number"==typeof e&&isFinite(e)},rl:function(t){return t&&("object"==typeof t||e.Zc(t))||!1},il:function(e){return"string"==typeof e},nl:function(e){return"undefined"==typeof e},sl:we.$t.Gc.Nc?function(r,i){var n,s,o;for(n=0;n<a.length;n+=1)s=a[n],o=i[s],e.Zc(o)&&o!=t[s]&&(r[s]=o)}:function(){},ol:function(e){return e.replace(/[&<>"'\/`]/g,function(e){return o[e]})},extend:function(r,i,n){if(!i||!r)throw new Error("extend failed, please check that all dependencies are included.");var s,o=function(){};if(o.prototype=i.prototype,r.prototype=new o,r.prototype.constructor=r,r.al=i.prototype,i.prototype.constructor==t.constructor&&(i.prototype.constructor=i),n){for(s in n)e.hasOwnProperty(n,s)&&(r.prototype[s]=n[s]);e.sl(r.prototype,n)}},hl:function(t,r){if(!r||!t)throw new Error("Absorb failed, verify dependencies.");var i,n,s=arguments,o=s[2];if(o&&o!==!0)for(i=2;i<s.length;i+=1)t[s[i]]=r[s[i]];else{for(n in r)!o&&n in t||(t[n]=r[n]);e.sl(t,r)}return t},ul:function(t,r){if(!r||!t)throw new Error("Augment failed, verify dependencies.");var i,n=[t.prototype,r.prototype];for(i=2;i<arguments.length;i+=1)n.push(arguments[i]);return e.hl.apply(this,n),t},dump:function(t,r){var i,n,s=[],o="{...}",a="f(){...}",h=", ",u=" => ";if(!e.rl(t))return t+"";if(t instanceof Date||"nodeType"in t&&"tagName"in t)return t;if(e.Zc(t))return a;if(r=e.tl(r)?r:3,e.isArray(t)){for(s.push("["),i=0,n=t.length;i<n;i+=1)e.rl(t[i])?s.push(r>0?e.dump(t[i],r-1):o):s.push(t[i]),s.push(h);s.length>1&&s.pop(),s.push("]")}else{s.push("{");for(i in t)e.hasOwnProperty(t,i)&&(s.push(i+u),e.rl(t[i])?s.push(r>0?e.dump(t[i],r-1):o):s.push(t[i]),s.push(h));s.length>1&&s.pop(),s.push("}")}return s.join("")},cl:function(t,r,i,s){for(var o,a,h,u,c,l,p,f,d,g=[],y=t.length,v="dump",m=" ",T="{",E="}";(o=t.lastIndexOf(T,y),!(o<0))&&(a=t.indexOf(E,o),!(o+1>a));)p=t.substring(o+1,a),u=p,l=null,h=u.indexOf(m),h>-1&&(l=u.substring(h+1),u=u.substring(0,h)),c=r[u],i&&(c=i(u,c,l)),e.rl(c)?e.isArray(c)?c=e.dump(c,parseInt(l,10)):(l=l||"",f=l.indexOf(v),f>-1&&(l=l.substring(4)),d=c.toString(),c=d===n||f>-1?e.dump(c,parseInt(l,10)):d):e.il(c)||e.tl(c)||(c="~-"+g.length+"-~",g[g.length]=p),t=t.substring(0,o)+c+t.substring(a+1),s===!1&&(y=o-1);for(o=g.length-1;o>=0;o-=1)t=t.replace(new RegExp("~-"+o+"-~"),"{"+g[o]+"}","g");return t},trim:function(e){try{return e.replace(/^\s+|\s+$/g,"")}catch(t){return e}},ll:function(){var t,r={},i=arguments,n=i.length;for(t=0;t<n;t+=1)e.hl(r,i[t],!0);return r},pl:function(t,r,i,n,o){t=t||0,r=r||{};var a,h,u=i,c=n;if(e.il(i)&&(u=r[i]),!u)throw new TypeError("method undefined");return e.nl(n)||e.isArray(c)||(c=[n]),a=function(){u.apply(r,c||s)},h=o?setInterval(a,t):setTimeout(a,t),{interval:o,cancel:function(){this.interval?clearInterval(h):clearTimeout(h)}}},fl:function(t){return e.rl(t)||e.il(t)||e.tl(t)||e.$c(t)}};e.hasOwnProperty=t.hasOwnProperty?function(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}:function(t,r){return!e.nl(t[r])&&t.constructor.prototype[r]!==t[r]},h.hl(e,h,!0),we.util.Lang=e,e.dl=e.ul,we.dl=e.ul,we.extend=e.extend}(),we.register("yahoo",we,{version:"2.9.0",ga:"2800"});/*! CryptoJS v3.1.2 core-fix.js
	 * code.google.com/p/crypto-js
	 * (c) 2009-2013 by Jeff Mott. All rights reserved.
	 * code.google.com/p/crypto-js/wiki/License
	 * THIS IS FIX of 'core.js' to fix Hmac issue.
	 * https://code.google.com/p/crypto-js/issues/detail?id=84
	 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
	 */
var Ie=Ie||function(e,t){var r={},i=r.ta={},n=i.gl=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;return t&&r.yl(t),r.hasOwnProperty("init")||(r.init=function(){r.vl.init.apply(this,arguments)}),r.init.prototype=r,r.vl=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},yl:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=i.ea=n.extend({init:function(e,r){e=this.ml=e||[],r!=t?this.Tl=r:this.Tl=4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.ml,r=e.ml,i=this.Tl,n=e.Tl;if(this._u(),i%4)for(var s=0;s<n;s++){var o=r[s>>>2]>>>24-s%4*8&255;t[i+s>>>2]|=o<<24-(i+s)%4*8}else for(var s=0;s<n;s+=4)t[i+s>>>2]=r[s>>>2];return this.Tl+=n,this},_u:function(){var t=this.ml,r=this.Tl;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=n.clone.call(this);return e.ml=this.ml.slice(0),e},random:function(t){for(var r=[],i=0;i<t;i+=4)r.push(4294967296*e.random()|0);return new s.init(r,t)}}),o=r.El={},a=o.wl={stringify:function(e){for(var t=e.ml,r=e.Tl,i=[],n=0;n<r;n++){var s=t[n>>>2]>>>24-n%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(r,t/2)}},h=o.Il={stringify:function(e){for(var t=e.ml,r=e.Tl,i=[],n=0;n<r;n++){var s=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(r,t)}},u=o.Sl={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},c=i.bl=n.extend({reset:function(){this.Rl=new s.init,this.Pl=0},Al:function(e){"string"==typeof e&&(e=u.parse(e)),this.Rl.concat(e),this.Pl+=e.Tl},kl:function(t){var r=this.Rl,i=r.ml,n=r.Tl,o=this.Cl,a=4*o,h=n/a;h=t?e.ceil(h):e.max((0|h)-this.Ol,0);var u=h*o,c=e.min(4*u,n);if(u){for(var l=0;l<u;l+=o)this.Nl(i,l);var p=i.splice(0,u);r.Tl-=c}return new s.init(p,c)},clone:function(){var e=n.clone.call(this);return e.Rl=this.Rl.clone(),e},Ol:0}),l=(i._l=c.extend({Fl:n.extend(),init:function(e){this.Fl=this.Fl.extend(e),this.reset()},reset:function(){c.reset.call(this),this.Ll()},update:function(e){return this.Al(e),this.kl(),this},Dl:function(e){e&&this.Al(e);var t=this.Ml();return t},Cl:16,Bl:function(e){return function(t,r){return new e.init(r).Dl(t)}},xl:function(e){return function(t,r){return new l.HMAC.init(e,r).Dl(t)}}}),r.Ul={});return r}(Math);!function(e){function t(e,t,r,i,n,s,o){return e=e+(t&r|~t&i)+n+o,(e<<s|e>>>32-s)+t}function r(e,t,r,i,n,s,o){return e=e+(t&i|r&~i)+n+o,(e<<s|e>>>32-s)+t}function i(e,t,r,i,n,s,o){return e=e+(t^r^i)+n+o,(e<<s|e>>>32-s)+t}function n(e,t,r,i,n,s,o){return e=e+(r^(t|~i))+n+o,(e<<s|e>>>32-s)+t}for(var s=Ie,o=s.ta,a=o.ea,h=o._l,o=s.Ul,u=[],c=0;64>c;c++)u[c]=4294967296*e.abs(e.sin(c+1))|0;o=o.ra=h.extend({Ll:function(){this.Hl=new a.init([1732584193,4023233417,2562383102,271733878])},Nl:function(e,s){for(var o=0;16>o;o++){var a=s+o,h=e[a];e[a]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var o=this.Hl.ml,a=e[s+0],h=e[s+1],c=e[s+2],l=e[s+3],p=e[s+4],f=e[s+5],d=e[s+6],g=e[s+7],y=e[s+8],v=e[s+9],m=e[s+10],T=e[s+11],E=e[s+12],w=e[s+13],I=e[s+14],S=e[s+15],b=o[0],R=o[1],P=o[2],A=o[3],b=t(b,R,P,A,a,7,u[0]),A=t(A,b,R,P,h,12,u[1]),P=t(P,A,b,R,c,17,u[2]),R=t(R,P,A,b,l,22,u[3]),b=t(b,R,P,A,p,7,u[4]),A=t(A,b,R,P,f,12,u[5]),P=t(P,A,b,R,d,17,u[6]),R=t(R,P,A,b,g,22,u[7]),b=t(b,R,P,A,y,7,u[8]),A=t(A,b,R,P,v,12,u[9]),P=t(P,A,b,R,m,17,u[10]),R=t(R,P,A,b,T,22,u[11]),b=t(b,R,P,A,E,7,u[12]),A=t(A,b,R,P,w,12,u[13]),P=t(P,A,b,R,I,17,u[14]),R=t(R,P,A,b,S,22,u[15]),b=r(b,R,P,A,h,5,u[16]),A=r(A,b,R,P,d,9,u[17]),P=r(P,A,b,R,T,14,u[18]),R=r(R,P,A,b,a,20,u[19]),b=r(b,R,P,A,f,5,u[20]),A=r(A,b,R,P,m,9,u[21]),P=r(P,A,b,R,S,14,u[22]),R=r(R,P,A,b,p,20,u[23]),b=r(b,R,P,A,v,5,u[24]),A=r(A,b,R,P,I,9,u[25]),P=r(P,A,b,R,l,14,u[26]),R=r(R,P,A,b,y,20,u[27]),b=r(b,R,P,A,w,5,u[28]),A=r(A,b,R,P,c,9,u[29]),P=r(P,A,b,R,g,14,u[30]),R=r(R,P,A,b,E,20,u[31]),b=i(b,R,P,A,f,4,u[32]),A=i(A,b,R,P,y,11,u[33]),P=i(P,A,b,R,T,16,u[34]),R=i(R,P,A,b,I,23,u[35]),b=i(b,R,P,A,h,4,u[36]),A=i(A,b,R,P,p,11,u[37]),P=i(P,A,b,R,g,16,u[38]),R=i(R,P,A,b,m,23,u[39]),b=i(b,R,P,A,w,4,u[40]),A=i(A,b,R,P,a,11,u[41]),P=i(P,A,b,R,l,16,u[42]),R=i(R,P,A,b,d,23,u[43]),b=i(b,R,P,A,v,4,u[44]),A=i(A,b,R,P,E,11,u[45]),P=i(P,A,b,R,S,16,u[46]),R=i(R,P,A,b,c,23,u[47]),b=n(b,R,P,A,a,6,u[48]),A=n(A,b,R,P,g,10,u[49]),P=n(P,A,b,R,I,15,u[50]),R=n(R,P,A,b,f,21,u[51]),b=n(b,R,P,A,E,6,u[52]),A=n(A,b,R,P,l,10,u[53]),P=n(P,A,b,R,m,15,u[54]),R=n(R,P,A,b,h,21,u[55]),b=n(b,R,P,A,y,6,u[56]),A=n(A,b,R,P,S,10,u[57]),P=n(P,A,b,R,d,15,u[58]),R=n(R,P,A,b,w,21,u[59]),b=n(b,R,P,A,p,6,u[60]),A=n(A,b,R,P,T,10,u[61]),P=n(P,A,b,R,c,15,u[62]),R=n(R,P,A,b,v,21,u[63]);o[0]=o[0]+b|0,o[1]=o[1]+R|0,o[2]=o[2]+P|0,o[3]=o[3]+A|0},Ml:function(){var t=this.Rl,r=t.ml,i=8*this.Pl,n=8*t.Tl;r[n>>>5]|=128<<24-n%32;var s=e.floor(i/4294967296);for(r[(n+64>>>9<<4)+15]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[(n+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.Tl=4*(r.length+1),this.kl(),t=this.Hl,r=t.ml,i=0;4>i;i++)n=r[i],r[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return t},clone:function(){var e=h.clone.call(this);return e.Hl=this.Hl.clone(),e}}),s.ra=h.Bl(o),s.ql=h.xl(o)}(Math),function(){var e=Ie,t=e.ta,r=t.ea,i=t._l,n=[],t=e.Ul.Vl=i.extend({Ll:function(){this.Hl=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},Nl:function(e,t){for(var r=this.Hl.ml,i=r[0],s=r[1],o=r[2],a=r[3],h=r[4],u=0;80>u;u++){if(16>u)n[u]=0|e[t+u];else{var c=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=c<<1|c>>>31}c=(i<<5|i>>>27)+h+n[u],c=20>u?c+((s&o|~s&a)+1518500249):40>u?c+((s^o^a)+1859775393):60>u?c+((s&o|s&a|o&a)-1894007588):c+((s^o^a)-899497514),h=a,a=o,o=s<<30|s>>>2,s=i,i=c}r[0]=r[0]+i|0,r[1]=r[1]+s|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+h|0},Ml:function(){var e=this.Rl,t=e.ml,r=8*this.Pl,i=8*e.Tl;return t[i>>>5]|=128<<24-i%32,t[(i+64>>>9<<4)+14]=Math.floor(r/4294967296),t[(i+64>>>9<<4)+15]=r,e.Tl=4*t.length,this.kl(),this.Hl},clone:function(){var e=i.clone.call(this);return e.Hl=this.Hl.clone(),e}});e.Vl=i.Bl(t),e.jl=i.xl(t)}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */
var Se,be=0xdeadbeefcafe,Re=15715070==(16777215&be);Re&&"Microsoft Internet Explorer"==Te.appName?(r.prototype.Mu=s,Se=30):Re&&"Netscape"!=Te.appName?(r.prototype.Mu=n,Se=26):(r.prototype.Mu=o,Se=28),r.prototype.Nu=Se,r.prototype.Lu=(1<<Se)-1,r.prototype.Cu=1<<Se;var Pe=52;r.prototype.qu=Math.pow(2,Pe),r.prototype.Uu=Pe-Se,r.prototype.Hu=2*Se-Pe;var Ae,ke,Ce="0123456789abcdefghijklmnopqrstuvwxyz",Oe=new Array;for(Ae="0".charCodeAt(0),ke=0;ke<=9;++ke)Oe[Ae++]=ke;for(Ae="a".charCodeAt(0),ke=10;ke<36;++ke)Oe[Ae++]=ke;for(Ae="A".charCodeAt(0),ke=10;ke<36;++ke)Oe[Ae++]=ke;C.prototype.rc=O,C.prototype.sc=N,C.prototype.reduce=_,C.prototype.nc=F,C.prototype.ic=L,M.prototype.rc=B,M.prototype.sc=x,M.prototype.reduce=U,M.prototype.nc=q,M.prototype.ic=H,r.prototype.Bu=u,r.prototype.Ou=c,r.prototype.Au=p,r.prototype._u=f,r.prototype.Vu=E,r.prototype.Gu=w,r.prototype.xu=I,r.prototype.Qu=S,r.prototype.Fu=b,r.prototype.Ju=R,r.prototype.zu=P,r.prototype.Yu=A,r.prototype.Xu=D,r.prototype.oc=V,r.prototype.exp=j,r.prototype.toString=d,r.prototype.Du=g,r.prototype.abs=y,r.prototype.ju=v,r.prototype.fc=T,r.prototype.Ku=k,r.prototype.pc=G,r.ZERO=l(0),r.ONE=l(1),/*! asn1-1.0.9.js (c) 2013-2015 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.Gl&&KJUR.Gl||(KJUR.Gl={}),KJUR.Gl.Ql=new function(){this.Yl=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.Kl=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var i=t.substr(1),n=i.length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var s="",o=0;o<n;o++)s+="f";var a=new r(s,16),h=a.Jl(e).add(r.ONE);t=h.toString(16).replace(/^-/,"")}return t},this.zl=function(e,t){var r=(KJUR.Gl,Ie.El.wl.parse(e)),i=Ie.El.Base64.stringify(r),n=i.replace(/(.{64})/g,"$1\r\n");return n=n.replace(/\r\n$/,""),"-----BEGIN "+t+"-----\r\n"+n+"\r\n-----END "+t+"-----\r\n"},this.Wl=function(e){var t=KJUR.Gl,r=Object.keys(e);if(1!=r.length)throw"key of param shall be only one.";var i=r[0];if(":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+i+":")==-1)throw"undefined key: "+i;if("bool"==i)return new t.Xl(e[i]);if("int"==i)return new t.$l(e[i]);if("bitstr"==i)return new t.Zl(e[i]);if("octstr"==i)return new t.ep(e[i]);if("null"==i)return new t.tp(e[i]);if("oid"==i)return new t.rp(e[i]);if("enum"==i)return new t.np(e[i]);if("utf8str"==i)return new t.sp(e[i]);if("numstr"==i)return new t.op(e[i]);if("prnstr"==i)return new t.ap(e[i]);if("telstr"==i)return new t.hp(e[i]);if("ia5str"==i)return new t.up(e[i]);if("utctime"==i)return new t.cp(e[i]);if("gentime"==i)return new t.lp(e[i]);if("seq"==i){for(var n=e[i],s=[],o=0;o<n.length;o++){var a=t.Ql.Wl(n[o]);s.push(a)}return new t.pp({fp:s})}if("set"==i){for(var n=e[i],s=[],o=0;o<n.length;o++){var a=t.Ql.Wl(n[o]);s.push(a)}return new t.dp({fp:s})}if("tag"==i){var h=e[i];if("[object Array]"===Object.prototype.toString.call(h)&&3==h.length){var u=t.Ql.Wl(h[2]);return new t.gp({tag:h[0],yp:h[1],vp:u})}var c={};if(void 0!==h.yp&&(c.yp=h.yp),void 0!==h.tag&&(c.tag=h.tag),void 0===h.vp)throw"obj shall be specified for 'tag'.";return c.vp=t.Ql.Wl(h.vp),new t.gp(c)}},this.mp=function(e){var t=this.Wl(e);return t.Tp()}},KJUR.Gl.Ql.Ep=function(e){for(var t="",i=parseInt(e.substr(0,2),16),n=Math.floor(i/40),s=i%40,t=n+"."+s,o="",a=2;a<e.length;a+=2){var h=parseInt(e.substr(a,2),16),u=("00000000"+h.toString(2)).slice(-8);if(o+=u.substr(1,7),"0"==u.substr(0,1)){var c=new r(o,2);t=t+"."+c.toString(10),o=""}}return t},KJUR.Gl.Ql.wp=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},i=function(e){var i="",n=new r(e,10),s=n.toString(2),o=7-s.length%7;7==o&&(o=0);for(var a="",h=0;h<o;h++)a+="0";s=a+s;for(var h=0;h<s.length-1;h+=7){var u=s.substr(h,7);h!=s.length-7&&(u="1"+u),i+=t(parseInt(u,2))}return i};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",s=e.split("."),o=40*parseInt(s[0])+parseInt(s[1]);n+=t(o),s.splice(0,2);for(var a=0;a<s.length;a++)n+=i(s[a]);return n},KJUR.Gl.Ip=function(){var e="";this.Sp=function(){if("undefined"==typeof this.bp||null==this.bp)throw"this.hV is null or undefined.";if(this.bp.length%2==1)throw"value hex must be even length: n="+e.length+",v="+this.bp;var t=this.bp.length/2,r=t.toString(16);if(r.length%2==1&&(r="0"+r),t<128)return r;var i=r.length/2;if(i>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);var n=128+i;return n.toString(16)+r},this.Tp=function(){return(null==this.Rp||this.Pp)&&(this.bp=this.Ap(),this.kp=this.Sp(),this.Rp=this.Cp+this.kp+this.bp,this.Pp=!1),this.Rp},this.Op=function(){return this.Tp(),this.bp},this.Ap=function(){return""}},KJUR.Gl.Np=function(e){KJUR.Gl.Np.al.constructor.call(this);this._p=function(){return this.ku},this.Fp=function(e){this.Rp=null,this.Pp=!0,this.ku=e,this.bp=stohex(this.ku)},this.Lp=function(e){this.Rp=null,this.Pp=!0,this.ku=null,this.bp=e},this.Ap=function(){return this.bp},"undefined"!=typeof e&&("string"==typeof e?this.Fp(e):"undefined"!=typeof e.str?this.Fp(e.str):"undefined"!=typeof e.Dp&&this.Lp(e.Dp))},we.lang.extend(KJUR.Gl.Np,KJUR.Gl.Ip),KJUR.Gl.Mp=function(e){KJUR.Gl.Mp.al.constructor.call(this);this.Bp=function(e){utc=e.getTime()+6e4*e.getTimezoneOffset();var t=new Date(utc);return t},this.xp=function(e,t,r){var i=this.Up,n=this.Bp(e),s=String(n.getFullYear());"utc"==t&&(s=s.substr(2,2));var o=i(String(n.getMonth()+1),2),a=i(String(n.getDate()),2),h=i(String(n.getHours()),2),u=i(String(n.getMinutes()),2),c=i(String(n.getSeconds()),2),l=s+o+a+h+u+c;if(r===!0){var p=n.getMilliseconds();if(0!=p){var f=i(String(p),3);f=f.replace(/[0]+$/,""),l=l+"."+f}}return l+"Z"},this.Up=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this._p=function(){return this.ku},this.Fp=function(e){this.Rp=null,this.Pp=!0,this.ku=e,this.bp=stohex(e)},this.Hp=function(e,t,r,i,n,s){var o=new Date(Date.UTC(e,t-1,r,i,n,s,0));this.qp(o)},this.Ap=function(){return this.bp}},we.lang.extend(KJUR.Gl.Mp,KJUR.Gl.Ip),KJUR.Gl.Vp=function(e){KJUR.Gl.Np.al.constructor.call(this);this.jp=function(e){this.Rp=null,this.Pp=!0,this.Gp=e},this.Qp=function(e){this.Rp=null,this.Pp=!0,this.Gp.push(e)},this.Gp=new Array,"undefined"!=typeof e&&"undefined"!=typeof e.fp&&(this.Gp=e.fp)},we.lang.extend(KJUR.Gl.Vp,KJUR.Gl.Ip),KJUR.Gl.Xl=function(){KJUR.Gl.Xl.al.constructor.call(this),this.Cp="01",this.Rp="0101ff"},we.lang.extend(KJUR.Gl.Xl,KJUR.Gl.Ip),KJUR.Gl.$l=function(e){KJUR.Gl.$l.al.constructor.call(this),this.Cp="02",this.Yp=function(e){this.Rp=null,this.Pp=!0,this.bp=KJUR.Gl.Ql.Kl(e)},this.Kp=function(e){var t=new r(String(e),10);this.Yp(t)},this.Jp=function(e){this.bp=e},this.Ap=function(){return this.bp},"undefined"!=typeof e&&("undefined"!=typeof e.bigint?this.Yp(e.bigint):"undefined"!=typeof e["int"]?this.Kp(e["int"]):"number"==typeof e?this.Kp(e):"undefined"!=typeof e.Dp&&this.Jp(e.Dp))},we.lang.extend(KJUR.Gl.$l,KJUR.Gl.Ip),KJUR.Gl.Zl=function(e){KJUR.Gl.Zl.al.constructor.call(this),this.Cp="03",this.zp=function(e){this.Rp=null,this.Pp=!0,this.bp=e},this.Wp=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var r="0"+e;this.Rp=null,this.Pp=!0,this.bp=r+t},this.Xp=function(e){e=e.replace(/0+$/,"");var t=8-e.length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";for(var i="",r=0;r<e.length-1;r+=8){var n=e.substr(r,8),s=parseInt(n,2).toString(16);1==s.length&&(s="0"+s),i+=s}this.Rp=null,this.Pp=!0,this.bp="0"+t+i},this.$p=function(e){for(var t="",r=0;r<e.length;r++)t+=1==e[r]?"1":"0";this.Xp(t)},this.Zp=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.Ap=function(){return this.bp},"undefined"!=typeof e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.zp(e):"undefined"!=typeof e.Dp?this.zp(e.Dp):"undefined"!=typeof e.bin?this.Xp(e.bin):"undefined"!=typeof e.fp&&this.$p(e.fp))},we.lang.extend(KJUR.Gl.Zl,KJUR.Gl.Ip),KJUR.Gl.ep=function(e){KJUR.Gl.ep.al.constructor.call(this,e),this.Cp="04"},we.lang.extend(KJUR.Gl.ep,KJUR.Gl.Np),KJUR.Gl.tp=function(){KJUR.Gl.tp.al.constructor.call(this),this.Cp="05",this.Rp="0500"},we.lang.extend(KJUR.Gl.tp,KJUR.Gl.Ip),KJUR.Gl.rp=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},i=function(e){var i="",n=new r(e,10),s=n.toString(2),o=7-s.length%7;7==o&&(o=0);for(var a="",h=0;h<o;h++)a+="0";s=a+s;for(var h=0;h<s.length-1;h+=7){var u=s.substr(h,7);h!=s.length-7&&(u="1"+u),i+=t(parseInt(u,2))}return i};KJUR.Gl.rp.al.constructor.call(this),this.Cp="06",this.Jp=function(e){this.Rp=null,this.Pp=!0,this.ku=null,this.bp=e},this.ef=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",n=e.split("."),s=40*parseInt(n[0])+parseInt(n[1]);r+=t(s),n.splice(0,2);for(var o=0;o<n.length;o++)r+=i(n[o]);this.Rp=null,this.Pp=!0,this.ku=null,this.bp=r},this.rf=function(e){if("undefined"==typeof KJUR.Gl.x509.if.name2oidList[e])throw"DERObjectIdentifier oidName undefined: "+e;var t=KJUR.Gl.x509.if.name2oidList[e];this.ef(t)},this.Ap=function(){return this.bp},"undefined"!=typeof e&&("string"==typeof e&&e.match(/^[0-2].[0-9.]+$/)?this.ef(e):void 0!==KJUR.Gl.x509.if.name2oidList[e]?this.ef(KJUR.Gl.x509.if.name2oidList[e]):"undefined"!=typeof e.oid?this.ef(e.oid):"undefined"!=typeof e.Dp?this.Jp(e.Dp):"undefined"!=typeof e.name&&this.rf(e.name))},we.lang.extend(KJUR.Gl.rp,KJUR.Gl.Ip),KJUR.Gl.np=function(e){KJUR.Gl.np.al.constructor.call(this),this.Cp="0a",this.Yp=function(e){this.Rp=null,this.Pp=!0,this.bp=KJUR.Gl.Ql.Kl(e)},this.Kp=function(e){var t=new r(String(e),10);this.Yp(t)},this.Jp=function(e){this.bp=e},this.Ap=function(){return this.bp},"undefined"!=typeof e&&("undefined"!=typeof e["int"]?this.Kp(e["int"]):"number"==typeof e?this.Kp(e):"undefined"!=typeof e.Dp&&this.Jp(e.Dp))},we.lang.extend(KJUR.Gl.np,KJUR.Gl.Ip),KJUR.Gl.sp=function(e){KJUR.Gl.sp.al.constructor.call(this,e),this.Cp="0c"},we.lang.extend(KJUR.Gl.sp,KJUR.Gl.Np),KJUR.Gl.op=function(e){KJUR.Gl.op.al.constructor.call(this,e),this.Cp="12"},we.lang.extend(KJUR.Gl.op,KJUR.Gl.Np),KJUR.Gl.ap=function(e){KJUR.Gl.ap.al.constructor.call(this,e),this.Cp="13"},we.lang.extend(KJUR.Gl.ap,KJUR.Gl.Np),KJUR.Gl.hp=function(e){KJUR.Gl.hp.al.constructor.call(this,e),this.Cp="14"},we.lang.extend(KJUR.Gl.hp,KJUR.Gl.Np),KJUR.Gl.up=function(e){KJUR.Gl.up.al.constructor.call(this,e),this.Cp="16"},we.lang.extend(KJUR.Gl.up,KJUR.Gl.Np),KJUR.Gl.cp=function(e){KJUR.Gl.cp.al.constructor.call(this,e),this.Cp="17",this.qp=function(e){this.Rp=null,this.Pp=!0,this.nf=e,this.ku=this.xp(this.nf,"utc"),this.bp=stohex(this.ku)},this.Ap=function(){return"undefined"==typeof this.nf&&"undefined"==typeof this.ku&&(this.nf=new Date,this.ku=this.xp(this.nf,"utc"),this.bp=stohex(this.ku)),this.bp},void 0!==e&&(void 0!==e.str?this.Fp(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.Fp(e):void 0!==e.Dp?this.Lp(e.Dp):void 0!==e.nf&&this.qp(e.nf))},we.lang.extend(KJUR.Gl.cp,KJUR.Gl.Mp),KJUR.Gl.lp=function(e){KJUR.Gl.lp.al.constructor.call(this,e),this.Cp="18",this.sf=!1,this.qp=function(e){this.Rp=null,this.Pp=!0,this.nf=e,this.ku=this.xp(this.nf,"gen",this.sf),this.bp=stohex(this.ku)},this.Ap=function(){return void 0===this.nf&&void 0===this.ku&&(this.nf=new Date,this.ku=this.xp(this.nf,"gen",this.sf),this.bp=stohex(this.ku)),this.bp},void 0!==e&&(void 0!==e.str?this.Fp(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.Fp(e):void 0!==e.Dp?this.Lp(e.Dp):void 0!==e.nf&&this.qp(e.nf),e.millis===!0&&(this.sf=!0))},we.lang.extend(KJUR.Gl.lp,KJUR.Gl.Mp),KJUR.Gl.pp=function(e){KJUR.Gl.pp.al.constructor.call(this,e),this.Cp="30",this.Ap=function(){for(var e="",t=0;t<this.Gp.length;t++){var r=this.Gp[t];e+=r.Tp()}return this.bp=e,this.bp}},we.lang.extend(KJUR.Gl.pp,KJUR.Gl.Vp),KJUR.Gl.dp=function(e){KJUR.Gl.dp.al.constructor.call(this,e),this.Cp="31",this.af=!0,this.Ap=function(){for(var e=new Array,t=0;t<this.Gp.length;t++){var r=this.Gp[t];e.push(r.Tp())}return 1==this.af&&e.sort(),this.bp=e.join(""),this.bp},"undefined"!=typeof e&&"undefined"!=typeof e.sortflag&&0==e.sortflag&&(this.af=!1)},we.lang.extend(KJUR.Gl.dp,KJUR.Gl.Vp),KJUR.Gl.gp=function(e){KJUR.Gl.gp.al.constructor.call(this),this.Cp="a0",this.bp="",this.hf=!0,this.uf=null,this.cf=function(e,t,r){this.Cp=t,this.hf=e,this.uf=r,this.hf?(this.bp=this.uf.Tp(),this.Rp=null,this.Pp=!0):(this.bp=null,this.Rp=r.Tp(),this.Rp=this.Rp.replace(/^../,t),this.Pp=!1)},this.Ap=function(){return this.bp},"undefined"!=typeof e&&("undefined"!=typeof e.tag&&(this.Cp=e.tag),"undefined"!=typeof e.yp&&(this.hf=e.yp),"undefined"!=typeof e.vp&&(this.uf=e.vp,this.cf(this.hf,this.Cp,this.uf)))},we.lang.extend(KJUR.Gl.gp,KJUR.Gl.Ip);/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */
var Ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_e="=";/*! crypto-1.1.8.js (c) 2013-2016 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.yc=new function(){this.Ic={sha1:"3021300906052b0e03021a05000414",lf:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",pf:"3041300d060960864801650304020205000430",ff:"3051300d060960864801650304020305000440",df:"3020300c06082a864886f70d020205000410",gf:"3020300c06082a864886f70d020505000410",yf:"3021300906052b2403020105000414"},this.vf={gf:"cryptojs",sha1:"cryptojs",lf:"cryptojs",sha256:"cryptojs",pf:"cryptojs",ff:"cryptojs",yf:"cryptojs",mf:"cryptojs",Tf:"cryptojs",Ef:"cryptojs",wf:"cryptojs",If:"cryptojs",Sf:"cryptojs",bf:"cryptojs",Rf:"cryptojs/jsrsa",Pf:"cryptojs/jsrsa",Af:"cryptojs/jsrsa",kf:"cryptojs/jsrsa",Cf:"cryptojs/jsrsa",Of:"cryptojs/jsrsa",Nf:"cryptojs/jsrsa",_f:"cryptojs/jsrsa",Ff:"cryptojs/jsrsa",Lf:"cryptojs/jsrsa",Df:"cryptojs/jsrsa",Mf:"cryptojs/jsrsa",Bf:"cryptojs/jsrsa",xf:"cryptojs/jsrsa",Uf:"cryptojs/jsrsa",Hf:"cryptojs/jsrsa",qf:"cryptojs/jsrsa",Vf:"cryptojs/jsrsa",jf:"cryptojs/jsrsa",Gf:"cryptojs/jsrsa",Qf:"cryptojs/jsrsa",Yf:"cryptojs/jsrsa",Kf:"cryptojs/jsrsa",Jf:"cryptojs/jsrsa"},this.zf={gf:Ie.Ul.ra,sha1:Ie.Ul.Vl,lf:Ie.Ul.SHA224,sha256:Ie.Ul.SHA256,pf:Ie.Ul.SHA384,ff:Ie.Ul.SHA512,yf:Ie.Ul.RIPEMD160},this.Wf=function(e,t){if("undefined"==typeof this.Ic[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.Ic[t]+e},this.mc=function(e,t,r){var i=this.Wf(e,t),n=r/4;if(i.length+22>n)throw"key is too short for SigAlg: keylen="+r+","+t;for(var s="0001",o="00"+i,a="",h=n-s.length-o.length,u=0;u<h;u+=2)a+="ff";var c=s+a+o;return c},this.gc=function(e,t){var r=new KJUR.crypto.Xf({$f:t});return r.Zf(e)},this.Tc=function(e,t){var r=new KJUR.crypto.Xf({$f:t});return r.ed(e)},this.sha1=function(e){var t=new KJUR.crypto.Xf({$f:"sha1",td:"cryptojs"});return t.Zf(e)},this.sha256=function(e){var t=new KJUR.crypto.Xf({$f:"sha256",td:"cryptojs"});return t.Zf(e)},this.rd=function(e){var t=new KJUR.crypto.Xf({$f:"sha256",td:"cryptojs"});return t.ed(e)},this.ff=function(e){var t=new KJUR.crypto.Xf({$f:"sha512",td:"cryptojs"});return t.Zf(e)},this.nd=function(e){var t=new KJUR.crypto.Xf({$f:"sha512",td:"cryptojs"});return t.ed(e)},this.gf=function(e){var t=new KJUR.crypto.Xf({$f:"md5",td:"cryptojs"});return t.Zf(e)},this.yf=function(e){var t=new KJUR.crypto.Xf({$f:"ripemd160",td:"cryptojs"});return t.Zf(e)},this.sd=function(e){}},KJUR.crypto.Xf=function(e){this.od=function(e,t){if(null!=e&&void 0===t&&(t=KJUR.crypto.yc.vf[e]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)!=-1&&"cryptojs"==t){try{this.ad=KJUR.crypto.yc.zf[e].create()}catch(r){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+r}this.hd=function(e){this.ad.update(e)},this.ud=function(e){var t=Ie.El.wl.parse(e);this.ad.update(t)},this.digest=function(){var e=this.ad.Dl();return e.toString(Ie.El.wl)},this.Zf=function(e){return this.hd(e),this.digest()},this.ed=function(e){return this.ud(e),this.digest()}}if(":sha256:".indexOf(e)!=-1&&"sjcl"==t){try{this.ad=new sjcl.hash.sha256}catch(r){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+r}this.hd=function(e){this.ad.update(e)},this.ud=function(e){var t=sjcl.codec.Dp.toBits(e);this.ad.update(t)},this.digest=function(){var e=this.ad.Dl();return sjcl.codec.Dp.ld(e)},this.Zf=function(e){return this.hd(e),this.digest()},this.ed=function(e){return this.ud(e),this.digest()}}},this.hd=function(e){throw"updateString(str) not supported for this alg/prov: "+this.pd+"/"+this.fd},this.ud=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.pd+"/"+this.fd},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.pd+"/"+this.fd},this.Zf=function(e){throw"digestString(str) not supported for this alg/prov: "+this.pd+"/"+this.fd},this.ed=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.pd+"/"+this.fd},void 0!==e&&void 0!==e.$f&&(this.pd=e.$f,void 0===e.td&&(this.fd=KJUR.crypto.yc.vf[this.pd]),this.od(this.pd,this.fd))},KJUR.crypto.dd=function(e){this.od=function(e,t){if(e=e.toLowerCase(),null==e&&(e="hmacsha1"),e=e.toLowerCase(),"hmac"!=e.substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=KJUR.crypto.yc.vf[e]),this.gd=e+"/"+t;var r=e.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)!=-1&&"cryptojs"==t){try{var i=KJUR.crypto.yc.zf[r];this.mac=Ie.Ul.HMAC.create(i,this.yd)}catch(n){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+n}this.hd=function(e){this.mac.update(e)},this.ud=function(e){var t=Ie.El.wl.parse(e);this.mac.update(t)},this.vd=function(){var e=this.mac.Dl();return e.toString(Ie.El.wl)},this.md=function(e){return this.hd(e),this.vd()},this.Td=function(e){return this.ud(e),this.vd()}}},this.hd=function(e){throw"updateString(str) not supported for this alg/prov: "+this.gd},this.ud=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.gd},this.vd=function(){throw"digest() not supported for this alg/prov: "+this.gd},this.md=function(e){throw"digestString(str) not supported for this alg/prov: "+this.gd},this.Td=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.gd},this.Ed=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=rstrtohex(e)),void(this.yd=Ie.El.wl.parse(t))}if("object"!=typeof e)throw"KJUR.crypto.Mac unsupported password type: "+e;var t=null;if(void 0!==e.Dp){if(e.Dp.length%2!=0||!e.Dp.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.Dp;t=e.Dp}if(void 0!==e.utf8&&(t=utf8tohex(e.utf8)),void 0!==e.rstr&&(t=rstrtohex(e.rstr)),void 0!==e.b64&&(t=Q(e.b64)),void 0!==e.b64u&&(t=b64utohex(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.yd=Ie.El.wl.parse(t)},void 0!==e&&(void 0!==e.yd&&this.Ed(e.yd),void 0!==e.$f&&(this.pd=e.$f,void 0===e.td&&(this.fd=KJUR.crypto.yc.vf[this.pd]),this.od(this.pd,this.fd)))},KJUR.crypto.Signature=function(e){var t=null;if(this.wd=function(){this.pd.match(/^(.+)with(.+)$/)&&(this.Id=RegExp.$1.toLowerCase(),this.Sd=RegExp.$2.toLowerCase())},this.bd=function(e,t){for(var r="",i=t/4-e.length,n=0;n<i;n++)r+="0";return r+e},this.od=function(e,t){if(this.wd(),"cryptojs/jsrsa"!=t)throw"provider not supported: "+t;if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.Id)!=-1){try{this.ad=new KJUR.crypto.Xf({$f:this.Id})}catch(r){throw"setAlgAndProvider hash alg set fail alg="+this.Id+"/"+r}this.init=function(e,t){var r=null;try{r=void 0===t?KEYUTIL.getKey(e):KEYUTIL.getKey(e,t)}catch(i){throw"init failed:"+i}if(r.isPrivate===!0)this.Rd=r,this.state="SIGN";else{if(r.lc!==!0)throw"init failed.:"+r;this.Pd=r,this.state="VERIFY"}},this.Ad=function(e){"string"==typeof e.kd&&"string"==typeof e.Cd?(this.kd=e.kd,this.Cd=e.Cd):this.Rd=e,this.state="SIGN"},this.Od=function(e){"string"==typeof e.Nd&&"string"==typeof e.Cd?(this.Nd=e.Nd,this.Cd=e.Cd):e instanceof KJUR.crypto.ECDSA?this.Pd=e:e instanceof X&&(this.Pd=e),this.state="VERIFY"},this._d=function(e){var t=new X509;t.readCertPEM(e),this.Pd=t.Fd,this.state="VERIFY"},this.hd=function(e){this.ad.hd(e)},this.ud=function(e){this.ad.ud(e)},this.sign=function(){if(this.Ld=this.ad.digest(),"undefined"!=typeof this.kd&&"undefined"!=typeof this.Cd){var e=new KJUR.crypto.ECDSA({curve:this.Cd});this.Dd=e.Md(this.Ld,this.kd)}else if(this.Rd instanceof X&&"rsaandmgf1"==this.Sd)this.Dd=this.Rd.Ec(this.Ld,this.Id,this.Bd);else if(this.Rd instanceof X&&"rsa"==this.Sd)this.Dd=this.Rd.vc(this.Ld,this.Id);else if(this.Rd instanceof KJUR.crypto.ECDSA)this.Dd=this.Rd.vc(this.Ld);else{if(!(this.Rd instanceof KJUR.crypto.DSA))throw"Signature: unsupported public key alg: "+this.Sd;this.Dd=this.Rd.vc(this.Ld)}return this.Dd},this.xd=function(e){return this.hd(e),this.sign()},this.Md=function(e){return this.ud(e),this.sign()},this.verify=function(e){if(this.Ld=this.ad.digest(),"undefined"!=typeof this.Nd&&"undefined"!=typeof this.Cd){var t=new KJUR.crypto.ECDSA({curve:this.Cd});return t.verifyHex(this.Ld,e,this.Nd)}if(this.Pd instanceof X&&"rsaandmgf1"==this.Sd)return this.Pd.Sc(this.Ld,e,this.Id,this.Bd);if(this.Pd instanceof X&&"rsa"==this.Sd)return this.Pd.Ud(this.Ld,e);if(this.Pd instanceof KJUR.crypto.ECDSA)return this.Pd.Ud(this.Ld,e);if(this.Pd instanceof KJUR.crypto.DSA)return this.Pd.Ud(this.Ld,e);throw"Signature: unsupported public key alg: "+this.Sd}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.Hd},this.Od=function(e){throw"initVerifyByPublicKey(rsaPubKeyy) not supported for this alg:prov="+this.Hd},this._d=function(e){throw"initVerifyByCertificatePEM(certPEM) not supported for this alg:prov="+this.Hd},this.Ad=function(e){throw"initSign(prvKey) not supported for this alg:prov="+this.Hd},this.hd=function(e){throw"updateString(str) not supported for this alg:prov="+this.Hd},this.ud=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.Hd},this.sign=function(){throw"sign() not supported for this alg:prov="+this.Hd},this.xd=function(e){throw"digestString(str) not supported for this alg:prov="+this.Hd},this.Md=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.Hd},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.Hd},this.qd=e,void 0!==e&&(void 0!==e.$f&&(this.pd=e.$f,void 0===e.td?this.fd=KJUR.crypto.yc.vf[this.pd]:this.fd=e.td,this.Hd=this.pd+":"+this.fd,this.od(this.pd,this.fd),this.wd()),void 0!==e.Vd&&(this.Bd=e.Vd),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{var t=new X;t.readPrivateKeyFromPEMString(e.prvkeypem),this.Ad(t)}catch(r){throw"fatal error to load pem private key: "+r}}},KJUR.crypto.if=new function(){this.jd={Gd:"rsaEncryption",Qd:"ecPublicKey",Yd:"dsa",Kd:"secp256r1",Jd:"secp192k1",zd:"secp224r1",Wd:"secp256k1",Xd:"secp521r1",$d:"secp384r1",Zd:"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var Fe=20;X.prototype.dc=Z,X.prototype.wc=$,X.prototype.encrypt=ee,X.prototype.eg=te,X.prototype.type="RSA";/*! rsasign-1.2.7.js (c) 2012 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
var Le=new RegExp("");Le.compile("[^0-9a-f]","gi"),X.prototype.vc=ne,X.prototype.xd=ie,X.prototype.tg=se,X.prototype.rg=oe,X.prototype.sign=ie,X.prototype.ig=se,X.prototype.ng=oe,X.prototype.Ec=ue,X.prototype.sg=he,X.prototype.og=he,X.ag=-1,X.hg=-2,X.prototype.Ud=ye,X.prototype.ug=ge,X.prototype.cg=de,X.prototype.verify=ge,X.prototype.lg=de,X.prototype.Sc=me,X.prototype.pg=ve,X.prototype.fg=ve,X.dg=-2,t.gg=r,t.yg=X,t.Signature=KJUR.crypto.Signature,t.Xf=KJUR.crypto.Xf,t.Po=Ie,t.vg=Q,t.mg=Y},function(e,t){"use strict";function r(){if(this.Tg)return this.Tg;var e=window&&window.window?window.window.Eg:void 0;if("undefined"!=typeof e&&e.log&&e.debug&&e.info&&e.warn&&e.error&&(this.Tg=e),!this.Tg){var t=!("undefined"==typeof window.console),r=t?console.log.bind(console):function(){};this.Tg={log:r,debug:t&&window.console.debug?window.console.debug.bind(console):r,info:t&&window.console.info?window.console.info.bind(console):r,warn:t&&window.console.warn?window.console.warn.bind(console):r,error:t&&window.console.error?window.console.error.bind(console):r}}return this.Tg}t.P="[HiveServices] ";var i=function(){function e(){}return e}();i.wg=250,t.ct=i;var n=function(){function e(e,t,r){this.msgId=t,this.service=e,this.msg=r}return e.prototype.Ig=function(){var e=new Uint8Array([this.service>>8,255&this.service]),t=new Uint8Array([this.msgId]),r=[e,t,this.msg];return new Blob(r,{type:"application/octet-binary"})},e.Sg=function(t){var r=(String.fromCharCode.apply(null,new Uint8Array(t)),String.fromCharCode.apply(null,new Uint8Array(t.slice(3)))),i=new Uint8Array(t.slice(0,2)),n=new Uint8Array(t.slice(2,3)),s=(i[0]<<8)+i[1];return new e(s,n[0],r)},e}();t.pu=n,t.R=r},function(e,t,r){"use strict";var i,n=r(1),s=r(8);!function(e){e[e.bg=0]="UPPER_LAYER",e[e.Rg=1]="CDN",e[e.Pg=2]="CDN_PREFETCH",e[e.Ag=3]="CDN_COMPENSATION",e[e.va=4]="P2P",e[e.kg=5]="P2P_PREFETCH"}(i=t.Cg||(t.Cg={}));var o=function(){function e(){this.Og=!1,this.Ng=!1,this._g=0,this.Fg=0,this.Lg=0,this.Dg=0,this.p2pAgenTrafficSuccessQt=0,this.Mg=0,this.srcOtherRespQt=0,this.Bg=0,this.xg=0,this.Ug=0,this.Hg=0,this.qg=0}return e}();t.Vg=o;var a=function(){function e(e,t,r,i,s){this.jg=!1,this.type=void 0,this.Gg=new o,this.Qg=!1,this.Yg=!1,this.responseHeaders="",this.Kg=new ArrayBuffer(0),this.Jg=0,this.type=r,this.zg=e,this.Wg=t,this.Xg=s,this.$g=i,this.Gg.Bg=n.Framework.time()}return e.prototype.Zg=function(){return this.type},e.prototype.ey=function(){return this.$g.ey()},e.prototype.ty=function(){return this.$g.ty()},e.prototype.iy=function(){return this.ty()+"-"+this.Wg},e.prototype.ny=function(){return this.$g.sy()},e.prototype.oy=function(){return this.$g.ay()},e.prototype.loaded=function(){this.hy=n.Framework.time()},e.prototype.uy=function(){return this.hy?Math.max(1,this.hy-this.Gg.Ug):Math.max(1,this.Gg.Hg-this.Gg.Ug)},e.prototype.ly=function(){return this.hy?Math.max(1,this.hy-this.Gg.xg):Math.max(1,this.Gg.Hg-this.Gg.xg)},e.prototype.py=function(){return 0!=this.Gg.Dg?(new s.gs.es).Yn(this.uy(),this.Gg.Dg):(new s.gs.es).Yn(this.ly(),this.Gg.Fg)},e}();t.gy=a},function(e,t){"use strict";var r;!function(e){function t(e){return n[e]}var r=function(){function e(){}return e}();e.HiveSession=r;var i;!function(e){e[e.yy=0]="GENERIC_ERROR",e[e.vy=1]="NO_TECH_AVAILABLE",e[e.my=2]="NO_TECH_RESOLVED",e[e.Ty=3]="TECH_ERROR",e[e.se=4]="TICKET_ERROR"}(i=e.h||(e.h={}));var n;!function(e){e[e["Ey"]=0]="Generic Undefined Error",e[e["wy"]=1]="No Tech available to resolve the ticket",e[e["Iy"]=2]="No available Tech could resolved the ticket",e[e["Sy"]=3]="Stopped resolving session on last tech onError",e[e["by"]=4]="The ticket could not be resolved"}(n||(n={}));var s=function(){function e(){}return e}();e.HiveSessionError=s;var o=function(){function e(e,t){this.code=e,this.message=t}return e}();e.HiveTechError=o;var a;!function(e){e[e.Ry=0]="NOT_READY",e[e.Py=1]="PLUGIN_ERROR",e[e.Ay=2]="SESSION_ERROR",e[e.se=3]="TICKET_ERROR",e[e.ky=4]="VERSION_ERROR",e[e.Cy=5]="TIMEOUT_ERROR"}(a=e.Oy||(e.Oy={}));var h;!function(e){e[e.J=0]="OK",e[e.$=1]="HIVE_NOT_ALLOWED",e[e.X=2]="TICKET_NOT_RESOLVED",e[e.L=3]="TIMEOUT_RESOLVING_TICKET"}(h=e.v||(e.v={})),e.getHiveSessionErrorMessage=t;var u=function(){function e(e){this.Ny=e}return e.prototype.getPluginStatusCode=function(){return this.Ny.q()},e}();e._y=u}(r=t.u||(t.u={})),"undefined"!=typeof window&&("undefined"==typeof window.u&&(window.u={}),window.u.getHiveSessionErrorMessage=r.getHiveSessionErrorMessage)},function(e,t,r){"use strict";var i=r(143),n=r(14),s=r(61);if("undefined"==typeof o)var o="592835a6b4204dd197c00488610003e0";if("undefined"==typeof a)var a="0.8";if("undefined"==typeof h)var h=!0;var u=function(){function e(){if(this.Ge=!1,e.ao)throw new Error("Error: Instantiation failed: Use AtatusLogger.getInstance() instead of new.");var t,r=void 0!=n.HiveConfig.ErrorMonitor.key?n.HiveConfig.ErrorMonitor.key:o,i=1==n.HiveConfig.ErrorMonitor.enabledRUM,a=1==n.HiveConfig.ErrorMonitor.enableKeyCombination,u=1==n.HiveConfig.ErrorMonitor.enabledErrorFilter;u&&(t=this.Fy()),atatus&&(void 0==n.HiveConfig.ErrorMonitor.enabled&&h||void 0!=n.HiveConfig.ErrorMonitor.enabled&&1==n.HiveConfig.ErrorMonitor.enabled)&&(atatus.config(r,{enableSourcemap:!0,disableRUM:!i,version:s.version,beforeErrorSend:function(e){var r=!1;if(e&&e.customData&&"undefined"!=typeof e.customData.forceSend&&(r=e.customData.forceSend,delete e.customData.forceSend,0===Object.keys(e.customData).length&&(e.customData=null)),!u||r)return!0;if(!t)return!1;try{var i=!1;if(e.backTraces){for(var n=0,s=e.backTraces;n<s.length;n++){var o=s[n],a=o.f.indexOf(t)>-1;if(a&&o.ln>5){i=!0;break}}i&&(e.name=e.name.replace(/%s \[[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]+] /,""),e.name.indexOf("Status Code Error:")>=0&&(e.tags=["Plugin Error Code",e.name.split(":")[1].trim()]))}return i}catch(h){return!1}}}).install(),a&&this.Ly(),this.Ge=!0,window.console&&console.log("[HiveComm] Error Monitor installed [RUM:"+i+", KeyHandler:"+a+"]"),u&&!t&&this.Z("Could not extract error filter"))}return e.ee=function(){return void 0===this.ao&&(this.ao=new e),this.ao},e.prototype.Ly=function(){i.My.ee().Dy([16,17,88],function(){try{throw new Error("Upload console logs")}catch(e){atatus.notify(e),window.console&&console.log("[HiveComm] console log uploaded for debugging")}})},e.prototype.Fy=function(){try{throw new Error("test")}catch(e){var t=e.stack.match(/(\/\/.*\.js)/i);if(t&&t.length>0)return t[0]}},e.prototype.setUser=function(e){atatus&&this.Ge&&atatus.setUser(e)},e.prototype.By=function(e){this.R=e},e.prototype.setCustomData=function(e){atatus&&this.Ge&&atatus.setCustomData(e)},e.prototype.Z=function(e,t){if(this.R&&this.R.warn(e),atatus&&this.Ge)try{throw new Error(e)}catch(r){t||(t={}),t.forceSend=!0,atatus.notify(r,t)}},e.prototype.setTags=function(e){atatus&&this.Ge&&atatus.setTags(e)},e.prototype.notify=function(e,t){atatus&&this.Ge&&(t||(t={}),t.forceSend=!0,atatus.notify(e,t))},e}();t.ErrorMonitor=u},function(e,t,r){var n,s;(function(e){/**
	 * @license ByteBuffer.js (c) 2013-2014 Daniel Wirtz <dcode@dcode.io>
	 * This version of ByteBuffer.js uses an ArrayBuffer as its backing buffer which is accessed through a DataView and is
	 * compatible with modern browsers.
	 * Released under the Apache License, Version 2.0
	 * see: https://github.com/dcodeIO/ByteBuffer.js for details
	 */
!function(o){"use strict";function a(e){function t(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function r(){var e=[],t=[];return function(){return 0===arguments.length?t.join("")+a.apply(String,e):(e.length+arguments.length>1024&&(t.push(a.apply(String,e)),e.length=0),void Array.prototype.push.apply(e,arguments))}}var n=function(e,t,r){if("undefined"==typeof e&&(e=n.xy),"undefined"==typeof t&&(t=n.Uy),"undefined"==typeof r&&(r=n.Hy),!r){if(e=0|e,e<0)throw RangeError("Illegal capacity");t=!!t,r=!!r}this.buffer=0===e?o:new ArrayBuffer(e),this.view=0===e?null:new DataView(this.buffer),this.offset=0,this.qy=-1,this.Vy=e,this.jy="undefined"!=typeof t&&!!t,this.Gy=!!r};n.VERSION="3.5.5",n.Qy=!0,n.Yy=!1,n.xy=16,n.Uy=n.Yy,n.Hy=!1,n.Ky=e||null;var s=n.prototype,o=new ArrayBuffer(0),a=String.fromCharCode;n.Jy=function(e,t,r){return new n(e,t,r)},n.concat=function(e,t,r,i){"boolean"!=typeof t&&"string"==typeof t||(i=r,r=t,t=void 0);for(var s,o=0,a=0,h=e.length;a<h;++a)n.zy(e[a])||(e[a]=n.wrap(e[a],t)),s=e[a].Vy-e[a].offset,s>0&&(o+=s);if(0===o)return new n(0,r,i);var u,c=new n(o,r,i),l=new Uint8Array(c.buffer);for(a=0;a<h;)u=e[a++],s=u.Vy-u.offset,s<=0||(l.set(new Uint8Array(u.buffer).subarray(u.offset,u.Vy),c.offset),c.offset+=s);return c.Vy=c.offset,c.offset=0,c},n.zy=function(e){return(e&&e instanceof n)===!0},n.type=function(){return ArrayBuffer},n.wrap=function(e,t,r,o){if("string"!=typeof t&&(o=r,r=t,t=void 0),"string"==typeof e)switch("undefined"==typeof t&&(t="utf8"),t){case"base64":return n.Wy(e,r);case"hex":return n.Xy(e,r);case"binary":return n.$y(e,r);case"utf8":return n.Zy(e,r);case"debug":return n.ev(e,r);default:throw Error("Unsupported encoding: "+t)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var a;if(n.zy(e))return a=s.clone.call(e),a.qy=-1,a;if(e instanceof Uint8Array)a=new n(0,r,o),e.length>0&&(a.buffer=e.buffer,a.offset=e.byteOffset,a.Vy=e.byteOffset+e.length,a.view=e.length>0?new DataView(e.buffer):null);else if(e instanceof ArrayBuffer)a=new n(0,r,o),e.byteLength>0&&(a.buffer=e,a.offset=0,a.Vy=e.byteLength,a.view=e.byteLength>0?new DataView(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");for(a=new n(e.length,r,o),a.Vy=e.length,i=0;i<e.length;++i)a.view.setUint8(i,e[i])}return a},s.tv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=1,this.view.setInt8(t,e),r&&(this.offset+=1),this},s.rv=s.tv,s.nv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=this.view.getInt8(e);return t&&(this.offset+=1),r},s.sv=s.nv,s.ov=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=1,this.view.setUint8(t,e),r&&(this.offset+=1),this},s.av=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=this.view.getUint8(e);return t&&(this.offset+=1),r},s.hv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=2,this.view.setInt16(t,e,this.jy),r&&(this.offset+=2),this},s.uv=s.hv,s.cv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=this.view.getInt16(e,this.jy);return t&&(this.offset+=2),r},s.lv=s.cv,s.pv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=2,this.view.setUint16(t,e,this.jy),r&&(this.offset+=2),this},s.fv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=this.view.getUint16(e,this.jy);return t&&(this.offset+=2),r},s.dv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setInt32(t,e,this.jy),r&&(this.offset+=4),this},s.ia=s.dv,s.gv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getInt32(e,this.jy);return t&&(this.offset+=4),r},s.ua=s.gv,s.yv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setUint32(t,e,this.jy),r&&(this.offset+=4),this},s.vv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getUint32(e,this.jy);return t&&(this.offset+=4),r},e&&(s.mv=function(t,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("number"==typeof t)t=e.Pu(t);else if("string"==typeof t)t=e.Au(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.Pu(t):"string"==typeof t&&(t=e.Au(t)),r+=8;var n=this.buffer.byteLength;return r>n&&this.resize((n*=2)>r?n:r),r-=8,this.jy?(this.view.setInt32(r,t.low,!0),this.view.setInt32(r+4,t.high,!0)):(this.view.setInt32(r,t.high,!1),this.view.setInt32(r+4,t.low,!1)),i&&(this.offset+=8),this},s.Tv=s.mv,s.Ev=function(t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.jy?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),(!1)):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),(!1));return r&&(this.offset+=8),i},s.wv=s.Ev,s.Iv=function(t,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("number"==typeof t)t=e.Pu(t);else if("string"==typeof t)t=e.Au(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.Pu(t):"string"==typeof t&&(t=e.Au(t)),r+=8;var n=this.buffer.byteLength;return r>n&&this.resize((n*=2)>r?n:r),r-=8,this.jy?(this.view.setInt32(r,t.low,!0),this.view.setInt32(r+4,t.high,!0)):(this.view.setInt32(r,t.high,!1),this.view.setInt32(r+4,t.low,!1)),i&&(this.offset+=8),this},s.Sv=function(t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.jy?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),(!0)):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),(!0));return r&&(this.offset+=8),i}),s.bv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setFloat32(t,e,this.jy),r&&(this.offset+=4),this},s.Rv=s.bv,s.Pv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getFloat32(e,this.jy);return t&&(this.offset+=4),r},s.Av=s.Pv,s.kv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=8,this.view.setFloat64(t,e,this.jy),r&&(this.offset+=8),this},s.Cv=s.kv,s.Ov=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var r=this.view.getFloat64(e,this.jy);return t&&(this.offset+=8),r},s.Nv=s.Ov,n._v=5,n.Fv=function(e){return e>>>=0,e<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},n.Lv=function(e){return((e|=0)<<1^e>>31)>>>0},n.Dv=function(e){return e>>>1^-(1&e)|0},s.Mv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var i,s=n.Fv(e);t+=s;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=s,this.view.setUint8(t,i=128|e),e>>>=0,e>=128?(i=e>>7|128,this.view.setUint8(t+1,i),e>=16384?(i=e>>14|128,this.view.setUint8(t+2,i),e>=1<<21?(i=e>>21|128,this.view.setUint8(t+3,i),e>=1<<28?(this.view.setUint8(t+4,e>>28&15),s=5):(this.view.setUint8(t+3,127&i),s=4)):(this.view.setUint8(t+2,127&i),s=3)):(this.view.setUint8(t+1,127&i),s=2)):(this.view.setUint8(t,127&i),s=1),r?(this.offset+=s,this):s},s.Bv=function(e,t){return this.Mv(n.Lv(e),t)},s.xv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r,i,n=0,s=0;do{if(i=e+n,!this.Gy&&i>this.Vy){var o=Error("Truncated");throw o.Uv=!0,o}r=this.view.getUint8(i),n<5&&(s|=(127&r)<<7*n>>>0),++n}while(128===(128&r));return s=0|s,t?(this.offset+=n,s):{value:s,length:n}},s.Hv=function(e){var t=this.xv(e);return"object"==typeof t?t.value=n.Dv(t.value):t=n.Dv(t),t},e&&(n.qv=10,n.Vv=function(t){"number"==typeof t?t=e.Pu(t):"string"==typeof t&&(t=e.Au(t));var r=t.jv()>>>0,i=t.Gv(28).jv()>>>0,n=t.Gv(56).jv()>>>0;return 0==n?0==i?r<16384?r<128?1:2:r<1<<21?3:4:i<16384?i<128?5:6:i<1<<21?7:8:n<128?9:10},n.Qv=function(t){return"number"==typeof t?t=e.Pu(t,!1):"string"==typeof t?t=e.Au(t,!1):t.Yv!==!1&&(t=t.Kv()),t.shiftLeft(1).Jl(t.zv(63)).Jv()},n.Wv=function(t){return"number"==typeof t?t=e.Pu(t,!1):"string"==typeof t?t=e.Au(t,!1):t.Yv!==!1&&(t=t.Kv()),t.Gv(1).Jl(t.Xv(e.ONE).Kv().Du()).Kv()},s.$v=function(t,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("number"==typeof t)t=e.Pu(t);else if("string"==typeof t)t=e.Au(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.Pu(t,!1):"string"==typeof t?t=e.Au(t,!1):t.Yv!==!1&&(t=t.Kv());var s=n.Vv(t),o=t.jv()>>>0,a=t.Gv(28).jv()>>>0,h=t.Gv(56).jv()>>>0;r+=s;var u=this.buffer.byteLength;switch(r>u&&this.resize((u*=2)>r?u:r),r-=s,s){case 10:this.view.setUint8(r+9,h>>>7&1);case 9:this.view.setUint8(r+8,9!==s?128|h:127&h);case 8:this.view.setUint8(r+7,8!==s?a>>>21|128:a>>>21&127);case 7:this.view.setUint8(r+6,7!==s?a>>>14|128:a>>>14&127);case 6:this.view.setUint8(r+5,6!==s?a>>>7|128:a>>>7&127);case 5:this.view.setUint8(r+4,5!==s?128|a:127&a);case 4:this.view.setUint8(r+3,4!==s?o>>>21|128:o>>>21&127);case 3:this.view.setUint8(r+2,3!==s?o>>>14|128:o>>>14&127);case 2:this.view.setUint8(r+1,2!==s?o>>>7|128:o>>>7&127);case 1:this.view.setUint8(r,1!==s?128|o:127&o)}return i?(this.offset+=s,this):s},s.Zv=function(e,t){return this.$v(n.Qv(e),t)},s.em=function(t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=t,n=0,s=0,o=0,a=0;if(a=this.view.getUint8(t++),n=127&a,128&a&&(a=this.view.getUint8(t++),n|=(127&a)<<7,128&a&&(a=this.view.getUint8(t++),n|=(127&a)<<14,128&a&&(a=this.view.getUint8(t++),n|=(127&a)<<21,128&a&&(a=this.view.getUint8(t++),s=127&a,128&a&&(a=this.view.getUint8(t++),s|=(127&a)<<7,128&a&&(a=this.view.getUint8(t++),s|=(127&a)<<14,128&a&&(a=this.view.getUint8(t++),s|=(127&a)<<21,128&a&&(a=this.view.getUint8(t++),o=127&a,128&a&&(a=this.view.getUint8(t++),o|=(127&a)<<7,128&a))))))))))throw Error("Buffer overrun");var h=e.ld(n|s<<28,s>>>4|o<<24,!1);return r?(this.offset=t,h):{value:h,length:t-i}},s.tm=function(t){var r=this.em(t);return r&&r.value instanceof e?r.value=n.Wv(r.value):r=n.Wv(r),r}),s.na=function(e,r){var i="undefined"==typeof r;i&&(r=this.offset);var n,s=e.length;if(!this.Gy){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(n=0;n<s;++n)if(0===e.charCodeAt(n))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}s=u.rm(t(e))[1],r+=s+1;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=s+1,u.im(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),this.view.setUint8(r++,0),i?(this.offset=r,this):s},s.la=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i,n=e,s=-1;return u.nm(function(){if(0===s)return null;if(e>=this.Vy)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.Vy);return 0===(s=this.view.getUint8(e++))?null:s}.bind(this),i=r(),!0),t?(this.offset=e,i()):{string:i(),length:e-n}},s.sm=function(e,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var n,s=r;n=u.rm(t(e),this.Gy)[1],r+=4+n;var o=this.buffer.byteLength;if(r>o&&this.resize((o*=2)>r?o:r),r-=4+n,this.view.setUint32(r,n,this.jy),r+=4,u.im(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),r!==s+4+n)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+4+n));return i?(this.offset=r,this):r-s},s.om=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var i,n=0,s=e;n=this.view.getUint32(e,this.jy),e+=4;var o,a=e+n;return u.nm(function(){return e<a?this.view.getUint8(e++):null}.bind(this),o=r(),this.Gy),i=o(),t?(this.offset=e,i):{string:i,length:e-s}},n.am="c",n.hm="b",s.um=function(e,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var n,s=r;n=u.rm(t(e))[1],r+=n;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=n,u.im(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),i?(this.offset=r,this):r-s},s.cm=s.um,n.lm=function(e){return u.rm(t(e))[0]},n.pm=function(e){return u.rm(t(e))[1]},s.fm=function(e,t,i){"number"==typeof t&&(i=t,t=void 0);var s="undefined"==typeof i;if(s&&(i=this.offset),"undefined"==typeof t&&(t=n.am),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,a=0,h=i;if(t===n.am){if(o=r(),u.dm(function(){return a<e&&i<this.Vy?this.view.getUint8(i++):null}.bind(this),function(e){++a,u.gm(e,o)}.bind(this)),a!==e)throw RangeError("Illegal range: Truncated data, "+a+" == "+e);return s?(this.offset=i,o()):{string:o(),length:i-h}}if(t===n.hm){if(!this.Gy){if("number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+e+") <= "+this.buffer.byteLength)}var c=i+e;if(u.nm(function(){return i<c?this.view.getUint8(i++):null}.bind(this),o=r(),this.Gy),i!==c)throw RangeError("Illegal range: Truncated data, "+i+" == "+c);return s?(this.offset=i,o()):{string:o(),length:i-h}}throw TypeError("Unsupported metrics: "+t)},s.ym=s.fm,s.vm=function(e,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var s,o,a=r;s=u.rm(t(e),this.Gy)[1],o=n.Fv(s),r+=o+s;var h=this.buffer.byteLength;if(r>h&&this.resize((h*=2)>r?h:r),r-=o+s,r+=this.Mv(s,r),u.im(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),r!==a+s+o)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+s+o));return i?(this.offset=r,this):r-a},s.mm=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i,n=this.xv(e),s=e;e+=n.length,n=n.value;var o=e+n,a=r();return u.nm(function(){return e<o?this.view.getUint8(e++):null}.bind(this),a,this.Gy),i=a(),t?(this.offset=e,i):{string:i,length:e-s}},s.append=function(e,t,r){"number"!=typeof t&&"string"==typeof t||(r=t,t=void 0);var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof n||(e=n.wrap(e,t));var s=e.Vy-e.offset;if(s<=0)return this;r+=s;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=s,new Uint8Array(this.buffer,r).set(new Uint8Array(e.buffer).subarray(e.offset,e.Vy)),e.offset+=s,i&&(this.offset+=s),this},s.Tm=function(e,t){return e.append(this,t),this},s.assert=function(e){return this.Gy=!e,this},s.Em=function(){return this.buffer.byteLength},s.clear=function(){return this.offset=0,this.Vy=this.buffer.byteLength,this.qy=-1,this},s.clone=function(e){var t=new n(0,this.jy,this.Gy);if(e){var r=new ArrayBuffer(this.buffer.byteLength);new Uint8Array(r).set(this.buffer),t.buffer=r,t.view=new DataView(r)}else t.buffer=this.buffer,t.view=this.view;return t.offset=this.offset,t.qy=this.qy,t.Vy=this.Vy,t},s.compact=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var r=t-e;if(0===r)return this.buffer=o,this.view=null,this.qy>=0&&(this.qy-=e),this.offset=0,this.Vy=0,this;var i=new ArrayBuffer(r);return new Uint8Array(i).set(new Uint8Array(this.buffer).subarray(e,t)),this.buffer=i,this.view=new DataView(i),this.qy>=0&&(this.qy-=e),this.offset=0,this.Vy=r,this},s.wm=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return new n(0,this.jy,this.Gy);var r=t-e,i=new n(r,this.jy,this.Gy);return i.offset=0,i.Vy=r,i.qy>=0&&(i.qy-=e),this.Bu(i,0,e,t),i},s.Bu=function(e,t,r,i){var s,o;if(!this.Gy&&!n.zy(e))throw TypeError("Illegal target: Not a ByteBuffer");if(t=(o="undefined"==typeof t)?e.offset:0|t,r=(s="undefined"==typeof r)?this.offset:0|r,i="undefined"==typeof i?this.Vy:0|i,t<0||t>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+t+" <= "+e.buffer.byteLength);if(r<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.byteLength);var a=i-r;return 0===a?e:(e.Im(t+a),new Uint8Array(e.buffer).set(new Uint8Array(this.buffer).subarray(r,i),t),s&&(this.offset+=a),o&&(e.offset+=a),this)},s.Im=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},s.fill=function(e,t,r){var i="undefined"==typeof t;if(i&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),"undefined"==typeof t&&(t=this.offset),"undefined"==typeof r&&(r=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!==0)throw TypeError("Illegal end: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(t>=r)return this;for(;t<r;)this.view.setUint8(t++,e);return i&&(this.offset=t),this},s.sa=function(){return this.Vy=this.offset,this.offset=0,this},s.mark=function(e){if(e="undefined"==typeof e?this.offset:e,!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.qy=e,this},s.order=function(e){if(!this.Gy&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.jy=!!e,this},s.Sm=function(e){return this.jy="undefined"==typeof e||!!e,this},s.bm=function(e){return this.jy="undefined"!=typeof e&&!e,this},s.Rm=function(e,t,r){"number"!=typeof t&&"string"==typeof t||(r=t,t=void 0);var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof n||(e=n.wrap(e,t));var s=e.Vy-e.offset;if(s<=0)return this;var o,a=s-r;if(a>0){var h=new ArrayBuffer(this.buffer.byteLength+a);o=new Uint8Array(h),o.set(new Uint8Array(this.buffer).subarray(r,this.buffer.byteLength),s),this.buffer=h,this.view=new DataView(h),this.offset+=a,this.qy>=0&&(this.qy+=a),this.Vy+=a,r+=a}else o=new Uint8Array(this.buffer);return o.set(new Uint8Array(e.buffer).subarray(e.offset,e.Vy),r-s),e.offset=e.Vy,i&&(this.offset-=s),this},s.Pm=function(e,t){return e.Rm(this,t),this},s.Am=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.km(!0))},s.Cm=function(){return this.Vy-this.offset},s.reset=function(){return this.qy>=0?(this.offset=this.qy,this.qy=-1):this.offset=0,this},s.resize=function(e){if(!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if(e|=0,e<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t,this.view=new DataView(t)}return this},s.reverse=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(e,t)),this.view=new DataView(this.buffer),this)},s.Om=function(e){if(!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.Gy&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},s.slice=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var r=this.clone();return r.offset=e,r.Vy=t,r},s.Nm=function(e){var t=this.offset,r=this.Vy;if(t>r){var i=t;t=r,r=i}if(!this.Gy){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!==0)throw TypeError("Illegal limit: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(!e&&0===t&&r===this.buffer.byteLength)return this.buffer;if(t===r)return o;var n=new ArrayBuffer(r-t);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(t,r),0),n},s.Zo=s.Nm,s.toString=function(e,t,r){if("undefined"==typeof e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.qy+",limit="+this.Vy+",capacity="+this.Em()+")";switch("number"==typeof e&&(e="utf8",t=e,r=t),e){case"utf8":return this._m(t,r);case"base64":return this.Fm(t,r);case"hex":return this.Lm(t,r);case"binary":return this.Dm(t,r);case"debug":return this.km();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var h=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[],i=0,n=t.length;i<n;++i)r[t[i]]=i;return e.encode=function(e,r){for(var i,n;null!==(i=e());)r(t[i>>2&63]),n=(3&i)<<4,null!==(i=e())?(n|=i>>4&15,r(t[63&(n|i>>4&15)]),n=(15&i)<<2,null!==(i=e())?(r(t[63&(n|i>>6&3)]),r(t[63&i])):(r(t[63&n]),r(61))):(r(t[63&n]),r(61),r(61))},e.decode=function(e,t){function i(e){throw Error("Illegal character code: "+e)}for(var n,s,o;null!==(n=e());)if(s=r[n],"undefined"==typeof s&&i(n),null!==(n=e())&&(o=r[n],"undefined"==typeof o&&i(n),t(s<<2>>>0|(48&o)>>4),null!==(n=e()))){if(s=r[n],"undefined"==typeof s){if(61===n)break;i(n)}if(t((15&o)<<4>>>0|(60&s)>>2),null!==(n=e())){if(o=r[n],"undefined"==typeof o){if(61===n)break;i(n)}t((3&s)<<6>>>0|o)}}},e.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)},e}();s.Fm=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i;return h.encode(function(){return e<t?this.view.getUint8(e++):null}.bind(this),i=r()),i()},n.Wy=function(e,r,i){if(!i){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%4!==0)throw TypeError("Illegal str: Length not a multiple of 4")}var s=new n(e.length/4*3,r,i),o=0;return h.decode(t(e),function(e){s.view.setUint8(o++,e)}),s.Vy=o,s},n.btoa=function(e){return n.$y(e).Fm()},n.atob=function(e){return n.Wy(e).Dm()},s.Dm=function(e,t){if(e="undefined"==typeof e?this.offset:e,t="undefined"==typeof t?this.Vy:t,!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");
if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return"";for(var r=[],i=[];e<t;)r.push(this.view.getUint8(e++)),r.length>=1024&&(i.push(String.fromCharCode.apply(String,r)),r=[]);return i.join("")+String.fromCharCode.apply(String,r)},n.$y=function(e,t,r){if(!r&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");for(var i,s=0,o=e.length,a=new n(o,t,r);s<o;){if(i=e.charCodeAt(s),!r&&i>255)throw RangeError("Illegal charCode at "+s+": 0 <= "+i+" <= 255");a.view.setUint8(s++,i)}return a.Vy=o,a},s.km=function(e){for(var t,r=-1,i=this.buffer.byteLength,n="",s="",o="";r<i;){if(r!==-1&&(t=this.view.getUint8(r),n+=t<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(s+=t>32&&t<127?String.fromCharCode(t):".")),++r,e&&r>0&&r%16===0&&r!==i){for(;n.length<51;)n+=" ";o+=n+s+"\n",n=s=""}n+=r===this.offset&&r===this.Vy?r===this.qy?"!":"|":r===this.offset?r===this.qy?"[":"<":r===this.Vy?r===this.qy?"]":">":r===this.qy?"'":e||0!==r&&r!==i?" ":""}if(e&&" "!==n){for(;n.length<51;)n+=" ";o+=n+s+"\n"}return e?o:n},n.ev=function(e,t,r){for(var i,s,o=e.length,a=new n((o+1)/3|0,t,r),h=0,u=0,c=!1,l=!1,p=!1,f=!1,d=!1;h<o;){switch(i=e.charAt(h++)){case"!":if(!r){if(l||p||f){d=!0;break}l=p=f=!0}a.offset=a.qy=a.Vy=u,c=!1;break;case"|":if(!r){if(l||f){d=!0;break}l=f=!0}a.offset=a.Vy=u,c=!1;break;case"[":if(!r){if(l||p){d=!0;break}l=p=!0}a.offset=a.qy=u,c=!1;break;case"<":if(!r){if(l){d=!0;break}l=!0}a.offset=u,c=!1;break;case"]":if(!r){if(f||p){d=!0;break}f=p=!0}a.Vy=a.qy=u,c=!1;break;case">":if(!r){if(f){d=!0;break}f=!0}a.Vy=u,c=!1;break;case"'":if(!r){if(p){d=!0;break}p=!0}a.qy=u,c=!1;break;case" ":c=!1;break;default:if(!r&&c){d=!0;break}if(s=parseInt(i+e.charAt(h++),16),!r&&(isNaN(s)||s<0||s>255))throw TypeError("Illegal str: Not a debug encoded string");a.view.setUint8(u++,s),c=!0}if(d)throw TypeError("Illegal str: Invalid symbol at "+h)}if(!r){if(!l||!f)throw TypeError("Illegal str: Missing offset or limit");if(u<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+u+" < "+o)}return a},s.Lm=function(e,t){if(e="undefined"==typeof e?this.offset:e,t="undefined"==typeof t?this.Vy:t,!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var r,i=new Array(t-e);e<t;)r=this.view.getUint8(e++),r<16?i.push("0",r.toString(16)):i.push(r.toString(16));return i.join("")},n.Xy=function(e,t,r){if(!r){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var i,s=e.length,o=new n(s/2|0,t),a=0,h=0;a<s;a+=2){if(i=parseInt(e.substring(a,a+2),16),!r&&(!isFinite(i)||i<0||i>255))throw TypeError("Illegal str: Contains non-hex characters");o.view.setUint8(h++,i)}return o.Vy=h,o};var u=function(){var e={};return e.Mm=1114111,e.Bm=function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<128?t(127&r):r<2048?(t(r>>6&31|192),t(63&r|128)):r<65536?(t(r>>12&15|224),t(r>>6&63|128),t(63&r|128)):(t(r>>18&7|240),t(r>>12&63|128),t(r>>6&63|128),t(63&r|128)),r=null},e.dm=function(e,t){for(var r,i,n,s,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(r=e());)if(0===(128&r))t(r);else if(192===(224&r))null===(i=e())&&o([r,i]),t((31&r)<<6|63&i);else if(224===(240&r))(null===(i=e())||null===(n=e()))&&o([r,i,n]),t((15&r)<<12|(63&i)<<6|63&n);else{if(240!==(248&r))throw RangeError("Illegal starting byte: "+r);(null===(i=e())||null===(n=e())||null===(s=e()))&&o([r,i,n,s]),t((7&r)<<18|(63&i)<<12|(63&n)<<6|63&s)}},e.xm=function(e,t){for(var r,i=null;;){if(null===(r=null!==i?i:e()))break;r>=55296&&r<=57343&&null!==(i=e())&&i>=56320&&i<=57343?(t(1024*(r-55296)+i-56320+65536),i=null):t(r)}null!==i&&t(i)},e.gm=function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<=65535?t(r):(r-=65536,t((r>>10)+55296),t(r%1024+56320)),r=null},e.im=function(t,r){e.xm(t,function(t){e.Bm(t,r)})},e.nm=function(t,r){e.dm(t,function(t){e.gm(t,r)})},e.Um=function(e){return e<128?1:e<2048?2:e<65536?3:4},e.Hm=function(t){for(var r,i=0;null!==(r=t());)i+=e.Um(r);return i},e.rm=function(t){var r=0,i=0;return e.xm(t,function(t){++r,i+=e.Um(t)}),[r,i]},e}();return s._m=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i;try{u.nm(function(){return e<t?this.view.getUint8(e++):null}.bind(this),i=r())}catch(n){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return i()},n.Zy=function(e,r,i){if(!i&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var s=new n(u.rm(t(e),!0)[1],r,i),o=0;return u.im(t(e),function(e){s.view.setUint8(o++,e)}),s.Vy=o,s},n}"object"==typeof e&&e&&"object"==typeof t&&t?e.i=function(){var e;try{e=r(49)}catch(t){}return a(e)}():r(27).amd?(n=[r(48)],s=function(e){return a(e)}.apply(t,n),!(void 0!==s&&(e.i=s))):(o.Vm=o.Vm||{}).qm=a(o.Vm.Ky)}(this)}).call(t,r(28)(e))},function(module,exports,__webpack_require__){var Thrift={jm:"0.9.2",Type:{STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17},Gm:{CALL:1,REPLY:2,EXCEPTION:3,ONEWAY:4},Qm:function(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&t++;return t},Ym:function(e,t,r){function i(){}i.prototype=t.prototype,e.prototype=new i,e.prototype.name=r||""}};Thrift.Km=function(e){this.message=e},Thrift.Ym(Thrift.Km,Error,"TException"),Thrift.Km.prototype.Jm=function(){return this.message},Thrift.zm={Wm:0,Xm:1,$m:2,Zm:3,eT:4,tT:5,rT:6,iT:7,nT:8,sT:9,oT:10},Thrift.aT=function(e,t){this.message=e,this.code="number"==typeof t?t:0},Thrift.Ym(Thrift.aT,Thrift.Km,"TApplicationException"),Thrift.aT.prototype.read=function(e){for(;;){var t=e.hT();if(t.ftype==Thrift.Type.STOP)break;var r=t.fid;switch(r){case 1:t.ftype==Thrift.Type.STRING?(t=e.ym(),this.message=t.value):t=e.Om(t.ftype);break;case 2:t.ftype==Thrift.Type.I32?(t=e.uT(),this.code=t.value):t=e.Om(t.ftype);break;default:t=e.Om(t.ftype)}e.cT()}e.lT()},Thrift.aT.prototype.write=function(e){e.pT("TApplicationException"),this.message&&(e.fT("message",Thrift.Type.STRING,1),e.cm(this.Jm()),e.dT()),this.code&&(e.fT("type",Thrift.Type.I32,2),e.gT(this.code),e.dT()),e.yT(),e.vT()},Thrift.aT.prototype.mT=function(){return this.code},Thrift.Ui=Thrift.TT=function(e,t){this.url=e,this.ET=0,this.wT=0,this.IT=t&&t.IT,this.ST="",this.bT=""},Thrift.TT.prototype={RT:function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(r){}throw"Your browser doesn't support XHR."},flush:function(e,t){var r=this;if(e&&!t||void 0===this.url||""===this.url)return this.ST;var i=this.RT();if(i.overrideMimeType&&i.overrideMimeType("application/json"),t&&(i.onreadystatechange=function(){var e=t;return function(){4==this.readyState&&200==this.status&&(r.PT(this.responseText),e())}}()),i.open("POST",this.url,!!e),i.send(this.ST),!e||!t){if(4!=i.readyState)throw"encountered an unknown ajax ready state: "+i.readyState;if(200!=i.status)throw"encountered a unknown request status: "+i.status;this.bT=i.responseText,this.AT=this.bT.length,this.ET=this.bT.length,this.wT=0}},kT:function(e,t,r,i){if("undefined"==typeof jQuery||"undefined"==typeof jQuery.Deferred)throw"Thrift.js requires jQuery 1.5+ to use asynchronous requests";var n=this,s=jQuery.ajax({url:this.url,data:t,type:"POST",CT:!1,contentType:"application/json",OT:"text thrift",NT:{_T:function(t){n.PT(t);var r=i.call(e);return r}},context:e,success:jQuery.makeArray(r).pop()});return s},PT:function(e){this.bT=e,this.AT=this.bT.length,this.ET=this.bT.length,this.wT=0},isOpen:function(){return!0},open:function(){},close:function(){},read:function(e){var t=this.ET-this.wT;if(0===t)return"";var r=e;t<e&&(r=t);var i=this.read_buf.substr(this.wT,r);return this.wT+=r,i},FT:function(){return this.bT},write:function(e){this.ST=e},LT:function(){return this.ST}},Thrift.DT=function(e){this.MT(e)},Thrift.DT.prototype={MT:function(e){this.url=e,this.BT=null,this.callbacks=[],this.xT=[],this.ST="",this.bT="",this.UT=0,this.HT=0},flush:function(e,t){var r=this;this.isOpen()?(this.BT.send(this.ST),this.callbacks.push(function(){var e=t;return function(t){r.PT(t),e()}}())):this.xT.push({qT:this.ST,VT:t})},jT:function(){var e=this;this.xT.length>0&&(this.xT.forEach(function(t){this.BT.send(t.qT),this.callbacks.push(function(){var r=t.VT;return function(t){e.PT(t),r()}}())}),this.xT=[])},GT:function(e){this.MT(this.url)},QT:function(e){this.callbacks.length&&this.callbacks.shift()(e.data)},YT:function(e){console.log("Thrift WebSocket Error: "+e.toString()),this.BT.close()},PT:function(e){this.bT=e,this.AT=this.bT.length,this.ET=this.bT.length,this.wT=0},isOpen:function(){return this.BT&&this.BT.readyState==this.BT.OPEN},open:function(){this.BT&&this.BT.readyState!=this.BT.CLOSED||(this.BT=new WebSocket(this.url),this.BT.onopen=this.jT.bind(this),this.BT.onmessage=this.QT.bind(this),this.BT.onerror=this.YT.bind(this),this.BT.onclose=this.GT.bind(this))},close:function(){this.BT.close()},read:function(e){var t=this.ET-this.wT;if(0===t)return"";var r=e;t<e&&(r=t);var i=this.read_buf.substr(this.wT,r);return this.wT+=r,i},FT:function(){return this.bT},write:function(e){this.ST=e},LT:function(){return this.ST}},Thrift.KT=Thrift.JT=function(e){this.Do=e},Thrift.JT.Type={},Thrift.JT.Type[Thrift.Type.BOOL]='"tf"',Thrift.JT.Type[Thrift.Type.BYTE]='"i8"',Thrift.JT.Type[Thrift.Type.I16]='"i16"',Thrift.JT.Type[Thrift.Type.I32]='"i32"',Thrift.JT.Type[Thrift.Type.I64]='"i64"',Thrift.JT.Type[Thrift.Type.DOUBLE]='"dbl"',Thrift.JT.Type[Thrift.Type.STRUCT]='"rec"',Thrift.JT.Type[Thrift.Type.STRING]='"str"',Thrift.JT.Type[Thrift.Type.MAP]='"map"',Thrift.JT.Type[Thrift.Type.LIST]='"lst"',Thrift.JT.Type[Thrift.Type.SET]='"set"',Thrift.JT.zT={},Thrift.JT.zT.tf=Thrift.Type.BOOL,Thrift.JT.zT.i8=Thrift.Type.BYTE,Thrift.JT.zT.i16=Thrift.Type.I16,Thrift.JT.zT.i32=Thrift.Type.I32,Thrift.JT.zT.i64=Thrift.Type.I64,Thrift.JT.zT.dbl=Thrift.Type.DOUBLE,Thrift.JT.zT.rec=Thrift.Type.STRUCT,Thrift.JT.zT.str=Thrift.Type.STRING,Thrift.JT.zT.map=Thrift.Type.MAP,Thrift.JT.zT.lst=Thrift.Type.LIST,Thrift.JT.zT.set=Thrift.Type.SET,Thrift.JT.jm=1,Thrift.JT.prototype={WT:function(){return this.Do},XT:function(e,t,r){this.$T=[],this.ZT=[],this.$T.push([Thrift.JT.jm,'"'+e+'"',t,r])},eE:function(){var e=this.$T.pop();this.tE=this.$T.pop(),this.tE.push(e),this.rE="["+this.tE.join(",")+"]",this.Do.write(this.rE)},pT:function(e){this.ZT.push(this.$T.length),this.$T.push({})},vT:function(){var e=this.ZT.pop(),t=this.$T[e],r="{",i=!0;for(var n in t)i?i=!1:r+=",",r+=n+":"+t[n];r+="}",this.$T[e]=r},fT:function(e,t,r){this.ZT.push(this.$T.length),this.$T.push({iE:'"'+r+'"',nE:Thrift.JT.Type[t]})},dT:function(){var e=this.$T.pop(),t=this.$T.pop();this.$T[this.$T.length-1][t.iE]="{"+t.nE+":"+e+"}",this.ZT.pop()},yT:function(){},sE:function(e,t,r){this.ZT.push(this.$T.length),this.$T.push([Thrift.JT.Type[e],Thrift.JT.Type[t],0])},oE:function(){var e=this.ZT.pop();if(e!=this.$T.length){(this.$T.length-e-1)%2!==0&&this.$T.push("");var t=(this.$T.length-e-1)/2;this.$T[e][this.$T[e].length-1]=t;for(var r="}",i=!0;this.$T.length>e+1;){var n=this.$T.pop(),s=this.$T.pop();i?i=!1:r=","+r,isNaN(s)||(s='"'+s+'"'),r=s+":"+n+r}r="{"+r,this.$T[e].push(r),this.$T[e]="["+this.$T[e].join(",")+"]"}},aE:function(e,t){this.ZT.push(this.$T.length),this.$T.push([Thrift.JT.Type[e],t])},hE:function(){for(var e=this.ZT.pop();this.$T.length>e+1;){var t=this.$T[e+1];this.$T.splice(e+1,1),this.$T[e].push(t)}this.$T[e]="["+this.$T[e].join(",")+"]"},uE:function(e,t){this.ZT.push(this.$T.length),this.$T.push([Thrift.JT.Type[e],t])},cE:function(){for(var e=this.ZT.pop();this.$T.length>e+1;){var t=this.$T[e+1];this.$T.splice(e+1,1),this.$T[e].push(t)}this.$T[e]="["+this.$T[e].join(",")+"]"},lE:function(e){this.$T.push(e?1:0)},rv:function(e){this.$T.push(e)},pE:function(e){this.$T.push(e)},gT:function(e){this.$T.push(e)},fE:function(e){this.$T.push(e)},Cv:function(e){this.$T.push(e)},cm:function(e){if(null===e)this.$T.push(null);else{for(var t="",r=0;r<e.length;r++){var i=e.charAt(r);t+='"'===i?'\\"':"\\"===i?"\\\\":"\b"===i?"\\b":"\f"===i?"\\f":"\n"===i?"\\n":"\r"===i?"\\r":"\t"===i?"\\t":i}this.$T.push('"'+t+'"')}},dE:function(e){this.cm(e)},gE:function(){this.yE=[],this.wT=[],"undefined"!=typeof JSON&&"function"==typeof JSON.parse?this.vE=JSON.parse(this.Do.FT()):"undefined"!=typeof jQuery?this.vE=jQuery.parseJSON(this.Do.FT()):this.vE=eval(this.Do.FT());var r={},version=this.vE.shift();if(version!=Thrift.JT.jm)throw"Wrong thrift protocol version: "+version;return r.fname=this.vE.shift(),r.mE=this.vE.shift(),r.TE=this.vE.shift(),this.yE.push(this.vE.shift()),r},EE:function(){},wE:function(e){var t={};return t.fname="",this.yE[this.yE.length-1]instanceof Array&&this.yE.push(this.yE[this.yE.length-1].shift()),t},lT:function(){this.yE[this.yE.length-2]instanceof Array&&this.yE.pop()},hT:function(){var e={},t=-1,r=Thrift.Type.STOP;for(var i in this.yE[this.yE.length-1])if(null!==i){t=parseInt(i,10),this.wT.push(this.yE.length);var n=this.yE[this.yE.length-1][t];delete this.yE[this.yE.length-1][t],this.yE.push(n);break}if(t!=-1)for(var s in this.yE[this.yE.length-1])null!==Thrift.JT.zT[s]&&(r=Thrift.JT.zT[s],this.yE[this.yE.length-1]=this.yE[this.yE.length-1][s]);return e.fname="",e.ftype=r,e.fid=t,e},cT:function(){for(var e=this.wT.pop();this.yE.length>e;)this.yE.pop()},IE:function(){var e=this.yE.pop(),t=e.shift();t instanceof Array&&(this.yE.push(e),e=t,t=e.shift());var r={};return r.SE=Thrift.JT.zT[t],r.bE=Thrift.JT.zT[e.shift()],r.size=e.shift(),this.wT.push(this.yE.length),this.yE.push(e.shift()),r},RE:function(){this.cT()},PE:function(){var e=this.yE[this.yE.length-1],t={};return t.AE=Thrift.JT.zT[e.shift()],t.size=e.shift(),this.wT.push(this.yE.length),this.yE.push(e),t},kE:function(){this.cT()},CE:function(e,t){return this.PE(e,t)},OE:function(){return this.kE()},NE:function(){var e=this.uT();return null!==e&&"1"==e.value?e.value=!0:e.value=!1,e},sv:function(){return this.uT()},_E:function(){return this.uT()},uT:function(e){void 0===e&&(e=this.yE[this.yE.length-1]);var t={};if(e instanceof Array)0===e.length?t.value=void 0:t.value=e.shift();else if(e instanceof Object){for(var r in e)if(null!==r){this.yE.push(e[r]),delete e[r],t.value=r;break}}else t.value=e,this.yE.pop();return t},FE:function(){return this.uT()},Nv:function(){return this.uT()},ym:function(){var e=this.uT();return e},LE:function(){return this.ym()},Om:function(e){var t,r;switch(e){case Thrift.Type.STOP:return null;case Thrift.Type.BOOL:return this.NE();case Thrift.Type.BYTE:return this.sv();case Thrift.Type.I16:return this._E();case Thrift.Type.I32:return this.uT();case Thrift.Type.I64:return this.FE();case Thrift.Type.DOUBLE:return this.Nv();case Thrift.Type.STRING:return this.ym();case Thrift.Type.STRUCT:for(this.wE();;){if(t=this.hT(),t.ftype==Thrift.Type.STOP)break;this.Om(t.ftype),this.cT()}return this.lT(),null;case Thrift.Type.MAP:for(t=this.IE(),r=0;r<t.size;r++)r>0&&this.yE.length>this.wT[this.wT.length-1]+1&&this.yE.pop(),this.Om(t.SE),this.Om(t.bE);return this.RE(),null;case Thrift.Type.SET:for(t=this.CE(),r=0;r<t.size;r++)this.Om(t.AE);return this.OE(),null;case Thrift.Type.LIST:for(t=this.PE(),r=0;r<t.size;r++)this.Om(t.AE);return this.kE(),null}}},Thrift.DE=function(e,t,r,i){Thrift.JT.call(this,t,r,i),this.ME=e},Thrift.Ym(Thrift.DE,Thrift.JT,"multiplexProtocol"),Thrift.DE.prototype.XT=function(e,t,r){t===Thrift.Gm.CALL||t===Thrift.Gm.ONEWAY?Thrift.JT.prototype.XT.call(this,this.ME+":"+e,t,r):Thrift.JT.prototype.XT.call(this,e,t,r)},Thrift.BE=function(){this.xE=0},Thrift.BE.prototype.UE=function(e,t,r){t.La&&(t=t.La);var i=this;t.prototype.HE=function(){return i.xE+=1,i.xE};var n=new t(new Thrift.DE(e,r));return n},module.i=Thrift},function(e,t){"use strict";var r;!function(e){var t=function(){function e(){}return e}();t.DashFilterBitrates=null,t.DashRemoveBitrateSize=!1,e.Dash=t;var r=function(){function e(){}return e}();e.Stats=r;var i=function(){function e(){}return e}();i.usiz=null,e.UDPBroadcast=i}(r=t.HiveConfig||(t.HiveConfig={})),"undefined"!=typeof window&&("undefined"==typeof window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.Dash=r.Dash,window.HiveConfig.Stats=r.Stats,window.HiveConfig.UDPBroadcast=r.UDPBroadcast)},function(e,t,r){"use strict";var i=r(50),n=function(){function e(e){this.readyState=3,this.internal=!1,this.status=0,e&&(this.sessionId=e)}return e.register=function(t,r){e.qE[t]=r},e.prototype.VE=function(t){this.sessionId||(this.sessionId=e.qE[t])},e.prototype.open=function(e,t,r,i){this.url=t.trim(),this.method=e,this.type=i,this.sync=r},e.prototype.onload=function(){},e.prototype.onloadend=function(e){},e.prototype.onerror=function(e){},e.prototype.onprogress=function(e){},e.prototype.onreadystatechange=function(e){},e.prototype.getAllResponseHeaders=function(){return this.responseHeaders},e.prototype.setRequestHeader=function(e,t){},e.prototype.getResponseHeader=function(e){var t=this.getAllResponseHeaders();if(t){var r=[],i=t.split("\n");return i.forEach(function(e){var t=e.split(":");r[t[0]]=t[1]}),r[e]}},e.prototype.send=function(){if(!this.sessionId){var t=Object.keys(e.qE);t.length>0&&(this.sessionId=e.qE[t[0]])}i.GE.Api().jE(this,this.sessionId)},e.prototype.abort=function(){i.GE.Api().abort(this,this.sessionId)},e}();n.qE={},t.HiveRequest=n},function(e,t){"use strict";var r;!function(e){if("undefined"==typeof t)var t=!1;e.QE=t;var r=function(){function e(){}return e}();r.YE="wss://bee.hivestreaming.com:443/v1/hivejs",r.KE="wss://bee-test.hivestreaming.com:443/v1/hivejs",r.JE={iceServers:[{url:"stun:stun.hivestreaming.com:3678"}]},r.zE=3e4,r.ou=3e5,r.iu=8e4,r.WE=3e4,r.XE=100,r.$E=1e4,e.nu=r}(r=t.su||(t.su={}))},function(e,t){e.i=function(){return new Function}},function(e,t){e.i=function(e){return e.ZE||(e.ew=function(){},e.tw=[],e.children=[],e.ZE=1),e}},function(e,t,r){var i,i;!function(t){e.i=t()}(function(){return function e(t,r,n){function s(a,h){if(!r[a]){if(!t[a]){var u="function"==typeof i&&i;if(!h&&u)return i(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={i:{}};t[a][0].call(l.i,function(e){var r=t[a][1][e];return s(r?r:e)},l,l.i,e,t,r,n)}return r[a].i}for(var o="function"==typeof i&&i,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t,r){var i=e("./kernel");r.ht=i.ht;var n=e("./type_binding");r.rw=n.rw;var s=e("./type_binding_scope");r.iw=s.iw},{"./kernel":2,"./type_binding":4,"./type_binding_scope":5}],2:[function(e,t,r){var i=e("./type_binding_scope"),n=e("./lookup"),s=function(){function e(){this.nw=new n.sw}return e.prototype.bind=function(e){this.nw.add(e.ow,e)},e.prototype.aw=function(e){try{this.nw.remove(e)}catch(t){throw new Error("Could not resolve service "+e)}},e.prototype.at=function(){this.nw=new n.sw},e.prototype.resolve=function(e){var t;if(!this.nw.hw(e))return null;t=this.nw.get(e);var r=t[0];if(r.scope===i.iw.uw&&null!==r.CT)return r.CT;var n=this.cw(r.lw);return r.CT=n,n},e.prototype.pw=function(e){var t,r,i,n,s,o;return s=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,o=/([^\s,]+)/g,t=e.toString().replace(s,""),r=t.indexOf("(")+1,i=t.indexOf(")"),n="function"==typeof Map&&-1!==t.indexOf("class")&&-1===t.indexOf("constructor")?null:t.slice(r,i).match(o),null===n&&(n=[]),n},e.prototype.cw=function(e){var t=this.pw(e);if(0===t.length)return new e;for(var r=[],i=null,n=0;n<t.length;n++){var s=t[n];i=this.resolve(s),r.push(i)}return this.fw(e,r)},e.prototype.fw=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(t)))},e}();r.ht=s},{"./lookup":3,"./type_binding_scope":5}],3:[function(e,t,r){var i=function(){function e(e,t){this.key=e,this.value=new Array,this.value.push(t)}return e}(),n=function(){function e(){this.dw=new Array}return e.prototype.gw=function(e){for(var t=-1,r=0;r<this.dw.length;r++){var i=this.dw[r];i.key===e&&(t=r)}return t},e.prototype.add=function(e,t){if(null===e||void 0===e)throw new Error("Argument Null");if(null===t||void 0===t)throw new Error("Argument Null");var r=this.gw(e);if(-1!==r){var n=this.dw[r];n.key===e&&n.value.push(t)}else this.dw.push(new i(e,t))},e.prototype.get=function(e){if(null===e||void 0===e)throw new Error("Argument Null");var t=this.gw(e);if(-1===t)throw new Error("Key Not Found");var r=this.dw[t];return r.key===e?r.value:void 0},e.prototype.remove=function(e){if(null===e||void 0===e)throw new Error("Argument Null");var t=this.gw(e);if(-1===t)throw new Error("Key Not Found");this.dw.splice(t,1)},e.prototype.hw=function(e){if(null===e||void 0===e)throw new Error("Argument Null");var t=this.gw(e);return-1!==t},e}();r.sw=n},{}],4:[function(e,t,r){var i=e("./type_binding_scope"),n=function(){function e(e,t,r){if(this.ow=e,this.lw=t,this.CT=null,"undefined"==typeof r)this.scope=i.iw.yw;else{if(!i.iw[r]){var n="Invalid scope type "+r;throw new Error(n)}this.scope=r}}return e}();r.rw=n},{"./type_binding_scope":5}],5:[function(e,t,r){var i;!function(e){e[e.yw=0]="Transient",e[e.uw=1]="Singleton"}(i||(i={})),r.iw=i},{}]},{},[1])(1)})},function(e,t,r){"use strict";var i=r(9),n=r(17),s=n.Po,o=function(){function e(e,t,r,i,n,o,a){this.url=e,this.vw=r,this.mw=t,this.Tw=i,this.duration=n,this.bitrate=o,this.Ew=a;var h=this.url.replace("http://",""),u=s.Vl(h).toString(s.El.wl);this.ww=u+"-"+this.Tw+"-"+this.bitrate}return e.prototype.ey=function(){return this.mw},e.prototype.Iw=function(){return this.Tw},e.prototype.Sw=function(){return this.duration},e.prototype.bw=function(){return this.bitrate},e.prototype.ay=function(){return this.Ew},e.prototype.Rw=function(){return this.vw},e.prototype.ty=function(){return this.ww},e.prototype.sy=function(){return this.url},e.prototype.toString=function(){return i.Es[this.ey()]+"-"+this.ty()},e}();t.Pw=o},function(e,t,r){"use strict";var i,n=r(2),s=n.Bt,o=n.Ze,a=r(19),h=r(1),u=r(4),c=r(9),l=r(25),p=r(6);!function(e){e[e.Aw=0]="SITE",e[e.kw=1]="LAN",e[e.Cw=2]="PLAYER"}(i=t.Ow||(t.Ow={}));var f=function(){function e(){this.Nw=!1,this.mw=null,this._w=-1,this.Fw=0}return e}();t.Lw=f;var d=function(){function e(){this.P="[Prefetcher] ",this.Dw=new o,this.Mw=new o}return e.prototype.init=function(e){this.R=h.Framework.resolve(h.Framework.Tt.rt).log(e.sessionId),this.Bw=e.xw,this.Uw=e.Uw,this.Hw=e.Hw,this.CT=e.CT,this.qw=e.qw,this.Vw=e.Vw,this.jw=e.jw,this.Gw=e.Gw},e.prototype.Qw=function(e,t){this.context=e,this.Yw=t,this.jw.Qw(t)},e.prototype.Kw=function(e){return this.Mw.has(e)},e.prototype.Jw=function(){return this.Yw},e.prototype.zw=function(e,t,r){var n=this,a=new s;this.Mw.forEach(function(e,t){a.add(t)});var h=new s;if(h.addEach(e.keys()),this.Yw.Ww()){var u=this.Yw.Ww().bitrate;if(h.add(u),h.forEach(function(e){a["delete"](e)}),r){var c=[];a.forEach(function(e){n.Mw.has(e)&&n.Mw.get(e).Xw==i.Aw&&(c.push(e),h.add(e))}),c.forEach(function(e){a["delete"](e)})}var l=new o;h.forEach(function(t){n.Mw.has(t)&&n.Mw.get(t).Xw==i.Aw?l.set(t,i.Aw):l.set(t,e.get(t))}),this.$w(a),this.Zw(l,t)}},e.prototype.Zw=function(e,t){var r=this;e.forEach(function(e,i){0!=i&&r.eI(i,e,t)})},e.prototype.$w=function(e){var t=this;e.forEach(function(e){t.R.debug(t.P+"Remove unwanted bitrate "+e),t.Mw["delete"](e)})},e.prototype.eI=function(e,t,r){this.Mw.has(e)?this.tI(e,r):this.Mw.has(e)||this.rI(e,t,r)},e.prototype.tI=function(e,t){var r=this.Mw.get(e);r.type=t,r.type!=i.Aw&&(r._w=-1)},e.prototype.rI=function(e,t,r){var n=this,s=new f;s.mw=null,s.type=r,s.bitrate=e,s.Xw=t,this.Mw.set(e,s),this.Mw.forEach(function(e,t){n.R.debug(n.P+"ABT "+t+" S "+i[e.type]+" PREF REASON "+i[e.Xw])})},e.prototype.iI=function(e){var t=this;if(this.Mw.has(e.bw())){var r=this.Mw.get(e.bw());r._w>0&&r.nI&&(r._w=e.duration-(h.Framework.time()-r.nI)-r.Fw,r.Fw=50),r.mw=e,this.sI(e.bw()),this.Mw.forEach(function(r,n){r&&r.type!=i.Cw&&n!=e.bw()&&t.oI(r,n)})}else{this.R.debug(this.P+"Fragment "+e.ty()+" triggered prefetch with unknown bitrate. Check logs. This should not happen.");var n=i.Cw;this.Mw.forEach(function(e,t){n=e.type}),this.eI(e.bitrate,i.Cw,n),this.Mw.forEach(function(r,n){r&&r.type!=i.Cw&&n!=e.bw()&&t.oI(r,n)})}},e.prototype.aI=function(e){var t=this.Mw.keys(),r=t.indexOf(e);return r!=-1&&t.splice(r,1),t},e.prototype.hI=function(e){var t=this;e.forEach(function(e){var r=t.Mw.get(e);r&&r.type!=i.Cw&&t.oI(r,r.bitrate)})},e.prototype.oI=function(e,t){if(e.type!=i.Cw){var r=this.Yw.Ww();if(null!=r){var n=this.Yw.uI(r.Tw,t,c.Es.vs);null==n?(this.R.debug(this.P+"PREFETCHING "+t+" MISSING METADATA "),this.Nw(t)):(e.mw=n,this.sI(n.bw()))}else this.R.debug(this.P+"PLAYER NOT PLAYING "),this.Nw(t)}},e.prototype.cI=function(e){var t=this.Mw.get(e);t&&t.Nw&&(null!=t.mw?(this.R.debug(this.P+"RESTART PREFETCHING ON AVAILABLE METADATA"),t.Nw=!1,this.sI(t.bitrate)):(t.Nw=!1,this.oI(t,e)))},e.prototype.lI=function(e){var t=this;e?this.cI(e):this.Mw.forEach(function(e,r){t.cI(r)})},e.prototype.sI=function(e){var t=this.Mw.get(e);t&&this.pI(t)},e.prototype.pI=function(e){if(e.mw){var t=this.fI(e.mw);if(null!=t)this.dI(t,e);else{var r=e.bitrate;this.R.debug(this.P+"PREFETCHING "+r+" STOPPED BECAUSE OF MISSING METADATA "),this.Mw.get(r).Nw=!0,this.Nw(r)}}else e.Nw=!0,this.Nw(e.bitrate)},e.prototype.dI=function(e,t){var r=this,n=this.gI(e.ty(),e.bw(),e.Iw(),t.type);if(n.yI){this.Dw.has(e.ty())&&h.Framework.clearTimeout(this.Dw.get(e.ty()));var s=n.type==a.Cg.Pg,o=1;if(s){var c=Math.max(0,t._w);o=this.jw.vI(t.type,e.bw(),e.Iw(),c)}this.R.debug(this.P+"PREFETCHING "+e.url+" CDN PREFETCH "+s+" IN "+o+" MSECS");var p=this.Mw.get(e.bw());p.mw=e;var f=h.Framework.setTimeout(function(){r.Dw["delete"](e.ty());var s=new l.HiveRequest(r.Uw.sessionId);s.url=e.url,p.nI=h.Framework.time();var o=r.Uw.mI(s,e,r.context,n.type);o&&(o.Qg=t.type==i.Aw||t.type==i.kw,s.onerror=s.onload=function(){if(o.Zg()==a.Cg.Pg&&(!s.status||s.status<200||s.status>299)){var t=r.Mw.get(e.bw());s=null;var i=t.mw.duration,n=t.mw.duration+u.an.wi.hi,c=Math.floor(Math.random()*(n-i))+i;t._w=c-(h.Framework.time()-t.nI),t.Fw=0,r.sI(t.mw.bitrate)}})},o);this.Dw.set(e.ty(),f)}},e.prototype.Nw=function(e){this.Mw.has(e)&&(this.Mw.get(e).Nw=!0,this.Yw.TI(e))},e.prototype.fI=function(e){var t=this.Mw.get(e.bw()),r=e,i=null,n=this.EI(r);return n&&n.ty()!=e.ty()?i=n:n&&n.ty()==t.mw.ty()?i=e:null},e.prototype.EI=function(e){if(null==e)return null;var t=this.CT.wI(!0),r=e;if(t)for(;null!=r&&t.indexOf(r.ty())!=-1;)if(r=this.Yw.II(r),!r)return r;return r},e.prototype.gI=function(e,t,r,n){var s=this.SI(e),o=s?a.Cg.kg:a.Cg.Pg,h=!1;h=n!=i.Cw?!this.Dw.has(e)||o!=a.Cg.Pg:o==a.Cg.kg;var u=this.Yw.bI(),c=this.RI(r,t,o),l=n==i.Aw;return this.R.debug(this.P+"PREFETCHING "+a.Cg[o]+" (LAN LEADER: "+this.qw.AI()+" SITE LEADER: "+l+") CHECKS FOR "+e+" [HAVES:"+s+" NOTBUFFERING:"+u+" DISTANCE:"+c.valid+"("+c.kI+")]"),{yI:h&&u&&c.valid,type:o}},e.prototype.RI=function(e,t,r){var i=this.Yw.CI(e,t);return r===a.Cg.Pg||i>=0&&i<=this.Yw.OI()?{kI:i,valid:!0}:{kI:i,valid:!1}},e.prototype.NI=function(e,t){var r=this.Yw.Ww();if(null!=r){var i=r.Iw(),n=this.Yw._I(i,t,e,t);return n}return-1},e.prototype.SI=function(e){if(this.Bw.contains(e)){var t=this.Bw.FI(e);if(t.length>=u.an.wi.li){if(u.an.wi.di){var r=[],i=[],n=[],s=this.qw.LI();return t.forEach(function(e){e.DI.peerInfo.type==p.un.St&&r.push(e);var t=e.DI.peerInfo.internalAs;0!=s&&t&&s==t&&i.push(e),e.DI.peerInfo.type==p.un.hn&&n.push(e)}),r.length>0||(!(!this.qw.AI()&&this.qw.MI()||!(i.length>0))||!(!(n.length>0)||!this.qw.BI()&&this.qw.xI()))}return!0}}return!1},e.prototype.UI=function(e){if(this.qw.MI()&&!this.qw.AI()){var t=[];return e.forEach(function(e){e.DI.peerInfo.type==p.un.St&&t.push(e)}),t.length>0}return!1},e.prototype.HI=function(e,t){e.zg=t,this.R.debug(this.P+"UPGRADE "+a.Cg[e.Zg()]+" REQ "+e.Wg+" FOR "+e.$g.ty()),e.Zg()==a.Cg.kg?(e.Gg.p2pAgenTrafficSuccessQt=e.Jg,e.Yg?(e.type=a.Cg.va,this.Hw.qI(e)||(this.R.debug(this.P+"SET REQUEST TIMED-OUT WAS 0. CDN COMPENSATION"),this.Hw.VI(e.jI,"TIMED-OUT"))):(e.type=a.Cg.bg,this.R.debug(this.P+"THE HIVE REQ "+e.ty()+" ARRIVED BEFORE THE P2P_PREFETCH INITIALIZED. CHANGE REQUEST TYPE TO "+a.Cg[e.Zg()]))):e.Zg()==a.Cg.Pg&&(e.type=a.Cg.bg)},e}();t.GI=d},function(e,t){"use strict";var r=function(){function e(){this.count=0}return e.prototype.next=function(){return this.count++,this.count},e}();t.Counter=r;var i=function(){function e(){this.reset()}return e.prototype.add=function(e){e<=0||(this.QI+=e,this.YI++,e>this.KI&&(this.KI=e),e<this.JI&&(this.JI=e))},e.prototype.min=function(e){void 0===e&&(e=!0);var t=this.JI==Number.POSITIVE_INFINITY?0:this.JI;return e&&this.reset(),t},e.prototype.max=function(e){void 0===e&&(e=!0);var t=this.KI==Number.NEGATIVE_INFINITY?0:this.KI;return e&&this.reset(),t},e.prototype.zI=function(e){void 0===e&&(e=!0);var t=this.QI;return e&&this.reset(),t},e.prototype.ds=function(e){void 0===e&&(e=!0);var t=this.YI>0?this.QI/this.YI:0;return e&&this.reset(),t},e.prototype.reset=function(){this.JI=Number.POSITIVE_INFINITY,this.KI=Number.NEGATIVE_INFINITY,this.QI=0,this.YI=0},e}();t.WI=i},function(e,t){"use strict";var r=function(){function e(){}return e}();r.XI=55,r.$I=6e5,r.ZI=5,r.eS=5,r.tS=5,r.rS=10,r.iS="dist",r.nS="./scenarios/OneSiteTwoPeers",r.sS=null,r.oS=null,r.aS=null,r.hS=!0,r.uS=!0,r.cS=6e4,t.lS=r;var i=function(){function e(){}return e}();i.pS="BwEmulation",t.fS=i},function(e,t){"use strict";var r=function(){function e(){}return e}();r.dS="127.0.0.1",r.Sa=8999,r.Ia=8998,r.wa=8899,r.Ta=8898,r.gS="//{0}:{1}/?callback={2}{3}hivePluginId={4}",r.ba=!0,r.yS=/((http|https):\/\/(.*):([0-9]*)\/([0-9a-z-]*).ism\/)(.*)/,r.vS="2013.1.1",t.Ea=r},function(e,t,r){"use strict";var i=r(1),n=r(10),s=function(){function e(){}return e.Reporting=function(){return e.app="STATS",i.Framework.resolve(n.Os.Ps)},e.za=function(){return this.app},e.getVersion=function(){return this.version},e}();s.version="3.1.0",t.Hive=s},function(e,t,r){"use strict";var i=r(37),n=r(17),s=n.yg,o=n.vg,a=function(){function e(){this.SourceURLParams={}}return e.prototype.mS=function(e){for(var t in e)if("SourceURLParams"===t)for(var r in e[t])this[t][r]=e[t][r];else this[t]=e[t];this.TS()},e.prototype.ES=function(){var e="b6614c3e4cd1d14eed6b39ef2bf6b9a3e3d6dfcd26699d7270d887923bcbf83efb3dadb717c0bafb1d48dce361eb369b7cc46e57405ebfbdd86c3175532fe56cc77f473d345b2cb6feafb5ab0e24f364a3d259f27e4a2fd97468265bddfd3ddd3ac64251db650ca0280af2b2c45e8b1c8f040f2c433ac0a157d2b3fd91517253",t="010001",r=this.ContentId+this.SiteId+this.CROId+this.SourceURL,i=new s;i.wc(e,t);var n=o(this.Signature);return i.ug(r,n)},e.prototype.wS=function(e){this.ticketUrl=e;var t=i.parse(e),r=t.path.split("/").slice(3);if(this.SiteId=r[0],this.CROId=r[1],this.ContentId=r[2],this.IS=r[3],t.query)try{var n=t.query.split("&");for(var s in n){var o=n[s].split(/=(.+)/);this.SourceURLParams[o[0]]=o[1]}}catch(a){}this.SS=e.indexOf("api-test")>-1},e.prototype.eh=function(){return this.SiteId},e.prototype.Za=function(){return this.CROId},e.prototype.$a=function(){return this.ContentId},e.prototype.bS=function(){return this.IS},e.prototype.RS=function(){return this.SourceURL},e.prototype.PS=function(){if(this.kS=this.SourceURL,void 0!=this.SourceURLParams){
var e=new Array;for(var t in this.SourceURLParams)e.push(t+"="+this.SourceURLParams[t]);e.length>0&&this.kS&&(this.kS+=(this.kS.indexOf("?")>0?"&":"?")+e.join("&"))}},e.prototype.TS=function(){var e=r(47);this.sessionId=e.CS()},e.prototype.OS=function(){return this.kS||this.PS(),this.kS},e.prototype.$h=function(){return"["+this.SiteId+"/"+this.CROId+"/"+this.ContentId+"]"},e.prototype.NS=function(){return[this.SiteId,this.CROId,this.ContentId]},e.prototype._S=function(){return this.SourceURL+"-["+this.SiteId+"/"+this.CROId+"/"+this.ContentId+"]"},e.prototype.toString=function(){return this.$h()},e}();a.FS="^https?://api(?:-test)?.hivestreaming.com/v1/events/(?:wildcard/)?",a.LS="CROId",a.DS="SiteId",a.MS="ContentId",t.BS=a},function(e,t,r){var i,n,s;/*!
	 * URI.js - Mutating URLs
	 *
	 * Version: 1.18.10
	 *
	 * Author: Rodney Rehm
	 * Web: http://medialize.github.io/URI.js/
	 *
	 * Licensed under
	 *   MIT License http://www.opensource.org/licenses/mit-license
	 *
	 */
!function(o,a){"use strict";"object"==typeof e&&e.i?e.i=a(r(5),r(5),r(5)):(n=[r(5),r(5),r(5)],i=a,s="function"==typeof i?i.apply(t,n):i,!(void 0!==s&&(e.i=s)))}(this,function(e,t,r,i){"use strict";function n(e,t){var r=arguments.length>=1,i=arguments.length>=2;if(!(this instanceof n))return r?i?new n(e,t):new n(e):new n;if(void 0===e){if(r)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&r)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.Hn(t):this}function s(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function o(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function a(e){return"Array"===o(e)}function h(e,t){var r,i,n={};if("RegExp"===o(t))n=null;else if(a(t))for(r=0,i=t.length;r<i;r++)n[t[r]]=!0;else n[t]=!0;for(r=0,i=e.length;r<i;r++){var s=n&&void 0!==n[e[r]]||!n&&t.test(e[r]);s&&(e.splice(r,1),i--,r--)}return e}function u(e,t){var r,i;if(a(t)){for(r=0,i=t.length;r<i;r++)if(!u(e,t[r]))return!1;return!0}var n=o(t);for(r=0,i=e.length;r<i;r++)if("RegExp"===n){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function c(e,t){if(!a(e)||!a(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function l(e){var t=/^\/+|\/+$/g;return e.replace(t,"")}function p(e){return escape(e)}function f(e){return encodeURIComponent(e).replace(/[!'()*]/g,p).replace(/\*/g,"%2A")}function d(e){return function(t,r){return void 0===t?this.xS[e]||"":(this.xS[e]=t||null,this.ga(!r),this)}}function g(e,t){return function(r,i){return void 0===r?this.xS[e]||"":(null!==r&&(r+="",r.charAt(0)===t&&(r=r.substring(1))),this.xS[e]=r,this.ga(!i),this)}}var y=i&&i.US;n.version="1.18.10";var v=n.prototype,m=Object.prototype.hasOwnProperty;n.xS=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,HS:null,qS:n.qS,VS:n.VS}},n.qS=!1,n.VS=!0,n.jS=/^[a-z][a-z0-9.+-]*$/i,n.GS=/[^a-z0-9\.-]/i,n.QS=/(xn--)/i,n.YS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n.KS=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.JS=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi,n.zS={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,WS:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},n.XS={$S:"80",ZS:"443",eb:"21",tb:"70",rb:"80",ib:"443"},n.nb=/[^a-zA-Z0-9\.-]/,n.sb={a:"href",ob:"cite",link:"href",ab:"href",hb:"src",form:"action",ub:"src",cb:"href",lb:"src",pb:"src",source:"src",track:"src",input:"src",fb:"src",video:"src"},n.gb=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return n.sb[t]}},n.encode=f,n.decode=decodeURIComponent,n.yb=function(){n.encode=escape,n.decode=unescape},n.vb=function(){n.encode=f,n.decode=decodeURIComponent},n.mb={pathname:{encode:{Tb:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{Eb:"$",wb:"&",Ib:"+",Sb:",",bb:";",Rb:"=",Pb:":",Ab:"@"}},decode:{Tb:/[\/\?#]/g,map:{Wc:"%2F",kb:"%3F",Cb:"%23"}}},Ob:{encode:{Tb:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{Pb:":",Nb:"/",_b:"?",Fb:"#",Lb:"[",Db:"]",Ab:"@",Mb:"!",Eb:"$",wb:"&",Bb:"'",xb:"(",Ub:")",Hb:"*",Ib:"+",Sb:",",bb:";",Rb:"="}}},qb:{encode:{Tb:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{Mb:"!",Eb:"$",Bb:"'",xb:"(",Ub:")",Hb:"*",Ib:"+",Sb:",",bb:";",Rb:"=",Ab:"@"}},decode:{Tb:/[\/\?#:]/g,map:{Wc:"%2F",kb:"%3F",Cb:"%23",Vb:"%3A"}}}},n.jb=function(e,t){var r=n.encode(e+"");return void 0===t&&(t=n.VS),t?r.replace(/%20/g,"+"):r},n.Gb=function(e,t){e+="",void 0===t&&(t=n.VS);try{return n.decode(t?e.replace(/\+/g,"%20"):e)}catch(r){return e}};var T,E={encode:"encode",decode:"decode"},w=function(e,t){return function(r){try{return n[t](r+"").replace(n.mb[e][t].Tb,function(r){return n.mb[e][t].map[r]})}catch(i){return r}}};for(T in E)n[T+"PathSegment"]=w("pathname",E[T]),n[T+"UrnPathSegment"]=w("urnpath",E[T]);var I=function(e,t,r){return function(i){var s;s=r?function(e){return n[t](n[r](e))}:n[t];for(var o=(i+"").split(e),a=0,h=o.length;a<h;a++)o[a]=s(o[a]);return o.join(e)}};n.Qb=I("/","decodePathSegment"),n.Yb=I(":","decodeUrnPathSegment"),n.Kb=I("/","encodePathSegment","decode"),n.Jb=I(":","encodeUrnPathSegment","decode"),n.zb=w("reserved","encode"),n.parse=function(e,t){var r;return t||(t={}),r=e.indexOf("#"),r>-1&&(t.HS=e.substring(r+1)||null,e=e.substring(0,r)),r=e.indexOf("?"),r>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=n.Wb(e,t)):(r=e.indexOf(":"),r>-1&&(t.protocol=e.substring(0,r)||null,t.protocol&&!t.protocol.match(n.jS)?t.protocol=void 0:"//"===e.substring(r+1,r+3)?(e=e.substring(r+3),e=n.Wb(e,t)):(e=e.substring(r+1),t.urn=!0))),t.path=e,t},n.Xb=function(e,t){e=e.replace(/\\/g,"/");var r,i,n=e.indexOf("/");if(n===-1&&(n=e.length),"["===e.charAt(0))r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,n)||null,"/"===t.port&&(t.port=null);else{var s=e.indexOf(":"),o=e.indexOf("/"),a=e.indexOf(":",s+1);a!==-1&&(o===-1||a<o)?(t.hostname=e.substring(0,n)||null,t.port=null):(i=e.substring(0,n).split(":"),t.hostname=i[0]||null,t.port=i[1]||null)}return t.hostname&&"/"!==e.substring(n).charAt(0)&&(n++,e="/"+e),e.substring(n)||"/"},n.Wb=function(e,t){return e=n.$b(e,t),n.Xb(e,t)},n.$b=function(e,t){var r,i=e.indexOf("/"),s=e.lastIndexOf("@",i>-1?i:e.length-1);return s>-1&&(i===-1||s<i)?(r=e.substring(0,s).split(":"),t.username=r[0]?n.decode(r[0]):null,r.shift(),t.password=r[0]?n.decode(r.join(":")):null,e=e.substring(s+1)):(t.username=null,t.password=null),e},n.Zb=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var r,i,s,o={},a=e.split("&"),h=a.length,u=0;u<h;u++)r=a[u].split("="),i=n.Gb(r.shift(),t),s=r.length?n.Gb(r.join("="),t):null,m.call(o,i)?("string"!=typeof o[i]&&null!==o[i]||(o[i]=[o[i]]),o[i].push(s)):o[i]=s;return o},n.ga=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=n.eR(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.HS&&e.HS&&(t+="#"+e.HS),t},n.tR=function(e){var t="";return e.hostname?(t+=n.KS.test(e.hostname)?"["+e.hostname+"]":e.hostname,e.port&&(t+=":"+e.port),t):""},n.eR=function(e){return n.rR(e)+n.tR(e)},n.rR=function(e){var t="";return e.username&&(t+=n.encode(e.username)),e.password&&(t+=":"+n.encode(e.password)),t&&(t+="@"),t},n.iR=function(e,t,r){var i,s,o,h,u="";for(s in e)if(m.call(e,s)&&s)if(a(e[s]))for(i={},o=0,h=e[s].length;o<h;o++)void 0!==e[s][o]&&void 0===i[e[s][o]+""]&&(u+="&"+n.nR(s,e[s][o],r),t!==!0&&(i[e[s][o]+""]=!0));else void 0!==e[s]&&(u+="&"+n.nR(s,e[s],r));return u.substring(1)},n.nR=function(e,t,r){return n.jb(e,r)+(null!==t?"="+n.jb(t,r):"")},n.sR=function(e,t,r){if("object"==typeof t)for(var i in t)m.call(t,i)&&n.sR(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=r);"string"==typeof e[t]&&(e[t]=[e[t]]),a(r)||(r=[r]),e[t]=(e[t]||[]).concat(r)}},n.oR=function(e,t,r){var i,s,u;if(a(t))for(i=0,s=t.length;i<s;i++)e[t[i]]=void 0;else if("RegExp"===o(t))for(u in e)t.test(u)&&(e[u]=void 0);else if("object"==typeof t)for(u in t)m.call(t,u)&&n.oR(e,u,t[u]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===o(r)?!a(e[t])&&r.test(e[t])?e[t]=void 0:e[t]=h(e[t],r):e[t]!==String(r)||a(r)&&1!==r.length?a(e[t])&&(e[t]=h(e[t],r)):e[t]=void 0:e[t]=void 0}},n.aR=function(e,t,r,i){switch(o(t)){case"String":break;case"RegExp":for(var s in e)if(m.call(e,s)&&t.test(s)&&(void 0===r||n.aR(e,s,r)))return!0;return!1;case"Object":for(var h in t)if(m.call(t,h)&&!n.aR(e,h,t[h]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(o(r)){case"Undefined":return t in e;case"Boolean":var l=Boolean(a(e[t])?e[t].length:e[t]);return r===l;case"Function":return!!r(e[t],t,e);case"Array":if(!a(e[t]))return!1;var p=i?u:c;return p(e[t],r);case"RegExp":return a(e[t])?!!i&&u(e[t],r):Boolean(e[t]&&e[t].match(r));case"Number":r=String(r);case"String":return a(e[t])?!!i&&u(e[t],r):e[t]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},n.hR=function(){for(var e=[],t=[],r=0,i=0;i<arguments.length;i++){var s=new n(arguments[i]);e.push(s);for(var o=s.uR(),a=0;a<o.length;a++)"string"==typeof o[a]&&t.push(o[a]),o[a]&&r++}if(!t.length||!r)return new n("");var h=new n("").uR(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||h.path("/"+h.path()),h.normalize()},n.cR=function(e,t){var r,i=Math.min(e.length,t.length);for(r=0;r<i;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}return r<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(r)&&"/"===t.charAt(r)||(r=e.substring(0,r).lastIndexOf("/")),e.substring(0,r+1))},n.lR=function(e,t,r){r||(r={});var i=r.start||n.zS.start,s=r.end||n.zS.end,o=r.trim||n.zS.trim,a=r.WS||n.zS.WS,h=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var u=i.exec(e);if(!u)break;var c=u.index;if(r.ignoreHtml){var l=e.slice(Math.max(c-3,0),c);if(l&&h.test(l))continue}for(var p=c+e.slice(c).search(s),f=e.slice(c,p),d=-1;;){var g=a.exec(f);if(!g)break;var y=g.index+g[0].length;d=Math.max(d,y)}if(f=d>-1?f.slice(0,d)+f.slice(d).replace(o,""):f.replace(o,""),!(f.length<=u[0].length||r.ignore&&r.ignore.test(f))){p=c+f.length;var v=t(f,c,p,e);void 0!==v?(v=String(v),e=e.slice(0,c)+v+e.slice(p),i.lastIndex=c+v.length):i.lastIndex=p}}return i.lastIndex=0,e},n.pR=function(t){if(t.match(n.nb)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(e.toASCII(t).match(n.nb))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]')}},n.Vr=function(e){if(e){var t={US:this.Vr()};return i.fR&&"function"==typeof i.fR.Vr&&(t.fR=i.fR.Vr()),i.dR&&"function"==typeof i.dR.Vr&&(t.dR=i.dR.Vr()),i.gR&&"function"==typeof i.gR.Vr&&(t.gR=i.gR.Vr()),t}return i.US===this&&(i.US=y),this},v.ga=function(e){return e===!0?this.yR=!0:(void 0===e||this.yR)&&(this.vR=n.ga(this.xS),this.yR=!1),this},v.clone=function(){return new n(this)},v.valueOf=v.toString=function(){return this.ga(!1).vR},v.protocol=d("protocol"),v.username=d("username"),v.password=d("password"),v.hostname=d("hostname"),v.port=d("port"),v.query=g("query","?"),v.HS=g("fragment","#"),v.search=function(e,t){var r=this.query(e,t);return"string"==typeof r&&r.length?"?"+r:r},v.hash=function(e,t){var r=this.HS(e,t);return"string"==typeof r&&r.length?"#"+r:r},v.pathname=function(e,t){if(void 0===e||e===!0){var r=this.xS.path||(this.xS.hostname?"/":"");return e?(this.xS.urn?n.Yb:n.Qb)(r):r}return this.xS.urn?this.xS.path=e?n.Jb(e):"":this.xS.path=e?n.Kb(e):"/",this.ga(!t),this},v.path=v.pathname,v.href=function(e,t){var r;if(void 0===e)return this.toString();this.vR="",this.xS=n.xS();var i=e instanceof n,s="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){var o=n.gb(e);e=e[o]||"",s=!1}if(!i&&s&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this.xS=n.parse(String(e),this.xS);else{if(!i&&!s)throw new TypeError("invalid input");var a=i?e.xS:e;for(r in a)m.call(this.xS,r)&&(this.xS[r]=a[r])}return this.ga(!t),this},v.is=function(e){var t=!1,i=!1,s=!1,o=!1,a=!1,h=!1,u=!1,c=!this.xS.urn;switch(this.xS.hostname&&(c=!1,i=n.YS.test(this.xS.hostname),s=n.KS.test(this.xS.hostname),t=i||s,o=!t,a=o&&r&&r.has(this.xS.hostname),h=o&&n.GS.test(this.xS.hostname),u=o&&n.QS.test(this.xS.hostname)),e.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return o;case"sld":return a;case"ip":return t;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return s;case"idn":return h;case"url":return!this.xS.urn;case"urn":return!!this.xS.urn;case"punycode":return u}return null};var S=v.protocol,b=v.port,R=v.hostname;v.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(n.jS)))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return S.call(this,e,t)},v.scheme=v.protocol,v.port=function(e,t){if(this.xS.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError('Port "'+e+'" contains characters other than [0-9]');return b.call(this,e,t)},v.hostname=function(e,t){if(this.xS.urn)return void 0===e?"":this;if(void 0!==e){var r={},i=n.Xb(e,r);if("/"!==i)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=r.hostname}return R.call(this,e,t)},v.origin=function(e,t){if(this.xS.urn)return void 0===e?"":this;if(void 0===e){var r=this.protocol(),i=this.mR();return i?(r?r+"://":"")+this.mR():""}var s=n(e);return this.protocol(s.protocol()).mR(s.mR()).ga(!t),this},v.host=function(e,t){if(this.xS.urn)return void 0===e?"":this;if(void 0===e)return this.xS.hostname?n.tR(this.xS):"";var r=n.Xb(e,this.xS);if("/"!==r)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.ga(!t),this},v.mR=function(e,t){if(this.xS.urn)return void 0===e?"":this;if(void 0===e)return this.xS.hostname?n.eR(this.xS):"";var r=n.Wb(e,this.xS);if("/"!==r)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.ga(!t),this},v.TR=function(e,t){if(this.xS.urn)return void 0===e?"":this;if(void 0===e){var r=n.rR(this.xS);return r?r.substring(0,r.length-1):r}return"@"!==e[e.length-1]&&(e+="@"),n.$b(e,this.xS),this.ga(!t),this},v.ER=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=n.parse(e),this.xS.path=r.path,this.xS.query=r.query,this.xS.HS=r.HS,this.ga(!t),this)},v.wR=function(e,t){if(this.xS.urn)return void 0===e?"":this;if(void 0===e){if(!this.xS.hostname||this.is("IP"))return"";var r=this.xS.hostname.length-this.domain().length-1;return this.xS.hostname.substring(0,r)||""}var i=this.xS.hostname.length-this.domain().length,o=this.xS.hostname.substring(0,i),a=new RegExp("^"+s(o));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&n.pR(e),this.xS.hostname=this.xS.hostname.replace(a,e),this.ga(!t),this},v.domain=function(e,t){if(this.xS.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this.xS.hostname||this.is("IP"))return"";var r=this.xS.hostname.match(/\./g);if(r&&r.length<2)return this.xS.hostname;var i=this.xS.hostname.length-this.IR(t).length-1;return i=this.xS.hostname.lastIndexOf(".",i-1)+1,this.xS.hostname.substring(i)||""}if(!e)throw new TypeError("cannot set domain empty");if(n.pR(e),!this.xS.hostname||this.is("IP"))this.xS.hostname=e;else{var o=new RegExp(s(this.domain())+"$");this.xS.hostname=this.xS.hostname.replace(o,e)}return this.ga(!t),this},v.IR=function(e,t){if(this.xS.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this.xS.hostname||this.is("IP"))return"";var i=this.xS.hostname.lastIndexOf("."),n=this.xS.hostname.substring(i+1);return t!==!0&&r&&r.list[n.toLowerCase()]?r.get(this.xS.hostname)||n:n}var o;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');o=new RegExp(s(this.IR())+"$"),this.xS.hostname=this.xS.hostname.replace(o,e)}else{if(!this.xS.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(s(this.IR())+"$"),this.xS.hostname=this.xS.hostname.replace(o,e)}return this.ga(!t),this},v.SR=function(e,t){if(this.xS.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this.xS.path&&!this.xS.hostname)return"";if("/"===this.xS.path)return"/";var r=this.xS.path.length-this.filename().length-1,i=this.xS.path.substring(0,r)||(this.xS.hostname?"/":"");return e?n.Qb(i):i}var o=this.xS.path.length-this.filename().length,a=this.xS.path.substring(0,o),h=new RegExp("^"+s(a));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=n.Kb(e),this.xS.path=this.xS.path.replace(h,e),this.ga(!t),this},v.filename=function(e,t){if(this.xS.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this.xS.path||"/"===this.xS.path)return"";var r=this.xS.path.lastIndexOf("/"),i=this.xS.path.substring(r+1);return e?n.decodePathSegment(i):i}var o=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(o=!0);var a=new RegExp(s(this.filename())+"$");return e=n.Kb(e),this.xS.path=this.xS.path.replace(a,e),o?this.bR(t):this.ga(!t),this},v.suffix=function(e,t){if(this.xS.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this.xS.path||"/"===this.xS.path)return"";var r,i,o=this.filename(),a=o.lastIndexOf(".");return a===-1?"":(r=o.substring(a+1),i=/^[a-z0-9%]+$/i.test(r)?r:"",e?n.decodePathSegment(i):i)}"."===e.charAt(0)&&(e=e.substring(1));var h,u=this.suffix();if(u)h=e?new RegExp(s(u)+"$"):new RegExp(s("."+u)+"$");else{if(!e)return this;this.xS.path+="."+n.Kb(e)}return h&&(e=n.Kb(e),this.xS.path=this.xS.path.replace(h,e)),this.ga(!t),this},v.uR=function(e,t,r){var i=this.xS.urn?":":"/",n=this.path(),s="/"===n.substring(0,1),o=n.split(i);if(void 0!==e&&"number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(s&&o.shift(),e<0&&(e=Math.max(o.length+e,0)),void 0===t)return void 0===e?o:o[e];if(null===e||void 0===o[e])if(a(t)){o=[];for(var h=0,u=t.length;h<u;h++)(t[h].length||o.length&&o[o.length-1].length)&&(o.length&&!o[o.length-1].length&&o.pop(),o.push(l(t[h])))}else(t||"string"==typeof t)&&(t=l(t),""===o[o.length-1]?o[o.length-1]=t:o.push(t));else t?o[e]=l(t):o.splice(e,1);return s&&o.unshift(""),this.path(o.join(i),r)},v.RR=function(e,t,r){var i,s,o;if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0===t){if(i=this.uR(e,t,r),a(i))for(s=0,o=i.length;s<o;s++)i[s]=n.decode(i[s]);else i=void 0!==i?n.decode(i):void 0;return i}if(a(t))for(s=0,o=t.length;s<o;s++)t[s]=n.encode(t[s]);else t="string"==typeof t||t instanceof String?n.encode(t):t;return this.uR(e,t,r)};var P=v.query;return v.query=function(e,t){if(e===!0)return n.Zb(this.xS.query,this.xS.VS);if("function"==typeof e){var r=n.Zb(this.xS.query,this.xS.VS),i=e.call(this,r);return this.xS.query=n.iR(i||r,this.xS.qS,this.xS.VS),this.ga(!t),this}return void 0!==e&&"string"!=typeof e?(this.xS.query=n.iR(e,this.xS.qS,this.xS.VS),this.ga(!t),this):P.call(this,e,t)},v.PR=function(e,t,r){var i=n.Zb(this.xS.query,this.xS.VS);if("string"==typeof e||e instanceof String)i[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var s in e)m.call(e,s)&&(i[s]=e[s])}return this.xS.query=n.iR(i,this.xS.qS,this.xS.VS),"string"!=typeof e&&(r=t),this.ga(!r),this},v.sR=function(e,t,r){var i=n.Zb(this.xS.query,this.xS.VS);return n.sR(i,e,void 0===t?null:t),this.xS.query=n.iR(i,this.xS.qS,this.xS.VS),"string"!=typeof e&&(r=t),this.ga(!r),this},v.oR=function(e,t,r){var i=n.Zb(this.xS.query,this.xS.VS);return n.oR(i,e,t),this.xS.query=n.iR(i,this.xS.qS,this.xS.VS),"string"!=typeof e&&(r=t),this.ga(!r),this},v.aR=function(e,t,r){var i=n.Zb(this.xS.query,this.xS.VS);return n.aR(i,e,t,r)},v.AR=v.PR,v.kR=v.sR,v.CR=v.oR,v.OR=v.aR,v.normalize=function(){return this.xS.urn?this.FR(!1).bR(!1)._R(!1).NR(!1).ga():this.FR(!1).DR(!1).LR(!1).bR(!1)._R(!1).NR(!1).ga()},v.FR=function(e){return"string"==typeof this.xS.protocol&&(this.xS.protocol=this.xS.protocol.toLowerCase(),this.ga(!e)),this},v.DR=function(r){return this.xS.hostname&&(this.is("IDN")&&e?this.xS.hostname=e.toASCII(this.xS.hostname):this.is("IPv6")&&t&&(this.xS.hostname=t.best(this.xS.hostname)),this.xS.hostname=this.xS.hostname.toLowerCase(),this.ga(!r)),this},v.LR=function(e){return"string"==typeof this.xS.protocol&&this.xS.port===n.XS[this.xS.protocol]&&(this.xS.port=null,this.ga(!e)),this},v.bR=function(e){var t=this.xS.path;if(!t)return this;if(this.xS.urn)return this.xS.path=n.Jb(this.xS.path),this.ga(!e),this;if("/"===this.xS.path)return this;t=n.Kb(t);var r,i,s,o="";for("/"!==t.charAt(0)&&(r=!0,t="/"+t),"/.."!==t.slice(-3)&&"/."!==t.slice(-2)||(t+="/"),t=t.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),r&&(o=t.substring(1).match(/^(\.\.\/)+/)||"",o&&(o=o[0]));;){if(i=t.search(/\/\.\.(\/|$)/),i===-1)break;0!==i?(s=t.substring(0,i).lastIndexOf("/"),s===-1&&(s=i),t=t.substring(0,s)+t.substring(i+3)):t=t.substring(3)}return r&&this.is("relative")&&(t=o+t.substring(1)),this.xS.path=t,this.ga(!e),this},v.MR=v.bR,v._R=function(e){return"string"==typeof this.xS.query&&(this.xS.query.length?this.query(n.Zb(this.xS.query,this.xS.VS)):this.xS.query=null,this.ga(!e)),this},v.NR=function(e){return this.xS.HS||(this.xS.HS=null,this.ga(!e)),this},v.BR=v._R,v.xR=v.NR,v.yb=function(){var e=n.encode,t=n.decode;n.encode=escape,n.decode=decodeURIComponent;try{this.normalize()}finally{n.encode=e,n.decode=t}return this},v.vb=function(){var e=n.encode,t=n.decode;n.encode=f,n.decode=unescape;try{this.normalize()}finally{n.encode=e,n.decode=t}return this},v.UR=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t.xS.protocol&&(r+=t.xS.protocol+"://"),t.xS.hostname&&(t.is("punycode")&&e?(r+=e.toUnicode(t.xS.hostname),t.xS.port&&(r+=":"+t.xS.port)):r+=t.host()),t.xS.hostname&&t.xS.path&&"/"!==t.xS.path.charAt(0)&&(r+="/"),r+=t.path(!0),t.xS.query){for(var i="",s=0,o=t.xS.query.split("&"),a=o.length;s<a;s++){var h=(o[s]||"").split("=");i+="&"+n.Gb(h[0],this.xS.VS).replace(/&/g,"%26"),void 0!==h[1]&&(i+="="+n.Gb(h[1],this.xS.VS).replace(/&/g,"%26"))}r+="?"+i.substring(1)}return r+=n.Gb(t.hash(),!0)},v.Hn=function(e){var t,r,i,s=this.clone(),o=["protocol","username","password","hostname","port"];if(this.xS.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof n||(e=new n(e)),s.xS.protocol)return s;if(s.xS.protocol=e.xS.protocol,this.xS.hostname)return s;for(r=0;i=o[r];r++)s.xS[i]=e.xS[i];return s.xS.path?(".."===s.xS.path.substring(-2)&&(s.xS.path+="/"),"/"!==s.path().charAt(0)&&(t=e.SR(),t=t?t:0===e.path().indexOf("/")?"/":"",s.xS.path=(t?t+"/":"")+s.xS.path,s.bR())):(s.xS.path=e.xS.path,s.xS.query||(s.xS.query=e.xS.query)),s.ga(),s},v.HR=function(e){var t,r,i,s,o,a=this.clone().normalize();if(a.xS.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new n(e).normalize(),t=a.xS,r=e.xS,s=a.path(),o=e.path(),"/"!==s.charAt(0))throw new Error("URI is already relative");if("/"!==o.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===r.protocol&&(t.protocol=null),t.username!==r.username||t.password!==r.password)return a.ga();if(null!==t.protocol||null!==t.username||null!==t.password)return a.ga();if(t.hostname!==r.hostname||t.port!==r.port)return a.ga();if(t.hostname=null,t.port=null,s===o)return t.path="",a.ga();if(i=n.cR(s,o),!i)return a.ga();var h=r.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=h+t.path.substring(i.length)||"./",a.ga()},v.qR=function(e){var t,r,i,s=this.clone(),o=new n(e),h={},u={},l={};if(s.normalize(),o.normalize(),s.toString()===o.toString())return!0;if(t=s.query(),r=o.query(),s.query(""),o.query(""),s.toString()!==o.toString())return!1;if(t.length!==r.length)return!1;h=n.Zb(t,this.xS.VS),u=n.Zb(r,this.xS.VS);for(i in h)if(m.call(h,i)){if(a(h[i])){if(!c(h[i],u[i]))return!1}else if(h[i]!==u[i])return!1;l[i]=!0}for(i in u)if(m.call(u,i)&&!l[i])return!1;return!0},v.qS=function(e){return this.xS.qS=!!e,this},v.VS=function(e){return this.xS.VS=!!e,this},n})},function(e,t,r){var i=r(23);"undefined"==typeof hive&&(hive={}),"undefined"==typeof hive.services&&(hive.services={}),"undefined"==typeof hive.services.protocol&&(hive.services.protocol={}),"undefined"==typeof hive.services.protocol.VR&&(hive.services.protocol.VR={}),hive.services.protocol.VR.jR={1:"PLAYER",Cw:1,2:"P2P_AGENT",GR:2,3:"PREFETCHER_FIRST_TIER",QR:3,4:"PREFETCHER_SECOND_TIER",YR:4},hive.services.protocol.VR.KR={1:"Global",JR:1,2:"InternalAs",zR:2,3:"ExternalAs",WR:3},hive.services.protocol.VR.XR={1:"Internal",$R:1,2:"External",External:2},hive.services.protocol.VR.TrackerPeerStreamInfo=function(e){this.state=null,this.bitrate=null,this.delta=null,e&&(void 0!==e.state&&(this.state=e.state),void 0!==e.bitrate&&(this.bitrate=e.bitrate),void 0!==e.delta&&(this.delta=e.delta))},hive.services.protocol.VR.TrackerPeerStreamInfo.prototype={},hive.services.protocol.VR.TrackerPeerStreamInfo.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.state=e.uT().value:e.Om(r);break;case 2:r==i.Type.I32?this.bitrate=e.uT().value:e.Om(r);break;case 3:r==i.Type.I32?this.delta=e.uT().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.TrackerPeerStreamInfo.prototype.write=function(e){e.pT("TrackerPeerStreamInfo"),null!==this.state&&void 0!==this.state&&(e.fT("state",i.Type.I32,1),e.gT(this.state),e.dT()),null!==this.bitrate&&void 0!==this.bitrate&&(e.fT("bitrate",i.Type.I32,2),e.gT(this.bitrate),e.dT()),null!==this.delta&&void 0!==this.delta&&(e.fT("delta",i.Type.I32,3),e.gT(this.delta),e.dT()),e.yT(),e.vT()},hive.services.protocol.VR.TrackerPeerInfo=function(e){this.guid=null,this.internalAs=null,this.externalAs=null,this.nat=null,this.bandwidth=null,this.watchingBitrate=null,this.privateIp=null,this.publicIp=null,this.streams=null,this.rankValue=null,this.timestamp=null,this.publicIpString=null,this.privateIpString=null,e&&(void 0!==e.guid&&(this.guid=e.guid),void 0!==e.internalAs&&(this.internalAs=e.internalAs),void 0!==e.externalAs&&(this.externalAs=e.externalAs),void 0!==e.nat&&(this.nat=e.nat),void 0!==e.bandwidth&&(this.bandwidth=e.bandwidth),void 0!==e.watchingBitrate&&(this.watchingBitrate=e.watchingBitrate),void 0!==e.privateIp&&(this.privateIp=e.privateIp),void 0!==e.publicIp&&(this.publicIp=e.publicIp),void 0!==e.streams&&(this.streams=e.streams),void 0!==e.rankValue&&(this.rankValue=e.rankValue),void 0!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.publicIpString&&(this.publicIpString=e.publicIpString),void 0!==e.privateIpString&&(this.privateIpString=e.privateIpString))},hive.services.protocol.VR.TrackerPeerInfo.prototype={},hive.services.protocol.VR.TrackerPeerInfo.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.guid=e.LE().value:e.Om(r);break;case 2:r==i.Type.I32?this.internalAs=e.uT().value:e.Om(r);break;case 3:r==i.Type.I32?this.externalAs=e.uT().value:e.Om(r);break;case 4:r==i.Type.I32?this.nat=e.uT().value:e.Om(r);break;case 5:r==i.Type.I32?this.bandwidth=e.uT().value:e.Om(r);break;case 6:r==i.Type.I32?this.watchingBitrate=e.uT().value:e.Om(r);break;case 7:r==i.Type.STRUCT?(this.privateIp=new InetAddress,this.privateIp.read(e)):e.Om(r);break;case 8:r==i.Type.STRUCT?(this.publicIp=new InetAddress,this.publicIp.read(e)):e.Om(r);break;case 9:if(r==i.Type.LIST){var s,o=0;this.streams=[];var a=0;s=e.PE(),a=s.AE,o=s.size;for(var h=0;h<o;++h){var u=null;u=new hive.services.protocol.VR.TrackerPeerStreamInfo,u.read(e),this.streams.push(u)}e.kE()}else e.Om(r);break;case 10:r==i.Type.DOUBLE?this.rankValue=e.Nv().value:e.Om(r);break;case 11:r==i.Type.I64?this.timestamp=e.FE().value:e.Om(r);break;case 12:r==i.Type.STRING?this.publicIpString=e.ym().value:e.Om(r);break;case 13:r==i.Type.STRING?this.privateIpString=e.ym().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.TrackerPeerInfo.prototype.write=function(e){if(e.pT("TrackerPeerInfo"),null!==this.guid&&void 0!==this.guid&&(e.fT("guid",i.Type.STRING,1),e.dE(this.guid),e.dT()),null!==this.internalAs&&void 0!==this.internalAs&&(e.fT("internalAs",i.Type.I32,2),e.gT(this.internalAs),e.dT()),null!==this.externalAs&&void 0!==this.externalAs&&(e.fT("externalAs",i.Type.I32,3),e.gT(this.externalAs),e.dT()),null!==this.nat&&void 0!==this.nat&&(e.fT("nat",i.Type.I32,4),e.gT(this.nat),e.dT()),null!==this.bandwidth&&void 0!==this.bandwidth&&(e.fT("bandwidth",i.Type.I32,5),e.gT(this.bandwidth),e.dT()),null!==this.watchingBitrate&&void 0!==this.watchingBitrate&&(e.fT("watchingBitrate",i.Type.I32,6),e.gT(this.watchingBitrate),e.dT()),null!==this.privateIp&&void 0!==this.privateIp&&(e.fT("privateIp",i.Type.STRUCT,7),this.privateIp.write(e),e.dT()),null!==this.publicIp&&void 0!==this.publicIp&&(e.fT("publicIp",i.Type.STRUCT,8),this.publicIp.write(e),e.dT()),null!==this.streams&&void 0!==this.streams){e.fT("streams",i.Type.LIST,9),e.aE(i.Type.STRUCT,this.streams.length);for(var t in this.streams)this.streams.hasOwnProperty(t)&&(t=this.streams[t],t.write(e));e.hE(),e.dT()}null!==this.rankValue&&void 0!==this.rankValue&&(e.fT("rankValue",i.Type.DOUBLE,10),e.Cv(this.rankValue),e.dT()),null!==this.timestamp&&void 0!==this.timestamp&&(e.fT("timestamp",i.Type.I64,11),e.fE(this.timestamp),e.dT()),null!==this.publicIpString&&void 0!==this.publicIpString&&(e.fT("publicIpString",i.Type.STRING,12),e.cm(this.publicIpString),e.dT()),null!==this.privateIpString&&void 0!==this.privateIpString&&(e.fT("privateIpString",i.Type.STRING,13),e.cm(this.privateIpString),e.dT()),e.yT(),e.vT()},hive.services.protocol.VR.CustomerKey=function(e){this.partnerId=null,this.customerId=null,e&&(void 0!==e.partnerId&&(this.partnerId=e.partnerId),void 0!==e.customerId&&(this.customerId=e.customerId))},hive.services.protocol.VR.CustomerKey.prototype={},hive.services.protocol.VR.CustomerKey.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.partnerId=e.ym().value:e.Om(r);break;case 2:r==i.Type.STRING?this.customerId=e.ym().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.CustomerKey.prototype.write=function(e){e.pT("CustomerKey"),null!==this.partnerId&&void 0!==this.partnerId&&(e.fT("partnerId",i.Type.STRING,1),e.cm(this.partnerId),e.dT()),null!==this.customerId&&void 0!==this.customerId&&(e.fT("customerId",i.Type.STRING,2),e.cm(this.customerId),e.dT()),e.yT(),e.vT()},hive.services.protocol.VR.TrackerAsQuery=function(e){this.asType=null,this.asn=null,e&&(void 0!==e.asType&&(this.asType=e.asType),void 0!==e.asn&&(this.asn=e.asn))},hive.services.protocol.VR.TrackerAsQuery.prototype={},
hive.services.protocol.VR.TrackerAsQuery.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.asType=e.uT().value:e.Om(r);break;case 2:r==i.Type.I32?this.asn=e.uT().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.TrackerAsQuery.prototype.write=function(e){e.pT("TrackerAsQuery"),null!==this.asType&&void 0!==this.asType&&(e.fT("asType",i.Type.I32,1),e.gT(this.asType),e.dT()),null!==this.asn&&void 0!==this.asn&&(e.fT("asn",i.Type.I32,2),e.gT(this.asn),e.dT()),e.yT(),e.vT()},hive.services.protocol.VR.TrackerBitrateQuery=function(e){this.bitrate=null,this.asn=null,this.streamState=null,e&&(void 0!==e.bitrate&&(this.bitrate=e.bitrate),void 0!==e.asn&&(this.asn=e.asn),void 0!==e.streamState&&(this.streamState=e.streamState))},hive.services.protocol.VR.TrackerBitrateQuery.prototype={},hive.services.protocol.VR.TrackerBitrateQuery.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.bitrate=e.uT().value:e.Om(r);break;case 2:r==i.Type.STRUCT?(this.asn=new hive.services.protocol.VR.TrackerAsQuery,this.asn.read(e)):e.Om(r);break;case 3:r==i.Type.I32?this.streamState=e.uT().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.TrackerBitrateQuery.prototype.write=function(e){e.pT("TrackerBitrateQuery"),null!==this.bitrate&&void 0!==this.bitrate&&(e.fT("bitrate",i.Type.I32,1),e.gT(this.bitrate),e.dT()),null!==this.asn&&void 0!==this.asn&&(e.fT("asn",i.Type.STRUCT,2),this.asn.write(e),e.dT()),null!==this.streamState&&void 0!==this.streamState&&(e.fT("streamState",i.Type.I32,3),e.gT(this.streamState),e.dT()),e.yT(),e.vT()},hive.services.protocol.VR.TrackerRankQuery=function(e){this.rankType=null,this.asQuery=null,e&&(void 0!==e.rankType&&(this.rankType=e.rankType),void 0!==e.asQuery&&(this.asQuery=e.asQuery))},hive.services.protocol.VR.TrackerRankQuery.prototype={},hive.services.protocol.VR.TrackerRankQuery.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.rankType=e.uT().value:e.Om(r);break;case 2:r==i.Type.STRUCT?(this.asQuery=new hive.services.protocol.VR.TrackerAsQuery,this.asQuery.read(e)):e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.TrackerRankQuery.prototype.write=function(e){e.pT("TrackerRankQuery"),null!==this.rankType&&void 0!==this.rankType&&(e.fT("rankType",i.Type.I32,1),e.gT(this.rankType),e.dT()),null!==this.asQuery&&void 0!==this.asQuery&&(e.fT("asQuery",i.Type.STRUCT,2),this.asQuery.write(e),e.dT()),e.yT(),e.vT()},hive.services.protocol.VR.TrackerQuery=function(e){this.random=null,this.asns=null,this.watchers=null,this.streamers=null,this.rankings=null,e&&(void 0!==e.random&&(this.random=e.random),void 0!==e.asns&&(this.asns=e.asns),void 0!==e.watchers&&(this.watchers=e.watchers),void 0!==e.streamers&&(this.streamers=e.streamers),void 0!==e.rankings&&(this.rankings=e.rankings))},hive.services.protocol.VR.TrackerQuery.prototype={},hive.services.protocol.VR.TrackerQuery.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.random=e.uT().value:e.Om(r);break;case 2:if(r==i.Type.MAP){var s,o=0;this.asns={};var a=0,h=0;s=e.IE(),a=s.SE,h=s.bE,o=s.size;for(var u=0;u<o;++u){u>0&&e.yE.length>e.wT[e.wT.length-1]+1&&e.yE.pop();var c=null,l=null;c=new hive.services.protocol.VR.TrackerAsQuery,c.read(e),l=e.uT().value,this.asns[c]=l}e.RE()}else e.Om(r);break;case 3:if(r==i.Type.MAP){var p,f=0;this.watchers={};var d=0,g=0;p=e.IE(),d=p.SE,g=p.bE,f=p.size;for(var y=0;y<f;++y){y>0&&e.yE.length>e.wT[e.wT.length-1]+1&&e.yE.pop();var v=null,m=null;v=new hive.services.protocol.VR.TrackerBitrateQuery,v.read(e),m=e.uT().value,this.watchers[v]=m}e.RE()}else e.Om(r);break;case 4:if(r==i.Type.MAP){var T,E=0;this.streamers={};var w=0,I=0;T=e.IE(),w=T.SE,I=T.bE,E=T.size;for(var S=0;S<E;++S){S>0&&e.yE.length>e.wT[e.wT.length-1]+1&&e.yE.pop();var b=null,R=null;b=new hive.services.protocol.VR.TrackerBitrateQuery,b.read(e),R=e.uT().value,this.streamers[b]=R}e.RE()}else e.Om(r);break;case 5:if(r==i.Type.LIST){var P,A=0;this.rankings=[];var k=0;P=e.PE(),k=P.AE,A=P.size;for(var C=0;C<A;++C){var O=null;O=e.uT().value,this.rankings.push(O)}e.kE()}else e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.TrackerQuery.prototype.write=function(e){if(e.pT("TrackerQuery"),null!==this.random&&void 0!==this.random&&(e.fT("random",i.Type.I32,1),e.gT(this.random),e.dT()),null!==this.asns&&void 0!==this.asns){e.fT("asns",i.Type.MAP,2),e.sE(i.Type.STRUCT,i.Type.I32,i.Qm(this.asns));for(var t=0;t<this.asns.length;t++){var r=this.asns[t],n=r.key,s=r.value;n.write(e),e.gT(s)}e.oE(),e.dT()}if(null!==this.watchers&&void 0!==this.watchers){e.fT("watchers",i.Type.MAP,3),e.sE(i.Type.STRUCT,i.Type.I32,i.Qm(this.watchers));for(var t=0;t<this.watchers.length;t++){var r=this.watchers[t],o=r.key,a=r.value;o.write(e),e.gT(a)}e.oE(),e.dT()}if(null!==this.streamers&&void 0!==this.streamers){e.fT("streamers",i.Type.MAP,4),e.sE(i.Type.STRUCT,i.Type.I32,i.Qm(this.streamers));for(var t=0;t<this.streamers.length;t++){var r=this.streamers[t],h=r.key,u=r.value;h.write(e),e.gT(u)}e.oE(),e.dT()}if(null!==this.rankings&&void 0!==this.rankings){e.fT("rankings",i.Type.LIST,5),e.aE(i.Type.I32,this.rankings.length);for(var c in this.rankings)this.rankings.hasOwnProperty(c)&&(c=this.rankings[c],e.gT(c));e.hE(),e.dT()}e.yT(),e.vT()},hive.services.protocol.VR.TrackerPeerRankingKey=function(e){this.rankType=null,this.internalAs=null,this.externalAs=null,e&&(void 0!==e.rankType&&(this.rankType=e.rankType),void 0!==e.internalAs&&(this.internalAs=e.internalAs),void 0!==e.externalAs&&(this.externalAs=e.externalAs))},hive.services.protocol.VR.TrackerPeerRankingKey.prototype={},hive.services.protocol.VR.TrackerPeerRankingKey.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.rankType=e.uT().value:e.Om(r);break;case 2:r==i.Type.I32?this.internalAs=e.uT().value:e.Om(r);break;case 3:r==i.Type.I32?this.externalAs=e.uT().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.TrackerPeerRankingKey.prototype.write=function(e){e.pT("TrackerPeerRankingKey"),null!==this.rankType&&void 0!==this.rankType&&(e.fT("rankType",i.Type.I32,1),e.gT(this.rankType),e.dT()),null!==this.internalAs&&void 0!==this.internalAs&&(e.fT("internalAs",i.Type.I32,2),e.gT(this.internalAs),e.dT()),null!==this.externalAs&&void 0!==this.externalAs&&(e.fT("externalAs",i.Type.I32,3),e.gT(this.externalAs),e.dT()),e.yT(),e.vT()},hive.services.protocol.VR.TrackerPeerRanking=function(e){this.key=null,this.ranking=null,this.groupSize=null,this.cumulatedRankValue=null,this.totalOfRankValues=null,e&&(void 0!==e.key&&(this.key=e.key),void 0!==e.ranking&&(this.ranking=e.ranking),void 0!==e.groupSize&&(this.groupSize=e.groupSize),void 0!==e.cumulatedRankValue&&(this.cumulatedRankValue=e.cumulatedRankValue),void 0!==e.totalOfRankValues&&(this.totalOfRankValues=e.totalOfRankValues))},hive.services.protocol.VR.TrackerPeerRanking.prototype={},hive.services.protocol.VR.TrackerPeerRanking.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRUCT?(this.key=new hive.services.protocol.VR.TrackerPeerRankingKey,this.key.read(e)):e.Om(r);break;case 2:r==i.Type.I32?this.ranking=e.uT().value:e.Om(r);break;case 3:r==i.Type.I32?this.groupSize=e.uT().value:e.Om(r);break;case 4:r==i.Type.DOUBLE?this.cumulatedRankValue=e.Nv().value:e.Om(r);break;case 5:r==i.Type.DOUBLE?this.totalOfRankValues=e.Nv().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.TrackerPeerRanking.prototype.write=function(e){e.pT("TrackerPeerRanking"),null!==this.key&&void 0!==this.key&&(e.fT("key",i.Type.STRUCT,1),this.key.write(e),e.dT()),null!==this.ranking&&void 0!==this.ranking&&(e.fT("ranking",i.Type.I32,2),e.gT(this.ranking),e.dT()),null!==this.groupSize&&void 0!==this.groupSize&&(e.fT("groupSize",i.Type.I32,3),e.gT(this.groupSize),e.dT()),null!==this.cumulatedRankValue&&void 0!==this.cumulatedRankValue&&(e.fT("cumulatedRankValue",i.Type.DOUBLE,4),e.Cv(this.cumulatedRankValue),e.dT()),null!==this.totalOfRankValues&&void 0!==this.totalOfRankValues&&(e.fT("totalOfRankValues",i.Type.DOUBLE,5),e.Cv(this.totalOfRankValues),e.dT()),e.yT(),e.vT()},hive.services.protocol.VR.TrackerRequest=function(e){this.info=null,this.contentId=null,this.query=null,this.streamType=null,this.sessionId=null,this.customerKey=null,e&&(void 0!==e.info&&(this.info=e.info),void 0!==e.contentId&&(this.contentId=e.contentId),void 0!==e.query&&(this.query=e.query),void 0!==e.streamType&&(this.streamType=e.streamType),void 0!==e.sessionId&&(this.sessionId=e.sessionId),void 0!==e.customerKey&&(this.customerKey=e.customerKey))},hive.services.protocol.VR.TrackerRequest.prototype={},hive.services.protocol.VR.TrackerRequest.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRUCT?(this.info=new hive.services.protocol.VR.TrackerPeerInfo,this.info.read(e)):e.Om(r);break;case 2:r==i.Type.STRING?this.contentId=e.ym().value:e.Om(r);break;case 3:r==i.Type.STRUCT?(this.query=new hive.services.protocol.VR.TrackerQuery,this.query.read(e)):e.Om(r);break;case 4:r==i.Type.I32?this.streamType=e.uT().value:e.Om(r);break;case 5:r==i.Type.STRING?this.sessionId=e.ym().value:e.Om(r);break;case 6:r==i.Type.STRUCT?(this.customerKey=new hive.services.protocol.VR.CustomerKey,this.customerKey.read(e)):e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.TrackerRequest.prototype.write=function(e){e.pT("TrackerRequest"),null!==this.info&&void 0!==this.info&&(e.fT("info",i.Type.STRUCT,1),this.info.write(e),e.dT()),null!==this.contentId&&void 0!==this.contentId&&(e.fT("contentId",i.Type.STRING,2),e.cm(this.contentId),e.dT()),null!==this.query&&void 0!==this.query&&(e.fT("query",i.Type.STRUCT,3),this.query.write(e),e.dT()),null!==this.streamType&&void 0!==this.streamType&&(e.fT("streamType",i.Type.I32,4),e.gT(this.streamType),e.dT()),null!==this.sessionId&&void 0!==this.sessionId&&(e.fT("sessionId",i.Type.STRING,5),e.cm(this.sessionId),e.dT()),null!==this.customerKey&&void 0!==this.customerKey&&(e.fT("customerKey",i.Type.STRUCT,6),this.customerKey.write(e),e.dT()),e.yT(),e.vT()},hive.services.protocol.VR.TrackerResponse=function(e){this.infos=null,this.rankings=null,this.peerInfo=null,this.sessionId=null,e&&(void 0!==e.infos&&(this.infos=e.infos),void 0!==e.rankings&&(this.rankings=e.rankings),void 0!==e.peerInfo&&(this.peerInfo=e.peerInfo),void 0!==e.sessionId&&(this.sessionId=e.sessionId))},hive.services.protocol.VR.TrackerResponse.prototype={},hive.services.protocol.VR.TrackerResponse.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:if(r==i.Type.LIST){var s,o=0;this.infos=[];var a=0;s=e.PE(),a=s.AE,o=s.size;for(var h=0;h<o;++h){var u=null;u=new hive.services.protocol.VR.TrackerPeerInfo,u.read(e),this.infos.push(u)}e.kE()}else e.Om(r);break;case 2:if(r==i.Type.LIST){var c,l=0;this.rankings=[];var p=0;c=e.PE(),p=c.AE,l=c.size;for(var f=0;f<l;++f){var d=null;d=new hive.services.protocol.VR.TrackerPeerRanking,d.read(e),this.rankings.push(d)}e.kE()}else e.Om(r);break;case 3:r==i.Type.STRUCT?(this.peerInfo=new hive.services.protocol.VR.TrackerPeerInfo,this.peerInfo.read(e)):e.Om(r);break;case 4:r==i.Type.STRING?this.sessionId=e.ym().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.TrackerResponse.prototype.write=function(e){if(e.pT("TrackerResponse"),null!==this.infos&&void 0!==this.infos){e.fT("infos",i.Type.LIST,1),e.aE(i.Type.STRUCT,this.infos.length);for(var t in this.infos)this.infos.hasOwnProperty(t)&&(t=this.infos[t],t.write(e));e.hE(),e.dT()}if(null!==this.rankings&&void 0!==this.rankings){e.fT("rankings",i.Type.LIST,2),e.aE(i.Type.STRUCT,this.rankings.length);for(var r in this.rankings)this.rankings.hasOwnProperty(r)&&(r=this.rankings[r],r.write(e));e.hE(),e.dT()}null!==this.peerInfo&&void 0!==this.peerInfo&&(e.fT("peerInfo",i.Type.STRUCT,3),this.peerInfo.write(e),e.dT()),null!==this.sessionId&&void 0!==this.sessionId&&(e.fT("sessionId",i.Type.STRING,4),e.cm(this.sessionId),e.dT()),e.yT(),e.vT()},hive.services.protocol.VR.ZR=function(e){this.timestamp=null,this.contentId=null,this.asType=null,this.asn=null,this.bitrate=null,this.streamState=null,this.rankType=null,e&&(void 0!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.contentId&&(this.contentId=e.contentId),void 0!==e.asType&&(this.asType=e.asType),void 0!==e.asn&&(this.asn=e.asn),void 0!==e.bitrate&&(this.bitrate=e.bitrate),void 0!==e.streamState&&(this.streamState=e.streamState),void 0!==e.rankType&&(this.rankType=e.rankType))},hive.services.protocol.VR.ZR.prototype={},hive.services.protocol.VR.ZR.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.timestamp=e.uT().value:e.Om(r);break;case 2:r==i.Type.STRING?this.contentId=e.ym().value:e.Om(r);break;case 3:r==i.Type.I32?this.asType=e.uT().value:e.Om(r);break;case 4:r==i.Type.I32?this.asn=e.uT().value:e.Om(r);break;case 5:r==i.Type.I32?this.bitrate=e.uT().value:e.Om(r);break;case 6:r==i.Type.I32?this.streamState=e.uT().value:e.Om(r);break;case 7:r==i.Type.I32?this.rankType=e.uT().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.ZR.prototype.write=function(e){e.pT("TrackerStoreIndexKey"),null!==this.timestamp&&void 0!==this.timestamp&&(e.fT("timestamp",i.Type.I32,1),e.gT(this.timestamp),e.dT()),null!==this.contentId&&void 0!==this.contentId&&(e.fT("contentId",i.Type.STRING,2),e.cm(this.contentId),e.dT()),null!==this.asType&&void 0!==this.asType&&(e.fT("asType",i.Type.I32,3),e.gT(this.asType),e.dT()),null!==this.asn&&void 0!==this.asn&&(e.fT("asn",i.Type.I32,4),e.gT(this.asn),e.dT()),null!==this.bitrate&&void 0!==this.bitrate&&(e.fT("bitrate",i.Type.I32,5),e.gT(this.bitrate),e.dT()),null!==this.streamState&&void 0!==this.streamState&&(e.fT("streamState",i.Type.I32,6),e.gT(this.streamState),e.dT()),null!==this.rankType&&void 0!==this.rankType&&(e.fT("rankType",i.Type.I32,7),e.gT(this.rankType),e.dT()),e.yT(),e.vT()},hive.services.protocol.VR.eP=function(e){this.guid=null,this.tP=null,this.key=null,e&&(void 0!==e.guid&&(this.guid=e.guid),void 0!==e.tP&&(this.tP=e.tP),void 0!==e.key&&(this.key=e.key))},hive.services.protocol.VR.eP.prototype={},hive.services.protocol.VR.eP.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.guid=e.LE().value:e.Om(r);break;case 2:r==i.Type.DOUBLE?this.tP=e.Nv().value:e.Om(r);break;case 3:r==i.Type.STRUCT?(this.key=new hive.services.protocol.VR.TrackerPeerRankingKey,this.key.read(e)):e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.eP.prototype.write=function(e){e.pT("TrackerStoreRankPeer"),null!==this.guid&&void 0!==this.guid&&(e.fT("guid",i.Type.STRING,1),e.dE(this.guid),e.dT()),null!==this.tP&&void 0!==this.tP&&(e.fT("rank",i.Type.DOUBLE,2),e.Cv(this.tP),e.dT()),null!==this.key&&void 0!==this.key&&(e.fT("key",i.Type.STRUCT,3),this.key.write(e),e.dT()),e.yT(),e.vT()},hive.services.protocol.VR.rP=function(e){this.timestamp=null,this.jE=null,e&&(void 0!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.jE&&(this.jE=e.jE))},hive.services.protocol.VR.rP.prototype={},hive.services.protocol.VR.rP.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I64?this.timestamp=e.FE().value:e.Om(r);break;case 2:r==i.Type.STRUCT?(this.jE=new hive.services.protocol.VR.TrackerRequest,this.jE.read(e)):e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.services.protocol.VR.rP.prototype.write=function(e){e.pT("TrackerRequestQueueMessage"),null!==this.timestamp&&void 0!==this.timestamp&&(e.fT("timestamp",i.Type.I64,1),e.fE(this.timestamp),e.dT()),null!==this.jE&&void 0!==this.jE&&(e.fT("request",i.Type.STRUCT,2),this.jE.write(e),e.dT()),e.yT(),e.vT()}},function(e,t,r){(function(t){"use strict";function i(e,t){for(var r=[],i=0;i<e.length;i++){var n=e[i];n&&"."!==n&&(".."===n?r.length&&".."!==r[r.length-1]?r.pop():t&&r.push(".."):r.push(n))}return r}function n(e){for(var t=e.length-1,r=0;r<=t&&!e[r];r++);for(var i=t;i>=0&&!e[i];i--);return 0===r&&i===t?e:r>i?[]:e.slice(r,i+1)}function s(e){var t=l.exec(e),r=(t[1]||"")+(t[2]||""),i=t[3]||"",n=p.exec(i),s=n[1],o=n[2],a=n[3];return[r,s,o,a]}function o(e){var t=l.exec(e),r=t[1]||"",i=!!r&&":"!==r[1];return{iP:r,nP:i,sP:i||!!t[2],oP:t[3]}}function a(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}function h(e){return d.exec(e).slice(1)}var u="win32"===t.platform,c=r(161),l=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,p=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,f={};f.resolve=function(){for(var e="",r="",n=!1,s=arguments.length-1;s>=-1;s--){var h;if(s>=0?h=arguments[s]:e?(h=t.$t["="+e],h&&h.substr(0,3).toLowerCase()===e.toLowerCase()+"\\"||(h=e+"\\")):h=t.cwd(),!c.il(h))throw new TypeError("Arguments to path.resolve must be strings");if(h){var u=o(h),l=u.iP,p=u.nP,f=u.sP,d=u.oP;if((!l||!e||l.toLowerCase()===e.toLowerCase())&&(e||(e=l),n||(r=d+"\\"+r,n=f),e&&n))break}}return p&&(e=a(e)),r=i(r.split(/[\\\/]+/),!n).join("\\"),e+(n?"\\":"")+r||"."},f.normalize=function(e){var t=o(e),r=t.iP,n=t.nP,s=t.sP,h=t.oP,u=/[\\\/]$/.test(h);return h=i(h.split(/[\\\/]+/),!s).join("\\"),h||s||(h="."),h&&u&&(h+="\\"),n&&(r=a(r)),r+(s?"\\":"")+h},f.sP=function(e){return o(e).sP},f.join=function(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(!c.il(r))throw new TypeError("Arguments to path.join must be strings");r&&e.push(r)}var i=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(i=i.replace(/^[\\\/]{2,}/,"\\")),f.normalize(i)},f.aP=function(e,t){e=f.resolve(e),t=f.resolve(t);for(var r=e.toLowerCase(),i=t.toLowerCase(),s=n(t.split("\\")),o=n(r.split("\\")),a=n(i.split("\\")),h=Math.min(o.length,a.length),u=h,c=0;c<h;c++)if(o[c]!==a[c]){u=c;break}if(0==u)return t;for(var l=[],c=u;c<o.length;c++)l.push("..");return l=l.concat(s.slice(u)),l.join("\\")},f.hP=function(e){if(!c.il(e))return e;if(!e)return"";var t=f.resolve(e);return/^[a-zA-Z]\:\\/.test(t)?"\\\\?\\"+t:/^\\\\[^?.]/.test(t)?"\\\\?\\UNC\\"+t.substring(2):e},f.uP=function(e){var t=s(e),r=t[0],i=t[1];return r||i?(i&&(i=i.substr(0,i.length-1)),r+i):"."},f.cP=function(e,t){var r=s(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},f.lP=function(e){return s(e)[3]},f.format=function(e){if(!c.rl(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!c.il(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var r=e.dir,i=e.ab||"";return r?r[r.length-1]===f.pP?r+i:r+f.pP+i:i},f.parse=function(e){if(!c.il(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=s(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),ab:t[2],fP:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},f.pP="\\",f.dP=";";var d=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,g={};g.resolve=function(){for(var e="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var s=n>=0?arguments[n]:t.cwd();if(!c.il(s))throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s[0])}return e=i(e.split("/"),!r).join("/"),(r?"/":"")+e||"."},g.normalize=function(e){var t=g.sP(e),r=e&&"/"===e[e.length-1];return e=i(e.split("/"),!t).join("/"),e||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},g.sP=function(e){return"/"===e.charAt(0)},g.join=function(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];if(!c.il(r))throw new TypeError("Arguments to path.join must be strings");r&&(e+=e?"/"+r:r)}return g.normalize(e)},g.aP=function(e,t){e=g.resolve(e).substr(1),t=g.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),s=Math.min(r.length,i.length),o=s,a=0;a<s;a++)if(r[a]!==i[a]){o=a;break}for(var h=[],a=o;a<r.length;a++)h.push("..");return h=h.concat(i.slice(o)),h.join("/")},g.hP=function(e){return e},g.uP=function(e){var t=h(e),r=t[0],i=t[1];return r||i?(i&&(i=i.substr(0,i.length-1)),r+i):"."},g.cP=function(e,t){var r=h(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},g.lP=function(e){return h(e)[3]},g.format=function(e){if(!c.rl(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!c.il(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var r=e.dir?e.dir+g.pP:"",i=e.ab||"";return r+i},g.parse=function(e){if(!c.il(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=h(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),ab:t[2],fP:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},g.pP="/",g.dP=":",u?e.i=f:e.i=g,e.i.gP=g,e.i.yP=f}).call(t,r(5))},function(e,t,r){"use strict";var i=r(2),n=i.Mt,s=r(30),o=r(1),a=r(96),h=r(9),u=r(19),c=r(31),l=r(4),p=function(){function e(e){this.vP=new n,this.R=o.Framework.resolve(o.Framework.Tt.rt).log(e.sessionId),this.qw=e.qw,this.Oa=e.Hs.Oa,this.mP=e.mP,this.TP=e.EP,this.TP.Qw(this,this)}return e.prototype.wP=function(){return null},e.prototype.IP=function(){return this.TP},e.prototype.SP=function(e,t){var r=0,i=0;if(this.vP.length<t)return!0;for(var n=this.vP.keys().reverse(),s=n[0],o=this.vP.get(s).bitrate,a=n.slice(1),h=0;h<a.length;h++){var u=a[h],c=this.vP.get(u),l=c.bP,p=c.bitrate,f=Math.abs(c.bP-s);if(p!=o)return!1;if(f<e){if(++i>=t)return!1}else{if(++r>t)return!0;i=Math.max(0,i-1),s=l,o=p}}return!1},e.prototype.RP=function(){return null},e.prototype.PP=function(e,t){if(this.AP(t)){var r=this.Ww();if(r){var i=e.bw(),n=r.bw();i>n?this.Oa.kP.metrics.bitrateUpN++:i<n&&this.Oa.kP.metrics.bitrateDwnN++}else this.Oa.kP.metrics.bitrateUpN++;if(this.vP.length>l.an.wi.fi){var s=this.vP.keys()[0];this.vP["delete"](s)}this.vP.set(o.Framework.time(),e)}return this.CP(e,t)},e.prototype.CP=function(e,t){var r=new a.OP;if(this.TP.Kw(e.bitrate)){if(this.mP.NP(e.ty())){r._P=!0;var i=this.mP.FP(e.ty());this.LP(t,i,r)}if(this.mP.DP(e.ty()))for(var n=this.mP.MP(e.ty()),s=0,o=n;s<o.length;s++){var h=o[s];this.LP(t,h.Zg(),r),r.BP=!0}}else{var u=c.Ow.Cw;this.qw.AI()&&(u=c.Ow.kw),this.TP.eI(e.bitrate,u,u)}return r},e.prototype.LP=function(e,t,r){e!=u.Cg.Pg&&e!=u.Cg.kg||t!=u.Cg.bg&&t!=u.Cg.kg&&t!=u.Cg.Pg||(r.xP=!0)},e.prototype.AP=function(e){return e!=u.Cg.kg&&e!=u.Cg.Pg},e.prototype.UP=function(e,t,r){for(var i=!1,n=this.mP.MP(t.ty()),s=0,o=n;s<o.length;s++){var a=o[s];a.Zg()!=u.Cg.bg&&(this.TP.HI(a,e),i=!0)}return i},e.prototype.HP=function(e){this.mP.HP(e)},e.prototype.qP=function(e,t){this.mP.qP(e,t)},e.prototype.VP=function(e){this.mP.VP(e)},e.prototype.jP=function(e){this.mP.GP(e)},e.prototype.QP=function(e){this.mP.YP()||this.TP.sI(e)},e.prototype.Ww=function(){var e=this.vP.keys();return e.length>0?this.vP.get(e[e.length-1]):null},e.prototype.KP=function(){var e=this.vP.keys();if(e.length>0)return e[e.length-1]},e.prototype.JP=function(e){var t=this.zP(e);null!=t&&this.QP(t.bitrate)},e.prototype.zP=function(e){var t=e.fragmentId,r=t.slice(0,t.lastIndexOf("-")),i=r.slice(0,r.lastIndexOf("-")),n=e.getType();return new s.Pw(i,n,(!0),e.id,e.duration,e.bitrate,(!0))},e.prototype.bI=function(){return!1},e.prototype._I=function(e,t,r,i){return 0},e.prototype.OI=function(){return 3e4},e.prototype.WP=function(){return 1e4},e.prototype.II=function(e){return null},e.prototype.uI=function(e,t,r){return null},e.prototype.Qe=function(){return null},e.prototype.isLive=function(){return!1},e.prototype.TI=function(e){},e.prototype.XP=function(){},e.prototype.$P=function(){return null},e.prototype.ZP=function(e){},e.prototype.eA=function(){},e.prototype.tA=function(e){},e.prototype.rA=function(e){},e.prototype.iA=function(e){e.ey()===h.Es.vs&&this.qP(e.ty(),e.iy())},e.prototype.nA=function(){return null},e.prototype.sA=function(e){},e.prototype.CI=function(e,t){return 0},e}();t.oA=p},function(e,t,r){"use strict";var i,n=r(42),s=r(2),o=s.Ze;!function(e){var t;!function(e){e[e.off=0]="off",e[e.error=1]="error",e[e.warn=2]="warn",e[e.notice=3]="notice",e[e.info=4]="info",e[e.debug=5]="debug",e[e.trace=6]="trace"}(t=e.aA||(e.aA={}));var r=function(){function e(){this.timestamp=function(){},this.hA=new o,this.level=t.debug,this.timestamp.toString=function(){var e=new Date,t=("0"+e.getUTCHours()).slice(-2)+":"+("0"+e.getUTCMinutes()).slice(-2)+":"+("0"+e.getUTCSeconds()).slice(-2)+":"+e.getUTCMilliseconds();return"["+t+"]"},this.R="undefined"==typeof console?{log:function(){}}:console,this.R.trace||(this.R.trace=this.R.log),this.R.debug||(this.R.debug=this.R.log),this.R.info||(this.R.info=this.R.log),this.R.warn||(this.R.warn=this.R.log),this.R.error||(this.R.error=this.R.log),this.uA(t[this.level])}return e.prototype.uA=function(e,r){n.HiveConfig.Framework.HiveDebugLevel&&void 0!=t[n.HiveConfig.Framework.HiveDebugLevel]?this.level=t[n.HiveConfig.Framework.HiveDebugLevel]:void 0!=t[e]?this.level=t[e]:console.log("Wrong logging level: "+e,t),this.cA(r)},e.prototype.cA=function(e){var r={log:this.lA(this.R.log,t.error,e),error:this.lA(this.R.error,t.error,e),warn:this.lA(this.R.warn,t.warn,e),notice:this.lA(this.R.info,t.notice,e),info:this.lA(this.R.info,t.info,e),debug:this.lA(this.R.debug,t.debug,e),trace:this.lA(this.R.trace,t.trace,e)};e?this.hA.set(e,r):this.pA=r},e.prototype.lA=function(e,t,r){if(!(this.level>=t))return function(){};try{return n.HiveConfig.Framework.LoggerTimestamp?r?Function.prototype.bind.call(e,console,"%s %s",this.timestamp,r):Function.prototype.bind.call(e,console,"%s",this.timestamp):Function.prototype.bind.call(e,console)}catch(i){}},e.prototype.log=function(e){return e?(this.hA.has(e)||this.uA(t[this.level],e),this.hA.get(e)):this.pA},e}();e.fA=r}(i=t.dA||(t.dA={}))},function(e,t){"use strict";var r;!function(e){var t=function(){function e(){}return e}();t.LoggerTimestamp=!0,e.Framework=t}(r=t.HiveConfig||(t.HiveConfig={})),"undefined"!=typeof window&&("undefined"==typeof window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.Framework=r.Framework)},function(e,t){"use strict";var r=function(){function e(){}return e}();r.ma="https:"===location.protocol,r.ba=!0,r.gA=1e4,r.yA=6e4,t.ct=r},function(e,t,r){var i;!function(n,s){"use strict";var o="0.7.12",a="",h="?",u="function",c="undefined",l="object",p="string",f="major",d="model",g="name",y="type",v="vendor",m="version",T="architecture",E="console",w="mobile",I="tablet",S="smarttv",b="wearable",R="embedded",P={extend:function(e,t){var r={};for(var i in e)t[i]&&t[i].length%2===0?r[i]=t[i].concat(e[i]):r[i]=e[i];return r},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},vA:function(e){return e.toLowerCase()},mA:function(e){return typeof e===p?e.replace(/[^\d\.]/g,"").split(".")[0]:s},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},A={TA:function(){for(var e,t,r,i,n,o,a,h=0,p=arguments;h<p.length&&!o;){var f=p[h],d=p[h+1];if(typeof e===c){e={};for(i in d)d.hasOwnProperty(i)&&(n=d[i],typeof n===l?e[n[0]]=s:e[n]=s)}for(t=r=0;t<f.length&&!o;)if(o=f[t++].exec(this.EA()))for(i=0;i<d.length;i++)a=o[++r],n=d[i],typeof n===l&&n.length>0?2==n.length?typeof n[1]==u?e[n[0]]=n[1].call(this,a):e[n[0]]=n[1]:3==n.length?typeof n[1]!==u||n[1].exec&&n[1].test?e[n[0]]=a?a.replace(n[1],n[2]):s:e[n[0]]=a?n[1].call(this,a,n[2]):s:4==n.length&&(e[n[0]]=a?n[3].call(this,a.replace(n[1],n[2])):s):e[n]=a?a:s;h+=2}return e},str:function(e,t){for(var r in t)if(typeof t[r]===l&&t[r].length>0){for(var i=0;i<t[r].length;i++)if(P.has(t[r][i],e))return r===h?s:r}else if(P.has(t[r],e))return r===h?s:r;return e}},k={Ls:{wA:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419",kb:"/"}}},iP:{IA:{SA:{bA:["SD","KF"]}},RA:{SA:{PA:"7373KT"},vendor:{AA:"APA",kA:"Sprint"}}},os:{CA:{version:{OA:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",NA:["NT 5.1","NT 5.2"],_A:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],FA:"ARM"}}}},C={Ls:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[g,m],[/(opios)[\/\s]+([\w\.]+)/i],[[g,"Opera Mini"],m],[/\s(opr)\/([\w\.]+)/i],[[g,"Opera"],m],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[g,m],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[g,"IE"],m],[/(edge)\/((\d+)?[\w\.]+)/i],[g,m],[/(yabrowser)\/([\w\.]+)/i],[[g,"Yandex"],m],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],m],[/(micromessenger)\/([\w\.]+)/i],[[g,"WeChat"],m],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[m,[g,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[g,/(.+)/,"$1 WebView"],m],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[m,[g,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[g,m],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[g,"UCBrowser"],m],[/(dolfin)\/([\w\.]+)/i],[[g,"Dolphin"],m],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[g,"Chrome"],m],[/;fbav\/([\w\.]+);/i],[m,[g,"Facebook"]],[/fxios\/([\w\.-]+)/i],[m,[g,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[m,[g,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[m,g],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[g,[m,A.str,k.Ls.wA.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[g,m],[/(navigator|netscape)\/([\w\.-]+)/i],[[g,"Netscape"],m],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[g,m]],LA:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[T,"amd64"]],[/(ia32(?=;))/i],[[T,P.vA]],[/((?:i[346]|x)86)[;\)]/i],[[T,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[T,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[T,/ower/,"",P.vA]],[/(sun4\w)[;\)]/i],[[T,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[T,P.vA]]],iP:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[d,v,[y,I]],[/applecoremedia\/[\w\.]+ \((ipad)/],[d,[v,"Apple"],[y,I]],[/(apple\s{0,1}tv)/i],[[d,"Apple TV"],[v,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[v,d,[y,I]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[d,[v,"Amazon"],[y,I]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[d,A.str,k.iP.IA.SA],[v,"Amazon"],[y,w]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[d,v,[y,w]],[/\((ip[honed|\s\w*]+);/i],[d,[v,"Apple"],[y,w]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[v,d,[y,w]],[/\(bb10;\s(\w+)/i],[d,[v,"BlackBerry"],[y,w]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[d,[v,"Asus"],[y,I]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[v,"Sony"],[d,"Xperia Tablet"],[y,I]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[v,"Sony"],[d,"Xperia Phone"],[y,w]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[v,d,[y,E]],[/android.+;\s(shield)\sbuild/i],[d,[v,"Nvidia"],[y,E]],[/(playstation\s[34portablevi]+)/i],[d,[v,"Sony"],[y,E]],[/(sprint\s(\w+))/i],[[v,A.str,k.iP.RA.vendor],[d,A.str,k.iP.RA.SA],[y,w]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[v,d,[y,I]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[v,[d,/_/g," "],[y,w]],[/(nexus\s9)/i],[d,[v,"HTC"],[y,I]],[/(nexus\s6p)/i],[d,[v,"Huawei"],[y,w]],[/(microsoft);\s(lumia[\s\w]+)/i],[v,d,[y,w]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[d,[v,"Microsoft"],[y,E]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[v,"Microsoft"],[y,w]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[d,[v,"Motorola"],[y,w]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[d,[v,"Motorola"],[y,I]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[v,P.trim],[d,P.trim],[y,S]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[v,"Samsung"],[y,S]],[/\(dtv[\);].+(aquos)/i],[d,[v,"Sharp"],[y,S]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[v,"Samsung"],d,[y,I]],[/smart-tv.+(samsung)/i],[v,[y,S],d],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[v,"Samsung"],d,[y,w]],[/sie-(\w+)*/i],[d,[v,"Siemens"],[y,w]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[v,"Nokia"],d,[y,w]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[d,[v,"Acer"],[y,I]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[v,"LG"],d,[y,I]],[/(lg) netcast\.tv/i],[v,d,[y,S]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[d,[v,"LG"],[y,w]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[d,[v,"Lenovo"],[y,I]],[/linux;.+((jolla));/i],[v,d,[y,w]],[/((pebble))app\/[\d\.]+\s/i],[v,d,[y,b]],[/android.+;\s(glass)\s\d/i],[d,[v,"Google"],[y,b]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[d,/_/g," "],[v,"Xiaomi"],[y,w]],[/android.+a000(1)\s+build/i],[d,[v,"OnePlus"],[y,w]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[y,P.vA],v,d]],
DA:[[/windows.+\sedge\/([\w\.]+)/i],[m,[g,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[g,m],[/rv\:([\w\.]+).*(gecko)/i],[m,g]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[g,m],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[g,[m,A.str,k.os.CA.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[g,"Windows"],[m,A.str,k.os.CA.version]],[/\((bb)(10);/i],[[g,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[g,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[g,"Symbian"],m],[/\((series40);/i],[g],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[g,"Firefox OS"],m],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[g,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[g,"Chromium OS"],m],[/(sunos)\s?([\w\.]+\d)*/i],[[g,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[g,m],[/(haiku)\s(\w+)/i],[g,m],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[g,"iOS"],[m,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[g,"Mac OS"],[m,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[g,m]]},O=function(e,t){if(!(this instanceof O))return new O(e,t).MA();var r=e||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:a),i=t?P.extend(C,t):C;return this.BA=function(){var e=A.TA.apply(this,i.Ls);return e.mA=P.mA(e.version),e},this.xA=function(){return A.TA.apply(this,i.LA)},this.UA=function(){return A.TA.apply(this,i.iP)},this.HA=function(){return A.TA.apply(this,i.DA)},this.zh=function(){return A.TA.apply(this,i.os)},this.MA=function(){return{Gc:this.EA(),Ls:this.BA(),DA:this.HA(),os:this.zh(),iP:this.UA(),LA:this.xA()}},this.EA=function(){return r},this.Jh=function(e){return r=e,this},this};O.VERSION=o,O.qA={VA:g,jA:f,VERSION:m},O.GA={QA:T},O.YA={KA:d,VENDOR:v,JA:y,zA:E,WA:w,XA:S,$A:I,ZA:b,ek:R},O.tk={VA:g,VERSION:m},O.rk={VA:g,VERSION:m},typeof t!==c?(typeof e!==c&&e.i&&(t=e.i=O),t.rh=O):"function"===u&&r(162)?(i=function(){return O}.call(t,r,t,e),!(i!==s&&(e.i=i))):n.rh=O;var N=n.jQuery||n.Zepto;if(typeof N!==c){var _=new O;N.Gc=_.MA(),N.Gc.get=function(){return _.EA()},N.Gc.set=function(e){_.Jh(e);var t=_.MA();for(var r in t)N.Gc[r]=t[r]}}}("object"==typeof window?window:this)},function(e,t,r){"use strict";!function(){var t=r(11),i=t.log,n=t.Bs;e.i.Bs=n,e.i._s=t._s,e.i.Ns=t.Ns;var s=r(163)||null,o=r(165)||null,a=r(167)||null,h=r(169)||null;switch(n.Ls){case"chrome":if(!s||!s.ik)return void i("Chrome shim is not included in this adapter release.");i("adapter.js shimming chrome."),e.i.nk=s,s.sk(),s.ak(),t.Ds(),s.hk(),s.ik(),s.uk(),s.ck();break;case"firefox":if(!a||!a.ik)return void i("Firefox shim is not included in this adapter release.");i("adapter.js shimming firefox."),e.i.nk=a,a.sk(),t.Ds(),a.hk(),a.ik(),a.uk();break;case"edge":if(!o||!o.ik)return void i("MS edge shim is not included in this adapter release.");i("adapter.js shimming edge."),e.i.nk=o,o.sk(),t.Ds(),o.ik();break;case"safari":if(!h)return void i("Safari shim is not included in this adapter release.");i("adapter.js shimming safari."),e.i.nk=h,h.sk();break;default:i("Unsupported browser!")}}()},function(e,t,r){var i=function(e,t,r){function i(e){var t=e.localName;return null==t&&(t=e.lk),null!=t&&""!=t||(t=e.nodeName),t}function n(e){return e.prefix}function s(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}function o(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function a(s){if(s.nodeType==E.DOCUMENT_NODE){var h,u,c,l=s.firstChild;for(u=0,c=s.childNodes.length;u<c;u+=1)if(s.childNodes[u].nodeType!==E.COMMENT_NODE){l=s.childNodes[u];break}if(r)h=a(l);else{h={};var p=i(l);h[p]=a(l)}return h}if(s.nodeType==E.ELEMENT_NODE){var h=new Object;h.__cnt=0;for(var f=s.childNodes,d=0;d<f.length;d++){var l=f.item(d),p=i(l);if(h.__cnt++,null==h[p])h[p]=a(l),h[p+"_asArray"]=new Array(1),h[p+"_asArray"][0]=h[p];else{if(null!=h[p]&&!(h[p]instanceof Array)){var g=h[p];h[p]=new Array,h[p][0]=g,h[p+"_asArray"]=h[p]}for(var y=0;null!=h[p][y];)y++;h[p][y]=a(l)}}for(var v=0;v<s.attributes.length;v++){var m=s.attributes.item(v);h.__cnt++;for(var w=m.value,I=0,S=e.length;I<S;I++){var b=e[I];try{b.test.call(this,m)&&(w=b.pk.call(this,m.value))}catch(R){b.test.call(this,m),console.error(R)}}h[t+m.name]=w}var P=n(s);return null!=P&&""!=P&&(h.__cnt++,h.__prefix=P),1==h.__cnt&&null!=h["fk"]&&(h=h["fk"]),null!=h["fk"]&&(h.__text=h["fk"],T&&(h.__text=o(h.__text)),delete h["fk"],delete h["#text_asArray"]),null!=h["dk"]&&(h.__cdata=h["dk"],delete h["dk"],delete h["#cdata-section_asArray"]),null==h.__text&&null==h.__cdata||(h.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),h}return s.nodeType==E.TEXT_NODE||s.nodeType==E.CDATA_SECTION_NODE?s.nodeValue:s.nodeType==E.COMMENT_NODE?null:void 0}function h(e,t,r,i){var n="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=r)for(var s=0;s<r.length;s++){var o=r[s],a=e[o];n+=" "+o.substr(1)+"='"+a+"'"}return n+=i?"/>":">"}function u(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(e,t){return e.indexOf(t,e.length-t.length)!==-1}function l(e,t){return!!(c(t.toString(),"_asArray")||0==t.toString().indexOf("_")||e[t]instanceof Function)}function p(e){var t=0;if(e instanceof Object)for(var r in e)l(e,r)||t++;return t}function f(e){var t=[];if(e instanceof Object)for(var r in e)r.toString().indexOf("__")==-1&&0==r.toString().indexOf("_")&&t.push(r);return t}function d(e){var t="";return null!=e.__cdata&&(t+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(t+=T?s(e.__text):e.__text),t}function g(e){var t="";return e instanceof Object?t+=d(e):null!=e&&(t+=T?s(e):e),t}function y(e,t,r){var i="";if(0==e.length)i+=h(e,t,r,!0);else for(var n=0;n<e.length;n++)i+=h(e[n],t,f(e[n]),!1),i+=v(e[n]),i+=u(e[n],t);return i}function v(e){var t="",r=p(e);if(r>0)for(var i in e)if(!l(e,i)){var n=e[i],s=f(n);if(null==n||void 0==n)t+=h(n,i,s,!0);else if(n instanceof Object)if(n instanceof Array)t+=y(n,i,s);else{var o=p(n);o>0||null!=n.__text||null!=n.__cdata?(t+=h(n,i,s,!1),t+=v(n),t+=u(n,i)):t+=h(n,i,s,!0)}else t+=h(n,i,s,!1),t+=g(n),t+=u(n,i)}return t+=g(e)}null!==t&&void 0!==t||(t="_"),null!==r&&void 0!==r||(r=!1);var m="1.0.11",T=!1,E={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.gk=function(e){var t;if(window.DOMParser){var r=new window.DOMParser;t=r.parseFromString(e,"text/xml")}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},this.yk=function(e){return a(e)},this.vk=function(e){var t=this.gk(e);return this.yk(t)},this.mk=function(e){return v(e)},this.Tk=function(e){var t=this.mk(e);return this.gk(t)},this.getVersion=function(){return m},this.Ek=function(e){T=e}};e.i=i},function(e,t,r){(function(t){/*! uuid.js
	 * Copyright (c) 2010-2012 Robert Kieffer
	 * MIT License - http://opensource.org/licenses/mit-license.php
	 */
!function(i){"use strict";function n(){var e=i.crypto||i.msCrypto;if(!c&&e&&e.getRandomValues)try{var t=new Uint8Array(16);f=c=function(){return e.getRandomValues(t),t},c()}catch(r){}if(!c){var n=new Array(16);l=c=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function s(){try{var e=r(82).randomBytes;p=c=e&&function(){return e(16)},c()}catch(t){}}function o(e,t,r){var i=t&&r||0,n=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){n<16&&(t[i+n++]=v[e])});n<16;)t[i+n++]=0;return t}function a(e,t){var r=t||0,i=y;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}function h(e,t,r){var i=t&&r||0,n=t||[];e=e||{};var s=null!=e.clockseq?e.clockseq:w,o=null!=e.msecs?e.msecs:(new Date).getTime(),h=null!=e.nsecs?e.nsecs:S+1,u=o-I+(h-S)/1e4;if(u<0&&null==e.clockseq&&(s=s+1&16383),(u<0||o>I)&&null==e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");I=o,S=h,w=s,o+=122192928e5;var c=(1e4*(268435455&o)+h)%4294967296;n[i++]=c>>>24&255,n[i++]=c>>>16&255,n[i++]=c>>>8&255,n[i++]=255&c;var l=o/4294967296*1e4&268435455;n[i++]=l>>>8&255,n[i++]=255&l,n[i++]=l>>>24&15|16,n[i++]=l>>>16&255,n[i++]=s>>>8|128,n[i++]=255&s;for(var p=e.node||E,f=0;f<6;f++)n[i+f]=p[f];return t?t:a(n)}function u(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new g(16):null,e=null),e=e||{};var n=e.random||(e.rng||c)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t)for(var s=0;s<16;s++)t[i+s]=n[s];return t||a(n)}var c,l,p,f,d;i?n():s();for(var g="function"==typeof t?t:Array,y=[],v={},m=0;m<256;m++)y[m]=(m+256).toString(16).substr(1),v[y[m]]=m;var T=c(),E=[1|T[0],T[1],T[2],T[3],T[4],T[5]],w=16383&(T[6]<<8|T[7]),I=0,S=0,b=u;b.wk=h,b.CS=u,b.parse=o,b.Ik=a,b.Sk=g,b.bk=c,b.Rk=l,b.Pk=p,b.Ak=f,"undefined"!=typeof e&&e.i?e.i=b:(d=i.uuid,b.Vr=function(){return i.uuid=d,b},i.uuid=b)}("undefined"!=typeof window?window:null)}).call(t,r(5).Buffer)},function(e,t,r){var i,n,s;(function(e){/**
	 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
	 * Released under the Apache License, Version 2.0
	 * see: https://github.com/dcodeIO/Long.js for details
	 */
!function(o,a){r(27).amd?(n=[],i=a,s="function"==typeof i?i.apply(t,n):i,!(void 0!==s&&(e.i=s))):"object"==typeof e&&e&&e.i?e.i=a():(o.Vm=o.Vm||{}).Ky=a()}(this,function(){"use strict";function e(e,t,r){this.low=0|e,this.high=0|t,this.Yv=!!r}e.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,kk:!1,Ck:!1}),e.Ok=function(e){return(e&&e.__isLong__)===!0};var t={},r={};e.Ou=function(i,n){var s,o;return n?(i>>>=0,0<=i&&i<256&&(o=r[i])?o:(s=new e(i,(0|i)<0?-1:0,(!0)),0<=i&&i<256&&(r[i]=s),s)):(i=0|i,-128<=i&&i<128&&(o=t[i])?o:(s=new e(i,i<0?-1:0,(!1)),-128<=i&&i<128&&(t[i]=s),s))},e.Pu=function(t,r){return r=!!r,isNaN(t)||!isFinite(t)?e.ZERO:!r&&t<=-o?e.MIN_VALUE:!r&&t+1>=o?e.MAX_VALUE:r&&t>=s?e.Nk:t<0?e.Pu(-t,r).Du():new e(t%n|0,t/n|0,r)},e.ld=function(t,r,i){return new e(t,r,i)},e.Au=function(t,r,i){if(0===t.length)throw Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e.ZERO;if("number"==typeof r&&(i=r,r=!1),i=i||10,i<2||36<i)throw Error("radix out of range: "+i);var n;if((n=t.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+t);if(0===n)return e.Au(t.substring(1),r,i).Du();for(var s=e.Pu(Math.pow(i,8)),o=e.ZERO,a=0;a<t.length;a+=8){var h=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+h),i);if(h<8){var c=e.Pu(Math.pow(i,h));o=o.multiply(c).add(e.Pu(u))}else o=o.multiply(s),o=o.add(e.Pu(u))}return o.Yv=r,o},e._k=function(t){return t instanceof e?t:"number"==typeof t?e.Pu(t):"string"==typeof t?e.Au(t):new e(t.low,t.high,t.Yv)};var i=1<<24,n=4294967296,s=0x10000000000000000,o=s/2,a=e.Ou(i);return e.ZERO=e.Ou(0),e.Fk=e.Ou(0,!0),e.ONE=e.Ou(1),e.Lk=e.Ou(1,!0),e.Dk=e.Ou(-1),e.MAX_VALUE=e.ld(-1,2147483647,!1),e.Nk=e.ld(-1,-1,!0),e.MIN_VALUE=e.ld(0,-2147483648,!1),e.prototype.jv=function(){return this.Yv?this.low>>>0:this.low},e.prototype.Mk=function(){return this.Yv?(this.high>>>0)*n+(this.low>>>0):this.high*n+(this.low>>>0)},e.prototype.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix out of range: "+t);if(this.Bk())return"0";var r;if(this.xk()){if(this.qR(e.MIN_VALUE)){var i=e.Pu(t),n=this.Uk(i);return r=n.multiply(i).Hk(this),n.toString(t)+r.jv().toString(t)}return"-"+this.Du().toString(t)}var s=e.Pu(Math.pow(t,6),this.Yv);r=this;for(var o="";;){var a=r.Uk(s),h=r.Hk(a.multiply(s)).jv()>>>0,u=h.toString(t);if(r=a,r.Bk())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},e.prototype.qk=function(){return this.high},e.prototype.Vk=function(){return this.high>>>0},e.prototype.jk=function(){return this.low},e.prototype.Gk=function(){return this.low>>>0},e.prototype.Qk=function(){if(this.xk())return this.qR(e.MIN_VALUE)?64:this.Du().Qk();for(var t=0!=this.high?this.high:this.low,r=31;r>0&&0==(t&1<<r);r--);return 0!=this.high?r+33:r+1},e.prototype.Bk=function(){return 0===this.high&&0===this.low},e.prototype.xk=function(){return!this.Yv&&this.high<0},e.prototype.Yk=function(){return this.Yv||this.high>=0},e.prototype.Kk=function(){return 1===(1&this.low)},e.prototype.oc=function(){return 0===(1&this.low)},e.prototype.qR=function(t){return e.Ok(t)||(t=e._k(t)),(this.Yv===t.Yv||this.high>>>31!==1||t.high>>>31!==1)&&(this.high===t.high&&this.low===t.low)},e.Jk=e.prototype.qR,e.prototype.zk=function(e){return!this.qR(e)},e.Wk=e.prototype.zk,e.prototype.Xk=function(e){return this.$k(e)<0},e.prototype.Zk=e.prototype.Xk,e.prototype.eC=function(e){return this.$k(e)<=0},e.prototype.tC=e.prototype.eC,e.prototype.rC=function(e){return this.$k(e)>0},e.prototype.iC=e.prototype.rC,e.prototype.nC=function(e){return this.$k(e)>=0},e.prototype.sC=e.prototype.nC,e.prototype.$k=function(t){if(e.Ok(t)||(t=e._k(t)),this.qR(t))return 0;var r=this.xk(),i=t.xk();return r&&!i?-1:!r&&i?1:this.Yv?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.Hk(t).xk()?-1:1},e.prototype.Du=function(){return!this.Yv&&this.qR(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.oC=e.prototype.Du,e.prototype.add=function(t){e.Ok(t)||(t=e._k(t));var r=this.high>>>16,i=65535&this.high,n=this.low>>>16,s=65535&this.low,o=t.high>>>16,a=65535&t.high,h=t.low>>>16,u=65535&t.low,c=0,l=0,p=0,f=0;return f+=s+u,p+=f>>>16,f&=65535,p+=n+h,l+=p>>>16,p&=65535,l+=i+a,c+=l>>>16,l&=65535,c+=r+o,c&=65535,e.ld(p<<16|f,c<<16|l,this.Yv)},e.prototype.Hk=function(t){return e.Ok(t)||(t=e._k(t)),this.add(t.Du())},e.prototype.sub=e.prototype.Hk,e.prototype.multiply=function(t){if(this.Bk())return e.ZERO;if(e.Ok(t)||(t=e._k(t)),t.Bk())return e.ZERO;if(this.qR(e.MIN_VALUE))return t.Kk()?e.MIN_VALUE:e.ZERO;if(t.qR(e.MIN_VALUE))return this.Kk()?e.MIN_VALUE:e.ZERO;if(this.xk())return t.xk()?this.Du().multiply(t.Du()):this.Du().multiply(t).Du();if(t.xk())return this.multiply(t.Du()).Du();if(this.Xk(a)&&t.Xk(a))return e.Pu(this.Mk()*t.Mk(),this.Yv);var r=this.high>>>16,i=65535&this.high,n=this.low>>>16,s=65535&this.low,o=t.high>>>16,h=65535&t.high,u=t.low>>>16,c=65535&t.low,l=0,p=0,f=0,d=0;return d+=s*c,f+=d>>>16,d&=65535,f+=n*c,p+=f>>>16,f&=65535,f+=s*u,p+=f>>>16,f&=65535,p+=i*c,l+=p>>>16,p&=65535,p+=n*u,l+=p>>>16,p&=65535,p+=s*h,l+=p>>>16,p&=65535,l+=r*c+i*u+n*h+s*o,l&=65535,e.ld(f<<16|d,l<<16|p,this.Yv)},e.prototype.aC=e.prototype.multiply,e.prototype.Uk=function(t){if(e.Ok(t)||(t=e._k(t)),t.Bk())throw new Error("division by zero");if(this.Bk())return this.Yv?e.Fk:e.ZERO;var r,i,n;if(this.qR(e.MIN_VALUE)){if(t.qR(e.ONE)||t.qR(e.Dk))return e.MIN_VALUE;if(t.qR(e.MIN_VALUE))return e.ONE;var s=this.zv(1);return r=s.Uk(t).shiftLeft(1),r.qR(e.ZERO)?t.xk()?e.ONE:e.Dk:(i=this.Hk(t.multiply(r)),n=r.add(i.Uk(t)))}if(t.qR(e.MIN_VALUE))return this.Yv?e.Fk:e.ZERO;if(this.xk())return t.xk()?this.Du().Uk(t.Du()):this.Du().Uk(t).Du();if(t.xk())return this.Uk(t.Du()).Du();for(n=e.ZERO,i=this;i.nC(t);){r=Math.max(1,Math.floor(i.Mk()/t.Mk()));for(var o=Math.ceil(Math.log(r)/Math.LN2),a=o<=48?1:Math.pow(2,o-48),h=e.Pu(r),u=h.multiply(t);u.xk()||u.rC(i);)r-=a,h=e.Pu(r,this.Yv),u=h.multiply(t);h.Bk()&&(h=e.ONE),n=n.add(h),i=i.Hk(u)}return n},e.prototype.hC=e.prototype.Uk,e.prototype.uC=function(t){return e.Ok(t)||(t=e._k(t)),this.Hk(this.Uk(t).multiply(t))},e.prototype.Ku=e.prototype.uC,e.prototype.not=function(){return e.ld(~this.low,~this.high,this.Yv)},e.prototype.Xv=function(t){return e.Ok(t)||(t=e._k(t)),e.ld(this.low&t.low,this.high&t.high,this.Yv)},e.prototype.or=function(t){return e.Ok(t)||(t=e._k(t)),e.ld(this.low|t.low,this.high|t.high,this.Yv)},e.prototype.Jl=function(t){return e.Ok(t)||(t=e._k(t)),e.ld(this.low^t.low,this.high^t.high,this.Yv)},e.prototype.shiftLeft=function(t){return e.Ok(t)&&(t=t.jv()),0===(t&=63)?this:t<32?e.ld(this.low<<t,this.high<<t|this.low>>>32-t,this.Yv):e.ld(0,this.low<<t-32,this.Yv)},e.prototype.cC=e.prototype.shiftLeft,e.prototype.zv=function(t){return e.Ok(t)&&(t=t.jv()),0===(t&=63)?this:t<32?e.ld(this.low>>>t|this.high<<32-t,this.high>>t,this.Yv):e.ld(this.high>>t-32,this.high>=0?0:-1,this.Yv)},e.prototype.lC=e.prototype.zv,e.prototype.Gv=function(t){if(e.Ok(t)&&(t=t.jv()),t&=63,0===t)return this;var r=this.high;if(t<32){var i=this.low;return e.ld(i>>>t|r<<32-t,r>>>t,this.Yv)}return 32===t?e.ld(r,0,this.Yv):e.ld(r>>>t-32,0,this.Yv)},e.prototype.pC=e.prototype.Gv,e.prototype.Kv=function(){return this.Yv?new e(this.low,this.high,(!1)):this},e.prototype.Jv=function(){return this.Yv?this:new e(this.low,this.high,(!0))},e})}).call(t,r(28)(e))},function(e,t,r){var i,n,s;(function(e){/**
	 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
	 * Released under the Apache License, Version 2.0
	 * see: https://github.com/dcodeIO/Long.js for details
	 */
!function(o,a){r(27).amd?(n=[],i=a,s="function"==typeof i?i.apply(t,n):i,!(void 0!==s&&(e.i=s))):"object"==typeof e&&e&&e.i?e.i=a():(o.Vm=o.Vm||{}).Ky=a()}(this,function(){"use strict";function e(e,t,r){this.low=0|e,this.high=0|t,this.Yv=!!r}e.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,kk:!1,Ck:!1}),e.Ok=function(e){return(e&&e.__isLong__)===!0};var t={},r={};e.Ou=function(i,n){var s,o;return n?(i>>>=0,0<=i&&i<256&&(o=r[i])?o:(s=new e(i,(0|i)<0?-1:0,(!0)),0<=i&&i<256&&(r[i]=s),s)):(i=0|i,-128<=i&&i<128&&(o=t[i])?o:(s=new e(i,i<0?-1:0,(!1)),-128<=i&&i<128&&(t[i]=s),s))},e.Pu=function(t,r){return r=!!r,isNaN(t)||!isFinite(t)?e.ZERO:!r&&t<=-o?e.MIN_VALUE:!r&&t+1>=o?e.MAX_VALUE:r&&t>=s?e.Nk:t<0?e.Pu(-t,r).Du():new e(t%n|0,t/n|0,r)},e.ld=function(t,r,i){return new e(t,r,i)},e.Au=function(t,r,i){if(0===t.length)throw Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e.ZERO;if("number"==typeof r&&(i=r,r=!1),i=i||10,i<2||36<i)throw Error("radix out of range: "+i);var n;if((n=t.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+t);if(0===n)return e.Au(t.substring(1),r,i).Du();for(var s=e.Pu(Math.pow(i,8)),o=e.ZERO,a=0;a<t.length;a+=8){var h=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+h),i);if(h<8){var c=e.Pu(Math.pow(i,h));o=o.multiply(c).add(e.Pu(u))}else o=o.multiply(s),o=o.add(e.Pu(u))}return o.Yv=r,o},e._k=function(t){return t instanceof e?t:"number"==typeof t?e.Pu(t):"string"==typeof t?e.Au(t):new e(t.low,t.high,t.Yv)};var i=1<<24,n=4294967296,s=0x10000000000000000,o=s/2,a=e.Ou(i);return e.ZERO=e.Ou(0),e.Fk=e.Ou(0,!0),e.ONE=e.Ou(1),e.Lk=e.Ou(1,!0),e.Dk=e.Ou(-1),e.MAX_VALUE=e.ld(-1,2147483647,!1),e.Nk=e.ld(-1,-1,!0),e.MIN_VALUE=e.ld(0,-2147483648,!1),e.prototype.jv=function(){return this.Yv?this.low>>>0:this.low},e.prototype.Mk=function(){return this.Yv?(this.high>>>0)*n+(this.low>>>0):this.high*n+(this.low>>>0)},e.prototype.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix out of range: "+t);if(this.Bk())return"0";var r;if(this.xk()){if(this.qR(e.MIN_VALUE)){var i=e.Pu(t),n=this.Uk(i);return r=n.multiply(i).Hk(this),n.toString(t)+r.jv().toString(t)}return"-"+this.Du().toString(t)}var s=e.Pu(Math.pow(t,6),this.Yv);r=this;for(var o="";;){var a=r.Uk(s),h=r.Hk(a.multiply(s)).jv()>>>0,u=h.toString(t);if(r=a,r.Bk())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},e.prototype.qk=function(){return this.high},e.prototype.Vk=function(){return this.high>>>0},e.prototype.jk=function(){return this.low},e.prototype.Gk=function(){return this.low>>>0},e.prototype.Qk=function(){if(this.xk())return this.qR(e.MIN_VALUE)?64:this.Du().Qk();for(var t=0!=this.high?this.high:this.low,r=31;r>0&&0==(t&1<<r);r--);return 0!=this.high?r+33:r+1},e.prototype.Bk=function(){return 0===this.high&&0===this.low},e.prototype.xk=function(){return!this.Yv&&this.high<0},e.prototype.Yk=function(){return this.Yv||this.high>=0},e.prototype.Kk=function(){return 1===(1&this.low)},e.prototype.oc=function(){return 0===(1&this.low)},e.prototype.qR=function(t){return e.Ok(t)||(t=e._k(t)),(this.Yv===t.Yv||this.high>>>31!==1||t.high>>>31!==1)&&(this.high===t.high&&this.low===t.low)},e.Jk=e.prototype.qR,e.prototype.zk=function(e){return!this.qR(e)},e.Wk=e.prototype.zk,e.prototype.Xk=function(e){return this.$k(e)<0},e.prototype.Zk=e.prototype.Xk,e.prototype.eC=function(e){return this.$k(e)<=0},e.prototype.tC=e.prototype.eC,e.prototype.rC=function(e){return this.$k(e)>0},e.prototype.iC=e.prototype.rC,e.prototype.nC=function(e){return this.$k(e)>=0},e.prototype.sC=e.prototype.nC,e.prototype.$k=function(t){if(e.Ok(t)||(t=e._k(t)),this.qR(t))return 0;var r=this.xk(),i=t.xk();return r&&!i?-1:!r&&i?1:this.Yv?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.Hk(t).xk()?-1:1},e.prototype.Du=function(){return!this.Yv&&this.qR(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.oC=e.prototype.Du,e.prototype.add=function(t){e.Ok(t)||(t=e._k(t));var r=this.high>>>16,i=65535&this.high,n=this.low>>>16,s=65535&this.low,o=t.high>>>16,a=65535&t.high,h=t.low>>>16,u=65535&t.low,c=0,l=0,p=0,f=0;return f+=s+u,p+=f>>>16,f&=65535,p+=n+h,l+=p>>>16,p&=65535,l+=i+a,c+=l>>>16,l&=65535,c+=r+o,c&=65535,e.ld(p<<16|f,c<<16|l,this.Yv)},e.prototype.Hk=function(t){return e.Ok(t)||(t=e._k(t)),this.add(t.Du())},e.prototype.sub=e.prototype.Hk,e.prototype.multiply=function(t){if(this.Bk())return e.ZERO;if(e.Ok(t)||(t=e._k(t)),t.Bk())return e.ZERO;if(this.qR(e.MIN_VALUE))return t.Kk()?e.MIN_VALUE:e.ZERO;if(t.qR(e.MIN_VALUE))return this.Kk()?e.MIN_VALUE:e.ZERO;if(this.xk())return t.xk()?this.Du().multiply(t.Du()):this.Du().multiply(t).Du();if(t.xk())return this.multiply(t.Du()).Du();if(this.Xk(a)&&t.Xk(a))return e.Pu(this.Mk()*t.Mk(),this.Yv);var r=this.high>>>16,i=65535&this.high,n=this.low>>>16,s=65535&this.low,o=t.high>>>16,h=65535&t.high,u=t.low>>>16,c=65535&t.low,l=0,p=0,f=0,d=0;return d+=s*c,f+=d>>>16,d&=65535,f+=n*c,p+=f>>>16,f&=65535,f+=s*u,p+=f>>>16,f&=65535,p+=i*c,l+=p>>>16,p&=65535,p+=n*u,l+=p>>>16,p&=65535,p+=s*h,l+=p>>>16,p&=65535,l+=r*c+i*u+n*h+s*o,l&=65535,e.ld(f<<16|d,l<<16|p,this.Yv)},e.prototype.aC=e.prototype.multiply,e.prototype.Uk=function(t){if(e.Ok(t)||(t=e._k(t)),t.Bk())throw new Error("division by zero");if(this.Bk())return this.Yv?e.Fk:e.ZERO;var r,i,n;if(this.qR(e.MIN_VALUE)){if(t.qR(e.ONE)||t.qR(e.Dk))return e.MIN_VALUE;if(t.qR(e.MIN_VALUE))return e.ONE;var s=this.zv(1);return r=s.Uk(t).shiftLeft(1),r.qR(e.ZERO)?t.xk()?e.ONE:e.Dk:(i=this.Hk(t.multiply(r)),n=r.add(i.Uk(t)))}if(t.qR(e.MIN_VALUE))return this.Yv?e.Fk:e.ZERO;if(this.xk())return t.xk()?this.Du().Uk(t.Du()):this.Du().Uk(t).Du();if(t.xk())return this.Uk(t.Du()).Du();for(n=e.ZERO,i=this;i.nC(t);){r=Math.max(1,Math.floor(i.Mk()/t.Mk()));for(var o=Math.ceil(Math.log(r)/Math.LN2),a=o<=48?1:Math.pow(2,o-48),h=e.Pu(r),u=h.multiply(t);u.xk()||u.rC(i);)r-=a,h=e.Pu(r,this.Yv),u=h.multiply(t);h.Bk()&&(h=e.ONE),n=n.add(h),i=i.Hk(u)}return n},e.prototype.hC=e.prototype.Uk,e.prototype.uC=function(t){return e.Ok(t)||(t=e._k(t)),this.Hk(this.Uk(t).multiply(t))},e.prototype.Ku=e.prototype.uC,e.prototype.not=function(){return e.ld(~this.low,~this.high,this.Yv)},e.prototype.Xv=function(t){return e.Ok(t)||(t=e._k(t)),e.ld(this.low&t.low,this.high&t.high,this.Yv)},e.prototype.or=function(t){return e.Ok(t)||(t=e._k(t)),e.ld(this.low|t.low,this.high|t.high,this.Yv)},e.prototype.Jl=function(t){return e.Ok(t)||(t=e._k(t)),e.ld(this.low^t.low,this.high^t.high,this.Yv)},e.prototype.shiftLeft=function(t){return e.Ok(t)&&(t=t.jv()),0===(t&=63)?this:t<32?e.ld(this.low<<t,this.high<<t|this.low>>>32-t,this.Yv):e.ld(0,this.low<<t-32,this.Yv)},e.prototype.cC=e.prototype.shiftLeft,e.prototype.zv=function(t){return e.Ok(t)&&(t=t.jv()),0===(t&=63)?this:t<32?e.ld(this.low>>>t|this.high<<32-t,this.high>>t,this.Yv):e.ld(this.high>>t-32,this.high>=0?0:-1,this.Yv)},e.prototype.lC=e.prototype.zv,e.prototype.Gv=function(t){if(e.Ok(t)&&(t=t.jv()),t&=63,0===t)return this;var r=this.high;if(t<32){var i=this.low;return e.ld(i>>>t|r<<32-t,r>>>t,this.Yv)}return 32===t?e.ld(r,0,this.Yv):e.ld(r>>>t-32,0,this.Yv)},e.prototype.pC=e.prototype.Gv,e.prototype.Kv=function(){return this.Yv?new e(this.low,this.high,(!1)):this},e.prototype.Jv=function(){return this.Yv?this:new e(this.low,this.high,(!0))},e})}).call(t,r(28)(e))},function(e,t,r){"use strict";var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(7),s=r(1),o=r(35),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.Api=function(){return t.app="JS",s.Framework.resolve(n.Un.bn)},t}(o.Hive);t.GE=a},function(e,t){"use strict";var r=function(){function e(){this.lengthComputable=!1,this.total=0,this.loaded=0}return e}();t.fC=r},function(e,t){"use strict";var r=function(){function e(e,t,r){this.start=e,this.end=t,this.total=r}return e.prototype.size=function(){return 0==this.end&&0==this.start?0:this.end-this.start+1},e.prototype.dC=function(){return 0==this.start&&(this.end==this.total-1||this.end==this.total&&0==this.total)},e.prototype.gC=function(){return this.end==this.total-1||this.end==this.total&&0==this.total},e.prototype.yC=function(e){return e.start<=this.start&&this.start<=e.end},e.prototype.toString=function(){return"R[S="+this.start+",E="+this.end+",T="+this.total+"]"},e}();t.vC=r;var i=function(){function e(){}return e.mC=function(e){return e.split("-")},e.TC=function(e){var t=e.split("=",4),i=t[1].substr(0,t[1].indexOf(",")),n=t[2].substr(0,t[2].indexOf(",")),s=t[3].substr(0,t[3].indexOf("]")),o=+i,a=+n,h=+s;return new r(o,a,h)},e}();t.EC=i},function(e,t){"use strict";var r=function(){function e(e,t,r,i,n){this.id=e,this.bitrate=t,this.duration=r,this.uri=i,this.wC=n}return e}();t.IC=r},function(e,t,r){"use strict";var i=r(8),n=r(19),s=r(9),o=r(1),a=r(4),h=function(){function e(){this.SC=new i.gs.es,this.bC=new i.gs.es,this.R=o.Framework.resolve(o.Framework.Tt.rt).log()}return e.prototype.RC=function(e,t){var r=0,i=-1,s=e.$g.duration;this.SC.Gn()?i=Math.max(10,this.SC.zn(t)):this.bC.Gn()&&(i=Math.max(10,this.bC.zn(t))),r=i>-1?Math.max(0,s-i*a.an.ii.ri):s/2,e.type==n.Cg.kg&&(r*=2);var o=Math.max(this.PC(),r);return this.R.debug("TIMER DETAILS duration: "+s+" left: "+t+" downTime: "+i+" fallAvg: "+this.SC.Zn()+" timer: "+o),o},e.prototype.AC=function(e,t){return 5e3},e.prototype.kC=function(e){return this.SC.Gn()?Math.min(this.SC.zn(e),this.CC()):this.OC()},e.prototype.NC=function(e){if(e.ey()===s.Es.vs)switch(e.Zg()){case n.Cg.Rg:case n.Cg.bg:case n.Cg.Pg:this.SC.Jn(e.py());break;case n.Cg.va:case n.Cg.kg:this.bC.Jn(e.py())}},e.prototype.PC=function(){return e._C},e.prototype.OC=function(){return e.FC},e.prototype.CC=function(){return e.LC},e}();h._C=500,h.LC=1500,h.FC=500,t.DC=h},function(e,t,r){"use strict";var i,n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},s=r(40),o=r(104),a=r(105),h=r(9),u=r(30),c=r(25),l=r(1);!function(e){function t(t){return this.MC(t)||t.indexOf(e.BC)!=-1}function r(t){return t.toLowerCase().indexOf(e.xC.toLowerCase())!=-1}e.UC=1,e.HC=2,e.qC=2e3,e.VC=3e4,e.jC=1e4,e.GC=!0,e.QC=!0,e.YC=500,e.KC=10,e.DASH_METADATA_MIN_FRAGMENTS=3,e.xC="(format=mpd-time-csf)",e.BC=".m4s",e.JC=".ism/",e.zC=t,e.MC=r;var i=function(t){function i(r,i){var n=t.call(this,i)||this;return n.Ko=0,n.WC=!0,n.ticket=r,n.XC=r.RS(),n.$C=n.XC.toLowerCase().substring(0,n.XC.indexOf(e.JC)),n.ZC=new a.eO,n.tO=new o.rO(i.sessionId),n}return n(i,t),i.prototype.wP=function(){return this.ticket},i.prototype.Qe=function(){return StreamProtocol.DASH},i.prototype.nA=function(){return this.XC},i.prototype.$P=function(){return this.tO.$P()},i.prototype.isLive=function(){return this.tO.iO()},i.prototype.eA=function(){return this.ZC},i.prototype.ay=function(e){var t=this.ey(e);if(t==h.Es.vs||t==h.Es.ys)return!0},i.prototype.ey=function(e){if(r(e))return h.Es.ms;if(this.nO(e))return h.Es.Ts;var t=this.tO.sO(e);return null!=t?t.type:e.indexOf("audio")!=-1?h.Es.ys:h.Es.Ts},i.prototype.tA=function(e){var t=this.ey(e),r=0,i=0,n=0,s=!0;if(this.nO(e))s=!0;else if(t!=h.Es.ms){var o=this.tO.sO(e);null!=o?(r=o.duration,i=o.bitrate,n=o.id):(this.TI(),this.R.warn("could not extract segment info for "+e))}else s=!1;var a=Math.round(r/1e4);return new u.Pw(e,t,s,n,a,i,this.ay(e))},i.prototype.II=function(e){var t=e.url,r=this.tO.oO(t);return null!=r?this.tA(r.wC):null},i.prototype.bI=function(){return t.prototype.SP.call(this,e.UC,e.HC)},i.prototype.ZP=function(t){var i=t.url,n=i.toLowerCase();if(i===this.XC)return!0;if(null!=this.tO&&this.tO.nO(i))return!0;if(r(i)&&this.tO.aO!==i)return!1;var s=n.indexOf(e.JC);return!!(this.XC&&s>-1&&n.substring(0,s)===this.$C)},i.prototype.rA=function(e){var t=e.hO,r=e.zg.url,i=this.tO.parse(r,t,e.zg.internal);e.zg.responseText=i,e.zg.response=i,this.TP.lI(),this.uO()},i.prototype.iA=function(e){var r=this;t.prototype.iA.call(this,e),e.ey()!==h.Es.vs&&e.ey()!==h.Es.ys||(e.ey()===h.Es.vs&&this.ZC.NC(e),this.tO.iA(e).then(function(t){t&&r.uO(),e.ey()==h.Es.vs&&r.TP.iI(e.$g)}).done())},i.prototype.RP=function(){return this.ticket._S()},i.prototype.PP=function(e,r){var i=e;return i.bP=l.Framework.time(),t.prototype.PP.call(this,i,r)},i.prototype._I=function(e,t,r,i){return this.tO._I(e,t,r,i)},i.prototype.nO=function(e){return this.tO.nO(e)},i.prototype.uO=function(){var t=this;this.tO.cO?this.tO.cO.lO().then(function(r){if(r)t.WC=!0,t.R.debug("Protection evaluation: can decrypt");else{var i="Protection evaluation: cannot decrypt ["+(e.GC?"error":"disabled")+"]";e.QC?(t.WC=!0,t.R.debug(i+", metadata prefetch enabled")):t.R.warn(i+", metadata prefetch DISABLED")}}).done():this.R.debug("Protection evaluation: not encrypted")},i.prototype.TI=function(){this.WC&&(null==this.pO&&this.tO.iO()?this.fO():this.R.debug("DASH PRE-FETCHING METADATA ALREADY SCHEDULED OR NOT LIVE"))},i.prototype.XP=function(){this.WC&&null!=this.pO&&l.Framework.clearTimeout(this.pO)},i.prototype.fO=function(){var t=this,r=void 0!=this.dO?this.dO:0,i=e.qC,n=r+i,s=Math.max(1,n-l.Framework.time()+e.YC);this.R.debug("DASH PREFETCHING METADATA "+this.tO.aO+" IN "+s),this.pO=l.Framework.setTimeout(function(){t.gO(t.tO.aO,l.Framework.time())},s)},i.prototype.gO=function(e,t){var r=this.dO;if(null==r&&(r=0),r>t)this.fO();else{var i=new c.HiveRequest(this.ticket.sessionId);i.open("GET",e),i.internal=!0,i.send(),this.pO=null,this.dO=l.Framework.time()}},i.prototype.sA=function(e){this.tO.authenticationToken=e},i.prototype.CI=function(e,t){var r=this.Ww(),i=this.KP(),n=r.Iw(),s=this.tO.yO(n,r.bw(),e,t),o=l.Framework.time()-i,a=Math.max(0,s-o);return a},i.prototype.WP=function(){return e.jC},i.prototype.uI=function(e,t,r){var i=this.tO.vO(e,t);return null!=i?new u.Pw(i.wC,r,(!0),e,i.duration,t,(!0)):null},i.prototype.OI=function(){return e.VC},i}(s.oA);e.mO=i}(i=t.DASH||(t.DASH={}))},function(e,t,r){"use strict";var i,n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},s=r(2),o=s.Ze,a=r(40),h=r(109),u=r(110),c=r(1),l=r(25),p=r(9),f=r(30);!function(e){function t(t){return this.MC(t)||t.indexOf(e.BC)!=-1}function r(t){return t.toLowerCase().indexOf(e.xC.toLowerCase())!=-1||t.toLowerCase().indexOf(e.TO.toLowerCase())!=-1||t.toLowerCase().indexOf(e.EO.toLowerCase())!=-1}e.wO=1,e.IO=2,e.SO=3e4,e.bO=4e3,e.RO=500,e.PO=!0,e.AO=1e4,e.kO=10,e.CO=3,e.xC=".m3u8",e.TO="(format=m3u8-aapl-v3)",e.EO="(video,format=m3u8-aapl-v3,audiotrack=audio)",e.BC=".ts",e.zC=t,e.MC=r;var i=function(t){function i(e,r,i){var n=t.call(this,i)||this;return n.Ko=0,n.dO=new o,n.pO=new o,n.ticket=e,n.OO=r,r&&(n.NO=n._O(e.RS())),n.XC=e.RS(),n.ZC=new u.FO,n.LO=new h.DO,n}return n(i,t),i.prototype.Qe=function(){return StreamProtocol.Ke},i.prototype._O=function(e){var t=e.lastIndexOf("/"),r=e.substr(0,t);return r},i.prototype.wP=function(){return this.ticket},i.prototype.$P=function(){return this.LO.$P()},i.prototype.isLive=function(){return this.LO.isLive()},i.prototype.eA=function(){return this.ZC},i.prototype.RP=function(){return this.ticket._S()},i.prototype.nA=function(){return this.XC},i.prototype.ZP=function(e){var t=e.url=this.MO(e.url);return t===this.XC?(this.R.debug("SAME MANIFEST "+t+","+this.XC),!0):null!=this.LO&&this.LO.BO(t)?(this.R.debug("CORRECT PLAYLIST "+t+","+this.XC),!0):null!=this.LO&&null!=this.LO.sO(t)?(this.R.debug("CORRECT SEGMENT "+t+","+this.XC),!0):!(!r(t)||this.LO.xO()===t)&&(this.R.debug("FIRST REQUEST FOR MANIFEST "+t+","+this.XC),!1)},i.prototype.MO=function(e){var t=e;return t},i.prototype.ey=function(e){if(r(e))return p.Es.ms;var t=this.LO.sO(e);return null!=t?p.Es.vs:p.Es.Ts},i.prototype.ay=function(e){var t=this.ey(e);if(t==p.Es.vs||t==p.Es.ys)return!0},i.prototype.tA=function(e){var t=e,r=this.ey(t),i=0,n=0,s=0,o=!0;if(r!=p.Es.ms){var a=this.LO.sO(t);null!=a&&(i=a.duration,n=a.bitrate,s=a.id)}else if(o=!1,null!=this.LO&&this.LO.UO.has(t)){var n=this.LO.UO.get(t).bitrate;this.dO.set(n,c.Framework.time())}return new f.Pw(t,r,o,s,i,n,this.ay(t))},i.prototype.uI=function(e,t,r){var i=this.LO.vO(e,t);return null!=i?new f.Pw(i.wC,r,(!0),e,i.duration,t,(!0)):null},i.prototype.rA=function(e){var t=e.hO,r=e.ny(),i=this.LO.parse(r,t);if(this.LO.UO.has(r)){var n=this.LO.UO.get(r);this.TP.lI(n.bitrate)}e.zg.responseText=i},i.prototype.iA=function(e){t.prototype.iA.call(this,e),e.ey()!=p.Es.ms&&e.ey()!=p.Es.Ts&&(this.ZC.NC(e),e.ey()==p.Es.vs&&this.TP.iI(e.$g))},i.prototype.PP=function(e,r){var i=e;return i.bP=c.Framework.time(),t.prototype.PP.call(this,i,r)},i.prototype.TI=function(t){if(e.PO){var r=this.pO.get(t);null==r&&this.LO.isLive()?this.fO(t):this.R.debug("HLS PRE-FETCHING METADATA ALREADY SCHEDULED OR MISSING HLS INFO")}},i.prototype.fO=function(t){var r=this,i=this.LO.HO.get(t);if(null!=i){var n=this.dO.has(t),s=this.dO.get(t),o=n?s:0,a=null!=i.qO?i.qO[i.qO.length-1].duration:e.bO,h=o+a,u=Math.max(1,h-c.Framework.time()+e.RO);this.R.info("HLS PREFETCHING METADATA "+i.wC+" BITRATE "+t+" IN "+u);var l=c.Framework.setTimeout(function(){r.gO(t,i.wC,c.Framework.time())},u);this.pO.set(t,l)}else this.R.warn("NO STREAM WITH BT "+t)},i.prototype.gO=function(e,t,r){var i=this.dO.get(e);if(null==i&&(i=0),i>r)this.fO(e);else{var n=new l.HiveRequest(this.ticket.sessionId);n.open("GET",t),n.internal=!0,n.send(),this.pO["delete"](e),this.dO.set(e,c.Framework.time())}},i.prototype.XP=function(){var e=this,t=this.pO.keys();t.forEach(function(t){var r=e.pO.get(t);c.Framework.clearTimeout(r),e.pO["delete"](t)})},i.prototype.bI=function(){return t.prototype.SP.call(this,e.wO,e.IO)},i.prototype.II=function(e){var t=e.url,r=this.LO.oO(t);return null!=r?this.tA(r.wC):null},i.prototype._I=function(e,t,r,i){var n=r-e;return n},i.prototype.OI=function(){return e.SO},i.prototype.WP=function(){return e.AO},i.prototype.CI=function(e,t){var r=this.Ww(),i=this.KP(),n=r.Iw(),s=0;if(e>n)for(var o=this.LO.vO(n,t);o&&o.id<e;)s+=o.duration,o=o.next;var a=c.Framework.time()-i,h=s-a;return h},i}(a.oA);e.VO=i}(i=t.Ke||(t.Ke={}))},function(e,t){"use strict";var r;!function(e){e[e.jO=0]="ALL",e[e.AS=1]="AS",e[e.Aw=2]="SITE"}(r=t.GO||(t.GO={}))},function(e,t,r){"use strict";var i=r(1),n=r(13),s=r(4),o=r(6),a=r(3),h=r(2),u=r(2),c=r(116),l=function(){function e(){this.QO=!1,this.P="[UDPLeaderElection] ",this.zo=i.Framework.resolve(i.Framework.Tt.pt),this.YO=new h.Ze,this.KO=new h.Ze,this.JO=new h.Ze,this.zO=new h.Ze,this.WO=new h.Ze,this.XO=[]}return e.prototype.init=function(e){this.$O=e,this.R=i.Framework.resolve(i.Framework.Tt.rt).log(e.sessionId),this.qw=e.qw,this.ZO=e.ZO,this.jw=e.jw},e.prototype.eN=function(e,t){var r=this,i=a.defer();try{if(this.QO){var n=null;e.privateIpString&&(n=e.privateIpString);var s=new c.tN(e.guid,e.rankValue,n,e.isLeader);if(this.YO.has(s.uuid)){var o=this.YO.get(s.uuid);o.udpScore==s.udpScore&&o.rN==s.rN?i.resolve():(this.YO.set(s.uuid,s),this.iN(),this.nN(s).then(function(){i.resolve()}).fail(function(e){r.YO["delete"](s.uuid),r.iN(),i.reject(e)}))}else t?(s.sN=t,this.R.info(this.P+" NEW MEMBER GUID "+s.uuid+" RANKING "+s.udpScore+" LEADER "+s.rN),this.YO.set(s.uuid,s),this.iN(),this.nN(s).then(function(){r.oN(r.YO.get(s.uuid)),i.resolve()}).fail(function(e){r.YO["delete"](s.uuid),r.iN(),i.reject(e)})):this.aN(s).then(function(e){s.sN=e,r.R.info(r.P+" NEW MEMBER GUID "+s.uuid+" RANKING "+s.udpScore+" LEADER "+s.rN),r.YO.set(s.uuid,s),r.iN(),r.nN(s).then(function(){i.resolve()}).fail(function(e){r.YO["delete"](s.uuid),r.iN(),i.reject(e)})}).fail(function(e){i.reject(e)})}else i.reject("LEADER ELECTION NOT STARTED YET")}catch(h){i.reject("TRIGGER LEADER ELECTION ERROR "+h)}return i.Vt},e.prototype.oN=function(e){var t=new o.cn(o.un.St,null);t.guid=e.uuid,t.isLeader=e.rN,t.rankValue=e.udpScore;var r=[t];this.ZO.hN(r,!1)},e.prototype.aN=function(e){var t=this,r=a.defer();return this.zO.has(e.uuid)||this.JO.has(e.uuid)?r.reject(p.uN):(this.zO.set(e.uuid,Date.now()),this.zo.connect(e.uuid).then(function(i){var n=i.Yo.Vo(t.$O.swarmId);null==n?(n=i.Yo.Mo(t.$O.swarmId),t.cN(n).then(function(){r.resolve(i)}).fail(function(e){r.reject(e)}).done()):t.WO.get(e.uuid)?r.resolve(i):(t.zO["delete"](e.uuid),t.cN(n).then(function(){r.resolve(i)}).fail(function(e){r.reject(e)}).done())}).fail(function(i){t.zO["delete"](e.uuid),r.reject(i)}).done()),r.Vt},e.prototype.cN=function(e){var t=this,r=a.defer(),o=new n.va.Ui.da.UDPHandshakeMessage;o.uuid=this.lN.uuid,o.udpScore=this.lN.udpScore,o.isLeader=this.lN.rN,o.streamId=this.lN.streamId,this.R.debug(this.P+"MSG uuid "+o.uuid+" rankValue "+o.udpScore+" isLeader "+o.isLeader+" stream id "+o.streamId);var h=i.Framework.setTimeout(function(){t.pN(e.Ho)},s.an.UDPBroadcast.Qi);return this.JO.set(e.Ho,{fN:h,defer:r}),e.$o(n.va.Fo.Oo,o),r.Vt},e.prototype.pN=function(e){if(this.JO.has(e)){this.R.debug(this.P+" HANDSHAKE REQ EXPIRED TO "+e);var t=this.JO.get(e);this.JO["delete"](e),t.defer.reject("EXPIRED")}},e.prototype.dN=function(e,t){try{this.R.debug(this.P+"HANDSHAKE RESP RECEIVED FROM "+t.Ho);var r=t.Ho,n=this.JO.get(r);i.Framework.clearTimeout(n.fN),this.JO["delete"](r),n.defer.resolve(t)}catch(s){this.R.error("HANDSHAKE RESPONSE RECEIVED FAILED WITH ERROR ",s)}},e.prototype.gN=function(e,t){var r=this;try{var i=new o.cn(o.un.St,null,e.isLeader);if(i.guid=e.uuid,i.rankValue=e.udpScore,e.streamId===this.qw.RP()){var n=t.Yo.Vo(this.$O.swarmId);this.WO.set(e.uuid,e.uuid),this.yN(n,"OK"),this.eN(i,t).then(function(){}).fail(function(e){r.R.error("LEADER ELECTION FAILED WITH ERROR "+e)})}}catch(s){this.R.error("HANDSHAKE REQUEST FAILED WITH ERROR ",s)}},e.prototype.yN=function(e,t){var r=new n.va.Ui.da.UDPHandshakeResponse;r.accept=t,e.$o(n.va.Fo.UDPHandshakeResponse,r),this.R.debug(this.P+"SEND HANDSHAKE RESPONSE TO "+e.Ho)},e.prototype.nN=function(e){var t=this,r=a.defer();if(this.vN()){var i=!1;this.R.info(this.P+"I HAVE THE HIGHEST SCORE"),e.rN&&!this.KO.has(e.uuid)&&(i=!0,this.R.info(this.P+"SEND SWITCH REQUEST TO "+e.uuid),this.mN(e).then(function(){r.resolve()}).fail(function(e){3==e.TN?(t.R.debug(t.P+" SWITCH REQUEST WAS CANCELED."),r.resolve()):(e.TN=2)&&r.reject(e)})),this.lN.rN||null==this.EN||this.EN.uuid==e.uuid||this.KO.has(this.EN.uuid)||(this.R.info("SEND SWITCH REQUEST TO THE ALREADY KNOWN LEADER"),i=!0,this.mN(this.EN).then(function(){r.resolve()}).fail(function(e){3==e.TN?(t.R.debug(t.P+" SWITCH REQUEST WAS CANCELED."),r.resolve()):(e.TN=2)&&r.reject(e)})),null!=this.EN||e.rN||this.lN.rN||0!=this.KO.length||(this.R.info(this.P+"BECOME LEADER"),this.wN()),i||r.resolve()}else this.IN(e)?(this.R.info(this.P+"PEER "+e.uuid+" HAS THE HIGHEST SCORE"),this.SN(),this.lN.rN&&e.rN&&this.stepDown(),this.bN(e),r.resolve()):r.resolve();return r.Vt},e.prototype.bN=function(e){try{this.R.info(this.P+"UPDATE THE LEADERSHIP"),null!=this.EN&&this.YO.has(this.EN.uuid)&&(this.YO.get(this.EN.uuid).rN=!1),this.YO.has(e.uuid)?(this.YO.get(e.uuid).udpScore=e.udpScore,this.EN=e,this.YO.get(e.uuid).rN=!0):(this.R.warn(this.P+"SET A LEADER THAT IS NOT A LAN MEMBER LIST. SHOULD NEVER HAPPEN"),this.YO.set(e.uuid,e),this.EN=e),this.qw.RN(e),this.R.info(this.P+"NEW KNOWN LEADER "+this.qw.PN().uuid)}catch(t){this.R.error(this.P+" : ",t)}},e.prototype.stepDown=function(){this.R.info(this.P+"STEP DOWN"),this.lN.rN=!1,this.qw.AN(!1),s.an.wi.di&&(this.jw.kN(),this.jw.CN(!1))},e.prototype.SN=function(){for(var e=this.KO.keys(),t=0,r=e;t<r.length;t++){var n=r[t],s=this.KO.get(n);this.KO["delete"](n),i.Framework.clearTimeout(s.fN),s.defer.reject({TN:3,message:"CANCELED PENDING RESPONSES"})}},e.prototype.IN=function(e){return e.uuid==this.XO[0].uuid},e.prototype.vN=function(){return c.tN.ju(this.lN,this.XO[0])<0},e.prototype.iN=function(){var e=new u.Bt(this.YO.values()),t=e.ON(c.tN.ju);e.push(this.lN),this.qw.NN(t);var r=new u.Bt(this.YO.values());this.XO=r.ON(c.tN.ju)},e.prototype._N=function(e){this.FN(e)},e.prototype.FN=function(e){this.R.info(this.P+"EVALUATE THE SWITCH REQUEST FROM "+e.uuid);var t=void 0;this.YO.has(e.uuid)?t=this.YO.get(e.uuid):this.R.warn("I RECEIVED A SWITCH REQUEST FROM AN UNKNOWN MEMBER. THIS SHOULD NEVER HAPPEN"),t&&(this.lN.rN?this.vN()?this.LN(t,!1):(this.stepDown(),this.SN(),this.bN(t),this.LN(t,!0)):this.IN(t)?(this.bN(t),this.LN(t,!0)):this.LN(t,!1))},e.prototype.LN=function(e,t){var r=this;this.DN(e.sN,t).then(function(){}).fail(function(e){r.R.error(r.P+" SEND SWITCH RESPONSE ERROR "+e)}).done()},e.prototype.DN=function(e,t){var r=a.defer(),i=new n.va.Ui.da.UDPSwitchLeadershipAck;i.ok=t;var s=e.Yo.Vo(this.$O.swarmId);return s.$o(n.va.Fo.No,i),r.Vt},e.prototype.mN=function(e){var t=this,r=a.defer();return this.MN(e.sN).then(function(i){t.BN(i,e),r.resolve()}).fail(function(e){r.reject(e)}).done(),r.Vt},e.prototype.BN=function(e,t){try{e?(this.YO.get(t.uuid).rN=!1,this.EN=this.lN,this.wN()):(this.SN(),this.YO.get(t.uuid).rN=!0,this.stepDown(),this.bN(t))}catch(r){this.R.error("HANDLE LEADERSHIP SWITCH RESPONSE ",r)}},e.prototype.xN=function(e,t){if(this.KO.has(t)){var r=this.KO.get(t);i.Framework.clearTimeout(r.fN),this.KO["delete"](t),r.defer.resolve(e.ok)}else this.R.warn(this.P+" SWITCH LEADERSHIP RESPONSE RECEIVED FROM UNKNOWN PEER "+t)},e.prototype.MN=function(e){var t=this,r=a.defer(),o=new n.va.Ui.da.UDPSwitchLeadershipRequest;o.uuid=this.lN.uuid,o.udpScore=this.lN.udpScore,this.R.debug(this.P+"SWITCH LEADERSHIP REQUEST TO "+e.Ho);var h=i.Framework.setTimeout(function(){t.UN(e.Ho)},s.an.UDPBroadcast.Gi);this.KO.set(e.Ho,{fN:h,defer:r});var u=e.Yo.Vo(this.$O.swarmId);return i.Framework.setTimeout(function(){u.$o(n.va.Fo.UDPSwitchLeadershipRequest,o)},1),r.Vt},e.prototype.UN=function(e){if(this.KO.has(e)){this.R.info(this.P+" SWITCH LEADERSHIP EXPIRED TO "+e);var t=this.KO.get(e);this.KO["delete"](e),t.defer.reject({TN:2,message:"EXPIRED"})}},e.prototype.wN=function(){this.R.info(this.P+"BECOMING LAN LEADER"),null!=this.EN&&this.YO.has(this.EN.uuid)&&(this.YO.get(this.EN.uuid).rN=!1),this.lN.rN=!0,this.EN=this.lN,this.qw.AN(!0),this.qw.RN(this.lN),s.an.wi.di&&(this.jw.kN(),this.jw.CN(!0))},e.prototype.tu=function(e){this.lN=new c.tN(this.qw.Pt(),this.qw.HN(),"",(!1),this.qw.RP()),this.QO=!0,this.R.info(this.P+" UDP LEADER ELECTION STARTED")},e.prototype.qN=function(e){this.YO["delete"](e),this.iN(),0==this.YO.length?(this.lN.rN=!1,this.EN=null,this.qw.AN(!1),this.qw.VN(!1),this.jw.kN(),this.jw.CN(!1)):this.vN()?this.wN():this.XO.length>0&&this.bN(this.XO[0])},e}();t.jN=l;var p;!function(e){e[e.GN=0]="FAILURE",e[e.uN=1]="ALREADY_PENDING"}(p=t.QN||(t.QN={}))},function(e,t,r){"use strict";var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(2),s=n.Ze,o=r(3),a=r(1),h=r(129),u=r(4),c=r(13),l=r(6),p=hive.services.protocol.VR.TrackerPeerInfo,f=r(126),d=r(7);if("undefined"==typeof g)var g=!1;var y;!function(e){e[e.YN=1]="ACCEPT",e[e.KN=2]="REJECT"}(y=t.JN||(t.JN={}));var v;!function(e){e[e.jO=0]="ALL",e[e.zN=1]="IN",e[e.WN=2]="OUT"}(v=t.XN||(t.XN={}));var m=function(e){function t(){var t=e.call(this)||this;return t.$N=new s,t.zO=new s,t.ZN=-1,t.e_=-1,t.t_=-1,t.connected=!1,t.zo=a.Framework.resolve(a.Framework.Tt.pt),t.r_=a.Framework.resolve(d.Un.fn),t.i_=a.Framework.resolve(d.Un.dn),t}return i(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),this.$O=t,this.ticket=t.Hs.ticket,this.ZO=t.ZO,this.Oa=t.Hs.Oa,this.jw=t.jw,this.n_=t.n_},t.prototype.start=function(e){try{this.R.info(this.P+"PARTNERSHIP STARTED "+e.RP()),this.context=e,this.contextId=e.RP(),this.s_(u.an.Jr.Qr),this.o_(u.an.wi.mi),this.a_(u.an.Xr.Wr)}catch(t){this.R.error("START PARTNERSHIP ERROR ",t)}},t.prototype.stop=function(){return a.Framework.clearInterval(this.ZN),a.Framework.clearInterval(this.e_),a.Framework.clearInterval(this.t_),this.context=null,this.contextId=null,this.h_()},t.prototype.tu=function(e){this.R.info("PARTNERSHIP SERVER CONNECTED"),this.Fh=e,this.connected=!0,null==this.qw.Pt()&&this.qw.setId(this.Fh)},t.prototype.u_=function(){this.connected=!1},t.prototype.c_=function(e){try{this.l_(e)||this.$N.has(e.peerInfo.guid)||this.zO.has(e.peerInfo.guid)||e.peerInfo.guid==this.Fh?this.p_(e):this.f_(e),this.d_(e)&&this.g_(e)}catch(t){this.R.error("DISCOVERED NEW LAN PEER ERROR ",t)}},t.prototype.p_=function(e){if(this.y_.has(e.peerInfo.guid)){var t=this.y_.get(e.peerInfo.guid);this.y_["delete"](e.peerInfo.guid),this.v_.set(e.peerInfo.guid,t),this.qw.VN(!0)}},t.prototype.g_=function(e){if(this.m_.has(e.peerInfo.guid)){var t=this.m_.get(e.peerInfo.guid);this.m_["delete"](e.peerInfo.guid),this.T_.set(e.peerInfo.guid,t)}},t.prototype.s_=function(e){var t=this;this.ZN!=-1&&a.Framework.clearInterval(this.ZN),this.ZN=a.Framework.setInterval(function(){t.E_(!1)},e)},t.prototype.E_=function(e){var t=this;e&&this.ZN&&(a.Framework.clearInterval(this.ZN),this.s_(u.an.Jr.Qr));try{if(this.connected){this.R.debug(this.P+"ADDING NEW PEERS IF POSSIBLE, NOW "+this.y_.length+"/"+u.an.Jr.Gr+","+this.v_.length+"/infinity OUT RND "+this.m_.length+" OUT LAN "+this.T_.length);var r=[].concat(this.$N.keys()).concat(this.zO.keys()),i=this.ZO.w_(2*u.an.Jr.Gr),n=this.r_.I_(u.an.Jr.Gr,this.y_.values(),r,i);n.S_().forEach(function(e){t.b_(e.guid),e.P_.R_(v.WN)}),n.A_().forEach(function(e){t.f_(e)})}else this.R.warn(this.P+"NOT RUNNING IN PARTNER CHOICE, SRV DISCONNECTED")}catch(s){this.R.error("PARTNER CHOICE ERROR ",s)}},t.prototype.f_=function(e){var t=this;try{var r=e.peerInfo.guid,i=e.peerInfo.privateIpString,n=e.peerInfo.publicIpString;this.R.debug(this.P+"IN PARTNER ADD PROCESS "+r),this.l_(e)||this.$N.has(r)||this.zO.has(r)||this.n_.k_(r,i,n)||(this.zO.set(r,Date.now()),this.zo.connect(r).then(function(i){var n=i.Yo.Vo(t.$O.swarmId);null==n&&(n=i.Yo.Mo(t.$O.swarmId)),t.zO["delete"](r),t.C_(n).then(function(i){t.O_(n,e,i.msg),t.n_.N_(r,e.peerInfo.privateIpString,e.peerInfo.publicIpString),t.__(n)}).fail(function(e){t.R.debug(t.P+"PARTNERSHIP REQ FAILED TO "+r+" BECAUSE "+e),t.F_(r)})}).fail(function(e){t.R.debug(t.P+"FAILED ADDING, REMOVING "+r+" BECAUSE "+e),t.zO["delete"](r),t.ZO.qN(r)}).done())}catch(s){this.R.error("IN PARTNER ADD PROCESS ERROR ",s)}},t.prototype.L_=function(e,t){var r=this;try{var i=e.guid,n=null,s=null;if(e.privateIpString&&(s=e.privateIpString),e.publicIpString&&(n=e.publicIpString),this.D_(i))this.R.info(this.P+"ALREADY OUT PARTNER "+i);else{var o=e.contextId,c=t.Yo.Vo(this.$O.swarmId);if(this.contextId!==o||u.an.Xr.zr!==e.p2pProtocolVersion||this.n_.k_(i,s,n))this.R.info(this.P+"PARTNERSHIP CANNOT BE ESTABLISHED WITH "+i+" CONTEXT ID "+o+" protocol version "+e.p2pProtocolVersion),this.M_(c,y.KN);else{var l=this.B_(e);this.ZO.hN([l],!1);var p=this.ZO.x_(i),f=p.U_()||this.m_.length<u.an.Jr.Kr;if(!f){this.R.debug(this.P+" got out part req from "+i+" - reached max "+this.m_.length+"/"+u.an.Jr.Kr);var d=this.i_.H_(this.m_.values());d&&(this.R.debug(this.P+" chocking "+d.guid),this.m_["delete"](d.guid),d.P_.R_(v.zN),f=!0)}if(f){var g=new h.Partner(i,this.Oa,c,this.R,(!1),p);e.reportingGuid&&g.q_(e.reportingGuid),this.ZO.V_.has(i)?this.T_.set(i,g):this.m_.set(i,g),this.R.info(this.P+"ADDED OUT PART "+i),this.M_(c,y.YN),this.n_.N_(i,s,n),a.Framework.setTimeout(function(){r.j_(i)},500)}else this.R.info(this.P+" cannot establish partnership to "+i+" - reached max "+this.m_.length+"/"+u.an.Jr.Kr),this.M_(c,y.KN)}}}catch(m){this.R.error("OUT PART REQUEST RECEIVED ERROR ",m)}},t.prototype.B_=function(e){var t=new p;t.guid=e.guid,e.internalAs&&(t.internalAs=e.internalAs),e.externalAs&&(t.externalAs=e.externalAs),e.publicIpString&&(t.publicIpString=e.publicIpString),e.privateIpString&&(t.privateIpString=e.privateIpString);var r=!1,i=this.ZO.x_(e.guid);return i&&(r=i.peerInfo.isLeader),
new l.cn(l.un.hn,t,r)},t.prototype.M_=function(e,t){this.R.debug(this.P+"SEND PART RESPONSE TO "+e.Ho);var r=new c.va.Ui.da.OutPartnershipResponse;r.accept=t,r.accept===y.YN&&(this.qw.LI()&&(r.internalAs=this.qw.LI()),this.qw.G_()&&(r.externalAs=this.qw.G_()),this.qw.getPublicIp()&&(r.publicIpString=this.qw.getPublicIp()),this.qw.getPrivateIp()&&(r.privateIpString=this.qw.getPrivateIp()),r.reportingGuid=this.qw.Q_()),e.$o(c.va.Fo.Co,r)},t.prototype.Y_=function(e){this.R.warn(this.P+e)},t.prototype.O_=function(e,t,r){var i=e.Ho;r.externalAs&&(t.peerInfo.externalAs=r.externalAs),r.internalAs&&(t.peerInfo.internalAs=r.internalAs),r.publicIpString&&(t.peerInfo.publicIpString=r.publicIpString),r.privateIpString&&(t.peerInfo.privateIpString=r.privateIpString);var n=new h.Partner(i,this.Oa,e,this.R,(!0),t);return r.reportingGuid&&(n.reportingGuid=r.reportingGuid,e.receiver.K_(r.reportingGuid),e.sender.K_(r.reportingGuid)),t.peerInfo.type==l.un.St?(this.v_.set(i,n),this.qw.J_(!0),this.qw.VN(!0)):(0!=this.qw.LI()&&this.qw.LI()===t.peerInfo.internalAs&&this.qw.J_(!0),this.y_.set(i,n)),this.R.debug(this.P+i+" IS NOW IN PARTNER"),n},t.prototype.qN=function(e){this.R.info(this.P+"GOT PEER DISC "+e),this.z_(e)&&(this.R.info(this.P+"IN PRT DISC "+e),this.b_(e)),this.D_(e)&&(this.R.info(this.P+"OUT PRT DISC "+e),this.m_["delete"](e),this.T_["delete"](e))},t.prototype.b_=function(e){var t=this;this.R.debug(this.P+"IN PARTNER REMOVE "+e);var r=this.W_(e);if(this.xw.X_(r),this.y_["delete"](e),this.v_["delete"](e),this.v_.length>0)this.qw.J_(!0);else if(0!=this.qw.LI()){var i=!1;this.y_.forEach(function(e){t.qw.LI()===e.DI.peerInfo.internalAs&&(i=!0)}),this.qw.J_(i)}else this.qw.J_(!1)},t.prototype.Z_=function(e,t){this.R.debug(this.P+"CLOSE RECEIVED FROM "+e+" TYPE "+v[t.getType()]),t.getType()!=v.jO&&t.getType()!=v.WN||(this.m_.has(e)&&this.m_["delete"](e),this.T_.has(e)&&this.T_["delete"](e)),t.getType()!=v.jO&&t.getType()!=v.zN||(this.y_.has(e)&&this.y_["delete"](e),this.v_.has(e)&&this.v_["delete"](e))},t.prototype.C_=function(e){var t=this,r=o.defer();try{var i=new c.va.Ui.da.OutPartnershipRequest;i.guid=this.Fh,i.contextId=this.contextId,i.p2pProtocolVersion=u.an.Xr.zr,i.reportingGuid=this.qw.Q_(),this.qw.LI()&&(i.internalAs=this.qw.LI()),this.qw.G_()&&(i.externalAs=this.qw.G_()),this.qw.getPrivateIp()&&(i.privateIpString=this.qw.getPrivateIp()),this.qw.getPublicIp()&&(i.publicIpString=this.qw.getPublicIp()),this.R.debug(this.P+"SEND PART REQ TO "+e.Ho+" WITH ID "+i.contextId+" internalAS "+i.internalAs+" externalAs "+i.externalAs+" private ip "+i.privateIpString+" public ip "+i.publicIpString+" rGuid "+this.qw.Q_());var n=a.Framework.setTimeout(function(){t.eF(r,e.Ho)},u.an.Jr.jr);this.$N.set(e.Ho,{fN:n,defer:r}),e.$o(c.va.Fo.ko,i)}catch(s){r.reject(s)}return r.Vt},t.prototype.tF=function(e,t){var r=t.Ho,i=this.$N.get(r);i?(a.Framework.clearTimeout(i.fN),this.$N["delete"](r),e.accept===y.YN?i.defer.resolve({Do:t,msg:e}):i.defer.reject("NOT ACCEPTED")):this.R.warn(this.P+"OUT PART FROM UNKNOWN PEER "+r)},t.prototype.eF=function(e,t){if(this.$N.has(t)){this.R.debug(this.P+"PART REQ EXPIRED TO "+t);var r=this.$N.get(t);this.$N["delete"](t),r.defer.reject("EXPIRED")}},t.prototype.h_=function(){var e=o.defer(),t=this.y_.values();this.v_.forEach(function(e,r){t.push(e)});var r=t.slice().map(function(e){return e.P_.close()});return o.all(r).then(function(t){e.resolve("resolved")}).fail(function(t){e.reject("could not close")}),e.Vt},t.prototype.F_=function(e){this.zo.disconnect(e)},t.prototype.o_=function(e){var t=this;this.e_!=-1&&a.Framework.clearInterval(this.e_),this.e_=a.Framework.setInterval(function(){t.rF()},e)},t.prototype.rF=function(){if(this.qw.MI()&&!this.qw.AI()&&g){var e=this.qw.PN(),t=this.context.Ww().bitrate;if(t&&this.z_(e.uuid)){var r=this.W_(e.uuid);this.iF(r.P_,t)}}},t.prototype.iF=function(e,t){var r=new c.va.Ui.da.Bitrate;r.guid=this.Fh,r.bitrate=t,this.R.debug(this.P+"ANNOUNCE BITRATE "+r.bitrate+" TO PEER GUID "+e.Ho),e.$o(c.va.Fo.Bitrate,r)},t.prototype.nF=function(e){try{this.R.debug(this.P+"RECEIVED BITRATE "+e.bitrate+" FROM PEER GUID "+e.guid),this.ZO.V_.has(e.getGuid())&&(this.ZO.V_.get(e.guid).sF(e.bitrate),this.jw.oF())}catch(t){this.R.error(this.P+"ERROR ",t)}},t.prototype.aF=function(e){var t=e.guid,r=this.W_(t);r&&this.hF(r,e),r=this.uF(t),r&&this.hF(r,e),this.n_.N_(t,e.privateIpString,e.publicIpString)},t.prototype.hF=function(e,t){var r=e.DI.peerInfo;t.privateIpString&&(r.privateIpString=t.privateIpString),t.publicIpString&&(r.publicIpString=t.publicIpString),t.externalAs&&(r.externalAs=t.externalAs),t.internalAs&&(r.internalAs=t.internalAs)},t.prototype.a_=function(e){var t=this;this.t_&&a.Framework.clearInterval(this.t_),this.t_=a.Framework.setInterval(function(){t.cF()},e)},t.prototype.cF=function(){if(this.qw.getPrivateIp()||this.qw.getPublicIp()||this.qw.LI()||this.qw.G_()){var e=this.lF(),t=new c.va.Ui.da.PeerInfoMessage;t.guid=this.qw.Pt(),this.qw.getPrivateIp()&&(t.privateIpString=this.qw.getPrivateIp()),this.qw.getPublicIp()&&(t.publicIpString=this.qw.getPublicIp()),this.qw.G_()&&(t.externalAs=this.qw.G_()),this.qw.LI()&&(t.internalAs=this.qw.LI()),e.forEach(function(e,r){e.P_.$o(c.va.Fo._o,t)})}},t.prototype.lF=function(){var e=new s;return this.m_.forEach(function(t,r){e.has(r)||e.set(r,t)}),this.T_.forEach(function(t,r){e.has(r)||e.set(r,t)}),this.v_.forEach(function(t,r){e.has(r)||e.set(r,t)}),this.y_.forEach(function(t,r){e.has(r)||e.set(r,t)}),e},t}(f.pF);t.fF=m},function(e,t){"use strict";var r=function(){function e(){}return e}();r.dF=!0,r.gF=3e4,r.yF=6e4,r.vF=3e4,t.mF=r;var i=function(){function e(){}return e}();i.en="site",i.tn="externalAs",i.rn="availableSendRate",i.in="remoteAddress",i.nn="localAddress",t.TF=i},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=r(3),o=r(1),a=r(62),h=r(154),u=r(20),c=r(42),l=r(12),p=r(144),f=r(16),d=r(134),g=r(10),y=r(156),v=r(65),m=r(35),T=r(21),E=r(36),w=r(43),I=a.u.p,S=h.u.EF,b=u.u.h,R=u.u.v,P=u.u.HiveTechError,A=u.u.Oy,k=u.u._y;if("undefined"==typeof C)var C=!1;r(24).HiveConfig,t.version="3.1.0";var O;!function(e){var i=function(){function e(e){this.wF=[S[S.HiveJava],S[S.HiveJsProxy],S[S.HiveJS],S[S.StatsJS]],this.IF=new n,this.SF=new Array,this.bF=new Array,this.RF=null,this.PF=0,this.AF=0,this.P="[HiveComm] ",this.kF=0,this.CF=l.vo.getItem("hivePluginId"),this.CF||(this.CF=Math.abs(Math.floor(68719476736*Math.random())).toString(16),l.vo.setItem("hivePluginId",this.CF)),T.ErrorMonitor.ee(),this.options_=new I.l,this.OF(e),l.I(e,this.options_),l.S(window.location.href,new I.g,this.options_),a._F.NF(this.options_),this.Tg=o.Framework.resolve(o.Framework.Tt.rt),c.HiveConfig.Framework.LoggerTimestamp=this.options().loggerTimestamp,this.Tg.uA(this.options().debugLevel),T.ErrorMonitor.ee().By(this.Tg.log());var t=o.Framework.resolve(g.Os.lt),r=o.Framework.resolve(g.Os.Ss);t.ja().then(function(e){T.ErrorMonitor.ee().setUser(e.Ya())});var i={};r.getConnectivityInfo().then(function(e){i={pIPAddr:e.getNetworkChanged().getPrivateIp()},T.ErrorMonitor.ee().setCustomData(i)}),window.Eg=this.Tg.log(),this.FF(),this.V=new k(this),new p.LF(this);var s=this.options().idleTimePeriod>this.options().feedbackPeriod?this.options().idleTimePeriod:w.ct.yA;this.DF=new l.Ro(s)}return e.prototype.options=function(){return this.options_},e.prototype.R=function(){return this.Tg.log()},e.prototype.C=function(){return this.CF},e.prototype.We=function(){return t.version},e.prototype.OF=function(e){var t=new v.StatsJS(this,e);this.IF.set(v.StatsJS.MF,t);var i=r(148).HiveJS;if(this.IF.set(i.MF,new i(this,e,t)),C){var n=r(150).HiveJsProxy;this.IF.set(n.MF,new n(this,e,t))}var s=r(145).HiveJava;this.IF.set(s.MF,new s(this,e));var o=e.hiveTechOrder;if(o instanceof Array)if(o.length>0)for(var a=o.length;a--;){var h=o[a];"string"!=typeof h||this.wF.indexOf(h)==-1?(console.warn(this.P+'The "'+h+'" Hive tech is undefined'),o.splice(a,1)):"string"==typeof h&&this.IF.has(h)||console.warn(this.P+'The "'+h+'" Hive tech is not enabled on this plugin')}else o=this.wF;else console.warn(this.P+"hiveTechOrder value not accepted. It must be an array of strings"),o=this.wF;e.hiveTechOrder=o},e.prototype.te=function(e){var t=this;this.R().notice(this.P+"resolving "+e),this.BF(e);var r=s.defer(),i=this.xF().values();0==i.length&&r.reject(l.ne(e,b.vy));var n,o,a=!1,h=!1,u=0,c=null;return l.lo(function(){return!a&&!h&&u<i.length&&!n},function(){var r=i[u++];r.UF();var l;return l=r.HF()&&!o?t.qF(e):s.resolve(null),l.then(function(i){null!=i&&(o=i);var n=r.VF();return r.initSession(e,o).timeout(n,"["+r.re()+"] Error: initialization timed out after "+n+"ms").then(function(e){c=e,t.jF(c,r),a=!0,!r.HF()&&o&&o._a.reset(),t.R().notice(t.P+"initializing Session:["+c.id+"] Ticket:"+c.ticket.toString()+" HiveTech:["+c.tech.re()+"]"),s.resolve(!0)},function(i){i instanceof Error&&(i=new P(A.Cy,i.message),r.GF(i)),i.ticketUrl=e,h=!r.onError(i),t.R().debug(t.P+"tech "+r.re()+": "+i.message),s.resolve(!0)})},function(e){n=e,s.resolve(!0)})}).then(function(){n?r.reject(l.ne(e,b.se,n)):h?r.reject(l.ne(e,b.Ty)):a?r.resolve(c):r.reject(l.ne(e,b.vy))})["catch"](function(t){T.ErrorMonitor.ee().Z(t),r.reject(l.ne(e,b.yy,t.toString()))}).done(),r.Vt},e.prototype.qF=function(e){var t=this;return m.Hive.Reporting().initSession(e,!1).then(function(r){return t.R().debug(t.P+"verified ticket "+e),t.Dh(r),r})["catch"](function(e){return s.reject("Ticket not verified, error: "+e.message)})},e.prototype.xF=function(){var e=JSON.parse(JSON.stringify(this.options().hiveTechOrder)),t=new n;for(var r in e)this.IF.has(e[r])&&t.set(e[r],this.IF.get(e[r]));return t},e.prototype.BF=function(e){var t=T.ErrorMonitor.ee();try{var r=new E.BS;r.wS(e),r.eh()&&r.Za()&&r.$a()?t.setTags([r.eh(),r.Za(),r.$a()]):t.Z(this.P+" Ticket not valid, we could not resolve the triple partnerId/CustomerId/ContentId: "+r.eh()+"/"+r.Za()+"/"+r.$a())}catch(i){this.R().warn(this.P+" "+i.message,i),t.notify(i)}},e.prototype.Dh=function(e){var r={commVersion:t.version,pluginName:this.ze(),pluginVersion:this.O(),playerTech:this.Xe(),playerVersion:this.pe(),telemetryId:this.QF()};e._a.Dh(r)},e.prototype.M=function(){window.HiveRequest=XMLHttpRequest,m.Hive.Reporting().close()},e.prototype.YF=function(e){this.RF&&this.RF.tech?(e.sessionId=this.RF.id,this.RF.tech.Qh(this.RF,e)):this.SF.push(e)},e.prototype.KF=function(){var e=this.SF;return this.SF=new Array,e},e.prototype.FF=function(){var e=this,t=window;t.addEventListener?t.addEventListener("beforeunload",function(){e.JF(!0)},!1):t.attachEvent("onbeforeunload",function(){e.JF(!0)})},e.prototype.U=function(e){this.JF(e),this.RF=null,this.bF=new Array,this.PF=0,this.AF=0,this.zF()},e.prototype.jF=function(e,t){e.tech=t,this.bF.push(e)},e.prototype.oe=function(e){if(null==this.RF){for(var t=e?e:this.qe(),r=0;r<this.bF.length;r++){var i=this.bF[r];if(i.Ge(t))return this.RF=i,this.RF.Hs?this.RF.Hs.Ca.WF(this.RF.ticket):this.XF(),this.bF=new Array,this.RF.tech.onActiveSession(this.RF),this.R().notice(this.P+"activating Session:["+this.RF.id+"] Ticket:"+this.RF.ticket.toString()+" HiveTech:["+this.RF.tech.re()+"]"),this.$F(),!0}this.R().warn(this.P+"Closing sessions - the active stream doesn't match any initialized sessions"),this.R().warn(this.P+"Active:"+t+" - initialized: "+this.bF.length),this.U()}return!1},e.prototype.ZF=function(){if(this.RF)return this.RF.Qs()},e.prototype.XF=function(){var e=!1;this.bF.forEach(function(t){t.Hs&&(e=!0)}),e&&m.Hive.Reporting().close()},e.prototype.eL=function(){if(null!=this.RF){if(this.RF.Ge(this.qe()))return!0;this.R().warn(this.P+"Session src mismatch: "+this.qe()+" != "+this.RF.manifest),this.U()}return!1},e.prototype.JF=function(e){if(null!=this.RF)this.R().notice(this.P+"Stopping session ["+this.RF.id+"]"),this.RF.close(e);else if(this.bF.length>0){var t=this.bF[0];this.R().notice(this.P+"Attempt to stopping session ["+t.id+"]"),t.close(e)}},e.prototype.$F=function(){var e=this;null==this.tL&&(this.tL=setInterval(function(){e.rL()},this.options().feedbackPeriod),this.rL())},e.prototype.zF=function(){clearInterval(this.tL),this.tL=null},e.prototype.rL=function(){var e=this;if(this.eL()){if(!this.Ge())return void this.U();var t=new l.zs;t.Io=this.getCurrentTime(),t.So=this.Ve(),t.bo=this.PF,t.width=this.je().width,t.height=this.je().height,t.iL=this.isFullscreen(),this.RF.qs(this.DF.To(t)),this.RF.tech.nL(this.RF,t).fail(function(t){e.R().warn(e.P+"stats handling failed",t),e.zF()})}},e.prototype.we=function(){var e=this;try{l.co.ee(this.R()).uo(function(t){var r=e.sL();r&&!r.js()&&(e.He(t?f.ce.ue.gh:f.ce.ue.HIDDEN),e.R().debug(t?"visible":"hidden"))})}catch(t){T.ErrorMonitor.ee().Z("error setting up the visibilityChange listener",{error:t})}},e.prototype.le=function(e){this.eL()&&this.AF<=0&&(this.AF=Date.now(),(void 0==e||e)&&this.He(f.ce.ue.he))},e.prototype.ye=function(){var e=0==this.PF;if(this.AF>0){var t=Date.now()-this.AF;return this.PF+=t,this.R().debug(this.P+"reporting new buffering event of "+t),this.AF=0,e&&this.rL(),!0}return!1},e.prototype.onError=function(e,t,r){void 0===r&&(r=!0),this.He(f.ce.ue.ERROR,{code:-1,"player-code":e}),r&&this.U()},e.prototype.He=function(e,t){var r=this,i=this.sL();null==i||i!=this.RF&&i.tech.re()===S[S.HiveJava]||i.tech.oL(i,e,t).fail(function(e){r.R().warn(r.P+"error in forwarding player event to tech",e)})},e.prototype.sL=function(){return this.RF?this.RF:this.bF&&this.bF.length>0?this.bF[0]:void 0},e.prototype.aL=function(){this.kF=0},e.prototype.F=function(e,t){this.aL();var r=7,i=6;this.kF+=e<<4*r,t&&0===e&&(this.kF+=1<<4*(i-S[t.re()])),e>0&&T.ErrorMonitor.ee().Z(this.P+"Status Code Error: "+R[e])},e.prototype.q=function(){return this.kF},e.prototype.QF=function(){return this.options().telemetryId},e}();e.Plugin=i}(O=t.u||(t.u={})),o.Framework.kt(new d.hL),o.Framework._t("peer0",new y.uL),o.Framework.Ft("peer0")},function(e,t,r){"use strict";var i,n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},s=r(14),o=s.u.p.p,a=s.u.p.Pa;!function(e){var t;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.authTokenEnabled=!0,t.dashRemoveBitrateSize=!1,t.dashFilterBitrates=null,t}return n(t,e),t}(o);e.l=t;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hiveAuthTokenEnabled="authTokenEnabled",t.hiveDashRemoveBitrateSize="dashRemoveBitrateSize",t.hiveDashFilterBitrates="dashFilterBitrates",t}return n(t,e),t}(a);e.g=r}(t=e.p||(e.p={}))}(i=t.u||(t.u={}));var h=function(){function e(){}return e.NF=function(e){"dashRemoveBitrateSize"in e&&e.dashRemoveBitrateSize&&window.HiveConfig&&window.HiveConfig.Dash&&(window.HiveConfig.Dash.DashRemoveBitrateSize=e.dashRemoveBitrateSize),"dashFilterBitrates"in e&&e.dashFilterBitrates&&window.HiveConfig&&window.HiveConfig.Dash&&(window.HiveConfig.Dash.DashFilterBitrates=e.dashFilterBitrates)},e}();t._F=h},function(e,t){"use strict";var r=function(){function e(){}return e}();r.dS="127.0.0.1",r.cL=11983,r.gS="//{0}:{1}/proxy/?callback={2}{3}hivePluginId={4}",r.lL="//{0}:{1}/proxy/{2}/session?manifest={3}",r.pL="//{0}:{1}/proxy/{2}/player?req={3}",r.fL="//{0}:{1}/proxy/{2}/info?{3}",t.dL=r},function(e,t,r){"use strict";var i=r(63),n=r(12),s=function(){function e(e){this.readyState=3,this.status=0,e&&(this.sessionId=e)}return e.By=function(t){e.R=t},e.register=function(t,r){e.qE[t]=r},e.prototype.VE=function(t){this.sessionId||(this.sessionId=e.qE[t])},e.prototype.open=function(e,t,r){void 0===r&&(r=!1),this.method=e,this.url=t,this.sync=r},e.prototype.getAllResponseHeaders=function(){return this.responseHeaders},e.prototype.getResponseHeader=function(e){var t=this.getAllResponseHeaders();if(t){var r=[],i=t.split("\n");return i.forEach(function(e){var t=e.split(":");r[t[0]]=t[1]}),r[e]}},e.prototype.send=function(){if(e.R&&e.R.debug(this.method+" "+this.url),!this.sessionId){var t=Object.keys(e.qE);t.length>0&&(this.sessionId=e.qE[t[0]])}var r=this,s=new XMLHttpRequest;0===this.url.indexOf("//")&&(this.url=location.protocol+this.url);var o=n.yo(i.dL.pL,i.dL.dS,i.dL.cL,this.sessionId,encodeURIComponent(this.url));s.open("GET",o),this.responseType&&(s.responseType=this.responseType),s.onreadystatechange=function(){},s.onload=function(){if(4===s.readyState)try{r.responseHeaders=s.getAllResponseHeaders(),r.response=s.response;var t=s.response.byteLength;"arraybuffer"!==s.responseType&&(r.responseText=s.response),r.readyState=4,r.status=s.status,r.onprogress({lengthComputable:!0,loaded:t,total:t}),r.onreadystatechange(),r.onload(),r.onloadend({type:"loadend",target:r,currentTarget:r,bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:t,total:0})}catch(i){e.R&&e.R.warn(i)}},s.onerror=function(t){e.R&&e.R.warn("onError: "+JSON.stringify(t)),r.onerror(t)},s.onabort=function(t){e.R&&e.R.warn("onAbort: "+JSON.stringify(t))},s.send()},e.prototype.abort=function(){},e.prototype.onload=function(){},e.prototype.onloadend=function(e){},e.prototype.onerror=function(e){},e.prototype.onprogress=function(e){},e.prototype.onreadystatechange=function(){},e}();s.qE={},t.gL=s},function(e,t,r){"use strict";var i=r(3),n=r(12),s=r(153),o=s.u.p.yL,a=r(15),h=r(158),u=r(21),c=function(){function e(t,r){this.vL=t,this.options_=new o,void 0!==r[e.MF]&&n.I(r[e.MF],this.options_)}return e.prototype.re=function(){return e.MF},e.prototype.getVersion=function(){return null},e.prototype.HF=function(){return!0},e.prototype.mL=function(){return i.resolve(!0)},e.prototype.initSession=function(e,t){window.HiveRequest=XMLHttpRequest;var r=t.ticket;return i.resolve(this.TL(e,r,r.OS(),t))},e.prototype.VF=function(){return this.options().initTimeout},e.prototype.Ge=function(e,t){var r=t.manifest.toLowerCase().indexOf("/manifest");if(r>-1){var i=t.manifest.substring(0,r);if(e.indexOf(i)>-1)return!0}else if(e==t.manifest)return!0;return!1},e.prototype.Gs=function(e){e.Hs&&(this.vL.R().debug("[StatsJS] stopping session ["+e.id+"]"),e.Hs.Na.reset())},e.prototype.Vs=function(e,t){var r=t?a.ka.IDLE:a.ka.Aa;this.vL.R().notice("[HiveComm] client state: "+a.ka[r]),e.Hs&&e.Hs.Vs(r)},e.prototype.nL=function(e,t){var r=this,n=0;return this.EL<t.bo&&(n=t.bo-this.EL,this.EL=t.bo),e.Ys().then(function(){e.Hs.Oa.wL(n,t.So),e.Hs._a.Vh(t.Io,t.So,t.bo),r.IL()}).done(),i.resolve(!0)},e.prototype.oL=function(e,t,r){return e.Ys().then(function(){e.Hs._a.Gh(e.ticket.sessionId,t,r)}).done(),i.resolve(!0)},e.prototype.Qh=function(e,t){return e.Ys().then(function(){e.Hs._a.Yh([t])}).done(),i.resolve(!0)},e.prototype.onError=function(e){var t=!0;if(void 0!=this.options().onError)try{t=this.options().onError(e)}catch(r){u.ErrorMonitor.ee().Z("[StatsJS] exception in user-defined onError callback: "+r)}return t},e.prototype.onActiveSession=function(e){var t=this;this.SL(),e.Ys().then(function(r){t.bL=r;var i=new h.RL(t.vL.isLive(),t.vL.Qe(),e.ticket.OS());t.bL.PL=i,t.bL.Oa.PL=i,t.vL.Dh(t.bL),t.bL.Na.init(t.bL.Oa,null),t.bL._a.Uh(e.ticket.sessionId,t.vL.qe(),200);var n=t.vL.KF();if(n&&n.length>0&&t.bL._a.Yh(n),void 0!=t.options_.onActiveSession)try{t.options_.onActiveSession(e.Qs())}catch(s){u.ErrorMonitor.ee().Z("[StatsJS] exception in user-defined onActiveSession callback: "+s)}}).done()},e.prototype.GF=function(){},e.prototype.UF=function(){},e.prototype.options=function(){return this.options_},e.prototype.SL=function(){this.EL=0},e.prototype.TL=function(e,t,r,i){var s=new n.Js(e,t,r,i);return s.K=!1,s.id=t.sessionId,s},e.prototype.IL=function(){try{var e=this.vL.Je();void 0!=e&&(this.bL.Oa.kP.metrics.bitrateUpN+=e.so(),this.bL.Oa.kP.metrics.bitrateDwnN+=e.oo(),null!=e.ro()&&(this.bL.Oa.kP.metrics.srcThroughput=e.ro()),null!=e.io()&&this.AL(!0,e.io()),null!=e.no()&&this.AL(!1,e.no()))}catch(t){u.ErrorMonitor.ee().Z(t)}},e.prototype.AL=function(e,t){var r=this,i=0,n=0,s=0,o=0;t.forEach(function(t,a){var h=t.success+t.Ws;if(i+=h,o+=t.bytes,n+=t.success,s+=t.Ws,e){var u=r.bL.Oa.kL(Number(a));r.CL(u,h,t.success,t.Ws,t.bytes)}});var a=this.bL.Oa.OL();this.CL(a,i,n,s,o)},e.prototype.CL=function(e,t,r,i,n){e.srcReqN+=t,e.srcRespN+=r,e.srcRespErrN+=i,e.srcRespQt+=n,e.respFallbackN+=r,e.respFallbackErrN+=i},e}();c.MF="StatsJS",t.StatsJS=c},function(e,t){"use strict";var r=function(){function e(){}return e.prototype.NL=function(e){this.hostname=e},e.prototype.getHostName=function(){return this.hostname},e.prototype._L=function(e){this.FL=e},e.prototype.getNetworkChanged=function(){return this.FL},e}();t.LL=r},function(e,t,r){"use strict";var i=r(3),n=r(47),s=r(1),o=r(26),a=r(137),h=function(){function e(){this.Fh=null,this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,s.Framework&&s.Framework.resolve(s.Framework.Tt.rt)?this.R=s.Framework.resolve(s.Framework.Tt.rt).log():this.R=console}return e.prototype.DL=function(){var e=i.defer(),t=indexedDB.open("IdentityDB");return t.onupgradeneeded=function(){var e=t.result;e.createObjectStore("IdentityStore",{keyPath:"id"})},t.onsuccess=function(){var r=t.result;e.resolve(r)},t.onerror=function(t){e.reject(t)},e.Vt},e.prototype.ja=function(){var e=this;if(this.ML)return this.ML;var t=i.defer();if(this.Fh)t.resolve(new a.BL(this.Fh));else if(o.su.QE&&this.indexedDB){var r=setTimeout(function(){e.R.warn("[HiveComm] timeout retrieving persistent ID - generating random one"),e.Fh=e.xL(),e.R.debug("[HiveComm] Generated UUID: "+e.Fh),t.resolve(new a.BL(e.Fh))},4e3);try{var n=this.DL();n.then(function(i){var n=i.transaction("IdentityStore","readwrite"),s=n.objectStore("IdentityStore"),h=s.get("MYID");h.onsuccess=function(){if(clearTimeout(r),e.Fh)t.resolve(new a.BL(e.Fh));else if(null!=h.result&&o.su.QE){var s=h.result.value;e.R.debug("[HiveComm] Retrieved persistent UUID: "+s),e.Fh=s,i.close(),t.resolve(new a.BL(e.Fh))}else{var u=e.xL(),c=i.transaction("IdentityStore","readwrite"),l=n.objectStore("IdentityStore");l.put({id:"MYID",value:u}),c.oncomplete=function(){e.R.debug("[HiveComm] completed UUID persistence"),i.close()},e.R.debug("[HiveComm] Generated UUID: "+u),e.Fh=u,t.resolve(new a.BL(e.Fh))}},h.onerror=function(i){clearTimeout(r),e.Fh||(e.R.warn("[HiveComm] error retrieving persistent UUID: "+i),e.Fh=e.xL(),e.R.debug("[HiveComm] Generated UUID: "+e.Fh)),t.resolve(new a.BL(e.Fh))}}).fail(function(i){clearTimeout(r),e.Fh||(e.R.warn("[HiveComm] error opening indexedDB - generating random id. Error: "+i),e.Fh=e.xL(),e.R.debug("[HiveComm] Generated UUID: "+e.Fh)),t.resolve(new a.BL(e.Fh))})}catch(s){this.Fh=this.xL(),this.R.debug("[HiveComm] Persistence error - Generate UUID: "+this.Fh,s),t.resolve(new a.BL(this.Fh))}}else this.Fh=this.xL(),this.R.debug("[HiveComm] Persistence disabled - Generate UUID: "+this.Fh),t.resolve(new a.BL(this.Fh));return this.ML=t.Vt,this.ML},e.prototype.xL=function(){return n.CS()},e}();t.UL=h},function(e,t,r){"use strict";var i=r(3),n=r(1),s=function(){function e(){this.P="[PreloadConnectivityInfoProvider] ",this.connInfo=window.myConnInfo,this.R=n.Framework.resolve(n.Framework.Tt.rt).log(),this.connInfo||this.R.error(this.P+" helper undefined")}return e.prototype.getConnectivityInfo=function(){var e=this;if(!this.connInfo)return i.reject("ConnInfo helper undefined");var t=setTimeout(function(){return e.R.warn(e.P+"Get connectivity info expired"),e.HL?i.resolve(e.HL):i.reject("expired")},2e3);try{return this.connInfo.getConnectivityInfo().then(function(r){return clearTimeout(t),e.HL=r,r}).fail(function(t){return e.R.debug(e.P+" get connectivity info failed with error 1: ",t),e.HL?e.HL:i.reject(t)})}catch(r){return this.R.debug(this.P+" get connectivity info failed with error 2:",r),i.reject(r)}},e}();t.qL=s},function(e,t,r){"use strict";var i=r(3),n=r(37),s=r(86),o=r(1),a=r(26),h=r(18),u=function(){function e(){this.R=o.Framework.resolve(o.Framework.Tt.rt).log(),this.R.debug("INIT SERVICE CLIENT")}return e.prototype.init=function(e,t){var r=this;if(this.VL)this.VL.then(function(){var e={partnerId:t.eh(),customerId:t.Za(),contentId:t.$a(),secret:t.bS()},i=new h.pu(Services.jL,1,JSON.stringify(e));r.connection.send(i)});else{var o=i.defer(),u=a.su.nu.YE,c=new n(u),l=c.sR({"connection-id":e,partner_id:t.eh(),customer_id:t.Za(),content_id:t.$a(),ticket:t.bS()}).toString();this.connection=new s.GL(l,a.su.nu.WE,a.su.nu.XE,a.su.nu.$E),this.connection.QL(function(){r.R.debug("HIVE SERVICES CONNECTED"),o.resolve(r.connection)}),this.connection.onerror(function(){r.R.warn("Hive Services Connection failed"),o.reject(r.connection)}),this.VL=o.Vt}return{Ja:this.connection,Vt:this.VL}},e.prototype.connect=function(){this.connection&&this.connection.connect(!0)},e.prototype.WF=function(e){},e.prototype.lu=function(){return this.connection},e.prototype.close=function(){this.connection&&this.connection.close()},e}();t.YL=u},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=r(23);r(79),r(78);var o,a=r(1),h=r(10),u=r(26),c=r(18),l=r(15);!function(e){var t="[SNAP]",r=function(){function e(){this.metrics=new hive.snapshots.Metrics,this.KL=new hive.snapshots.Traffic,this.JL=new n,this.zL=new n,this.WL=new n,this.player=new hive.snapshots.Player}return e}();e.XL=r;var i=function(){function r(){this.ticket=null,this.$L=0,this.ZL=0,this.eD()}return r.prototype.init=function(e,r,i,n){this.R=a.Framework.resolve(a.Framework.Tt.rt).log(n),this.kh=a.Framework.resolve(h.Os.Ss),this.R.debug(t+" INIT STATS STORE - ID: "+e),this.Fh=e,this.ticket=r,this.Da(i)},r.prototype.tD=function(e){this.rD=e},r.prototype.Da=function(e){this.app=e},r.prototype.eD=function(){this.iD=new e.XL,this.Fh=null,this.ticket=null,this.reset()},r.prototype.reset=function(){this.kP=new e.XL,this.nD(this.kP.KL),this.sD(this.kP)},r.prototype.nD=function(e){e.respFallbackN=0,e.respFallbackErrN=0,e.srcReqN=0,e.srcRespErrN=0,e.srcRespQt=0,e.srcOtherRespN=0,e.srcRespN=0,e.srcOverQt=0,e.p2pDirectQt=0,e.p2pNatQt=0,e.p2pUdpbQt=0,e.p2pRelayQt=0,e.p2pOutSiteLowPrio=0,e.respP2pN=0,e.p2pSubReqN=0,e.p2pSubRespErrN=0,e.p2pSubRespQt=0},r.prototype.sD=function(e){e.metrics.videoBufN=0,e.metrics.videoBufQt=0,e.metrics.clientBufferMs=0,e.player.bufferingN=0,e.player.bufferingMs=0},r.prototype.oD=function(){var e=this,r=new hive.snapshots.MetricSnapshot;r.timestamp=a.Framework.time(),r.guid=this.Fh,r.sessionId=this.ticket.sessionId,r.eventId=new EventId,r.eventId.partnerId=this.ticket.eh(),r.eventId.customerId=this.ticket.Za(),r.eventId.contentId=this.ticket.$a();try{var i=new hive.snapshots.ClientInfo;i.clientType=this.aD();var n=this.app.version.split(".");i.majorVersion=parseInt(n[0]),i.minorVersion=parseInt(n[1]),i.patchVersion=parseInt(n[2]),r.client=i}catch(s){this.R.warn(t+" error setting Snapshot ClientInfo",s)}r.streamInfo=this.PL.hD(),r.traffic=[];var o=new hive.snapshots.TrafficKey;if(r.traffic.push({key:o,value:this.kP.KL}),this.kP.JL.forEach(function(e,t){var i=new hive.snapshots.TrafficKey;i.bitrate=t,r.traffic.push({key:i,value:e})}),r.metrics=this.kP.metrics,this.rD&&(r.metrics.clientBufferMs=this.rD.min()),r.player=this.kP.player,this.uD){var h=this.uD.cD();h.forEach(function(t,i){e.lD(i,t,r)}),this.kP.WL.filter(function(e,t){return!h.has(t)}).forEach(function(t,i){e.lD(i,t,r)})}return r.connInfo=new hive.snapshots.ConnectivityInfo,this.kh.getConnectivityInfo().then(function(t){return r.connInfo.privateIp=t.getNetworkChanged().getPrivateIp(),e.pD(r)}).fail(function(t){return e.pD(r)})},r.prototype.pD=function(e){return e.connInfo.internalAs=this.$L,e.connInfo.externalAs=this.ZL,e.connInfo.publicIp=this.fD,e},r.prototype.aD=function(){var e;switch(this.app.app){case"JS":e=ClientType.dD;break;case"PROXY":e=ClientType.gD;break;default:e=ClientType.yD}return e},r.prototype.lD=function(e,t,r){var i=this.kP.zL.get(e);t.traffic=i,r.partners||(r.partners=[]);var n=new hive.snapshots.PartnerKey;n.partnerGuid=e,r.partners.push({key:n,value:t})},r.prototype.wL=function(e,t){e>0&&(this.kP.metrics.videoBufN++,this.kP.metrics.videoBufQt+=e,this.kP.player.bufferingN++,this.kP.player.bufferingMs+=e),this.kP.player.playerBufferMs=t},r.prototype.OL=function(){return this.kP.KL},r.prototype.vD=function(){return this.iD.KL},r.prototype.mD=function(e){return this.iD.JL.has(e)||this.iD.JL.set(e,new hive.snapshots.Traffic),this.iD.JL.get(e)},r.prototype.kL=function(e){if(!this.kP.JL.has(e)){var t=new hive.snapshots.Traffic;this.nD(t),this.kP.JL.set(e,t)}return this.kP.JL.get(e)},r.prototype.TD=function(e,t){return t.zL.has(e)||t.zL.set(e,new hive.snapshots.PartnerTraffic),t.zL.get(e)},r.prototype.ED=function(e){return this.TD(e,this.kP)},r.prototype.wD=function(e){return this.TD(e,this.iD)},r.prototype.ID=function(e){this.kh=e},r.prototype.SD=function(e){this.uD=e},r.prototype.tu=function(e){},r}();e.bD=i;var o=function(){function e(){this.state=l.ka.Aa,this.client=a.Framework.resolve(h.Os.vt),this.Do=new s.TT,this.protocol=new s.KT(this.Do)}return e.prototype.init=function(e,r){this.R=a.Framework.resolve(a.Framework.Tt.rt).log(r),this.R.debug(t+" INIT CLIENT STATS"),this.RD=e,this.PD()},e.prototype.PD=function(){var e=this;this.AD>-1&&a.Framework.clearInterval(this.AD),this.AD=a.Framework.setInterval(function(){e.kD()},u.su.nu.zE)},e.prototype.Vs=function(e){this.state=e},e.prototype.reset=function(){a.Framework.clearInterval(this.AD),this.RD&&this.RD.eD()},e.prototype.kD=function(){var e=this;this.R.debug("[SNAP] TAKING SNAPSHOT");var t=this.RD.oD();t.then(function(t){return e.forward(t)}).fail(function(t){e.R.warn("[SNAP] ERROR FORWARDING SNAPSHOT",t)})["finally"](function(){e.RD.reset()})},e.prototype.forward=function(e){var r=this;if(this.state===l.ka.IDLE)return void this.R.debug(t+" not send - state idle");if(this.client&&this.client.lu()){this.R.debug(t+" SENDING SNAPSHOT"),this.protocol.XT("SNAPSHOT",s.Gm.ONEWAY,0),e.write(this.protocol),this.protocol.eE();var i=this.Do.LT(),n=this.CD(i,",",4),o=i.slice(n+1,i.length-1),a=new c.pu(Services.fu,1,o);this.client.lu().send(a).fail(function(e){r.R.warn(t+" PROBLEM: ",e)})}},e.prototype.CD=function(e,t,r){return e.split(t,r).join(t).length},e}();e.La=o}(o=t.Stats||(t.Stats={}))},function(e,t,r){"use strict";var i=r(3),n=r(26),s=r(2),o=r(155),a=r(1),h=r(10),u=r(157),c=r(45),l=function(){function e(){this.OD=new s.Ze,this.publicIp=null,this.privateIp=null,this.Ws=!1,this.R=a.Framework.resolve(a.Framework.Tt.rt).log(),this.HL=a.Framework.resolve(h.Os.bs)}return e.prototype.getConnectivityInfo=function(){var e=this;return this.Ws?this.ND("failed"):null!=this.publicIp&&null!=this.privateIp?i.resolve(this._D()):this.FD().then(function(t){return t.forEach(function(t){o.DD.LD(t)?e.privateIp=t:e.publicIp=t}),e._D()}).fail(function(t){return e.Ws=!0,("undefined"==typeof t.MD||t.MD)&&e.R.warn("error detecting Connectivity Info",t),e.ND(t)})},e.prototype.ND=function(e){return null!=this.publicIp||null!=this.privateIp?i.resolve(this._D()):i.reject(e)},e.prototype._D=function(){var e=new u.BD;return this.privateIp&&e.xD(this.privateIp),this.publicIp&&e.UD(this.publicIp),this.HL._L(e),this.HL},e.prototype.HD=function(){try{return null!=c._s&&null!=c.nk&&"function"==typeof new RTCPeerConnection(null,null).createDataChannel}catch(e){return!1}},e.prototype.FD=function(){var e=this,t=i.defer();if(this.HD()){var r={optional:[{RtpDataChannels:!0}]};try{var s=new RTCPeerConnection(n.su.nu.JE,r);s.onicecandidate=function(t){t.candidate&&e.qD(t.candidate.candidate)},s.createDataChannel(""),s.createOffer(function(e){s.setLocalDescription(e,function(){},function(){})},function(){}),setTimeout(function(){try{var r=s.localDescription.sdp.split("\n");r.forEach(function(t){0===t.indexOf("a=candidate:")&&e.qD(t)}),t.resolve(e.OD.keys()),s.close()}catch(i){t.reject({MD:!0,message:i.message})}},1e3)}catch(o){t.reject({MD:!0,message:o.message})}}else t.reject({MD:!1,message:"webrtc datachannel not supported"});return t.Vt},e.prototype.qD=function(e){var t=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,r=t.exec(e);if(r){var i=r[0];this.OD.set(i,!0)}},e}();t.VD=l},function(e,t,r){"use strict";r(73);var i=r(3),n=r(2),s=n.Ze,o=r(1),a=r(36),h=function(){
function e(e){this.du=(new Date).getTime(),this.jD=e}return e}(),u=function(){function e(){this.GD=new s,this.R=(o.Framework.resolve(o.Framework.Tt.rt)||console).log(),this.R.debug("INIT TICKET RESOLVER")}return e.prototype.resolve=function(e,t,r){var n=this,s=i.defer();return e&&(e.on(Services.jL,0,function(e){n.QD(e)}),e.on(Services.jL,2,function(e){n.QD(e)}),this.GD.set(t,new h(s))),s.Vt},e.prototype.QD=function(e){var t=this,r=(new Date).getTime(),i=JSON.parse(e.msg),n=!1;this.GD.forEach(function(e,s){if(t.YD(s,i)){n=!0;var o=t.qF(s,i);o?(o.du=e.du,o.gu=r,e.jD.resolve(o)):e.jD.reject("Ticket verification failed"),t.GD["delete"](o)}}),n||this.R.warn("no pending ticket matching: "+e.msg)},e.prototype.Ga=function(e){var t=new RegExp("^https?://api(?:-test)?.hivestreaming.com/v1/events/(?:wildcard/)?");if(t.test(e)){var r=this.KD();return r.wS(e),r}return null},e.prototype.KD=function(){return new a.BS},e.prototype.YD=function(e,t){return e.eh()===t[a.BS.DS]&&e.Za()===t[a.BS.LS]&&e.$a()===t[a.BS.MS]},e.prototype.qF=function(e,t){return e.mS(t),e.ES()?e:null},e}();t.JD=u},function(e,t){Services={1:"REMOTE_EXECUTOR",zD:1,2:"PEER_FORWARDER",WD:2,3:"PEER_INDEX",XD:3,4:"PEER_BROADCAST",$D:4,5:"PEER_FILTER",ZD:5,6:"PEER_LOGGING",eM:6,7:"HIVEJS_TRACKER",tM:7,8:"PEER_SYSTEM",rM:8,9:"HIVEJS_SNAPSHOTS",fu:9,10:"HIVEJS_TICKETS",jL:10,11:"HIVEJS_KEEPALIVE",iM:11,12:"HIVEJS_FORWARDING",nM:12}},function(e,t,r){/*!
	 * The copyright in this software is being made available under the BSD License,
	 * included below. This software may be subject to other third party and contributor
	 * rights, including patent rights, and no such rights are granted under this license.
	 *
	 * Copyright (c) 2013, Dash Industry Forum.
	 * All rights reserved.
	 *
	 * Redistribution and use in source and binary forms, with or without modification,
	 * are permitted provided that the following conditions are met:
	 *  * Redistributions of source code must retain the above copyright notice, this
	 *  list of conditions and the following disclaimer.
	 *  * Redistributions in binary form must reproduce the above copyright notice,
	 *  this list of conditions and the following disclaimer in the documentation and/or
	 *  other materials provided with the distribution.
	 *  * Neither the name of Dash Industry Forum nor the names of its
	 *  contributors may be used to endorse or promote products derived from this software
	 *  without specific prior written permission.
	 *
	 *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY
	 *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
	 *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
	 *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
	 *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
	 *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	 *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
	 *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
	 *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
	 *  POSSIBILITY OF SUCH DAMAGE.
	 */
var i=r(76),n=r(46);DashParser=function(){var e=31536e3,t=2592e3,r=86400,s=3600,o=60,a=60,h=1e3,u=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,c=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,l=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,p=[{type:"duration",test:function(e){for(var t=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],r=t.length,i=0;i<r;i++)if(e.nodeName===t[i])return u.test(e.value);return!1},pk:function(i){var n=u.exec(i),a=parseFloat(n[2]||0)*e+parseFloat(n[4]||0)*t+parseFloat(n[6]||0)*r+parseFloat(n[8]||0)*s+parseFloat(n[10]||0)*o+parseFloat(n[12]||0);return void 0!==n[1]&&(a=-a),a}},{type:"datetime",test:function(e){return c.test(e.value)},pk:function(e){var t,r=c.exec(e);if(t=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&parseInt(r[6],10)||0,r[7]&&parseFloat(r[7])*h||0),r[9]&&r[10]){var i=parseInt(r[9],10)*a+parseInt(r[10],10);t+=("+"===r[8]?-1:1)*i*o*h}return new Date(t)}},{type:"numeric",test:function(e){return l.test(e.value)},pk:function(e){return parseFloat(e)}}],f=function(){var e,t,r,i;return i=[{name:"profiles",ll:!1},{name:"width",ll:!1},{name:"height",ll:!1},{name:"sar",ll:!1},{name:"frameRate",ll:!1},{name:"audioSamplingRate",ll:!1},{name:"mimeType",ll:!1},{name:"segmentProfiles",ll:!1},{name:"codecs",ll:!1},{name:"maximumSAPPeriod",ll:!1},{name:"startsWithSap",ll:!1},{name:"maxPlayoutRate",ll:!1},{name:"codingDependency",ll:!1},{name:"scanType",ll:!1},{name:"FramePacking",ll:!0},{name:"AudioChannelConfiguration",ll:!0},{name:"ContentProtection",ll:!0}],e={},e.name="AdaptationSet",e.sM=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=i,t={},t.name="Representation",t.sM=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=i,e.children.push(t),r={},r.name="SubRepresentation",r.sM=!1,r.isArray=!0,r.parent=t,r.children=[],r.properties=i,t.children.push(r),e},d=function(){var e,t,r,i;return i=[{name:"SegmentBase",ll:!0},{name:"SegmentTemplate",ll:!0},{name:"SegmentList",ll:!0}],e={},e.name="Period",e.sM=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=i,t={},t.name="AdaptationSet",t.sM=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=i,e.children.push(t),r={},r.name="Representation",r.sM=!1,r.isArray=!0,r.parent=t,r.children=[],r.properties=i,t.children.push(r),e},g=function(){var e,t,r,i,n;return n=[{name:"BaseURL",ll:!0,oM:function(e,t){var r;return r=0===t.indexOf("http://")?t:e+t}}],e={},e.name="mpd",e.sM=!0,e.isArray=!0,e.parent=null,e.children=[],e.properties=n,t={},t.name="Period",t.sM=!1,t.isArray=!0,t.parent=null,t.children=[],t.properties=n,e.children.push(t),r={},r.name="AdaptationSet",r.sM=!1,r.isArray=!0,r.parent=t,r.children=[],r.properties=n,t.children.push(r),i={},i.name="Representation",i.sM=!1,i.isArray=!0,i.parent=r,i.children=[],i.properties=n,r.children.push(i),e},y=function(){var e=[];return e.push(f()),e.push(d()),e.push(g()),e},v=function(e,t){var r,s=new n(p,"",(!0)),o=new i(y()),a=(new Date,null),h=null;try{r=s.vk(e),a=new Date,r.hasOwnProperty("BaseURL")?(r.BaseURL=r.BaseURL_asArray[0],0!==r.BaseURL.toString().indexOf("http")&&(r.BaseURL=t+r.BaseURL)):r.BaseURL=t,r.hasOwnProperty("Location")&&(r.Location=r.Location_asArray[0]),o.aM(r),h=new Date}catch(u){return console.log("parsing the manifest failed","parse",e),null}return r};return{parse:v}}},function(e,t,r){/*! codem-isoboxer v0.2.2 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
"undefined"==typeof ISOBoxer&&(ISOBoxer={}),ISOBoxer.hM=function(e){return new i(e).parse()},ISOBoxer.gs={},ISOBoxer.gs.uM=function(e,t){var r=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(r).decode(e);var i=[],n=0;if("utf-8"===r)for(;n<e.byteLength;){var s=e.getUint8(n++);s<128||(s<224?(s=(31&s)<<6,s|=63&e.getUint8(n++)):s<240?(s=(15&s)<<12,s|=(63&e.getUint8(n++))<<6,s|=63&e.getUint8(n++)):(s=(7&s)<<18,s|=(63&e.getUint8(n++))<<12,s|=(63&e.getUint8(n++))<<6,s|=63&e.getUint8(n++))),i.push(String.fromCharCode(s))}else for(;n<e.byteLength;)i.push(String.fromCharCode(e.getUint8(n++)));return i.join("")},t.hM=ISOBoxer.hM,t.gs=ISOBoxer.gs,ISOBoxer.cM=function(e){this.offset="undefined"==typeof e?0:e};var i=function(e){this.lM=new DataView(e),this.pM=new ISOBoxer.cM,this.fM=[]};i.prototype.fetch=function(e){var t=this.dM(e,!0);return t.length?t[0]:null},i.prototype.dM=function(e,t){var r=[];return i.gM.call(this,e,r,t),r},i.prototype.parse=function(){for(this.pM.offset=0,this.fM=[];this.pM.offset<this.lM.byteLength;){var e=n.parse(this);if("undefined"==typeof e.type)break;this.fM.push(e)}return this},i.gM=function(e,t,r){this.type&&this.type==e&&t.push(this);for(var n in this.fM){if(t.length&&r)return;i.gM.call(this.fM[n],e,t,r)}};var n=function(){this.pM=new ISOBoxer.cM};n.parse=function(e){var t=new n;return t.yM=e.pM.offset,t.vM=e.vM?e.vM:e,t.lM=e.lM,t.mM=e,t.TM(),e.pM.offset=t.lM.byteOffset+t.lM.byteLength,t},n.prototype.EM=function(e){var t=null;switch(e){case 8:t=this.lM.getInt8(this.pM.offset-this.lM.byteOffset);break;case 16:t=this.lM.getInt16(this.pM.offset-this.lM.byteOffset);break;case 32:t=this.lM.getInt32(this.pM.offset-this.lM.byteOffset);break;case 64:var r=this.lM.getInt32(this.pM.offset-this.lM.byteOffset),i=this.lM.getInt32(this.pM.offset-this.lM.byteOffset+4);t=r*Math.pow(2,32)+i}return this.pM.offset+=e>>3,t},n.prototype.wM=function(e){var t=null;switch(e){case 8:t=this.lM.getUint8(this.pM.offset-this.lM.byteOffset);break;case 16:t=this.lM.getUint16(this.pM.offset-this.lM.byteOffset);break;case 24:var r=this.lM.getUint16(this.pM.offset-this.lM.byteOffset),i=this.lM.getUint8(this.pM.offset-this.lM.byteOffset+2);t=(r<<8)+i;break;case 32:t=this.lM.getUint32(this.pM.offset-this.lM.byteOffset);break;case 64:var r=this.lM.getUint32(this.pM.offset-this.lM.byteOffset),i=this.lM.getUint32(this.pM.offset-this.lM.byteOffset+4);t=r*Math.pow(2,32)+i}return this.pM.offset+=e>>3,t},n.prototype.IM=function(e){for(var t="",r=0;r<e;r++){var i=this.wM(8);t+=String.fromCharCode(i)}return t},n.prototype.SM=function(){for(var e="";;){var t=this.wM(8);if(0==t)break;e+=String.fromCharCode(t)}return e},n.prototype.bM=function(e){var t=this.wM(e/2),r=this.wM(e/2);return t+r/Math.pow(2,e/2)},n.prototype.TM=function(){if(this.pM.offset=this.yM,this.yM+8>this.lM.buffer.byteLength)return void(this.vM.RM=!0);switch(this.size=this.wM(32),this.type=this.IM(4),1==this.size&&(this.PM=this.wM(64)),"uuid"==this.type&&(this.AM=this.IM(16)),this.size){case 0:this.lM=new DataView(this.lM.buffer,this.yM,this.lM.byteLength-this.pM.offset);break;case 1:this.yM+this.size>this.lM.buffer.byteLength?(this.RM=!0,this.vM.RM=!0):this.lM=new DataView(this.lM.buffer,this.yM,this.PM);break;default:this.yM+this.size>this.lM.buffer.byteLength?(this.RM=!0,this.vM.RM=!0):this.lM=new DataView(this.lM.buffer,this.yM,this.size)}!this.RM&&this.kM[this.type]&&this.kM[this.type].call(this)},n.prototype.CM=function(){this.version=this.wM(8),this.OM=this.wM(24)},n.prototype.kM={},["moov","trak","tref","mdia","minf","stbl","edts","dinf","mvex","moof","traf","mfra","udta","meco","strk","vttc"].forEach(function(e){n.prototype.kM[e]=function(){for(this.fM=[];this.pM.offset-this.lM.byteOffset<this.lM.byteLength;)this.fM.push(n.parse(this))}}),n.prototype.kM.NM=function(){this.CM(),this._M=this.wM(32),this.entries=[];for(var e=1;e<=this._M;e++){var t={};1==this.version?(t.FM=this.wM(64),t.LM=this.EM(64)):(t.FM=this.wM(32),t.LM=this.EM(32)),t.DM=this.EM(16),t.MM=this.EM(16),this.entries.push(t)}},n.prototype.kM.BM=function(){this.CM(),this.xM=this.SM(),this.value=this.SM(),this.timescale=this.wM(32),this.UM=this.wM(32),this.HM=this.wM(32),this.id=this.wM(32),this.qM=new DataView(this.lM.buffer,this.pM.offset,this.lM.byteLength-(this.pM.offset-this.yM))},n.prototype.kM.VM=n.prototype.kM.Om=function(){this.data=new DataView(this.lM.buffer,this.pM.offset,this.lM.byteLength-(this.pM.offset-this.yM))},n.prototype.kM.jM=n.prototype.kM.GM=function(){for(this.QM=this.IM(4),this.YM=this.wM(32),this.KM=[];this.pM.offset-this.lM.byteOffset<this.lM.byteLength;)this.KM.push(this.IM(4))},n.prototype.kM.JM=function(){this.CM(),this.zM=this.wM(32),this.WM=this.IM(4),this.Ob=[this.wM(32),this.wM(32),this.wM(32)],this.name=this.SM()},n.prototype.kM.XM=function(){this.data=new DataView(this.lM.buffer,this.pM.offset,this.lM.byteLength-(this.pM.offset-this.yM))},n.prototype.kM.$M=function(){this.CM(),1==this.version?(this.ZM=this.wM(64),this.eB=this.wM(64),this.timescale=this.wM(32),this.duration=this.wM(64)):(this.ZM=this.wM(32),this.eB=this.wM(32),this.timescale=this.wM(32),this.duration=this.wM(32));var e=this.wM(16);this.pad=e>>15,this.language=String.fromCharCode((e>>10&31)+96,(e>>5&31)+96,(31&e)+96),this.zM=this.wM(16)},n.prototype.kM.tB=function(){this.CM(),this.rB=this.wM(32)},n.prototype.kM.iB=function(){this.CM(),1==this.version?(this.ZM=this.wM(64),this.eB=this.wM(64),this.timescale=this.wM(32),this.duration=this.wM(64)):(this.ZM=this.wM(32),this.eB=this.wM(32),this.timescale=this.wM(32),this.duration=this.wM(32)),this.rate=this.bM(32),this.volume=this.bM(16),this.nB=this.wM(16),this.sB=[this.wM(32),this.wM(32)],this.matrix=[];for(var e=0;e<9;e++)this.matrix.push(this.bM(32));this.zM=[];for(var e=0;e<6;e++)this.zM.push(this.wM(32));this.oB=this.wM(32)},n.prototype.kM.aB=function(){var e=new DataView(this.lM.buffer,this.pM.offset,this.lM.byteLength-(this.pM.offset-this.yM));this.hB=ISOBoxer.gs.uM(e)},n.prototype.kM.uB=function(){this.CM(),this.cB=this.wM(32),this.timescale=this.wM(32),0==this.version?(this.lB=this.wM(32),this.pB=this.wM(32)):(this.lB=this.wM(64),this.pB=this.wM(64)),this.Ob=this.wM(16),this.fB=this.wM(16),this.dB=[];for(var e=0;e<this.fB;e++){var t={},r=this.wM(32);t.gB=r>>31&1,t.yB=2147483647&r,t.vB=this.wM(32);var i=this.wM(32);t.mB=i>>31&1,t.TB=i>>28&7,t.EB=268435455&i,this.dB.push(t)}},n.prototype.kM.wB=function(){this.CM(),this.IB=this.wM(32),this.SB=[];for(var e=0;e<this.IB;e++){var t={};t.bB=this.wM(32),t.RB=[];for(var r=0;r<t.bB;r++){var i={};i.level=this.wM(8),i.PB=this.wM(24),t.RB.push(i)}this.SB.push(t)}},n.prototype.kM.AB=function(){this.CM(),1==this.version?this.kB=this.wM(64):this.kB=this.wM(32)},n.prototype.kM.tfhd=function(){this.CM(),this.CB=this.wM(32),1&this.OM&&(this.OB=this.wM(64)),2&this.OM&&(this.NB=this.wM(32)),8&this.OM&&(this.default_sample_duration=this.wM(32)),16&this.OM&&(this._B=this.wM(32)),32&this.OM&&(this.FB=this.wM(32))},n.prototype.kM.LB=function(){this.CM(),1==this.version?(this.ZM=this.wM(64),this.eB=this.wM(64),this.CB=this.wM(32),this.nB=this.wM(32),this.duration=this.wM(64)):(this.ZM=this.wM(32),this.eB=this.wM(32),this.CB=this.wM(32),this.nB=this.wM(32),this.duration=this.wM(32)),this.sB=[this.wM(32),this.wM(32)],this.DB=this.wM(16),this.MB=this.wM(16),this.volume=this.bM(16),this.BB=this.wM(16),this.matrix=[];for(var e=0;e<9;e++)this.matrix.push(this.bM(32));this.width=this.wM(32),this.height=this.wM(32)},n.prototype.kM.trun=function(){this.CM(),this.xB=this.wM(32),1&this.OM&&(this.UB=this.EM(32)),4&this.OM&&(this.HB=this.wM(32)),this.qB=[];for(var e=0;e<this.xB;e++){var t={};256&this.OM&&(t.sample_duration=this.wM(32)),512&this.OM&&(t.VB=this.wM(32)),1024&this.OM&&(t.jB=this.wM(32)),2048&this.OM&&(0==this.version?t.GB=this.wM(32):t.GB=this.EM(32)),this.qB.push(t)}},n.prototype.kM.QB=function(){var e=new DataView(this.lM.buffer,this.pM.offset,this.lM.byteLength-(this.pM.offset-this.yM));this.YB=ISOBoxer.gs.uM(e)},n.prototype.kM.KB=function(){var e=new DataView(this.lM.buffer,this.pM.offset,this.lM.byteLength-(this.pM.offset-this.yM));this.config=ISOBoxer.gs.uM(e)},n.prototype.kM.JB=function(){}},function(e,t,r){var n=function(e){var t;for(t=[],i=0,len=e.length;i<len;i+=1)e[i].sM?t.push("root"):t.push(e[i].name);var r=function(e,t){var r;if(null!==e&&null!==t)for(r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)||(t[r]=e[r]))},n=function(e,t,i){var n,s,o,a,h;if(null!==e&&0!==e.length)for(n=0,s=e.length;n<s;n+=1)o=e[n],t.hasOwnProperty(o.name)&&(i.hasOwnProperty(o.name)?o.ll&&(a=t[o.name],h=i[o.name],"object"==typeof a&&"object"==typeof h?r(a,h):null!=o.oM?i[o.name]=o.oM(a,h):i[o.name]=a+h):i[o.name]=t[o.name])},s=function(e,t){var r,i,o,a,h,u,c,l=e;if(null!==l.children&&0!==l.children.length)for(r=0,i=l.children.length;r<i;r+=1)if(u=l.children[r],t.hasOwnProperty(u.name))if(u.isArray)for(h=t[u.name+"_asArray"],o=0,a=h.length;o<a;o+=1)c=h[o],n(l.properties,t,c),s(u,c);else c=t[u.name],n(l.properties,t,c),s(u,c)},o=function(r){var i,n,a,h,u,c,l;if(null===r)return r;if("object"!=typeof r)return r;for(i=0,n=t.length;i<n;i+=1)"root"===t[i]&&(u=e[i],c=r,s(u,c));for(h in r)if(r.hasOwnProperty(h)){if(a=t.indexOf(h),a!==-1)if(u=e[a],u.isArray)for(l=r[h+"_asArray"],i=0,n=l.length;i<n;i+=1)c=l[i],s(u,c);else c=r[h],s(u,c);o(r[h])}return r};return{aM:o}};e.i=n},function(e,t,r){var i=function(){var e={};e.vp={},e.vp.create=Object.create||function(e){function t(){}return t.prototype=e,new t},e.vp.zB=function(e,t,r){for(var i in e)hasOwnProp.call(e,i)&&t.call(r||this,i,e[i])},e.vp.ll=function(e,t){if(!t)return e;for(var r in t)hasOwnProp.call(t,r)&&(e[r]=t[r]);return e},e.vp.WB=function(t,r){var i,n,s;t=e.vp.wm(t);for(i in r)hasOwnProp.call(r,i)&&(n=t[i],s=r[i],e.vp.XB(n)&&e.vp.XB(s)?t[i]=e.vp.WB(n,s):t[i]=r[i]);return t},e.vp.wm=function(t){return e.vp.ll({},t)},e.vp.XB=function(e){return!!e&&"object"==typeof e&&"[object Object]"===e.toString()&&e.constructor===Object},e.vp.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},mergeOptions=function(t,r){var i,n,s;t=e.vp.wm(t);for(i in r)r.hasOwnProperty(i)&&(n=t[i],s=r[i],e.vp.XB(n)&&e.vp.XB(s)?t[i]=e.util.$B(n,s):t[i]=r[i]);return t},e.$B=mergeOptions;var t=function(){this.init=function(){var e={};this.on=function(t,r){e[t]||(e[t]=[]),e[t].push(r)},this.off=function(t,r){var i;return!!e[t]&&(i=e[t].indexOf(r),e[t].splice(i,1),i>-1)},this.ZB=function(t){var r,i,n,s;if(r=e[t])for(s=Array.prototype.slice.call(arguments,1),n=r.length,i=0;i<n;++i)r[i].apply(this,s)},this.ex=function(){e={}}}};t.prototype.tx=function(e){this.on("data",function(t){e.push(t)})},e.ix=t;var r,i,n,s=function(){},o=function(){var e="[^=]*",t='"[^"]*"|[^,]*',r="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+r+")")}(),a=function(e){for(var t,r=e.split(o),i=r.length,n={};i--;)""!==r[i]&&(t=/([^=]*)=(.*)/.exec(r[i]).slice(1),t[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n},t=e.ix;return r=function(){var e="";r.prototype.init.call(this),this.push=function(t){var r;for(e+=t,r=e.indexOf("\n");r>-1;r=e.indexOf("\n"))this.ZB("data",e.substring(0,r)),e=e.substring(r+1)}},r.prototype=new t,i=function(){i.prototype.init.call(this)},i.prototype=new t,i.prototype.push=function(e){var t,r;if(e=e.replace(/^\s+|\s+$/g,""),0!==e.length)return"#"!==e[0]?void this.ZB("data",{type:"uri",uri:e}):0!==e.indexOf("#EXT")?void this.ZB("data",{type:"comment",text:e.slice(1)}):(e=e.replace("\r",""),(t=/^#EXTM3U/.exec(e))?void this.ZB("data",{type:"tag",nx:"m3u"}):(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))?(r={type:"tag",nx:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),void this.ZB("data",r)):(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))?(r={type:"tag",nx:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),void this.ZB("data",r)):(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))?(r={type:"tag",nx:"totalduration"},t[1]&&(r.duration=parseInt(t[1],10)),void this.ZB("data",r)):(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))?(r={type:"tag",nx:"version"},t[1]&&(r.version=parseInt(t[1],10)),void this.ZB("data",r)):(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))?(r={type:"tag",nx:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.ZB("data",r)):(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))?(r={type:"tag",nx:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.ZB("data",r)):(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))?(r={type:"tag",nx:"playlist-type"},t[1]&&(r.sx=t[1]),void this.ZB("data",r)):(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))?(r={type:"tag",nx:"byterange"},t[1]&&(r.length=parseInt(t[1],10)),t[2]&&(r.offset=parseInt(t[2],10)),void this.ZB("data",r)):(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))?(r={type:"tag",nx:"allow-cache"},t[1]&&(r.yI=!/NO/.test(t[1])),void this.ZB("data",r)):(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e))?(r={type:"tag",nx:"stream-inf"},t[1]&&(r.attributes=a(t[1]),r.attributes.ox&&!function(){var e=r.attributes.ox.split("x"),t={};e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),r.attributes.ox=t}(),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["ax"]&&(r.attributes["ax"]=parseInt(r.attributes["ax"],10))),void this.ZB("data",r)):(t=/^#EXT-X-ENDLIST/.exec(e))?void this.ZB("data",{type:"tag",nx:"endlist"}):(t=/^#EXT-X-DISCONTINUITY/.exec(e))?void this.ZB("data",{type:"tag",nx:"discontinuity"}):(t=/^#EXT-X-KEY:?(.*)$/.exec(e))?(r={type:"tag",nx:"key"},t[1]&&(r.attributes=a(t[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2)&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.ZB("data",r)):void this.ZB("data",{type:"tag",data:e.slice(4,e.length)}))},n=function(){var t,o=this,a=[],h={};n.prototype.init.call(this),this.hx=new r,this.ux=new i,this.hx.tx(this.ux),this.manifest={lx:!0},this.ux.on("data",function(r){({tag:function(){(({"allow-cache":function(){this.manifest.lx=r.yI,"allowed"in r||(this.ZB("info",{message:"defaulting allowCache to YES"}),this.manifest.lx=!0)},byterange:function(){var e={};"length"in r&&(h.byterange=e,e.length=r.length,"offset"in r||(this.ZB("info",{message:"defaulting offset to zero"}),r.offset=0)),"offset"in r&&(h.byterange=e,e.offset=r.offset)},endlist:function(){this.manifest.px=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.ZB("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.ZB("info",{message:"defaulting discontinuity sequence to zero"})),r.duration>=0&&(h.duration=r.duration),this.manifest.qO=a},key:function(){return r.attributes?"NONE"===r.attributes.METHOD?void(t=null):r.attributes.US?(r.attributes.METHOD||this.ZB("warn",{message:"defaulting key method to AES-128"}),t={method:r.attributes.METHOD||"AES-128",uri:r.attributes.US},void(void 0!==r.attributes.IV&&(t.iv=r.attributes.IV))):void this.ZB("warn",{message:"ignoring key declaration without URI"}):void this.ZB("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){return isFinite(r.number)?void(this.manifest.mediaSequence=r.number):void this.ZB("warn",{message:"ignoring invalid media sequence: "+r.number})},"discontinuity-sequence":function(){return isFinite(r.number)?void(this.manifest.discontinuitySequence=r.number):void this.ZB("warn",{message:"ignoring invalid discontinuity sequence: "+r.number})},"playlist-type":function(){return/VOD|EVENT/.test(r.sx)?void(this.manifest.sx=r.sx):void this.ZB("warn",{message:"ignoring unknown playlist type: "+r.playlist})},"stream-inf":function(){return this.manifest.playlists=a,r.attributes?(h.attributes||(h.attributes={}),void(h.attributes=e.$B(h.attributes,r.attributes))):void this.ZB("warn",{message:"ignoring empty stream-inf attributes"})},discontinuity:function(){h.discontinuity=!0},targetduration:function(){return!isFinite(r.duration)||r.duration<0?void this.ZB("warn",{message:"ignoring invalid target duration: "+r.duration}):void(this.manifest.gx=r.duration)},totalduration:function(){return!isFinite(r.duration)||r.duration<0?void this.ZB("warn",{message:"ignoring invalid total duration: "+r.duration}):void(this.manifest.yx=r.duration)}})[r.nx]||s).call(o)},uri:function(){h.uri=r.uri,a.push(h),!this.manifest.gx||"duration"in h||(this.ZB("warn",{message:"defaulting segment duration to the target duration"}),h.duration=this.manifest.gx),t&&(h.key=t),h={}},vx:function(){}})[r.type].call(o)})},n.prototype=new t,n.prototype.push=function(e){this.hx.push(e)},n.prototype.end=function(){this.hx.push("\n")},e.mx=r,e.Tx=i,e.Ex=n,e}();e.i=i},function(e,t,r){var i=r(23);StreamType={1:"LIVE",LIVE:1,2:"VOD",wx:2},StreamProtocol={1:"DASH",DASH:1,2:"HDS",Ix:2,3:"HLS",Ke:3,4:"SS",Ye:4},ClientType={1:"JAVA",Sx:1,2:"STATS_ONLY",yD:2,3:"JS_DIRECT",dD:3,4:"JS_PROXY",gD:4},EventId=function(e){this.partnerId=null,this.customerId=null,this.contentId=null,this.tags=null,e&&(void 0!==e.partnerId&&(this.partnerId=e.partnerId),void 0!==e.customerId&&(this.customerId=e.customerId),void 0!==e.contentId&&(this.contentId=e.contentId),void 0!==e.tags&&(this.tags=e.tags))},EventId.prototype={},EventId.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.partnerId=e.ym().value:e.Om(r);break;case 2:r==i.Type.STRING?this.customerId=e.ym().value:e.Om(r);break;case 3:r==i.Type.STRING?this.contentId=e.ym().value:e.Om(r);break;case 4:if(r==i.Type.LIST){var s,o=0;this.tags=[];var a=0;s=e.PE(),a=s.AE,o=s.size;for(var h=0;h<o;++h){var u=null;u=e.ym().value,this.tags.push(u)}e.kE()}else e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},EventId.prototype.write=function(e){if(e.pT("EventId"),null!==this.partnerId&&void 0!==this.partnerId&&(e.fT("partnerId",i.Type.STRING,1),e.cm(this.partnerId),e.dT()),null!==this.customerId&&void 0!==this.customerId&&(e.fT("customerId",i.Type.STRING,2),e.cm(this.customerId),e.dT()),null!==this.contentId&&void 0!==this.contentId&&(e.fT("contentId",i.Type.STRING,3),e.cm(this.contentId),e.dT()),null!==this.tags&&void 0!==this.tags){e.fT("tags",i.Type.LIST,4),e.aE(i.Type.STRING,this.tags.length);for(var t in this.tags)this.tags.hasOwnProperty(t)&&(t=this.tags[t],e.cm(t));e.hE(),e.dT()}e.yT(),e.vT()},SnapshotInfo=function(e){this.timestamp=null,this.apiServer=null,this.clientIp=null,e&&(void 0!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.apiServer&&(this.apiServer=e.apiServer),void 0!==e.clientIp&&(this.clientIp=e.clientIp))},SnapshotInfo.prototype={},SnapshotInfo.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I64?this.timestamp=e.FE().value:e.Om(r);break;case 2:r==i.Type.STRING?this.apiServer=e.ym().value:e.Om(r);break;case 3:r==i.Type.STRING?this.clientIp=e.ym().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},SnapshotInfo.prototype.write=function(e){e.pT("SnapshotInfo"),null!==this.timestamp&&void 0!==this.timestamp&&(e.fT("timestamp",i.Type.I64,1),e.fE(this.timestamp),e.dT()),null!==this.apiServer&&void 0!==this.apiServer&&(e.fT("apiServer",i.Type.STRING,2),e.cm(this.apiServer),e.dT()),null!==this.clientIp&&void 0!==this.clientIp&&(e.fT("clientIp",i.Type.STRING,3),e.cm(this.clientIp),e.dT()),e.yT(),e.vT()},InetAddress=function(e){this.address=null,this.port=null,e&&(void 0!==e.address&&(this.address=e.address),void 0!==e.port&&(this.port=e.port))},InetAddress.prototype={},InetAddress.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.address=e.LE().value:e.Om(r);break;case 2:r==i.Type.I32?this.port=e.uT().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},InetAddress.prototype.write=function(e){e.pT("InetAddress"),null!==this.address&&void 0!==this.address&&(e.fT("address",i.Type.STRING,1),e.dE(this.address),e.dT()),null!==this.port&&void 0!==this.port&&(e.fT("port",i.Type.I32,2),e.gT(this.port),e.dT()),e.yT(),e.vT()}},function(e,t,r){var i=r(23);"undefined"==typeof hive&&(hive={}),"undefined"==typeof hive.snapshots&&(hive.snapshots={}),hive.snapshots.Traffic=function(e){this.reqN=null,this.respFallbackN=null,this.respFallbackErrN=null,this.respP2pN=null,this.reqOtherN=null,this.respFallbackOtherN=null,this.respFallbackOthertErrN=null,this.srcReqN=null,this.srcRespN=null,this.srcRespErrN=null,this.srcReqQt=null,this.srcRespQt=null,this.srcOverQt=null,this.srcOtherReqN=null,this.srcOtherRespN=null,this.srcOtherRespErrN=null,this.srcOtherReqQt=null,this.srcOtherRespQt=null,this.srcOtherOverQt=null,this.p2pSubReqN=null,this.p2pSubRespN=null,this.p2pSubRespPartN=null,this.p2pSubRespErrN=null,this.p2pSubRespExpN=null,this.p2pSubReqQt=null,this.p2pSubRespQt=null,this.p2pDirectQt=null,this.p2pRelayQt=null,this.p2pNatQt=null,this.p2pUdpbQt=null,this.fallAgentRespN=null,this.fallAgentPredHitN=null,this.fallAgentFailedRespN=null,this.fallAgentPredMissN=null,this.fallAgentPredPartialHitN=null,this.fallAgenTrafficSuccessQt=null,this.fallAgenTrafficFailureQt=null,this.p2pAgentPredHitN=null,this.p2pAgentPredMissN=null,this.p2pAgentPredPartialHitN=null,this.p2pAgenTrafficSuccessQt=null,this.p2pAgenTrafficFailureQt=null,this.respP2pOtherN=null,this.lCacheRespN=null,this.lCacheRespQt=null,this.p2pOutSiteLowPrio=null,e&&(void 0!==e.reqN&&(this.reqN=e.reqN),void 0!==e.respFallbackN&&(this.respFallbackN=e.respFallbackN),void 0!==e.respFallbackErrN&&(this.respFallbackErrN=e.respFallbackErrN),void 0!==e.respP2pN&&(this.respP2pN=e.respP2pN),void 0!==e.reqOtherN&&(this.reqOtherN=e.reqOtherN),void 0!==e.respFallbackOtherN&&(this.respFallbackOtherN=e.respFallbackOtherN),void 0!==e.respFallbackOthertErrN&&(this.respFallbackOthertErrN=e.respFallbackOthertErrN),void 0!==e.srcReqN&&(this.srcReqN=e.srcReqN),void 0!==e.srcRespN&&(this.srcRespN=e.srcRespN),void 0!==e.srcRespErrN&&(this.srcRespErrN=e.srcRespErrN),void 0!==e.srcReqQt&&(this.srcReqQt=e.srcReqQt),void 0!==e.srcRespQt&&(this.srcRespQt=e.srcRespQt),void 0!==e.srcOverQt&&(this.srcOverQt=e.srcOverQt),void 0!==e.srcOtherReqN&&(this.srcOtherReqN=e.srcOtherReqN),void 0!==e.srcOtherRespN&&(this.srcOtherRespN=e.srcOtherRespN),void 0!==e.srcOtherRespErrN&&(this.srcOtherRespErrN=e.srcOtherRespErrN),void 0!==e.srcOtherReqQt&&(this.srcOtherReqQt=e.srcOtherReqQt),void 0!==e.srcOtherRespQt&&(this.srcOtherRespQt=e.srcOtherRespQt),void 0!==e.srcOtherOverQt&&(this.srcOtherOverQt=e.srcOtherOverQt),void 0!==e.p2pSubReqN&&(this.p2pSubReqN=e.p2pSubReqN),void 0!==e.p2pSubRespN&&(this.p2pSubRespN=e.p2pSubRespN),void 0!==e.p2pSubRespPartN&&(this.p2pSubRespPartN=e.p2pSubRespPartN),void 0!==e.p2pSubRespErrN&&(this.p2pSubRespErrN=e.p2pSubRespErrN),void 0!==e.p2pSubRespExpN&&(this.p2pSubRespExpN=e.p2pSubRespExpN),void 0!==e.p2pSubReqQt&&(this.p2pSubReqQt=e.p2pSubReqQt),void 0!==e.p2pSubRespQt&&(this.p2pSubRespQt=e.p2pSubRespQt),void 0!==e.p2pDirectQt&&(this.p2pDirectQt=e.p2pDirectQt),void 0!==e.p2pRelayQt&&(this.p2pRelayQt=e.p2pRelayQt),void 0!==e.p2pNatQt&&(this.p2pNatQt=e.p2pNatQt),void 0!==e.p2pUdpbQt&&(this.p2pUdpbQt=e.p2pUdpbQt),void 0!==e.fallAgentRespN&&(this.fallAgentRespN=e.fallAgentRespN),void 0!==e.fallAgentPredHitN&&(this.fallAgentPredHitN=e.fallAgentPredHitN),void 0!==e.fallAgentFailedRespN&&(this.fallAgentFailedRespN=e.fallAgentFailedRespN),void 0!==e.fallAgentPredMissN&&(this.fallAgentPredMissN=e.fallAgentPredMissN),void 0!==e.fallAgentPredPartialHitN&&(this.fallAgentPredPartialHitN=e.fallAgentPredPartialHitN),void 0!==e.fallAgenTrafficSuccessQt&&(this.fallAgenTrafficSuccessQt=e.fallAgenTrafficSuccessQt),void 0!==e.fallAgenTrafficFailureQt&&(this.fallAgenTrafficFailureQt=e.fallAgenTrafficFailureQt),void 0!==e.p2pAgentPredHitN&&(this.p2pAgentPredHitN=e.p2pAgentPredHitN),void 0!==e.p2pAgentPredMissN&&(this.p2pAgentPredMissN=e.p2pAgentPredMissN),void 0!==e.p2pAgentPredPartialHitN&&(this.p2pAgentPredPartialHitN=e.p2pAgentPredPartialHitN),void 0!==e.p2pAgenTrafficSuccessQt&&(this.p2pAgenTrafficSuccessQt=e.p2pAgenTrafficSuccessQt),void 0!==e.p2pAgenTrafficFailureQt&&(this.p2pAgenTrafficFailureQt=e.p2pAgenTrafficFailureQt),void 0!==e.respP2pOtherN&&(this.respP2pOtherN=e.respP2pOtherN),void 0!==e.lCacheRespN&&(this.lCacheRespN=e.lCacheRespN),void 0!==e.lCacheRespQt&&(this.lCacheRespQt=e.lCacheRespQt),void 0!==e.p2pOutSiteLowPrio&&(this.p2pOutSiteLowPrio=e.p2pOutSiteLowPrio))},hive.snapshots.Traffic.prototype={},hive.snapshots.Traffic.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.reqN=e.uT().value:e.Om(r);break;case 2:r==i.Type.DOUBLE?this.respFallbackN=e.Nv().value:e.Om(r);break;case 3:r==i.Type.I32?this.respFallbackErrN=e.uT().value:e.Om(r);break;case 4:r==i.Type.DOUBLE?this.respP2pN=e.Nv().value:e.Om(r);break;case 5:r==i.Type.I32?this.reqOtherN=e.uT().value:e.Om(r);break;case 6:r==i.Type.I32?this.respFallbackOtherN=e.uT().value:e.Om(r);break;case 7:r==i.Type.I32?this.respFallbackOthertErrN=e.uT().value:e.Om(r);break;case 8:r==i.Type.I32?this.srcReqN=e.uT().value:e.Om(r);break;case 9:r==i.Type.I32?this.srcRespN=e.uT().value:e.Om(r);break;case 10:r==i.Type.I32?this.srcRespErrN=e.uT().value:e.Om(r);break;case 11:r==i.Type.I64?this.srcReqQt=e.FE().value:e.Om(r);break;case 12:r==i.Type.I64?this.srcRespQt=e.FE().value:e.Om(r);break;case 13:r==i.Type.I64?this.srcOverQt=e.FE().value:e.Om(r);break;case 14:r==i.Type.I32?this.srcOtherReqN=e.uT().value:e.Om(r);break;case 15:r==i.Type.I32?this.srcOtherRespN=e.uT().value:e.Om(r);break;case 16:r==i.Type.I32?this.srcOtherRespErrN=e.uT().value:e.Om(r);break;case 17:r==i.Type.I64?this.srcOtherReqQt=e.FE().value:e.Om(r);break;case 18:r==i.Type.I64?this.srcOtherRespQt=e.FE().value:e.Om(r);break;case 19:r==i.Type.I64?this.srcOtherOverQt=e.FE().value:e.Om(r);break;case 20:r==i.Type.I32?this.p2pSubReqN=e.uT().value:e.Om(r);break;case 21:r==i.Type.I32?this.p2pSubRespN=e.uT().value:e.Om(r);break;case 22:r==i.Type.DOUBLE?this.p2pSubRespPartN=e.Nv().value:e.Om(r);break;case 23:r==i.Type.DOUBLE?this.p2pSubRespErrN=e.Nv().value:e.Om(r);break;case 24:r==i.Type.I32?this.p2pSubRespExpN=e.uT().value:e.Om(r);break;case 25:r==i.Type.I64?this.p2pSubReqQt=e.FE().value:e.Om(r);break;case 26:r==i.Type.I64?this.p2pSubRespQt=e.FE().value:e.Om(r);break;case 27:r==i.Type.I64?this.p2pDirectQt=e.FE().value:e.Om(r);break;case 28:r==i.Type.I64?this.p2pRelayQt=e.FE().value:e.Om(r);break;case 29:r==i.Type.I64?this.p2pNatQt=e.FE().value:e.Om(r);break;case 30:r==i.Type.I64?this.p2pUdpbQt=e.FE().value:e.Om(r);break;case 31:r==i.Type.I32?this.fallAgentRespN=e.uT().value:e.Om(r);break;case 32:r==i.Type.I32?this.fallAgentPredHitN=e.uT().value:e.Om(r);break;case 33:r==i.Type.I32?this.fallAgentFailedRespN=e.uT().value:e.Om(r);break;case 34:r==i.Type.I32?this.fallAgentPredMissN=e.uT().value:e.Om(r);break;case 35:r==i.Type.I32?this.fallAgentPredPartialHitN=e.uT().value:e.Om(r);break;case 36:r==i.Type.I64?this.fallAgenTrafficSuccessQt=e.FE().value:e.Om(r);break;case 37:r==i.Type.I64?this.fallAgenTrafficFailureQt=e.FE().value:e.Om(r);break;case 38:r==i.Type.I32?this.p2pAgentPredHitN=e.uT().value:e.Om(r);break;case 39:r==i.Type.I32?this.p2pAgentPredMissN=e.uT().value:e.Om(r);break;case 40:r==i.Type.I32?this.p2pAgentPredPartialHitN=e.uT().value:e.Om(r);break;case 41:r==i.Type.I64?this.p2pAgenTrafficSuccessQt=e.FE().value:e.Om(r);break;case 42:r==i.Type.I64?this.p2pAgenTrafficFailureQt=e.FE().value:e.Om(r);break;case 43:r==i.Type.I32?this.respP2pOtherN=e.uT().value:e.Om(r);break;case 44:r==i.Type.I32?this.lCacheRespN=e.uT().value:e.Om(r);break;case 45:r==i.Type.I64?this.lCacheRespQt=e.FE().value:e.Om(r);break;case 46:r==i.Type.I64?this.p2pOutSiteLowPrio=e.FE().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.Traffic.prototype.write=function(e){e.pT("Traffic"),null!==this.reqN&&void 0!==this.reqN&&(e.fT("reqN",i.Type.I32,1),e.gT(this.reqN),e.dT()),null!==this.respFallbackN&&void 0!==this.respFallbackN&&(e.fT("respFallbackN",i.Type.DOUBLE,2),e.Cv(this.respFallbackN),e.dT()),null!==this.respFallbackErrN&&void 0!==this.respFallbackErrN&&(e.fT("respFallbackErrN",i.Type.I32,3),e.gT(this.respFallbackErrN),e.dT()),null!==this.respP2pN&&void 0!==this.respP2pN&&(e.fT("respP2pN",i.Type.DOUBLE,4),e.Cv(this.respP2pN),e.dT()),null!==this.reqOtherN&&void 0!==this.reqOtherN&&(e.fT("reqOtherN",i.Type.I32,5),e.gT(this.reqOtherN),e.dT()),null!==this.respFallbackOtherN&&void 0!==this.respFallbackOtherN&&(e.fT("respFallbackOtherN",i.Type.I32,6),e.gT(this.respFallbackOtherN),e.dT()),null!==this.respFallbackOthertErrN&&void 0!==this.respFallbackOthertErrN&&(e.fT("respFallbackOthertErrN",i.Type.I32,7),e.gT(this.respFallbackOthertErrN),e.dT()),null!==this.srcReqN&&void 0!==this.srcReqN&&(e.fT("srcReqN",i.Type.I32,8),e.gT(this.srcReqN),e.dT()),null!==this.srcRespN&&void 0!==this.srcRespN&&(e.fT("srcRespN",i.Type.I32,9),e.gT(this.srcRespN),e.dT()),null!==this.srcRespErrN&&void 0!==this.srcRespErrN&&(e.fT("srcRespErrN",i.Type.I32,10),e.gT(this.srcRespErrN),e.dT()),null!==this.srcReqQt&&void 0!==this.srcReqQt&&(e.fT("srcReqQt",i.Type.I64,11),e.fE(this.srcReqQt),e.dT()),null!==this.srcRespQt&&void 0!==this.srcRespQt&&(e.fT("srcRespQt",i.Type.I64,12),e.fE(this.srcRespQt),e.dT()),null!==this.srcOverQt&&void 0!==this.srcOverQt&&(e.fT("srcOverQt",i.Type.I64,13),e.fE(this.srcOverQt),e.dT()),null!==this.srcOtherReqN&&void 0!==this.srcOtherReqN&&(e.fT("srcOtherReqN",i.Type.I32,14),e.gT(this.srcOtherReqN),e.dT()),null!==this.srcOtherRespN&&void 0!==this.srcOtherRespN&&(e.fT("srcOtherRespN",i.Type.I32,15),e.gT(this.srcOtherRespN),e.dT()),null!==this.srcOtherRespErrN&&void 0!==this.srcOtherRespErrN&&(e.fT("srcOtherRespErrN",i.Type.I32,16),e.gT(this.srcOtherRespErrN),e.dT()),null!==this.srcOtherReqQt&&void 0!==this.srcOtherReqQt&&(e.fT("srcOtherReqQt",i.Type.I64,17),e.fE(this.srcOtherReqQt),e.dT()),null!==this.srcOtherRespQt&&void 0!==this.srcOtherRespQt&&(e.fT("srcOtherRespQt",i.Type.I64,18),e.fE(this.srcOtherRespQt),e.dT()),null!==this.srcOtherOverQt&&void 0!==this.srcOtherOverQt&&(e.fT("srcOtherOverQt",i.Type.I64,19),e.fE(this.srcOtherOverQt),e.dT()),null!==this.p2pSubReqN&&void 0!==this.p2pSubReqN&&(e.fT("p2pSubReqN",i.Type.I32,20),e.gT(this.p2pSubReqN),e.dT()),null!==this.p2pSubRespN&&void 0!==this.p2pSubRespN&&(e.fT("p2pSubRespN",i.Type.I32,21),e.gT(this.p2pSubRespN),e.dT()),null!==this.p2pSubRespPartN&&void 0!==this.p2pSubRespPartN&&(e.fT("p2pSubRespPartN",i.Type.DOUBLE,22),e.Cv(this.p2pSubRespPartN),e.dT()),null!==this.p2pSubRespErrN&&void 0!==this.p2pSubRespErrN&&(e.fT("p2pSubRespErrN",i.Type.DOUBLE,23),e.Cv(this.p2pSubRespErrN),e.dT()),null!==this.p2pSubRespExpN&&void 0!==this.p2pSubRespExpN&&(e.fT("p2pSubRespExpN",i.Type.I32,24),e.gT(this.p2pSubRespExpN),e.dT()),null!==this.p2pSubReqQt&&void 0!==this.p2pSubReqQt&&(e.fT("p2pSubReqQt",i.Type.I64,25),e.fE(this.p2pSubReqQt),e.dT()),null!==this.p2pSubRespQt&&void 0!==this.p2pSubRespQt&&(e.fT("p2pSubRespQt",i.Type.I64,26),e.fE(this.p2pSubRespQt),e.dT()),null!==this.p2pDirectQt&&void 0!==this.p2pDirectQt&&(e.fT("p2pDirectQt",i.Type.I64,27),e.fE(this.p2pDirectQt),e.dT()),null!==this.p2pRelayQt&&void 0!==this.p2pRelayQt&&(e.fT("p2pRelayQt",i.Type.I64,28),e.fE(this.p2pRelayQt),e.dT()),null!==this.p2pNatQt&&void 0!==this.p2pNatQt&&(e.fT("p2pNatQt",i.Type.I64,29),e.fE(this.p2pNatQt),e.dT()),null!==this.p2pUdpbQt&&void 0!==this.p2pUdpbQt&&(e.fT("p2pUdpbQt",i.Type.I64,30),e.fE(this.p2pUdpbQt),e.dT()),null!==this.fallAgentRespN&&void 0!==this.fallAgentRespN&&(e.fT("fallAgentRespN",i.Type.I32,31),e.gT(this.fallAgentRespN),
e.dT()),null!==this.fallAgentPredHitN&&void 0!==this.fallAgentPredHitN&&(e.fT("fallAgentPredHitN",i.Type.I32,32),e.gT(this.fallAgentPredHitN),e.dT()),null!==this.fallAgentFailedRespN&&void 0!==this.fallAgentFailedRespN&&(e.fT("fallAgentFailedRespN",i.Type.I32,33),e.gT(this.fallAgentFailedRespN),e.dT()),null!==this.fallAgentPredMissN&&void 0!==this.fallAgentPredMissN&&(e.fT("fallAgentPredMissN",i.Type.I32,34),e.gT(this.fallAgentPredMissN),e.dT()),null!==this.fallAgentPredPartialHitN&&void 0!==this.fallAgentPredPartialHitN&&(e.fT("fallAgentPredPartialHitN",i.Type.I32,35),e.gT(this.fallAgentPredPartialHitN),e.dT()),null!==this.fallAgenTrafficSuccessQt&&void 0!==this.fallAgenTrafficSuccessQt&&(e.fT("fallAgenTrafficSuccessQt",i.Type.I64,36),e.fE(this.fallAgenTrafficSuccessQt),e.dT()),null!==this.fallAgenTrafficFailureQt&&void 0!==this.fallAgenTrafficFailureQt&&(e.fT("fallAgenTrafficFailureQt",i.Type.I64,37),e.fE(this.fallAgenTrafficFailureQt),e.dT()),null!==this.p2pAgentPredHitN&&void 0!==this.p2pAgentPredHitN&&(e.fT("p2pAgentPredHitN",i.Type.I32,38),e.gT(this.p2pAgentPredHitN),e.dT()),null!==this.p2pAgentPredMissN&&void 0!==this.p2pAgentPredMissN&&(e.fT("p2pAgentPredMissN",i.Type.I32,39),e.gT(this.p2pAgentPredMissN),e.dT()),null!==this.p2pAgentPredPartialHitN&&void 0!==this.p2pAgentPredPartialHitN&&(e.fT("p2pAgentPredPartialHitN",i.Type.I32,40),e.gT(this.p2pAgentPredPartialHitN),e.dT()),null!==this.p2pAgenTrafficSuccessQt&&void 0!==this.p2pAgenTrafficSuccessQt&&(e.fT("p2pAgenTrafficSuccessQt",i.Type.I64,41),e.fE(this.p2pAgenTrafficSuccessQt),e.dT()),null!==this.p2pAgenTrafficFailureQt&&void 0!==this.p2pAgenTrafficFailureQt&&(e.fT("p2pAgenTrafficFailureQt",i.Type.I64,42),e.fE(this.p2pAgenTrafficFailureQt),e.dT()),null!==this.respP2pOtherN&&void 0!==this.respP2pOtherN&&(e.fT("respP2pOtherN",i.Type.I32,43),e.gT(this.respP2pOtherN),e.dT()),null!==this.lCacheRespN&&void 0!==this.lCacheRespN&&(e.fT("lCacheRespN",i.Type.I32,44),e.gT(this.lCacheRespN),e.dT()),null!==this.lCacheRespQt&&void 0!==this.lCacheRespQt&&(e.fT("lCacheRespQt",i.Type.I64,45),e.fE(this.lCacheRespQt),e.dT()),null!==this.p2pOutSiteLowPrio&&void 0!==this.p2pOutSiteLowPrio&&(e.fT("p2pOutSiteLowPrio",i.Type.I64,46),e.fE(this.p2pOutSiteLowPrio),e.dT()),e.yT(),e.vT()},hive.snapshots.Metrics=function(e){this.upBW=null,this.downBW=null,this.memN=null,this.prtInN=null,this.prtOutN=null,this.initVideoBufQt=null,this.videoAvgBufQt=null,this.videoBufQt=null,this.videoBufN=null,this.initAudioBufQt=null,this.audioAvgBufQt=null,this.audioBufQt=null,this.audioBufN=null,this.bitrateUpN=null,this.bitrateDwnN=null,this.delay=null,this.delayEnforcement=null,this.lookupReqEstablished=null,this.lookupReqAccept=null,this.fallbackAvgTp=null,this.srcThroughput=null,this.diskReadTimeout=null,this.diskReadRate=null,this.diskStoreRate=null,this.diskRemoveRate=null,this.diskCacheSize=null,this.clientBufferMs=null,this.lookupTotal=null,this.lookupNotFound=null,this.lookupFailed=null,this.lookupLatency=null,this.trackerFailed=null,this.trackerLatency=null,this.snapshotFailed=null,this.snapshotLatency=null,e&&(void 0!==e.upBW&&(this.upBW=e.upBW),void 0!==e.downBW&&(this.downBW=e.downBW),void 0!==e.memN&&(this.memN=e.memN),void 0!==e.prtInN&&(this.prtInN=e.prtInN),void 0!==e.prtOutN&&(this.prtOutN=e.prtOutN),void 0!==e.initVideoBufQt&&(this.initVideoBufQt=e.initVideoBufQt),void 0!==e.videoAvgBufQt&&(this.videoAvgBufQt=e.videoAvgBufQt),void 0!==e.videoBufQt&&(this.videoBufQt=e.videoBufQt),void 0!==e.videoBufN&&(this.videoBufN=e.videoBufN),void 0!==e.initAudioBufQt&&(this.initAudioBufQt=e.initAudioBufQt),void 0!==e.audioAvgBufQt&&(this.audioAvgBufQt=e.audioAvgBufQt),void 0!==e.audioBufQt&&(this.audioBufQt=e.audioBufQt),void 0!==e.audioBufN&&(this.audioBufN=e.audioBufN),void 0!==e.bitrateUpN&&(this.bitrateUpN=e.bitrateUpN),void 0!==e.bitrateDwnN&&(this.bitrateDwnN=e.bitrateDwnN),void 0!==e.delay&&(this.delay=e.delay),void 0!==e.delayEnforcement&&(this.delayEnforcement=e.delayEnforcement),void 0!==e.lookupReqEstablished&&(this.lookupReqEstablished=e.lookupReqEstablished),void 0!==e.lookupReqAccept&&(this.lookupReqAccept=e.lookupReqAccept),void 0!==e.fallbackAvgTp&&(this.fallbackAvgTp=e.fallbackAvgTp),void 0!==e.srcThroughput&&(this.srcThroughput=e.srcThroughput),void 0!==e.diskReadTimeout&&(this.diskReadTimeout=e.diskReadTimeout),void 0!==e.diskReadRate&&(this.diskReadRate=e.diskReadRate),void 0!==e.diskStoreRate&&(this.diskStoreRate=e.diskStoreRate),void 0!==e.diskRemoveRate&&(this.diskRemoveRate=e.diskRemoveRate),void 0!==e.diskCacheSize&&(this.diskCacheSize=e.diskCacheSize),void 0!==e.clientBufferMs&&(this.clientBufferMs=e.clientBufferMs),void 0!==e.lookupTotal&&(this.lookupTotal=e.lookupTotal),void 0!==e.lookupNotFound&&(this.lookupNotFound=e.lookupNotFound),void 0!==e.lookupFailed&&(this.lookupFailed=e.lookupFailed),void 0!==e.lookupLatency&&(this.lookupLatency=e.lookupLatency),void 0!==e.trackerFailed&&(this.trackerFailed=e.trackerFailed),void 0!==e.trackerLatency&&(this.trackerLatency=e.trackerLatency),void 0!==e.snapshotFailed&&(this.snapshotFailed=e.snapshotFailed),void 0!==e.snapshotLatency&&(this.snapshotLatency=e.snapshotLatency))},hive.snapshots.Metrics.prototype={},hive.snapshots.Metrics.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.upBW=e.uT().value:e.Om(r);break;case 2:r==i.Type.I32?this.downBW=e.uT().value:e.Om(r);break;case 3:r==i.Type.I32?this.memN=e.uT().value:e.Om(r);break;case 4:r==i.Type.I32?this.prtInN=e.uT().value:e.Om(r);break;case 5:r==i.Type.I32?this.prtOutN=e.uT().value:e.Om(r);break;case 6:r==i.Type.I64?this.initVideoBufQt=e.FE().value:e.Om(r);break;case 7:r==i.Type.DOUBLE?this.videoAvgBufQt=e.Nv().value:e.Om(r);break;case 8:r==i.Type.I64?this.videoBufQt=e.FE().value:e.Om(r);break;case 9:r==i.Type.I32?this.videoBufN=e.uT().value:e.Om(r);break;case 10:r==i.Type.I32?this.initAudioBufQt=e.uT().value:e.Om(r);break;case 11:r==i.Type.DOUBLE?this.audioAvgBufQt=e.Nv().value:e.Om(r);break;case 12:r==i.Type.I64?this.audioBufQt=e.FE().value:e.Om(r);break;case 13:r==i.Type.I32?this.audioBufN=e.uT().value:e.Om(r);break;case 14:r==i.Type.I32?this.bitrateUpN=e.uT().value:e.Om(r);break;case 15:r==i.Type.I32?this.bitrateDwnN=e.uT().value:e.Om(r);break;case 16:r==i.Type.I32?this.delay=e.uT().value:e.Om(r);break;case 17:r==i.Type.I32?this.delayEnforcement=e.uT().value:e.Om(r);break;case 18:r==i.Type.I32?this.lookupReqEstablished=e.uT().value:e.Om(r);break;case 19:r==i.Type.I32?this.lookupReqAccept=e.uT().value:e.Om(r);break;case 20:r==i.Type.DOUBLE?this.fallbackAvgTp=e.Nv().value:e.Om(r);break;case 21:r==i.Type.DOUBLE?this.srcThroughput=e.Nv().value:e.Om(r);break;case 22:r==i.Type.I32?this.diskReadTimeout=e.uT().value:e.Om(r);break;case 23:r==i.Type.DOUBLE?this.diskReadRate=e.Nv().value:e.Om(r);break;case 24:r==i.Type.DOUBLE?this.diskStoreRate=e.Nv().value:e.Om(r);break;case 25:r==i.Type.DOUBLE?this.diskRemoveRate=e.Nv().value:e.Om(r);break;case 26:r==i.Type.I64?this.diskCacheSize=e.FE().value:e.Om(r);break;case 27:r==i.Type.I32?this.clientBufferMs=e.uT().value:e.Om(r);break;case 28:r==i.Type.I32?this.lookupTotal=e.uT().value:e.Om(r);break;case 29:r==i.Type.I32?this.lookupNotFound=e.uT().value:e.Om(r);break;case 30:r==i.Type.I32?this.lookupFailed=e.uT().value:e.Om(r);break;case 31:r==i.Type.I32?this.lookupLatency=e.uT().value:e.Om(r);break;case 32:r==i.Type.I32?this.trackerFailed=e.uT().value:e.Om(r);break;case 33:r==i.Type.I32?this.trackerLatency=e.uT().value:e.Om(r);break;case 34:r==i.Type.I32?this.snapshotFailed=e.uT().value:e.Om(r);break;case 35:r==i.Type.I32?this.snapshotLatency=e.uT().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.Metrics.prototype.write=function(e){e.pT("Metrics"),null!==this.upBW&&void 0!==this.upBW&&(e.fT("upBW",i.Type.I32,1),e.gT(this.upBW),e.dT()),null!==this.downBW&&void 0!==this.downBW&&(e.fT("downBW",i.Type.I32,2),e.gT(this.downBW),e.dT()),null!==this.memN&&void 0!==this.memN&&(e.fT("memN",i.Type.I32,3),e.gT(this.memN),e.dT()),null!==this.prtInN&&void 0!==this.prtInN&&(e.fT("prtInN",i.Type.I32,4),e.gT(this.prtInN),e.dT()),null!==this.prtOutN&&void 0!==this.prtOutN&&(e.fT("prtOutN",i.Type.I32,5),e.gT(this.prtOutN),e.dT()),null!==this.initVideoBufQt&&void 0!==this.initVideoBufQt&&(e.fT("initVideoBufQt",i.Type.I64,6),e.fE(this.initVideoBufQt),e.dT()),null!==this.videoAvgBufQt&&void 0!==this.videoAvgBufQt&&(e.fT("videoAvgBufQt",i.Type.DOUBLE,7),e.Cv(this.videoAvgBufQt),e.dT()),null!==this.videoBufQt&&void 0!==this.videoBufQt&&(e.fT("videoBufQt",i.Type.I64,8),e.fE(this.videoBufQt),e.dT()),null!==this.videoBufN&&void 0!==this.videoBufN&&(e.fT("videoBufN",i.Type.I32,9),e.gT(this.videoBufN),e.dT()),null!==this.initAudioBufQt&&void 0!==this.initAudioBufQt&&(e.fT("initAudioBufQt",i.Type.I32,10),e.gT(this.initAudioBufQt),e.dT()),null!==this.audioAvgBufQt&&void 0!==this.audioAvgBufQt&&(e.fT("audioAvgBufQt",i.Type.DOUBLE,11),e.Cv(this.audioAvgBufQt),e.dT()),null!==this.audioBufQt&&void 0!==this.audioBufQt&&(e.fT("audioBufQt",i.Type.I64,12),e.fE(this.audioBufQt),e.dT()),null!==this.audioBufN&&void 0!==this.audioBufN&&(e.fT("audioBufN",i.Type.I32,13),e.gT(this.audioBufN),e.dT()),null!==this.bitrateUpN&&void 0!==this.bitrateUpN&&(e.fT("bitrateUpN",i.Type.I32,14),e.gT(this.bitrateUpN),e.dT()),null!==this.bitrateDwnN&&void 0!==this.bitrateDwnN&&(e.fT("bitrateDwnN",i.Type.I32,15),e.gT(this.bitrateDwnN),e.dT()),null!==this.delay&&void 0!==this.delay&&(e.fT("delay",i.Type.I32,16),e.gT(this.delay),e.dT()),null!==this.delayEnforcement&&void 0!==this.delayEnforcement&&(e.fT("delayEnforcement",i.Type.I32,17),e.gT(this.delayEnforcement),e.dT()),null!==this.lookupReqEstablished&&void 0!==this.lookupReqEstablished&&(e.fT("lookupReqEstablished",i.Type.I32,18),e.gT(this.lookupReqEstablished),e.dT()),null!==this.lookupReqAccept&&void 0!==this.lookupReqAccept&&(e.fT("lookupReqAccept",i.Type.I32,19),e.gT(this.lookupReqAccept),e.dT()),null!==this.fallbackAvgTp&&void 0!==this.fallbackAvgTp&&(e.fT("fallbackAvgTp",i.Type.DOUBLE,20),e.Cv(this.fallbackAvgTp),e.dT()),null!==this.srcThroughput&&void 0!==this.srcThroughput&&(e.fT("srcThroughput",i.Type.DOUBLE,21),e.Cv(this.srcThroughput),e.dT()),null!==this.diskReadTimeout&&void 0!==this.diskReadTimeout&&(e.fT("diskReadTimeout",i.Type.I32,22),e.gT(this.diskReadTimeout),e.dT()),null!==this.diskReadRate&&void 0!==this.diskReadRate&&(e.fT("diskReadRate",i.Type.DOUBLE,23),e.Cv(this.diskReadRate),e.dT()),null!==this.diskStoreRate&&void 0!==this.diskStoreRate&&(e.fT("diskStoreRate",i.Type.DOUBLE,24),e.Cv(this.diskStoreRate),e.dT()),null!==this.diskRemoveRate&&void 0!==this.diskRemoveRate&&(e.fT("diskRemoveRate",i.Type.DOUBLE,25),e.Cv(this.diskRemoveRate),e.dT()),null!==this.diskCacheSize&&void 0!==this.diskCacheSize&&(e.fT("diskCacheSize",i.Type.I64,26),e.fE(this.diskCacheSize),e.dT()),null!==this.clientBufferMs&&void 0!==this.clientBufferMs&&(e.fT("clientBufferMs",i.Type.I32,27),e.gT(this.clientBufferMs),e.dT()),null!==this.lookupTotal&&void 0!==this.lookupTotal&&(e.fT("lookupTotal",i.Type.I32,28),e.gT(this.lookupTotal),e.dT()),null!==this.lookupNotFound&&void 0!==this.lookupNotFound&&(e.fT("lookupNotFound",i.Type.I32,29),e.gT(this.lookupNotFound),e.dT()),null!==this.lookupFailed&&void 0!==this.lookupFailed&&(e.fT("lookupFailed",i.Type.I32,30),e.gT(this.lookupFailed),e.dT()),null!==this.lookupLatency&&void 0!==this.lookupLatency&&(e.fT("lookupLatency",i.Type.I32,31),e.gT(this.lookupLatency),e.dT()),null!==this.trackerFailed&&void 0!==this.trackerFailed&&(e.fT("trackerFailed",i.Type.I32,32),e.gT(this.trackerFailed),e.dT()),null!==this.trackerLatency&&void 0!==this.trackerLatency&&(e.fT("trackerLatency",i.Type.I32,33),e.gT(this.trackerLatency),e.dT()),null!==this.snapshotFailed&&void 0!==this.snapshotFailed&&(e.fT("snapshotFailed",i.Type.I32,34),e.gT(this.snapshotFailed),e.dT()),null!==this.snapshotLatency&&void 0!==this.snapshotLatency&&(e.fT("snapshotLatency",i.Type.I32,35),e.gT(this.snapshotLatency),e.dT()),e.yT(),e.vT()},hive.snapshots.PartnerTraffic=function(e){this.p2pSuccReq=null,this.p2pFailReq=null,this.p2pPartReq=null,this.p2pSuccReceived=null,this.p2pSuccReceivedLow=null,this.p2pFailReceived=null,this.p2pSuccResp=null,this.p2pFailResp=null,this.p2pPartResp=null,this.p2pSuccSent=null,this.p2pSuccSentLow=null,this.p2pFailSent=null,e&&(void 0!==e.p2pSuccReq&&(this.p2pSuccReq=e.p2pSuccReq),void 0!==e.p2pFailReq&&(this.p2pFailReq=e.p2pFailReq),void 0!==e.p2pPartReq&&(this.p2pPartReq=e.p2pPartReq),void 0!==e.p2pSuccReceived&&(this.p2pSuccReceived=e.p2pSuccReceived),void 0!==e.p2pSuccReceivedLow&&(this.p2pSuccReceivedLow=e.p2pSuccReceivedLow),void 0!==e.p2pFailReceived&&(this.p2pFailReceived=e.p2pFailReceived),void 0!==e.p2pSuccResp&&(this.p2pSuccResp=e.p2pSuccResp),void 0!==e.p2pFailResp&&(this.p2pFailResp=e.p2pFailResp),void 0!==e.p2pPartResp&&(this.p2pPartResp=e.p2pPartResp),void 0!==e.p2pSuccSent&&(this.p2pSuccSent=e.p2pSuccSent),void 0!==e.p2pSuccSentLow&&(this.p2pSuccSentLow=e.p2pSuccSentLow),void 0!==e.p2pFailSent&&(this.p2pFailSent=e.p2pFailSent))},hive.snapshots.PartnerTraffic.prototype={},hive.snapshots.PartnerTraffic.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I64?this.p2pSuccReq=e.FE().value:e.Om(r);break;case 2:r==i.Type.I64?this.p2pFailReq=e.FE().value:e.Om(r);break;case 3:r==i.Type.I64?this.p2pPartReq=e.FE().value:e.Om(r);break;case 4:r==i.Type.I64?this.p2pSuccReceived=e.FE().value:e.Om(r);break;case 5:r==i.Type.I64?this.p2pSuccReceivedLow=e.FE().value:e.Om(r);break;case 10:r==i.Type.I64?this.p2pFailReceived=e.FE().value:e.Om(r);break;case 6:r==i.Type.I64?this.p2pSuccResp=e.FE().value:e.Om(r);break;case 11:r==i.Type.I64?this.p2pFailResp=e.FE().value:e.Om(r);break;case 7:r==i.Type.I64?this.p2pPartResp=e.FE().value:e.Om(r);break;case 8:r==i.Type.I64?this.p2pSuccSent=e.FE().value:e.Om(r);break;case 9:r==i.Type.I64?this.p2pSuccSentLow=e.FE().value:e.Om(r);break;case 12:r==i.Type.I64?this.p2pFailSent=e.FE().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.PartnerTraffic.prototype.write=function(e){e.pT("PartnerTraffic"),null!==this.p2pSuccReq&&void 0!==this.p2pSuccReq&&(e.fT("p2pSuccReq",i.Type.I64,1),e.fE(this.p2pSuccReq),e.dT()),null!==this.p2pFailReq&&void 0!==this.p2pFailReq&&(e.fT("p2pFailReq",i.Type.I64,2),e.fE(this.p2pFailReq),e.dT()),null!==this.p2pPartReq&&void 0!==this.p2pPartReq&&(e.fT("p2pPartReq",i.Type.I64,3),e.fE(this.p2pPartReq),e.dT()),null!==this.p2pSuccReceived&&void 0!==this.p2pSuccReceived&&(e.fT("p2pSuccReceived",i.Type.I64,4),e.fE(this.p2pSuccReceived),e.dT()),null!==this.p2pSuccReceivedLow&&void 0!==this.p2pSuccReceivedLow&&(e.fT("p2pSuccReceivedLow",i.Type.I64,5),e.fE(this.p2pSuccReceivedLow),e.dT()),null!==this.p2pFailReceived&&void 0!==this.p2pFailReceived&&(e.fT("p2pFailReceived",i.Type.I64,10),e.fE(this.p2pFailReceived),e.dT()),null!==this.p2pSuccResp&&void 0!==this.p2pSuccResp&&(e.fT("p2pSuccResp",i.Type.I64,6),e.fE(this.p2pSuccResp),e.dT()),null!==this.p2pFailResp&&void 0!==this.p2pFailResp&&(e.fT("p2pFailResp",i.Type.I64,11),e.fE(this.p2pFailResp),e.dT()),null!==this.p2pPartResp&&void 0!==this.p2pPartResp&&(e.fT("p2pPartResp",i.Type.I64,7),e.fE(this.p2pPartResp),e.dT()),null!==this.p2pSuccSent&&void 0!==this.p2pSuccSent&&(e.fT("p2pSuccSent",i.Type.I64,8),e.fE(this.p2pSuccSent),e.dT()),null!==this.p2pSuccSentLow&&void 0!==this.p2pSuccSentLow&&(e.fT("p2pSuccSentLow",i.Type.I64,9),e.fE(this.p2pSuccSentLow),e.dT()),null!==this.p2pFailSent&&void 0!==this.p2pFailSent&&(e.fT("p2pFailSent",i.Type.I64,12),e.fE(this.p2pFailSent),e.dT()),e.yT(),e.vT()},hive.snapshots.PartnerMetrics=function(e){this.rateReceived=null,this.rateSent=null,this.handshakeDelay=null,e&&(void 0!==e.rateReceived&&(this.rateReceived=e.rateReceived),void 0!==e.rateSent&&(this.rateSent=e.rateSent),void 0!==e.handshakeDelay&&(this.handshakeDelay=e.handshakeDelay))},hive.snapshots.PartnerMetrics.prototype={},hive.snapshots.PartnerMetrics.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.DOUBLE?this.rateReceived=e.Nv().value:e.Om(r);break;case 2:r==i.Type.DOUBLE?this.rateSent=e.Nv().value:e.Om(r);break;case 3:r==i.Type.I64?this.handshakeDelay=e.FE().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.PartnerMetrics.prototype.write=function(e){e.pT("PartnerMetrics"),null!==this.rateReceived&&void 0!==this.rateReceived&&(e.fT("rateReceived",i.Type.DOUBLE,1),e.Cv(this.rateReceived),e.dT()),null!==this.rateSent&&void 0!==this.rateSent&&(e.fT("rateSent",i.Type.DOUBLE,2),e.Cv(this.rateSent),e.dT()),null!==this.handshakeDelay&&void 0!==this.handshakeDelay&&(e.fT("handshakeDelay",i.Type.I64,3),e.fE(this.handshakeDelay),e.dT()),e.yT(),e.vT()},hive.snapshots.ConnectivityInfo=function(e){this.upBW=null,this.downBW=null,this.externalAs=null,this.internalAs=null,this.publicIp=null,this.privateIp=null,e&&(void 0!==e.upBW&&(this.upBW=e.upBW),void 0!==e.downBW&&(this.downBW=e.downBW),void 0!==e.externalAs&&(this.externalAs=e.externalAs),void 0!==e.internalAs&&(this.internalAs=e.internalAs),void 0!==e.publicIp&&(this.publicIp=e.publicIp),void 0!==e.privateIp&&(this.privateIp=e.privateIp))},hive.snapshots.ConnectivityInfo.prototype={},hive.snapshots.ConnectivityInfo.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.upBW=e.uT().value:e.Om(r);break;case 2:r==i.Type.I32?this.downBW=e.uT().value:e.Om(r);break;case 3:r==i.Type.I32?this.externalAs=e.uT().value:e.Om(r);break;case 4:r==i.Type.I32?this.internalAs=e.uT().value:e.Om(r);break;case 5:r==i.Type.STRING?this.publicIp=e.ym().value:e.Om(r);break;case 6:r==i.Type.STRING?this.privateIp=e.ym().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.ConnectivityInfo.prototype.write=function(e){e.pT("ConnectivityInfo"),null!==this.upBW&&void 0!==this.upBW&&(e.fT("upBW",i.Type.I32,1),e.gT(this.upBW),e.dT()),null!==this.downBW&&void 0!==this.downBW&&(e.fT("downBW",i.Type.I32,2),e.gT(this.downBW),e.dT()),null!==this.externalAs&&void 0!==this.externalAs&&(e.fT("externalAs",i.Type.I32,3),e.gT(this.externalAs),e.dT()),null!==this.internalAs&&void 0!==this.internalAs&&(e.fT("internalAs",i.Type.I32,4),e.gT(this.internalAs),e.dT()),null!==this.publicIp&&void 0!==this.publicIp&&(e.fT("publicIp",i.Type.STRING,5),e.cm(this.publicIp),e.dT()),null!==this.privateIp&&void 0!==this.privateIp&&(e.fT("privateIp",i.Type.STRING,6),e.cm(this.privateIp),e.dT()),e.yT(),e.vT()},hive.snapshots.Partner=function(e){this.connInfo=null,this.traffic=null,this.metrics=null,this.inPart=null,this.outPart=null,this.udp=null,e&&(void 0!==e.connInfo&&(this.connInfo=e.connInfo),void 0!==e.traffic&&(this.traffic=e.traffic),void 0!==e.metrics&&(this.metrics=e.metrics),void 0!==e.inPart&&(this.inPart=e.inPart),void 0!==e.outPart&&(this.outPart=e.outPart),void 0!==e.udp&&(this.udp=e.udp))},hive.snapshots.Partner.prototype={},hive.snapshots.Partner.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRUCT?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(e)):e.Om(r);break;case 2:r==i.Type.STRUCT?(this.traffic=new hive.snapshots.PartnerTraffic,this.traffic.read(e)):e.Om(r);break;case 3:r==i.Type.STRUCT?(this.metrics=new hive.snapshots.PartnerMetrics,this.metrics.read(e)):e.Om(r);break;case 4:r==i.Type.BOOL?this.inPart=e.NE().value:e.Om(r);break;case 5:r==i.Type.BOOL?this.outPart=e.NE().value:e.Om(r);break;case 6:r==i.Type.BOOL?this.udp=e.NE().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.Partner.prototype.write=function(e){e.pT("Partner"),null!==this.connInfo&&void 0!==this.connInfo&&(e.fT("connInfo",i.Type.STRUCT,1),this.connInfo.write(e),e.dT()),null!==this.traffic&&void 0!==this.traffic&&(e.fT("traffic",i.Type.STRUCT,2),this.traffic.write(e),e.dT()),null!==this.metrics&&void 0!==this.metrics&&(e.fT("metrics",i.Type.STRUCT,3),this.metrics.write(e),e.dT()),null!==this.inPart&&void 0!==this.inPart&&(e.fT("inPart",i.Type.BOOL,4),e.lE(this.inPart),e.dT()),null!==this.outPart&&void 0!==this.outPart&&(e.fT("outPart",i.Type.BOOL,5),e.lE(this.outPart),e.dT()),null!==this.udp&&void 0!==this.udp&&(e.fT("udp",i.Type.BOOL,6),e.lE(this.udp),e.dT()),e.yT(),e.vT()},hive.snapshots.StreamInfo=function(e){this.url=null,this.streamType=null,this.streamProtocol=null,e&&(void 0!==e.url&&(this.url=e.url),void 0!==e.streamType&&(this.streamType=e.streamType),void 0!==e.streamProtocol&&(this.streamProtocol=e.streamProtocol))},hive.snapshots.StreamInfo.prototype={},hive.snapshots.StreamInfo.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.url=e.ym().value:e.Om(r);break;case 2:r==i.Type.I32?this.streamType=e.uT().value:e.Om(r);break;case 3:r==i.Type.I32?this.streamProtocol=e.uT().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.StreamInfo.prototype.write=function(e){e.pT("StreamInfo"),null!==this.url&&void 0!==this.url&&(e.fT("url",i.Type.STRING,1),e.cm(this.url),e.dT()),null!==this.streamType&&void 0!==this.streamType&&(e.fT("streamType",i.Type.I32,2),e.gT(this.streamType),e.dT()),null!==this.streamProtocol&&void 0!==this.streamProtocol&&(e.fT("streamProtocol",i.Type.I32,3),e.gT(this.streamProtocol),e.dT()),e.yT(),e.vT()},hive.snapshots.ClientInfo=function(e){this.clientType=null,this.majorVersion=null,this.minorVersion=null,this.patchVersion=null,e&&(void 0!==e.clientType&&(this.clientType=e.clientType),void 0!==e.majorVersion&&(this.majorVersion=e.majorVersion),void 0!==e.minorVersion&&(this.minorVersion=e.minorVersion),void 0!==e.patchVersion&&(this.patchVersion=e.patchVersion))},hive.snapshots.ClientInfo.prototype={},hive.snapshots.ClientInfo.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.clientType=e.uT().value:e.Om(r);break;case 2:r==i.Type.BYTE?this.majorVersion=e.sv().value:e.Om(r);break;case 3:r==i.Type.BYTE?this.minorVersion=e.sv().value:e.Om(r);break;case 4:r==i.Type.I16?this.patchVersion=e._E().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.ClientInfo.prototype.write=function(e){e.pT("ClientInfo"),null!==this.clientType&&void 0!==this.clientType&&(e.fT("clientType",i.Type.I32,1),e.gT(this.clientType),e.dT()),null!==this.majorVersion&&void 0!==this.majorVersion&&(e.fT("majorVersion",i.Type.BYTE,2),e.rv(this.majorVersion),e.dT()),null!==this.minorVersion&&void 0!==this.minorVersion&&(e.fT("minorVersion",i.Type.BYTE,3),e.rv(this.minorVersion),e.dT()),null!==this.patchVersion&&void 0!==this.patchVersion&&(e.fT("patchVersion",i.Type.I16,4),e.pE(this.patchVersion),e.dT()),e.yT(),e.vT()},hive.snapshots.AgentInfo=function(e){this.firstTierBitrates=null,this.secondTierBitrates=null,e&&(void 0!==e.firstTierBitrates&&(this.firstTierBitrates=e.firstTierBitrates),void 0!==e.secondTierBitrates&&(this.secondTierBitrates=e.secondTierBitrates))},hive.snapshots.AgentInfo.prototype={},hive.snapshots.AgentInfo.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:if(r==i.Type.SET){var s,o=0;this.firstTierBitrates=[];var a=0;s=e.CE(),a=s.AE,o=s.size;for(var h=0;h<o;++h){var u=null;u=e.uT().value,this.firstTierBitrates.push(u)}e.OE()}else e.Om(r);break;case 2:if(r==i.Type.SET){var c,l=0;this.secondTierBitrates=[];var p=0;c=e.CE(),p=c.AE,l=c.size;for(var f=0;f<l;++f){var d=null;d=e.uT().value,this.secondTierBitrates.push(d)}e.OE()}else e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.AgentInfo.prototype.write=function(e){if(e.pT("AgentInfo"),null!==this.firstTierBitrates&&void 0!==this.firstTierBitrates){e.fT("firstTierBitrates",i.Type.SET,1),e.uE(i.Type.I32,this.firstTierBitrates.length);for(var t in this.firstTierBitrates)this.firstTierBitrates.hasOwnProperty(t)&&(t=this.firstTierBitrates[t],e.gT(t));e.cE(),e.dT()}if(null!==this.secondTierBitrates&&void 0!==this.secondTierBitrates){e.fT("secondTierBitrates",i.Type.SET,2),e.uE(i.Type.I32,this.secondTierBitrates.length);for(var r in this.secondTierBitrates)this.secondTierBitrates.hasOwnProperty(r)&&(r=this.secondTierBitrates[r],e.gT(r));e.cE(),e.dT()}e.yT(),e.vT()},hive.snapshots.TrafficKey=function(e){this.bitrate=null,this.AS=null,this.partnerGuid=null,e&&(void 0!==e.bitrate&&(this.bitrate=e.bitrate),void 0!==e.AS&&(this.AS=e.AS),void 0!==e.partnerGuid&&(this.partnerGuid=e.partnerGuid))},hive.snapshots.TrafficKey.prototype={},hive.snapshots.TrafficKey.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.bitrate=e.uT().value:e.Om(r);break;case 2:r==i.Type.I32?this.AS=e.uT().value:e.Om(r);break;case 3:r==i.Type.STRING?this.partnerGuid=e.ym().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.TrafficKey.prototype.write=function(e){e.pT("TrafficKey"),null!==this.bitrate&&void 0!==this.bitrate&&(e.fT("bitrate",i.Type.I32,1),e.gT(this.bitrate),e.dT()),null!==this.AS&&void 0!==this.AS&&(e.fT("AS",i.Type.I32,2),e.gT(this.AS),e.dT()),null!==this.partnerGuid&&void 0!==this.partnerGuid&&(e.fT("partnerGuid",i.Type.STRING,3),e.cm(this.partnerGuid),e.dT()),e.yT(),e.vT()},hive.snapshots.PartnerKey=function(e){this.bitrate=null,this.AS=null,this.partnerGuid=null,e&&(void 0!==e.bitrate&&(this.bitrate=e.bitrate),void 0!==e.AS&&(this.AS=e.AS),void 0!==e.partnerGuid&&(this.partnerGuid=e.partnerGuid))},hive.snapshots.PartnerKey.prototype={},hive.snapshots.PartnerKey.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.bitrate=e.uT().value:e.Om(r);break;case 2:r==i.Type.I32?this.AS=e.uT().value:e.Om(r);break;case 3:r==i.Type.STRING?this.partnerGuid=e.ym().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.PartnerKey.prototype.write=function(e){e.pT("PartnerKey"),null!==this.bitrate&&void 0!==this.bitrate&&(e.fT("bitrate",i.Type.I32,1),e.gT(this.bitrate),e.dT()),null!==this.AS&&void 0!==this.AS&&(e.fT("AS",i.Type.I32,2),e.gT(this.AS),e.dT()),null!==this.partnerGuid&&void 0!==this.partnerGuid&&(e.fT("partnerGuid",i.Type.STRING,3),e.cm(this.partnerGuid),e.dT()),e.yT(),e.vT()},hive.snapshots.Player=function(e){this.bufferingN=null,this.bufferingMs=null,this.initBufferingN=null,this.initBufferingMs=null,this.seekBufferingN=null,this.seekBufferingMs=null,this.playerBufferMs=null,e&&(void 0!==e.bufferingN&&(this.bufferingN=e.bufferingN),void 0!==e.bufferingMs&&(this.bufferingMs=e.bufferingMs),void 0!==e.initBufferingN&&(this.initBufferingN=e.initBufferingN),void 0!==e.initBufferingMs&&(this.initBufferingMs=e.initBufferingMs),void 0!==e.seekBufferingN&&(this.seekBufferingN=e.seekBufferingN),void 0!==e.seekBufferingMs&&(this.seekBufferingMs=e.seekBufferingMs),void 0!==e.playerBufferMs&&(this.playerBufferMs=e.playerBufferMs))},hive.snapshots.Player.prototype={},hive.snapshots.Player.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I16?this.bufferingN=e._E().value:e.Om(r);break;case 2:r==i.Type.I32?this.bufferingMs=e.uT().value:e.Om(r);break;case 3:r==i.Type.I16?this.initBufferingN=e._E().value:e.Om(r);break;case 4:r==i.Type.I32?this.initBufferingMs=e.uT().value:e.Om(r);break;case 5:r==i.Type.I16?this.seekBufferingN=e._E().value:e.Om(r);break;case 6:r==i.Type.I32?this.seekBufferingMs=e.uT().value:e.Om(r);break;case 36:r==i.Type.I32?this.playerBufferMs=e.uT().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.Player.prototype.write=function(e){e.pT("Player"),null!==this.bufferingN&&void 0!==this.bufferingN&&(e.fT("bufferingN",i.Type.I16,1),e.pE(this.bufferingN),e.dT()),null!==this.bufferingMs&&void 0!==this.bufferingMs&&(e.fT("bufferingMs",i.Type.I32,2),e.gT(this.bufferingMs),e.dT()),null!==this.initBufferingN&&void 0!==this.initBufferingN&&(e.fT("initBufferingN",i.Type.I16,3),e.pE(this.initBufferingN),e.dT()),null!==this.initBufferingMs&&void 0!==this.initBufferingMs&&(e.fT("initBufferingMs",i.Type.I32,4),e.gT(this.initBufferingMs),e.dT()),null!==this.seekBufferingN&&void 0!==this.seekBufferingN&&(e.fT("seekBufferingN",i.Type.I16,5),e.pE(this.seekBufferingN),e.dT()),null!==this.seekBufferingMs&&void 0!==this.seekBufferingMs&&(e.fT("seekBufferingMs",i.Type.I32,6),e.gT(this.seekBufferingMs),e.dT()),null!==this.playerBufferMs&&void 0!==this.playerBufferMs&&(e.fT("playerBufferMs",i.Type.I32,36),e.gT(this.playerBufferMs),e.dT()),e.yT(),e.vT()},hive.snapshots.MetricSnapshot=function(e){this.timestamp=null,this.guid=null,this.eventId=null,this.streamInfo=null,this.metrics=null,this.traffic=null,this.snapshotInfo=null,this.agentInfo=null,this.connInfo=null,this.partners=null,this.player=null,this.client=null,this.sessionId=null,e&&(void 0!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.guid&&(this.guid=e.guid),void 0!==e.eventId&&(this.eventId=e.eventId),void 0!==e.streamInfo&&(this.streamInfo=e.streamInfo),void 0!==e.metrics&&(this.metrics=e.metrics),void 0!==e.traffic&&(this.traffic=e.traffic),void 0!==e.snapshotInfo&&(this.snapshotInfo=e.snapshotInfo),void 0!==e.agentInfo&&(this.agentInfo=e.agentInfo),void 0!==e.connInfo&&(this.connInfo=e.connInfo),void 0!==e.partners&&(this.partners=e.partners),void 0!==e.player&&(this.player=e.player),void 0!==e.client&&(this.client=e.client),void 0!==e.sessionId&&(this.sessionId=e.sessionId))},hive.snapshots.MetricSnapshot.prototype={},hive.snapshots.MetricSnapshot.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I64?this.timestamp=e.FE().value:e.Om(r);break;case 2:r==i.Type.STRING?this.guid=e.ym().value:e.Om(r);break;case 3:r==i.Type.STRUCT?(this.eventId=new EventId,this.eventId.read(e)):e.Om(r);break;case 4:r==i.Type.STRUCT?(this.streamInfo=new hive.snapshots.StreamInfo,this.streamInfo.read(e)):e.Om(r);break;case 5:r==i.Type.STRUCT?(this.metrics=new hive.snapshots.Metrics,this.metrics.read(e)):e.Om(r);break;case 6:if(r==i.Type.MAP){var s,o=0;this.traffic={};var a=0,h=0;s=e.IE(),a=s.SE,h=s.bE,o=s.size;for(var u=0;u<o;++u){u>0&&e.yE.length>e.wT[e.wT.length-1]+1&&e.yE.pop();var c=null,l=null;c=new hive.snapshots.TrafficKey,c.read(e),l=new hive.snapshots.Traffic,l.read(e),this.traffic[c]=l}e.RE()}else e.Om(r);break;case 7:r==i.Type.STRUCT?(this.snapshotInfo=new SnapshotInfo,this.snapshotInfo.read(e)):e.Om(r);break;case 8:r==i.Type.STRUCT?(this.agentInfo=new hive.snapshots.AgentInfo,this.agentInfo.read(e)):e.Om(r);break;case 9:r==i.Type.STRUCT?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(e)):e.Om(r);break;case 10:if(r==i.Type.MAP){var p,f=0;this.partners={};var d=0,g=0;p=e.IE(),d=p.SE,g=p.bE,f=p.size;for(var y=0;y<f;++y){y>0&&e.yE.length>e.wT[e.wT.length-1]+1&&e.yE.pop();var v=null,m=null;v=new hive.snapshots.PartnerKey,v.read(e),m=new hive.snapshots.Partner,m.read(e),this.partners[v]=m}e.RE()}else e.Om(r);break;case 11:r==i.Type.STRUCT?(this.player=new hive.snapshots.Player,this.player.read(e)):e.Om(r);break;case 12:r==i.Type.STRUCT?(this.client=new hive.snapshots.ClientInfo,this.client.read(e)):e.Om(r);break;case 13:r==i.Type.STRING?this.sessionId=e.ym().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.MetricSnapshot.prototype.write=function(e){if(e.pT("MetricSnapshot"),null!==this.timestamp&&void 0!==this.timestamp&&(e.fT("timestamp",i.Type.I64,1),e.fE(this.timestamp),e.dT()),null!==this.guid&&void 0!==this.guid&&(e.fT("guid",i.Type.STRING,2),e.cm(this.guid),e.dT()),null!==this.eventId&&void 0!==this.eventId&&(e.fT("eventId",i.Type.STRUCT,3),this.eventId.write(e),e.dT()),null!==this.streamInfo&&void 0!==this.streamInfo&&(e.fT("streamInfo",i.Type.STRUCT,4),
this.streamInfo.write(e),e.dT()),null!==this.metrics&&void 0!==this.metrics&&(e.fT("metrics",i.Type.STRUCT,5),this.metrics.write(e),e.dT()),null!==this.traffic&&void 0!==this.traffic){e.fT("traffic",i.Type.MAP,6),e.sE(i.Type.STRUCT,i.Type.STRUCT,i.Qm(this.traffic));for(var t=0;t<this.traffic.length;t++){var r=this.traffic[t],n=r.key,s=r.value;n.write(e),s.write(e)}e.oE(),e.dT()}if(null!==this.snapshotInfo&&void 0!==this.snapshotInfo&&(e.fT("snapshotInfo",i.Type.STRUCT,7),this.snapshotInfo.write(e),e.dT()),null!==this.agentInfo&&void 0!==this.agentInfo&&(e.fT("agentInfo",i.Type.STRUCT,8),this.agentInfo.write(e),e.dT()),null!==this.connInfo&&void 0!==this.connInfo&&(e.fT("connInfo",i.Type.STRUCT,9),this.connInfo.write(e),e.dT()),null!==this.partners&&void 0!==this.partners){e.fT("partners",i.Type.MAP,10),e.sE(i.Type.STRUCT,i.Type.STRUCT,i.Qm(this.partners));for(var t=0;t<this.partners.length;t++){var r=this.partners[t],o=r.key,a=r.value;o.write(e),a.write(e)}e.oE(),e.dT()}null!==this.player&&void 0!==this.player&&(e.fT("player",i.Type.STRUCT,11),this.player.write(e),e.dT()),null!==this.client&&void 0!==this.client&&(e.fT("client",i.Type.STRUCT,12),this.client.write(e),e.dT()),null!==this.sessionId&&void 0!==this.sessionId&&(e.fT("sessionId",i.Type.STRING,13),e.cm(this.sessionId),e.dT()),e.yT(),e.vT()},hive.snapshots.JsonMetricSnapshot=function(e){this.timestamp=null,this.guid=null,this.eventId=null,this.streamInfo=null,this.metrics=null,this.traffic=null,this.snapshotInfo=null,this.agentInfo=null,this.connInfo=null,this.partners=null,this.player=null,this.client=null,this.sessionId=null,e&&(void 0!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.guid&&(this.guid=e.guid),void 0!==e.eventId&&(this.eventId=e.eventId),void 0!==e.streamInfo&&(this.streamInfo=e.streamInfo),void 0!==e.metrics&&(this.metrics=e.metrics),void 0!==e.traffic&&(this.traffic=e.traffic),void 0!==e.snapshotInfo&&(this.snapshotInfo=e.snapshotInfo),void 0!==e.agentInfo&&(this.agentInfo=e.agentInfo),void 0!==e.connInfo&&(this.connInfo=e.connInfo),void 0!==e.partners&&(this.partners=e.partners),void 0!==e.player&&(this.player=e.player),void 0!==e.client&&(this.client=e.client),void 0!==e.sessionId&&(this.sessionId=e.sessionId))},hive.snapshots.JsonMetricSnapshot.prototype={},hive.snapshots.JsonMetricSnapshot.prototype.read=function(e){for(e.wE();;){var t=e.hT(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I64?this.timestamp=e.FE().value:e.Om(r);break;case 2:r==i.Type.STRING?this.guid=e.ym().value:e.Om(r);break;case 3:r==i.Type.STRUCT?(this.eventId=new EventId,this.eventId.read(e)):e.Om(r);break;case 4:r==i.Type.STRUCT?(this.streamInfo=new hive.snapshots.StreamInfo,this.streamInfo.read(e)):e.Om(r);break;case 5:r==i.Type.STRUCT?(this.metrics=new hive.snapshots.Metrics,this.metrics.read(e)):e.Om(r);break;case 6:if(r==i.Type.MAP){var s,o=0;this.traffic={};var a=0,h=0;s=e.IE(),a=s.SE,h=s.bE,o=s.size;for(var u=0;u<o;++u){u>0&&e.yE.length>e.wT[e.wT.length-1]+1&&e.yE.pop();var c=null,l=null;c=e.ym().value,l=new hive.snapshots.Traffic,l.read(e),this.traffic[c]=l}e.RE()}else e.Om(r);break;case 7:r==i.Type.STRUCT?(this.snapshotInfo=new SnapshotInfo,this.snapshotInfo.read(e)):e.Om(r);break;case 8:r==i.Type.STRUCT?(this.agentInfo=new hive.snapshots.AgentInfo,this.agentInfo.read(e)):e.Om(r);break;case 9:r==i.Type.STRUCT?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(e)):e.Om(r);break;case 10:if(r==i.Type.MAP){var p,f=0;this.partners={};var d=0,g=0;p=e.IE(),d=p.SE,g=p.bE,f=p.size;for(var y=0;y<f;++y){y>0&&e.yE.length>e.wT[e.wT.length-1]+1&&e.yE.pop();var v=null,m=null;v=e.ym().value,m=new hive.snapshots.Partner,m.read(e),this.partners[v]=m}e.RE()}else e.Om(r);break;case 11:r==i.Type.STRUCT?(this.player=new hive.snapshots.Player,this.player.read(e)):e.Om(r);break;case 12:r==i.Type.STRUCT?(this.client=new hive.snapshots.ClientInfo,this.client.read(e)):e.Om(r);break;case 13:r==i.Type.STRING?this.sessionId=e.ym().value:e.Om(r);break;default:e.Om(r)}e.cT()}e.lT()},hive.snapshots.JsonMetricSnapshot.prototype.write=function(e){if(e.pT("JsonMetricSnapshot"),null!==this.timestamp&&void 0!==this.timestamp&&(e.fT("timestamp",i.Type.I64,1),e.fE(this.timestamp),e.dT()),null!==this.guid&&void 0!==this.guid&&(e.fT("guid",i.Type.STRING,2),e.cm(this.guid),e.dT()),null!==this.eventId&&void 0!==this.eventId&&(e.fT("eventId",i.Type.STRUCT,3),this.eventId.write(e),e.dT()),null!==this.streamInfo&&void 0!==this.streamInfo&&(e.fT("streamInfo",i.Type.STRUCT,4),this.streamInfo.write(e),e.dT()),null!==this.metrics&&void 0!==this.metrics&&(e.fT("metrics",i.Type.STRUCT,5),this.metrics.write(e),e.dT()),null!==this.traffic&&void 0!==this.traffic){e.fT("traffic",i.Type.MAP,6),e.sE(i.Type.STRING,i.Type.STRUCT,i.Qm(this.traffic));for(var t in this.traffic)if(this.traffic.hasOwnProperty(t)){var r=this.traffic[t];e.cm(t),r.write(e)}e.oE(),e.dT()}if(null!==this.snapshotInfo&&void 0!==this.snapshotInfo&&(e.fT("snapshotInfo",i.Type.STRUCT,7),this.snapshotInfo.write(e),e.dT()),null!==this.agentInfo&&void 0!==this.agentInfo&&(e.fT("agentInfo",i.Type.STRUCT,8),this.agentInfo.write(e),e.dT()),null!==this.connInfo&&void 0!==this.connInfo&&(e.fT("connInfo",i.Type.STRUCT,9),this.connInfo.write(e),e.dT()),null!==this.partners&&void 0!==this.partners){e.fT("partners",i.Type.MAP,10),e.sE(i.Type.STRING,i.Type.STRUCT,i.Qm(this.partners));for(var n in this.partners)if(this.partners.hasOwnProperty(n)){var s=this.partners[n];e.cm(n),s.write(e)}e.oE(),e.dT()}null!==this.player&&void 0!==this.player&&(e.fT("player",i.Type.STRUCT,11),this.player.write(e),e.dT()),null!==this.client&&void 0!==this.client&&(e.fT("client",i.Type.STRUCT,12),this.client.write(e),e.dT()),null!==this.sessionId&&void 0!==this.sessionId&&(e.fT("sessionId",i.Type.STRING,13),e.cm(this.sessionId),e.dT()),e.yT(),e.vT()}},function(e,t,r){var n,s;(function(e){/**
	 * @license ByteBuffer.js (c) 2013-2014 Daniel Wirtz <dcode@dcode.io>
	 * This version of ByteBuffer.js uses an ArrayBuffer as its backing buffer which is accessed through a DataView and is
	 * compatible with modern browsers.
	 * Released under the Apache License, Version 2.0
	 * see: https://github.com/dcodeIO/ByteBuffer.js for details
	 */
!function(o){"use strict";function a(e){function t(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function r(){var e=[],t=[];return function(){return 0===arguments.length?t.join("")+a.apply(String,e):(e.length+arguments.length>1024&&(t.push(a.apply(String,e)),e.length=0),void Array.prototype.push.apply(e,arguments))}}var n=function(e,t,r){if("undefined"==typeof e&&(e=n.xy),"undefined"==typeof t&&(t=n.Uy),"undefined"==typeof r&&(r=n.Hy),!r){if(e=0|e,e<0)throw RangeError("Illegal capacity");t=!!t,r=!!r}this.buffer=0===e?o:new ArrayBuffer(e),this.view=0===e?null:new DataView(this.buffer),this.offset=0,this.qy=-1,this.Vy=e,this.jy="undefined"!=typeof t&&!!t,this.Gy=!!r};n.VERSION="3.5.5",n.Qy=!0,n.Yy=!1,n.xy=16,n.Uy=n.Yy,n.Hy=!1,n.Ky=e||null;var s=n.prototype,o=new ArrayBuffer(0),a=String.fromCharCode;n.Jy=function(e,t,r){return new n(e,t,r)},n.concat=function(e,t,r,i){"boolean"!=typeof t&&"string"==typeof t||(i=r,r=t,t=void 0);for(var s,o=0,a=0,h=e.length;a<h;++a)n.zy(e[a])||(e[a]=n.wrap(e[a],t)),s=e[a].Vy-e[a].offset,s>0&&(o+=s);if(0===o)return new n(0,r,i);var u,c=new n(o,r,i),l=new Uint8Array(c.buffer);for(a=0;a<h;)u=e[a++],s=u.Vy-u.offset,s<=0||(l.set(new Uint8Array(u.buffer).subarray(u.offset,u.Vy),c.offset),c.offset+=s);return c.Vy=c.offset,c.offset=0,c},n.zy=function(e){return(e&&e instanceof n)===!0},n.type=function(){return ArrayBuffer},n.wrap=function(e,t,r,o){if("string"!=typeof t&&(o=r,r=t,t=void 0),"string"==typeof e)switch("undefined"==typeof t&&(t="utf8"),t){case"base64":return n.Wy(e,r);case"hex":return n.Xy(e,r);case"binary":return n.$y(e,r);case"utf8":return n.Zy(e,r);case"debug":return n.ev(e,r);default:throw Error("Unsupported encoding: "+t)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var a;if(n.zy(e))return a=s.clone.call(e),a.qy=-1,a;if(e instanceof Uint8Array)a=new n(0,r,o),e.length>0&&(a.buffer=e.buffer,a.offset=e.byteOffset,a.Vy=e.byteOffset+e.length,a.view=e.length>0?new DataView(e.buffer):null);else if(e instanceof ArrayBuffer)a=new n(0,r,o),e.byteLength>0&&(a.buffer=e,a.offset=0,a.Vy=e.byteLength,a.view=e.byteLength>0?new DataView(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");for(a=new n(e.length,r,o),a.Vy=e.length,i=0;i<e.length;++i)a.view.setUint8(i,e[i])}return a},s.tv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=1,this.view.setInt8(t,e),r&&(this.offset+=1),this},s.rv=s.tv,s.nv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=this.view.getInt8(e);return t&&(this.offset+=1),r},s.sv=s.nv,s.ov=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=1,this.view.setUint8(t,e),r&&(this.offset+=1),this},s.av=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=this.view.getUint8(e);return t&&(this.offset+=1),r},s.hv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=2,this.view.setInt16(t,e,this.jy),r&&(this.offset+=2),this},s.uv=s.hv,s.cv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=this.view.getInt16(e,this.jy);return t&&(this.offset+=2),r},s.lv=s.cv,s.pv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=2,this.view.setUint16(t,e,this.jy),r&&(this.offset+=2),this},s.fv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=this.view.getUint16(e,this.jy);return t&&(this.offset+=2),r},s.dv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setInt32(t,e,this.jy),r&&(this.offset+=4),this},s.ia=s.dv,s.gv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getInt32(e,this.jy);return t&&(this.offset+=4),r},s.ua=s.gv,s.yv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setUint32(t,e,this.jy),r&&(this.offset+=4),this},s.vv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getUint32(e,this.jy);return t&&(this.offset+=4),r},e&&(s.mv=function(t,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("number"==typeof t)t=e.Pu(t);else if("string"==typeof t)t=e.Au(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.Pu(t):"string"==typeof t&&(t=e.Au(t)),r+=8;var n=this.buffer.byteLength;return r>n&&this.resize((n*=2)>r?n:r),r-=8,this.jy?(this.view.setInt32(r,t.low,!0),this.view.setInt32(r+4,t.high,!0)):(this.view.setInt32(r,t.high,!1),this.view.setInt32(r+4,t.low,!1)),i&&(this.offset+=8),this},s.Tv=s.mv,s.Ev=function(t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.jy?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),(!1)):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),(!1));return r&&(this.offset+=8),i},s.wv=s.Ev,s.Iv=function(t,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("number"==typeof t)t=e.Pu(t);else if("string"==typeof t)t=e.Au(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.Pu(t):"string"==typeof t&&(t=e.Au(t)),r+=8;var n=this.buffer.byteLength;return r>n&&this.resize((n*=2)>r?n:r),r-=8,this.jy?(this.view.setInt32(r,t.low,!0),this.view.setInt32(r+4,t.high,!0)):(this.view.setInt32(r,t.high,!1),this.view.setInt32(r+4,t.low,!1)),i&&(this.offset+=8),this},s.Sv=function(t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.jy?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),(!0)):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),(!0));return r&&(this.offset+=8),i}),s.bv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setFloat32(t,e,this.jy),r&&(this.offset+=4),this},s.Rv=s.bv,s.Pv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getFloat32(e,this.jy);return t&&(this.offset+=4),r},s.Av=s.Pv,s.kv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=8,this.view.setFloat64(t,e,this.jy),r&&(this.offset+=8),this},s.Cv=s.kv,s.Ov=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var r=this.view.getFloat64(e,this.jy);return t&&(this.offset+=8),r},s.Nv=s.Ov,n._v=5,n.Fv=function(e){return e>>>=0,e<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},n.Lv=function(e){return((e|=0)<<1^e>>31)>>>0},n.Dv=function(e){return e>>>1^-(1&e)|0},s.Mv=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var i,s=n.Fv(e);t+=s;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=s,this.view.setUint8(t,i=128|e),e>>>=0,e>=128?(i=e>>7|128,this.view.setUint8(t+1,i),e>=16384?(i=e>>14|128,this.view.setUint8(t+2,i),e>=1<<21?(i=e>>21|128,this.view.setUint8(t+3,i),e>=1<<28?(this.view.setUint8(t+4,e>>28&15),s=5):(this.view.setUint8(t+3,127&i),s=4)):(this.view.setUint8(t+2,127&i),s=3)):(this.view.setUint8(t+1,127&i),s=2)):(this.view.setUint8(t,127&i),s=1),r?(this.offset+=s,this):s},s.Bv=function(e,t){return this.Mv(n.Lv(e),t)},s.xv=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r,i,n=0,s=0;do{if(i=e+n,!this.Gy&&i>this.Vy){var o=Error("Truncated");throw o.Uv=!0,o}r=this.view.getUint8(i),n<5&&(s|=(127&r)<<7*n>>>0),++n}while(128===(128&r));return s=0|s,t?(this.offset+=n,s):{value:s,length:n}},s.Hv=function(e){var t=this.xv(e);return"object"==typeof t?t.value=n.Dv(t.value):t=n.Dv(t),t},e&&(n.qv=10,n.Vv=function(t){"number"==typeof t?t=e.Pu(t):"string"==typeof t&&(t=e.Au(t));var r=t.jv()>>>0,i=t.Gv(28).jv()>>>0,n=t.Gv(56).jv()>>>0;return 0==n?0==i?r<16384?r<128?1:2:r<1<<21?3:4:i<16384?i<128?5:6:i<1<<21?7:8:n<128?9:10},n.Qv=function(t){return"number"==typeof t?t=e.Pu(t,!1):"string"==typeof t?t=e.Au(t,!1):t.Yv!==!1&&(t=t.Kv()),t.shiftLeft(1).Jl(t.zv(63)).Jv()},n.Wv=function(t){return"number"==typeof t?t=e.Pu(t,!1):"string"==typeof t?t=e.Au(t,!1):t.Yv!==!1&&(t=t.Kv()),t.Gv(1).Jl(t.Xv(e.ONE).Kv().Du()).Kv()},s.$v=function(t,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("number"==typeof t)t=e.Pu(t);else if("string"==typeof t)t=e.Au(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.Pu(t,!1):"string"==typeof t?t=e.Au(t,!1):t.Yv!==!1&&(t=t.Kv());var s=n.Vv(t),o=t.jv()>>>0,a=t.Gv(28).jv()>>>0,h=t.Gv(56).jv()>>>0;r+=s;var u=this.buffer.byteLength;switch(r>u&&this.resize((u*=2)>r?u:r),r-=s,s){case 10:this.view.setUint8(r+9,h>>>7&1);case 9:this.view.setUint8(r+8,9!==s?128|h:127&h);case 8:this.view.setUint8(r+7,8!==s?a>>>21|128:a>>>21&127);case 7:this.view.setUint8(r+6,7!==s?a>>>14|128:a>>>14&127);case 6:this.view.setUint8(r+5,6!==s?a>>>7|128:a>>>7&127);case 5:this.view.setUint8(r+4,5!==s?128|a:127&a);case 4:this.view.setUint8(r+3,4!==s?o>>>21|128:o>>>21&127);case 3:this.view.setUint8(r+2,3!==s?o>>>14|128:o>>>14&127);case 2:this.view.setUint8(r+1,2!==s?o>>>7|128:o>>>7&127);case 1:this.view.setUint8(r,1!==s?128|o:127&o)}return i?(this.offset+=s,this):s},s.Zv=function(e,t){return this.$v(n.Qv(e),t)},s.em=function(t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.Gy){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=t,n=0,s=0,o=0,a=0;if(a=this.view.getUint8(t++),n=127&a,128&a&&(a=this.view.getUint8(t++),n|=(127&a)<<7,128&a&&(a=this.view.getUint8(t++),n|=(127&a)<<14,128&a&&(a=this.view.getUint8(t++),n|=(127&a)<<21,128&a&&(a=this.view.getUint8(t++),s=127&a,128&a&&(a=this.view.getUint8(t++),s|=(127&a)<<7,128&a&&(a=this.view.getUint8(t++),s|=(127&a)<<14,128&a&&(a=this.view.getUint8(t++),s|=(127&a)<<21,128&a&&(a=this.view.getUint8(t++),o=127&a,128&a&&(a=this.view.getUint8(t++),o|=(127&a)<<7,128&a))))))))))throw Error("Buffer overrun");var h=e.ld(n|s<<28,s>>>4|o<<24,!1);return r?(this.offset=t,h):{value:h,length:t-i}},s.tm=function(t){var r=this.em(t);return r&&r.value instanceof e?r.value=n.Wv(r.value):r=n.Wv(r),r}),s.na=function(e,r){var i="undefined"==typeof r;i&&(r=this.offset);var n,s=e.length;if(!this.Gy){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(n=0;n<s;++n)if(0===e.charCodeAt(n))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}s=u.rm(t(e))[1],r+=s+1;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=s+1,u.im(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),this.view.setUint8(r++,0),i?(this.offset=r,this):s},s.la=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i,n=e,s=-1;return u.nm(function(){if(0===s)return null;if(e>=this.Vy)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.Vy);return 0===(s=this.view.getUint8(e++))?null:s}.bind(this),i=r(),!0),t?(this.offset=e,i()):{string:i(),length:e-n}},s.sm=function(e,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var n,s=r;n=u.rm(t(e),this.Gy)[1],r+=4+n;var o=this.buffer.byteLength;if(r>o&&this.resize((o*=2)>r?o:r),r-=4+n,this.view.setUint32(r,n,this.jy),r+=4,u.im(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),r!==s+4+n)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+4+n));return i?(this.offset=r,this):r-s},s.om=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var i,n=0,s=e;n=this.view.getUint32(e,this.jy),e+=4;var o,a=e+n;return u.nm(function(){return e<a?this.view.getUint8(e++):null}.bind(this),o=r(),this.Gy),i=o(),t?(this.offset=e,i):{string:i,length:e-s}},n.am="c",n.hm="b",s.um=function(e,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var n,s=r;n=u.rm(t(e))[1],r+=n;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=n,u.im(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),i?(this.offset=r,this):r-s},s.cm=s.um,n.lm=function(e){return u.rm(t(e))[0]},n.pm=function(e){return u.rm(t(e))[1]},s.fm=function(e,t,i){"number"==typeof t&&(i=t,t=void 0);var s="undefined"==typeof i;if(s&&(i=this.offset),"undefined"==typeof t&&(t=n.am),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,a=0,h=i;if(t===n.am){if(o=r(),u.dm(function(){return a<e&&i<this.Vy?this.view.getUint8(i++):null}.bind(this),function(e){++a,u.gm(e,o)}.bind(this)),a!==e)throw RangeError("Illegal range: Truncated data, "+a+" == "+e);return s?(this.offset=i,o()):{string:o(),length:i-h}}if(t===n.hm){if(!this.Gy){if("number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,i<0||i+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+e+") <= "+this.buffer.byteLength)}var c=i+e;if(u.nm(function(){return i<c?this.view.getUint8(i++):null}.bind(this),o=r(),this.Gy),i!==c)throw RangeError("Illegal range: Truncated data, "+i+" == "+c);return s?(this.offset=i,o()):{string:o(),length:i-h}}throw TypeError("Unsupported metrics: "+t)},s.ym=s.fm,s.vm=function(e,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var s,o,a=r;s=u.rm(t(e),this.Gy)[1],o=n.Fv(s),r+=o+s;var h=this.buffer.byteLength;if(r>h&&this.resize((h*=2)>r?h:r),r-=o+s,r+=this.Mv(s,r),u.im(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),r!==a+s+o)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+s+o));return i?(this.offset=r,this):r-a},s.mm=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i,n=this.xv(e),s=e;e+=n.length,n=n.value;var o=e+n,a=r();return u.nm(function(){return e<o?this.view.getUint8(e++):null}.bind(this),a,this.Gy),i=a(),t?(this.offset=e,i):{string:i,length:e-s}},s.append=function(e,t,r){"number"!=typeof t&&"string"==typeof t||(r=t,t=void 0);var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof n||(e=n.wrap(e,t));var s=e.Vy-e.offset;if(s<=0)return this;r+=s;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=s,new Uint8Array(this.buffer,r).set(new Uint8Array(e.buffer).subarray(e.offset,e.Vy)),e.offset+=s,i&&(this.offset+=s),this},s.Tm=function(e,t){return e.append(this,t),this},s.assert=function(e){return this.Gy=!e,this},s.Em=function(){return this.buffer.byteLength},s.clear=function(){return this.offset=0,this.Vy=this.buffer.byteLength,this.qy=-1,this},s.clone=function(e){var t=new n(0,this.jy,this.Gy);if(e){var r=new ArrayBuffer(this.buffer.byteLength);new Uint8Array(r).set(this.buffer),t.buffer=r,t.view=new DataView(r)}else t.buffer=this.buffer,t.view=this.view;return t.offset=this.offset,t.qy=this.qy,t.Vy=this.Vy,t},s.compact=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var r=t-e;if(0===r)return this.buffer=o,this.view=null,this.qy>=0&&(this.qy-=e),this.offset=0,this.Vy=0,this;var i=new ArrayBuffer(r);return new Uint8Array(i).set(new Uint8Array(this.buffer).subarray(e,t)),this.buffer=i,this.view=new DataView(i),this.qy>=0&&(this.qy-=e),this.offset=0,this.Vy=r,this},s.wm=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return new n(0,this.jy,this.Gy);var r=t-e,i=new n(r,this.jy,this.Gy);return i.offset=0,i.Vy=r,i.qy>=0&&(i.qy-=e),this.Bu(i,0,e,t),i},s.Bu=function(e,t,r,i){var s,o;if(!this.Gy&&!n.zy(e))throw TypeError("Illegal target: Not a ByteBuffer");if(t=(o="undefined"==typeof t)?e.offset:0|t,r=(s="undefined"==typeof r)?this.offset:0|r,i="undefined"==typeof i?this.Vy:0|i,t<0||t>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+t+" <= "+e.buffer.byteLength);if(r<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.byteLength);var a=i-r;return 0===a?e:(e.Im(t+a),new Uint8Array(e.buffer).set(new Uint8Array(this.buffer).subarray(r,i),t),s&&(this.offset+=a),o&&(e.offset+=a),this)},s.Im=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},s.fill=function(e,t,r){var i="undefined"==typeof t;if(i&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),"undefined"==typeof t&&(t=this.offset),"undefined"==typeof r&&(r=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!==0)throw TypeError("Illegal end: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(t>=r)return this;for(;t<r;)this.view.setUint8(t++,e);return i&&(this.offset=t),this},s.sa=function(){return this.Vy=this.offset,this.offset=0,this},s.mark=function(e){if(e="undefined"==typeof e?this.offset:e,!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.qy=e,this},s.order=function(e){if(!this.Gy&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.jy=!!e,this},s.Sm=function(e){return this.jy="undefined"==typeof e||!!e,this},s.bm=function(e){return this.jy="undefined"!=typeof e&&!e,this},s.Rm=function(e,t,r){"number"!=typeof t&&"string"==typeof t||(r=t,t=void 0);var i="undefined"==typeof r;if(i&&(r=this.offset),!this.Gy){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof n||(e=n.wrap(e,t));var s=e.Vy-e.offset;if(s<=0)return this;var o,a=s-r;if(a>0){var h=new ArrayBuffer(this.buffer.byteLength+a);o=new Uint8Array(h),o.set(new Uint8Array(this.buffer).subarray(r,this.buffer.byteLength),s),this.buffer=h,this.view=new DataView(h),this.offset+=a,this.qy>=0&&(this.qy+=a),this.Vy+=a,r+=a}else o=new Uint8Array(this.buffer);return o.set(new Uint8Array(e.buffer).subarray(e.offset,e.Vy),r-s),e.offset=e.Vy,i&&(this.offset-=s),this},s.Pm=function(e,t){return e.Rm(this,t),this},s.Am=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.km(!0))},s.Cm=function(){return this.Vy-this.offset},s.reset=function(){return this.qy>=0?(this.offset=this.qy,this.qy=-1):this.offset=0,this},s.resize=function(e){if(!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if(e|=0,e<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t,this.view=new DataView(t)}return this},s.reverse=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(e,t)),this.view=new DataView(this.buffer),this)},s.Om=function(e){if(!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.Gy&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},s.slice=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var r=this.clone();return r.offset=e,r.Vy=t,r},s.Nm=function(e){var t=this.offset,r=this.Vy;if(t>r){var i=t;t=r,r=i}if(!this.Gy){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!==0)throw TypeError("Illegal limit: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(!e&&0===t&&r===this.buffer.byteLength)return this.buffer;if(t===r)return o;var n=new ArrayBuffer(r-t);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(t,r),0),n},s.Zo=s.Nm,s.toString=function(e,t,r){if("undefined"==typeof e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.qy+",limit="+this.Vy+",capacity="+this.Em()+")";switch("number"==typeof e&&(e="utf8",t=e,r=t),e){case"utf8":return this._m(t,r);case"base64":return this.Fm(t,r);case"hex":return this.Lm(t,r);case"binary":return this.Dm(t,r);case"debug":return this.km();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var h=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[],i=0,n=t.length;i<n;++i)r[t[i]]=i;return e.encode=function(e,r){for(var i,n;null!==(i=e());)r(t[i>>2&63]),n=(3&i)<<4,null!==(i=e())?(n|=i>>4&15,r(t[63&(n|i>>4&15)]),n=(15&i)<<2,null!==(i=e())?(r(t[63&(n|i>>6&3)]),r(t[63&i])):(r(t[63&n]),r(61))):(r(t[63&n]),r(61),r(61))},e.decode=function(e,t){function i(e){throw Error("Illegal character code: "+e)}for(var n,s,o;null!==(n=e());)if(s=r[n],"undefined"==typeof s&&i(n),null!==(n=e())&&(o=r[n],"undefined"==typeof o&&i(n),t(s<<2>>>0|(48&o)>>4),null!==(n=e()))){if(s=r[n],"undefined"==typeof s){if(61===n)break;i(n)}if(t((15&o)<<4>>>0|(60&s)>>2),null!==(n=e())){if(o=r[n],"undefined"==typeof o){if(61===n)break;i(n)}t((3&s)<<6>>>0|o)}}},e.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)},e}();s.Fm=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i;return h.encode(function(){return e<t?this.view.getUint8(e++):null}.bind(this),i=r()),i()},n.Wy=function(e,r,i){if(!i){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%4!==0)throw TypeError("Illegal str: Length not a multiple of 4")}var s=new n(e.length/4*3,r,i),o=0;return h.decode(t(e),function(e){s.view.setUint8(o++,e)}),s.Vy=o,s},n.btoa=function(e){return n.$y(e).Fm()},n.atob=function(e){return n.Wy(e).Dm()},s.Dm=function(e,t){if(e="undefined"==typeof e?this.offset:e,t="undefined"==typeof t?this.Vy:t,!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");
if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return"";for(var r=[],i=[];e<t;)r.push(this.view.getUint8(e++)),r.length>=1024&&(i.push(String.fromCharCode.apply(String,r)),r=[]);return i.join("")+String.fromCharCode.apply(String,r)},n.$y=function(e,t,r){if(!r&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");for(var i,s=0,o=e.length,a=new n(o,t,r);s<o;){if(i=e.charCodeAt(s),!r&&i>255)throw RangeError("Illegal charCode at "+s+": 0 <= "+i+" <= 255");a.view.setUint8(s++,i)}return a.Vy=o,a},s.km=function(e){for(var t,r=-1,i=this.buffer.byteLength,n="",s="",o="";r<i;){if(r!==-1&&(t=this.view.getUint8(r),n+=t<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(s+=t>32&&t<127?String.fromCharCode(t):".")),++r,e&&r>0&&r%16===0&&r!==i){for(;n.length<51;)n+=" ";o+=n+s+"\n",n=s=""}n+=r===this.offset&&r===this.Vy?r===this.qy?"!":"|":r===this.offset?r===this.qy?"[":"<":r===this.Vy?r===this.qy?"]":">":r===this.qy?"'":e||0!==r&&r!==i?" ":""}if(e&&" "!==n){for(;n.length<51;)n+=" ";o+=n+s+"\n"}return e?o:n},n.ev=function(e,t,r){for(var i,s,o=e.length,a=new n((o+1)/3|0,t,r),h=0,u=0,c=!1,l=!1,p=!1,f=!1,d=!1;h<o;){switch(i=e.charAt(h++)){case"!":if(!r){if(l||p||f){d=!0;break}l=p=f=!0}a.offset=a.qy=a.Vy=u,c=!1;break;case"|":if(!r){if(l||f){d=!0;break}l=f=!0}a.offset=a.Vy=u,c=!1;break;case"[":if(!r){if(l||p){d=!0;break}l=p=!0}a.offset=a.qy=u,c=!1;break;case"<":if(!r){if(l){d=!0;break}l=!0}a.offset=u,c=!1;break;case"]":if(!r){if(f||p){d=!0;break}f=p=!0}a.Vy=a.qy=u,c=!1;break;case">":if(!r){if(f){d=!0;break}f=!0}a.Vy=u,c=!1;break;case"'":if(!r){if(p){d=!0;break}p=!0}a.qy=u,c=!1;break;case" ":c=!1;break;default:if(!r&&c){d=!0;break}if(s=parseInt(i+e.charAt(h++),16),!r&&(isNaN(s)||s<0||s>255))throw TypeError("Illegal str: Not a debug encoded string");a.view.setUint8(u++,s),c=!0}if(d)throw TypeError("Illegal str: Invalid symbol at "+h)}if(!r){if(!l||!f)throw TypeError("Illegal str: Missing offset or limit");if(u<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+u+" < "+o)}return a},s.Lm=function(e,t){if(e="undefined"==typeof e?this.offset:e,t="undefined"==typeof t?this.Vy:t,!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var r,i=new Array(t-e);e<t;)r=this.view.getUint8(e++),r<16?i.push("0",r.toString(16)):i.push(r.toString(16));return i.join("")},n.Xy=function(e,t,r){if(!r){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var i,s=e.length,o=new n(s/2|0,t),a=0,h=0;a<s;a+=2){if(i=parseInt(e.substring(a,a+2),16),!r&&(!isFinite(i)||i<0||i>255))throw TypeError("Illegal str: Contains non-hex characters");o.view.setUint8(h++,i)}return o.Vy=h,o};var u=function(){var e={};return e.Mm=1114111,e.Bm=function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<128?t(127&r):r<2048?(t(r>>6&31|192),t(63&r|128)):r<65536?(t(r>>12&15|224),t(r>>6&63|128),t(63&r|128)):(t(r>>18&7|240),t(r>>12&63|128),t(r>>6&63|128),t(63&r|128)),r=null},e.dm=function(e,t){for(var r,i,n,s,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(r=e());)if(0===(128&r))t(r);else if(192===(224&r))null===(i=e())&&o([r,i]),t((31&r)<<6|63&i);else if(224===(240&r))(null===(i=e())||null===(n=e()))&&o([r,i,n]),t((15&r)<<12|(63&i)<<6|63&n);else{if(240!==(248&r))throw RangeError("Illegal starting byte: "+r);(null===(i=e())||null===(n=e())||null===(s=e()))&&o([r,i,n,s]),t((7&r)<<18|(63&i)<<12|(63&n)<<6|63&s)}},e.xm=function(e,t){for(var r,i=null;;){if(null===(r=null!==i?i:e()))break;r>=55296&&r<=57343&&null!==(i=e())&&i>=56320&&i<=57343?(t(1024*(r-55296)+i-56320+65536),i=null):t(r)}null!==i&&t(i)},e.gm=function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<=65535?t(r):(r-=65536,t((r>>10)+55296),t(r%1024+56320)),r=null},e.im=function(t,r){e.xm(t,function(t){e.Bm(t,r)})},e.nm=function(t,r){e.dm(t,function(t){e.gm(t,r)})},e.Um=function(e){return e<128?1:e<2048?2:e<65536?3:4},e.Hm=function(t){for(var r,i=0;null!==(r=t());)i+=e.Um(r);return i},e.rm=function(t){var r=0,i=0;return e.xm(t,function(t){++r,i+=e.Um(t)}),[r,i]},e}();return s._m=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.Vy),!this.Gy){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i;try{u.nm(function(){return e<t?this.view.getUint8(e++):null}.bind(this),i=r())}catch(n){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return i()},n.Zy=function(e,r,i){if(!i&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var s=new n(u.rm(t(e),!0)[1],r,i),o=0;return u.im(t(e),function(e){s.view.setUint8(o++,e)}),s.Vy=o,s},n}"object"==typeof e&&e&&"object"==typeof t&&t?e.i=function(){var e;try{e=r(49)}catch(t){}return a(e)}():r(27).amd?(n=[r(48)],s=function(e){return a(e)}.apply(t,n),!(void 0!==s&&(e.i=s))):(o.Vm=o.Vm||{}).qm=a(o.Vm.Ky)}(this)}).call(t,r(28)(e))},function(e,t){/*! collections.min.js v 3.0.0 github.com/montagejs/collections */
!function(e){function t(){throw Error("Can't construct. GenericCollection is a mixin.")}function r(){throw Error("Can't construct. GenericSet is a mixin.")}function i(){}function n(){throw Error("This is an abstract interface. Mix it. Don't construct it")}function s(){throw Error("Can't construct. RangeChanges is a mixin.")}function o(){throw Error("Can't construct. GenericOrder is a mixin.")}function a(e){if(!(this instanceof a))return new a(e);if(Array.isArray(e)||"string"==typeof e)return a.bx(e);if(e=pe(e),e instanceof a)return e;if(e.next)this.next=function(){return e.next()};else if(e.bx){var t=e.bx();this.next=function(){return t.next()}}else{if("[object Function]"!==pe.prototype.toString.call(e))throw new TypeError("Cannot iterate");this.next=e}}function h(e,t,r){this.fp=e,this.start=null==t?0:t,this.end=r}function u(e,t,r){if(!(this instanceof u))return new u(e,t,r);var i=this.head=new this.Node;i.next=i,i.Rx=i,this.Px=t||Object.qR,this.content=r||Function.Ax,this.length=0,this.addEach(e)}function c(e){this.head=e,this.kx=e.next}function l(e){this.value=e,this.next=this.Rx=null}function p(){throw Error("Can't construct. MapChanges is a mixin.")}function f(){throw Error("Can't construct. GenericMap is a mixin.")}function d(e,t){return this instanceof d?(this.content=t||Function.Ax,this.RD={},this.length=0,void this.addEach(e)):new d(e,t)}function g(e,t,r,i){return this instanceof g?(t=t||Object.qR,r=r||Object.hash,i=i||Function.Ax,this.Px=t,this.Cx=r,this.content=i,this.Ox=new this.Nx(null,this._x),this.length=0,void this.addEach(e)):new g(e,t,r)}function y(e,t,r,i){return this instanceof y?(t=t||Object.qR,r=r||Object.hash,i=i||Function.Ax,this.Px=t,this.Cx=r,this.content=i,this.RD=new Ue((void 0),function(e,r){return t(e.key,r.key)},function(e){return r(e.key)}),this.length=0,void this.addEach(e)):new y(e,t,r)}function v(e,t,r,i){return this instanceof v?(t=t||Object.qR,r=r||Object.hash,i=i||Function.Ax,this.Px=t,this.Cx=r,this.content=i,this.order=new this.Fx((void 0),t),this.RD=new this.bD((void 0),function(e,r){return t(e.value,r.value)},function(e){return r(e.value)}),this.length=0,void this.addEach(e)):new v(e,t,r)}function m(e,t,r,i,n){return this instanceof m?(t=t||1/0,r=r||Object.qR,i=i||Object.hash,n=n||Function.Ax,this.RD=new Xe((void 0),r,i),this.Px=r,this.Cx=i,this.content=n,this.maxLength=t,this.length=0,void this.addEach(e)):new m(e,t,r,i)}function T(e,t,r,i,n){return this instanceof T?(r=r||Object.qR,i=i||Object.hash,n=n||Function.Ax,this.Px=r,this.Cx=i,this.content=n,this.RD=new rt((void 0),t,function(e,t){return r(e.key,t.key)},function(e){return i(e.key)}),this.length=0,void this.addEach(e)):new T(e,t,r,i)}function E(e,t,r,i){return this instanceof E?(t=t||Object.qR,r=r||Object.hash,i=i||Function.Ax,this.Px=t,this.Cx=r,this.content=i,this.RD=new at((void 0),function(e,r){return t(e.key,r.key)},function(e){return r(e.key)}),this.length=0,void this.addEach(e)):new E(e,t,r)}function w(e,t,r,i){return this instanceof w?(this.Lx=t||this.Lx,void pt.call(this,e,r,i,function(e){var t=this.Lx();return pt.prototype.set.call(this,e,t),t})):new w(e,t,r,i)}function I(e,t,r,i){return this instanceof I?(Array.isArray(e)?(this.fp=e,e=e.splice(0,e.length)):this.fp=[],this.Px=t||Object.qR,this.Dx=r||Object.$k,this.content=i||Function.Ax,this.length=0,void this.addEach(e)):new I(e,t,r,i)}function S(e,t,r){for(var i=0,n=e.length-1;i<=n;){var s=i+n>>1,o=r(t,e[s]);if(0<o)i=s+1;else{if(!(0>o))return s;n=s-1}}return-(i+1)}function b(e,t,r,i){if(r=S(e,t,r),0>r)return-1;for(;0<r&&i(t,e[r-1]);)r--;return i(t,e[r])?r:-1}function R(e,t,r,i){if(r=S(e,t,r),0>r)return-1;for(;r<e.length-1&&i(t,e[r+1]);)r++;return i(t,e[r])?r:-1}function P(e,t,r,i){return this instanceof P?void vt.call(this,e,t,r,i):new P(e,t,r,i)}function A(e,t,r,i){return this instanceof A?(t=t||Object.qR,r=r||Object.$k,i=i||Function.Ax,this.Px=t,this.Dx=r,this.content=i,this.RD=new wt(null,function(e,r){return t(e.key,r.key)},function(e,t){return r(e.key,t.key)}),this.length=0,void this.addEach(e)):new A(e,t,r,i)}function k(e,t,r,i){return this instanceof k?(this.Px=t||Object.qR,this.Dx=r||Object.$k,this.content=i||Function.Ax,this.root=null,this.length=0,void this.addEach(e)):new k(e,t,r,i)}function C(e){this.value=e,this.right=this.left=null,this.length=1}function O(e,t,r){this.set=e,this.Rx=null,this.end=r,t&&(e=this.set.Mx(t))&&(this.set.Bx(e.value),this.Rx=e.xx())}function N(e,t,r,i){return this instanceof N?(t=t||Object.qR,r=r||Object.$k,i=i||Function.Ax,this.Px=t,this.Dx=r,this.content=i,this.RD=new Nt(null,function(e,r){return t(e.key,r.key)},function(e,t){return r(e.key,t.key)}),this.length=0,void this.addEach(e)):new N(e,t,r,i)}var _={};_.Ux=t,t.prototype.addEach=function(e){if(e&&Object(e)===e)if("function"==typeof e.forEach)e.forEach(this.add,this);else if("number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);else Object.keys(e).forEach(function(t){this.add(e[t],t)},this)},t.prototype.Hx=function(e){e.forEach(function(e){this["delete"](e)},this)},t.prototype.forEach=function(e,t){return this.reduce(function(r,i,n,s,o){e.call(t,i,n,s,o)},void 0)},t.prototype.map=function(e,t){var r=[];return this.reduce(function(i,n,s,o,a){r.push(e.call(t,n,s,o,a))},void 0),r},t.prototype.toArray=function(){return this.map(Function.identity)},t.prototype.qx=function(){var e={};return this.reduce(function(t,r,i){e[i]=r},void 0),e},t.prototype.filter=function(e,t){var r=this.Vx();return this.reduce(function(i,n,s,o,a){e.call(t,n,s,o,a)&&r.add(n)},void 0),r},t.prototype.every=function(e,t){return this.reduce(function(r,i,n,s,o){return r&&e.call(t,i,n,s,o)},!0)},t.prototype.some=function(e,t){return this.reduce(function(r,i,n,s,o){return r||e.call(t,i,n,s,o)},!1)},t.prototype.all=function(){return this.every(Boolean)},t.prototype.kr=function(){return this.some(Boolean)},t.prototype.min=function(e){return e=this.Dx||Object.$k,this.reduce(function(t,r){return 0>e(r,t)?r:t},1/0)},t.prototype.max=function(e){return e=this.Dx||Object.$k,this.reduce(function(t,r){return 0<e(r,t)?r:t},-(1/0))},t.prototype.zI=function(e){return this.reduce(function(e,t){return e+t},void 0===e?0:e)},t.prototype.jx=function(e){var t=void 0===e?0:e,r=void 0===e?0:e;return this.reduce(function(e,i){t+=i,r+=1},void 0),t/r},t.prototype.concat=function(){for(var e=this.Vx(this),t=0;t<arguments.length;t++)e.addEach(arguments[t]);return e},t.prototype.Gx=function(){var e=this;return this.reduce(function(t,r){return r.forEach(function(e){this.push(e)},t,e),t},[])},t.prototype.Qx=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this);for(var t=[],r=1/0,i=0;i<e.length;i++){var n=e[i];e[i]=n.toArray(),n.length<r&&(r=n.length)}for(i=0;i<e.length;i++)for(var n=e[i],s=0;s<n.length;s++)s<r&&s in n&&(t[s]=t[s]||[],t[s][i]=n[s]);return t},t.prototype.ON=function(e,t,r){return e=e||this.Dx||Object.$k,e.Yx?(t=e.Yx,e=e.$k||this.Dx||Object.$k):t=t||Function.identity,void 0===r&&(r=1),this.map(function(e){return{Yx:t(e),value:e}}).sort(function(t,i){return e(t.Yx,i.Yx)*r}).map(function(e){return e.value})},t.prototype.reversed=function(){return this.Vx(this).reverse()},t.prototype.clone=function(e,t){if(void 0===e)e=1/0;else if(0===e)return this;var r=this.Vx();return this.forEach(function(i,n){r.add(Object.clone(i,e-1,t),n)},this),r},t.prototype.only=function(){if(0===this.length)throw Error("Can't get only value in empty collection.");if(1<this.length)throw Error("Can't get only value in collection with multiple values.");return this.Kx()},_.Ux&&(_=_.Ux);var F={};F.Ux=r,r.prototype.Jx=function(e){var t=this.Vx(this);return t.addEach(e),t},r.prototype.zx=function(e){return this.Vx(this.filter(function(t){return e.has(t)}))},r.prototype.Wx=function(e){var t=this.Vx(this);return t.Hx(e),t},r.prototype.Xx=function(e){var t=this.Jx(e),e=this.zx(e);return t.Wx(e)},r.prototype.qR=function(e,t){var r=this;return Object.$x(e,"reduce")&&this.length===e.length&&e.reduce(function(e,i){return e&&r.has(i,t)},!0)},F.Ux&&(F=F.Ux);var L=_,D=Object.prototype.toString;Array.isArray||(Array.isArray=function(e){return"[object Array]"==D.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=L.forEach),Array.prototype.map||(Array.prototype.map=L.map),Array.prototype.filter||(Array.prototype.filter=L.filter),Array.prototype.every||(Array.prototype.every=L.every),Array.prototype.some||(Array.prototype.some=L.some),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=toObject(this),r=t.length>>>0;if("[object Function]"!=D.call(e))throw new TypeError(e+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,n=0;if(2<=arguments.length)i=arguments[1];else for(;;){if(n in t){i=t[n++];break}if(++n>=r)throw new TypeError("reduce of empty array with no initial value")}for(;n<r;n++)n in t&&(i=e.call(void 0,i,t[n],n,t));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=toObject(this),r=t.length>>>0;if("[object Function]"!=D.call(e))throw new TypeError(e+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,r=r-1;if(2<=arguments.length)i=arguments[1];else for(;;){if(r in t){i=t[r--];break}if(0>--r)throw new TypeError("reduceRight of empty array with no initial value")}do r in this&&(i=e.call(void 0,i,t[r],r,t));while(r--);return i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=toObject(this),r=t.length>>>0;if(!r)return-1;var i=0;for(1<arguments.length&&(i=toInteger(arguments[1])),i=0<=i?i:Math.max(0,r+i);i<r;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){var t=toObject(this),r=t.length>>>0;if(!r)return-1;var i=r-1;for(1<arguments.length&&(i=Math.min(i,toInteger(arguments[1]))),i=0<=i?i:r-Math.abs(i);0<=i;i--)if(i in t&&e===t[i])return i;return-1});var M={};M.Ux=Function,Function.Ax=function(){},Function.identity=function(e){return e},Function.Yx=function(e,t){var t=t||Object.$k,e=e||Function.identity,r=function(r,i){return t(e(r),e(i))};return r.$k=t,r.Yx=e,r},M.Ux&&(M=M.Ux);var B={};B.Ux=i,i.Zx={zx:"+",eU:"-",tU:"+",rU:"+",iU:".",nU:"'",sU:"+",oU:"|"},i.aU={zx:"",eU:"",tU:"",rU:"",iU:"",nU:"",sU:"",oU:""},i.hU={zx:"",eU:"",tU:"",rU:"",iU:"",nU:"",sU:"",oU:""},B.Ux&&(B=B.Ux);var x,U={},H=U;if("undefined"!=typeof WeakMap)x=WeakMap;else{var q=function(e){return e.prototype=null,Object.freeze(e)},V=Object.getOwnPropertyNames,j=Object.defineProperty,G={};V(Object).forEach(function(e){G[e]=Object[e]});var Q="ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var Y=new ArrayBuffer(25),Y=new Uint8Array(Y);crypto.getRandomValues(Y),Q="rand:"+Array.prototype.map.call(Y,function(e){return(e%36).toString(36)}).join("")+"___"}j(Object,"getOwnPropertyNames",{value:function(e){return V(e).filter(function(e){return e!==Q})}}),"getPropertyNames"in Object&&j(Object,"getPropertyNames",{value:function(e){return G.getPropertyNames(e).filter(function(e){return e!==Q})}});var K=function(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[Q];return t&&t.key===e?t:G.isExtensible(e)?(t={key:e,uU:[],cU:[]},j(e,Q,{value:t,lU:!1,kk:!1,Ck:!1}),t):void 0},J=Object.freeze;j(Object,"freeze",{value:function(e){return K(e),J(e)}});var z=Object.seal;j(Object,"seal",{value:function(e){return K(e),z(e)}});var W=Object.preventExtensions;j(Object,"preventExtensions",{value:function(e){return K(e),W(e)}});var X=function(){function e(i,n){var s,o=K(i);return o?(s=o.uU.indexOf(e),o=o.cU):(s=t.indexOf(i),o=r),0<=s?o[s]:n}var t=[],r=[];return Object.create(X.prototype,{pU:{value:q(e)},fU:{value:q(function(r){var i=K(r);return 0<=(i?i.uU.indexOf(e):t.indexOf(r))})},dU:{value:q(function(i,n){var s,o=K(i);o?(s=o.uU.indexOf(e),0<=s?o.cU[s]=n:(o.uU.push(e),o.cU.push(n))):(s=t.indexOf(i),0<=s?r[s]=n:(t.push(i),r.push(n)))})},gU:{value:q(function(i){var n=K(i);return n?(i=n.uU.indexOf(e),0<=i&&(n.uU.splice(i,1),n.cU.splice(i,1))):(i=t.indexOf(i),0<=i&&(t.splice(i,1),r.splice(i,1))),!0})}})};X.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.pU(e,t)},lU:!0,Ck:!0},has:{value:function(e){return this.fU(e)},lU:!0,Ck:!0},set:{value:function(e,t){this.dU(e,t)},lU:!0,Ck:!0},"delete":{value:function(e){return this.gU(e)},lU:!0,Ck:!0}}),x=X}H.Ux=x,U.Ux&&(U=U.Ux);var $={},Z=U,ee=Object.prototype.hasOwnProperty,te=new Z,re=new Z;$.Ux=n,n.prototype.yU=function(e){te.has(this)||te.set(this,{});var t=te.get(this);return ee.call(t,e)||(t[e]={vU:[],mU:[]}),t[e]},n.prototype.TU=function(e){if(!te.has(this))return!1;if(!e)return!0;var t=te.get(this);return!!ee.call(t,e)},n.prototype.EU=function(e,t,r){this.makeObservable&&!this.isObservable&&this.makeObservable();var i=n.yU(this,e),r=r?i.vU:i.mU;n.wU(this,e),r.push(t)},n.prototype.IU=function(e,t){return n.EU(this,e,t,!0)},n.prototype.SU=function(e,t,r){var i=n.yU(this,e),r=r?i.vU:i.mU,t=r.lastIndexOf(t);if(-1===t)throw Error("Can't remove listener: does not exist.");r.splice(t,1),0===i.mU.length+i.vU.length&&n.bU(this,e)},n.prototype.RU=function(e,t){return n.SU(this,e,t,!0)},n.prototype.PU=function(e,t,r){var i=n.yU(this,e),i=r?i.vU:i.mU,r=(r?"Will":"")+"Change",s="handleProperty"+r,o=String(e),o=o&&o[0].toUpperCase()+o.slice(1),a="handle"+o+r;i.forEach(function(r){var i=r,r=r[a]||r[s]||r;r.call&&r.call(i,t,e,this)},this)},n.prototype.AU=function(e,t){return n.PU(this,e,t,!0)},n.prototype.wU=function(e){if(!Array.isArray(this)){re.has(this)||(t={},re.set(this,t));var t=re.get(this);if(!ee.call(t,e)){var r,i=this;Object.getOwnPropertyDescriptor(i,e);do{if(r=Object.getOwnPropertyDescriptor(i,e))break;i=Object.getPrototypeOf(i)}while(i);if(r=r||{value:void 0,kk:!0,lU:!0,Ck:!0},!r.Ck)throw Error("Can't observe non-configurable properties");t[e]=r,(r.lU||r.set)&&Object.defineProperty(this,e,"value"in r?{get:function(){return r.value},set:function(t){return t===r.value?t:(n.AU(this,e,r.value),r.value=t,n.PU(this,e,t),t)},kk:r.kk,Ck:!0}:{get:function(){if(r.get)return r.get.apply(this,arguments)},set:function(t){var i;return r.get&&(i=r.get.apply(this,arguments)),t===i?t:(n.AU(this,e,i),r.set&&r.set.apply(this,arguments),r.get&&(t=r.get.apply(this,arguments)),n.PU(this,e,t),t)},kk:r.kk,Ck:!0})}}},n.prototype.bU=function(e){if(!Array.isArray(this)){if(!re.has(this))throw Error("Can't uninstall observer on property");var t=re.get(this);if(!t[e])throw Error("Can't uninstall observer on property");var r=t[e];delete t[e],Object.defineProperty(this,e,r)}},n.yU=function(e,t){return e.yU?e.yU(t):n.prototype.yU.call(e,t)},n.TU=function(e,t){return e.TU?e.TU(t):n.prototype.TU.call(e,t)},n.EU=function(e,t,r,i){return e.EU?e.EU(t,r,i):n.prototype.EU.call(e,t,r,i)},n.SU=function(e,t,r,i){return e.SU?e.SU(t,r,i):n.prototype.SU.call(e,t,r,i)},n.PU=function(e,t,r,i){return e.PU?e.PU(t,r,i):n.prototype.PU.call(e,t,r,i)},n.IU=function(e,t,r){return n.EU(e,t,r,!0)},n.RU=function(e,t,r){return n.SU(e,t,r,!0)},n.AU=function(e,t,r){return n.PU(e,t,r,!0)},n.wU=function(e,t){return e.wU?e.wU(t):n.prototype.wU.call(e,t)},n.bU=function(e,t){return e.bU?e.bU(t):n.prototype.bU.call(e,t)},$.Ux&&($=$.Ux);var ie={},ne=new U;ie.Ux=s,s.prototype.kU=function(){return ne.has(this)||ne.set(this,{Ge:!1,mU:[],vU:[]}),ne.get(this)},s.prototype.CU=function(e,t){!this.isObservable&&this.makeObservable&&this.makeObservable();var r=this.kU();(t?r.vU:r.mU).push(e),this.OU=!!(r.vU.length+r.mU.length)},s.prototype.NU=function(e,t){var r,i=this.kU();r=t?i.vU:i.mU;var n=r.lastIndexOf(e);if(-1===n)throw Error("Can't remove listener: does not exist.");r.splice(n,1),this.OU=!!(i.vU.length+i.mU.length)},s.prototype._U=function(e,t,r,i){var n=this.kU();if(!n.Ge){n.Ge=!0;var s;s=i?n.vU:n.mU;try{s.forEach(function(n){n.oL?n.oL({FU:i?"before":"after",currentTarget:this,target:this,LU:e,DU:t,index:r}):(n=i?n.handleRangeWillChange||n:n.handleRangeChange||n,n.call&&n.call(this,e,t,r,i))},this)}finally{n.Ge=!1}}},s.prototype.MU=function(e){return this.CU(e,!0)},s.prototype.BU=function(e){return this.NU(e,!0)},s.prototype.xU=function(e,t,r){return this._U(e,t,r,!0)},ie.Ux&&(ie=ie.Ux);var se={},oe=U;se.Ux=Object,Object.empty=Object.freeze(Object.create(null)),Object.rl=function(e){return Object(e)===e},Object.UU=function(e){return Object.$x(e,"valueOf")&&(e=e.valueOf()),e};var ae=new oe;Object.hash=function(e){return Object.$x(e,"hash")?""+e.hash():Object(e)===e?(ae.has(e)||ae.set(e,Math.random().toString(36).slice(2)),ae.get(e)):""+e};var he=Object.prototype.hasOwnProperty;Object.HU=function(e,t){return he.call(e,t)},Object.$x=function(e,t){return null!=e&&"function"==typeof e[t]&&!he.call(e,t)},Object.has=function(e,t){if("object"!=typeof e)throw Error("Object.has can't accept non-object: "+typeof e);if(Object.$x(e,"has"))return e.has(t);if("string"==typeof t)return t in e&&e[t]!==Object.prototype[t];throw Error("Key must be a string for Object.has on plain objects")},Object.get=function(e,t,r){if("object"!=typeof e)throw Error("Object.get can't accept non-object: "+typeof e);return Object.$x(e,"get")?e.get(t,r):Object.has(e,t)?e[t]:r},Object.set=function(e,t,r){Object.$x(e,"set")?e.set(t,r):e[t]=r},Object.addEach=function(e,t){Object.$x(t,"forEach")?"function"==typeof t.keys?t.forEach(function(t,r){e[r]=t}):t.forEach(function(t){e[t[0]]=t[1]}):Object.keys(t).forEach(function(r){e[r]=t[r]})},Object.forEach=function(e,t,r){Object.keys(e).forEach(function(i){t.call(r,e[i],i,e)})},Object.map=function(e,t,r){return Object.keys(e).map(function(i){return t.call(r,e[i],i,e)})},Object.values=function(e){return Object.map(e,Function.identity)},Object.is=function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t},Object.qR=function(e,t,r){if(r=r||Object.qR,e=Object.UU(e),t=Object.UU(t),e===t)return 0!==e||1/e===1/t;if(Object.$x(e,"equals"))return e.qR(t,r);if(Object.$x(t,"equals"))return t.qR(e,r);if("object"==typeof e&&"object"==typeof t){var i=Object.getPrototypeOf(e),n=Object.getPrototypeOf(t);if(i===n&&(i===Object.prototype||null===i)){for(var s in e)if(!r(e[s],t[s]))return!1;for(s in t)if(!r(e[s],t[s]))return!1;return!0}}return e!==e&&t!==t},Object.$k=function(e,t){var e=Object.UU(e),t=Object.UU(t),r=typeof e;return e===t||r!==typeof t?0:"number"===r?e-t:"string"===r?e<t?-1:1:Object.$x(e,"compare")?e.$k(t):Object.$x(t,"compare")?-t.$k(e):0},Object.clone=function(e,t,r){if(e=Object.UU(e),r=r||new oe,void 0===t)t=1/0;else if(0===t)return e;if(Object.rl(e)){if(!r.has(e))if(Object.$x(e,"clone"))r.set(e,e.clone(t,r));else{var i=Object.getPrototypeOf(e);if(null!==i&&i!==Object.prototype)throw Error("Can't clone "+e);i=Object.create(i),r.set(e,i);for(var n in e)i[n]=Object.clone(e[n],t-1,r)}return r.get(e)}return e},Object.clear=function(e){if(Object.$x(e,"clear"))e.clear();else for(var t=Object.keys(e),r=t.length;r;)r--,delete e[t[r]];return e},se.Ux&&(se=se.Ux);var ue={},ce=se;ue.Ux=o,o.prototype.qR=function(e,t){return t=t||this.Px||ce.qR,this===e||!!e&&(this.length===e.length&&this.Qx(e).every(function(e){return t(e[0],e[1])}))},o.prototype.$k=function(e,t){if(t=t||this.Dx||ce.$k,this===e)return 0;if(!e)return 1;var r=Math.min(this.length,e.length),i=this.Qx(e).reduce(function(e,i,n){return 0===e?n>=r?e:t(i[0],i[1]):e},0);return 0===i?this.length-e.length:i},ue.Ux&&(ue=ue.Ux);var le={};le.Ux=a;var pe=se;if(pe.addEach(a.prototype,_.prototype),a.prototype.Vx=function(e){var t=[];return Reducible.addEach.call(t,e),t},a.prototype.qU=function(e,t){var r=a(this),i=0;if("[object Function]"!=pe.prototype.toString.call(e))throw new TypeError;return new r.constructor(function(){return e.call(t,r.next(),i++,r)})},a.prototype.VU=function(e,t){var r=a(this),i=0;if("[object Function]"!=pe.prototype.toString.call(e))throw new TypeError;return new r.constructor(function(){for(var n;;)if(n=r.next(),e.call(t,n,i++,r))return n})},a.prototype.reduce=function(e){var t,r=a(this),i=arguments[1],n=arguments[2],s=0;if("[object Function]"!=pe.prototype.toString.call(e))throw new TypeError;try{t=r.next(),i=1<arguments.length?e.call(n,i,t,s,r):t,s++}catch(o){if(isStopIteration(o)){if(1<arguments.length)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}throw o}try{for(;;)t=r.next(),i=e.call(n,i,t,s,r),s++}catch(h){if(isStopIteration(h))return i;throw h}},a.prototype.every=function(e){var t=a(this),r=!0;if("[object Function]"!=pe.prototype.toString.call(e))throw new TypeError;return t.qU.apply(t,arguments).forEach(function(e){if(!e)throw r=!1,StopIteration}),r},a.prototype.some=function(e){var t=a(this),r=!1;if("[object Function]"!=pe.prototype.toString.call(e))throw new TypeError;return t.qU.apply(t,arguments).forEach(function(e){if(e)throw r=!0,StopIteration}),r},a.prototype.concat=function(){return a.concat(Array.prototype.concat.apply(this,arguments))},a.prototype.jU=function(e,t){var r,i=a(this),n=!1;if("[object Function]"!=pe.prototype.toString.call(e))throw new TypeError;return i.forEach(function(s,o){if(!e.call(t,s,o,i))throw n=!0,r=s,StopIteration}),n?i.constructor([r]).concat(i):i.constructor([])},a.prototype.GU=function(e,t){var r=a(this);if("[object Function]"!=pe.prototype.toString.call(e))throw new TypeError;return r.qU(function(i,n){if(!e.call(t,i,n,r))throw StopIteration;return i})},a.prototype.VU=function(e,t){var r=a(this),i=0;if("[object Function]"!=pe.prototype.toString.call(e))throw new TypeError;return new r.constructor(function(){for(var n;;)if(n=r.next(),e.call(t,n,i++,r))return n})},a.prototype.Qx=function(){return a.QU(Array.prototype.concat.apply(this,arguments))},a.prototype.enumerate=function(e){return a.count(e).Qx(this)},a.bx=function(e){var t;return t=0,new a(function(){if("object"==typeof e)for(;!(t in e);){if(t>=e.length)throw StopIteration;t+=1}else if(t>=e.length)throw StopIteration;var r=e[t];return t+=1,r})},a.YU=function(e,t){2>arguments.length&&(t=1/0);var r=function(){throw StopIteration};return new a(function(){var i;try{return r()}catch(n){if(isStopIteration(n)){if(0>=t)throw n;return t--,i=a.bx(e),(r=i.next.bind(i))()}throw n}})},a.concat=function(e){var e=a(e),t=function(){throw StopIteration};return new a(function(){var r;try{return t()}catch(i){if(isStopIteration(i))return r=a(e.next()),(t=r.next.bind(r))();throw i}})},a.QU=function(e){return e=a(e).map(a),new a(1>e.length?[]:function(){var t,r=e.map(function(e){try{return e.next()}catch(r){if(!isStopIteration(r))throw r;t=!0}});if(t)throw StopIteration;return r})},a.Qx=function(){return a.QU(Array.prototype.slice.call(arguments))},a.chain=function(){return a.concat(Array.prototype.slice.call(arguments))},a.range=function(e,t,r){return 3>arguments.length&&(r=1),2>arguments.length&&(t=e,e=0),e=e||0,new a(function(){if(e>=t)throw StopIteration;if(isNaN(e))throw"";var i=e;return e+=r,i})},a.count=function(e,t){return a.range(e,1/0,t||1)},a.repeat=function(e,t){return 2>arguments.length&&(t=1/0),new a.range((+t)).qU(function(){return e})},"undefined"==typeof isStopIteration&&(e.KU=function(e){return"[object StopIteration]"===pe.prototype.toString.call(e)}),"undefined"==typeof StopIteration){e.StopIteration={};var fe=pe.prototype.toString;pe.prototype.toString=function(){return this===e.StopIteration||this instanceof e.JU?"[object StopIteration]":fe.call(this,arguments)}}"undefined"==typeof ReturnValue&&(e.JU=function(t){return this instanceof e.JU?void(this.value=t):new e.JU(t)}),le.Ux&&(le=le.Ux);var de={},ge=_,ye=ue,ve=U;de.Ux=Array,Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.from=function(e){var t=[];return t.addEach(e),t},Array.prototype.addEach=ge.prototype.addEach,Array.prototype.Hx=ge.prototype.Hx,Array.prototype.toArray=ge.prototype.toArray,Array.prototype.qx=ge.prototype.qx,Array.prototype.all=ge.prototype.all,Array.prototype.kr=ge.prototype.kr,Array.prototype.min=ge.prototype.min,Array.prototype.max=ge.prototype.max,Array.prototype.zI=ge.prototype.zI,Array.prototype.jx=ge.prototype.jx,Array.prototype.only=ge.prototype.only,Array.prototype.Gx=ge.prototype.Gx,Array.prototype.Qx=ge.prototype.Qx,Array.prototype.ON=ge.prototype.ON,Array.prototype.reversed=ge.prototype.reversed,Array.prototype.Vx=function(e){var t=new this.constructor;return t.addEach(e),t},Array.prototype.has=function(e,t){return-1!==this.find(e,t)},Array.prototype.get=function(e){return this[e]},Array.prototype.set=function(e,t){return this.splice(e,1,t),!0},Array.prototype.add=function(e){return this.push(e),!0},Array.prototype["delete"]=function(e,t){var r=this.find(e,t);return-1!==r&&(this.splice(r,1),!0)},Array.prototype.find=function(e,t){for(var t=t||this.Px||Object.qR,r=0;r<this.length;r++)if(r in this&&t(this[r],e))return r;return-1},Array.prototype.zU=function(e,t){var t=t||this.Px||Object.qR,r=this.length;do if(r--,r in this&&t(this[r],e))return r;while(0<r);return-1},Array.prototype.WU=function(e,t,r){var i=Array.prototype.slice.call(arguments,0,2);return r&&i.push.apply(i,r),this.splice.apply(this,i)},Array.prototype.Kx=function(){if(0===this.length)throw Error("Can't get one element from empty array.");for(var e in this)if(Object.HU(this,e))return this[e]},Array.prototype.clear=function(){return this.length=0,this},Array.prototype.$k=function(e,t){var r,i,n,s,t=t||Object.$k;if(this===e)return 0;if(!e||!Array.isArray(e))return ye.prototype.$k.call(this,e,t);for(i=Math.min(this.length,e.length),r=0;r<i;r++)if(r in this){if(!(r in e))return-1;if(n=this[r],s=e[r],n=t(n,s))return n}else if(r in e)return 1;return this.length-e.length},Array.prototype.qR=function(e){var t,r,i=i||Object.qR,n=0,s=this.length;if(this===e)return!0;if(!e||!Array.isArray(e))return ye.prototype.qR.call(this,e);if(s!==e.length)return!1;for(;n<s;++n)if(n in this){if(t=this[n],r=e[n],t!==r&&t&&r&&!i(t,r))return!1}else if(n in e)return!1;return!0},Array.prototype.clone=function(e,t){if(void 0===e)e=1/0;else if(0===e)return this;var r,t=t||new ve,i=[];for(r in this)Object.HU(this,r)&&(i[r]=Object.clone(this[r],e-1,t));return i},Array.prototype.bx=function(e,t){return new h(this,e,t)},Array.prototype.Iterator=h,h.prototype.next=function(){if(this.start===(null==this.end?this.fp.length:this.end))throw StopIteration;return this.fp[this.start++]},de.Ux&&(de=de.Ux);var me={};me.Ux=u;var Te=ue,Ee=$;Object.addEach(u.prototype,_.prototype),Object.addEach(u.prototype,Te.prototype),Object.addEach(u.prototype,Ee.prototype),u.prototype.Vx=function(e){return new this.constructor(e,this.Px,this.content)},u.prototype.find=function(e,t){for(var t=t||this.Px,r=this.head,i=r.next;i!==r;){if(t(i.value,e))return i;i=i.next}},u.prototype.zU=function(e,t){for(var t=t||this.Px,r=this.head,i=r.Rx;i!==r;){if(t(i.value,e))return i;i=i.Rx}},u.prototype.has=function(e,t){return!!this.find(e,t)},u.prototype.get=function(e,t){var r=this.find(e,t);return r?r.value:this.content()},u.prototype["delete"]=function(e,t){var r=this.zU(e,t);return!!r&&(r["delete"](),this.length--,!0)},u.prototype.clear=function(){this.head.next=this.head.Rx=this.head,this.length=0},u.prototype.add=function(e){return this.head.XU(new this.Node(e)),this.length++,!0},u.prototype.push=function(){for(var e=this.head,t=0;t<arguments.length;t++){var r=new this.Node(arguments[t]);e.XU(r),this.length++}},u.prototype.unshift=function(){for(var e=this.head,t=0;t<arguments.length;t++){var r=new this.Node(arguments[t]);e.$U(r),this.length++,e=r}},u.prototype.pop=function(){var e,t=this.head;return t.Rx!==t&&(e=t.Rx.value,t.Rx["delete"](),this.length--),e},u.prototype.shift=function(){var e,t=this.head;return t.Rx!==t&&(e=t.next.value,t.next["delete"](),this.length--),e},u.prototype.ZU=function(e,t){var r=this.head;if("number"==typeof e){var i=e;if(0<=i)for(e=r.next;i&&(i--,e=e.next,!(e==r)););else for(e=r;0>i&&(i++,e=e.Rx,!(e==r)););return e}return e||t},u.prototype.slice=function(e,t){for(var r=[],i=this.head,e=this.ZU(e,i.next),t=this.ZU(t,i);e!==t&&e!==i;)r.push(e.value),e=e.next;return r},u.prototype.splice=function(e,t){return this.WU(e,t,Array.prototype.slice.call(arguments,2))},u.prototype.WU=function(e,t,r){var i=[],n=e,e=this.ZU(e,this.head);for(void 0===t&&(t=1/0);t--&&0<=t&&e!==this.head;)i.push(e.value),e["delete"](),e=e.next,this.length--;if(r){for(null===n&&e===this.head&&(e=this.head.next),t=0;t<r.length;t++)n=new this.Node(r[t]),e.XU(n);this.length+=r.length}return i},u.prototype.reverse=function(){var e=this.head;do{var t=e.next;e.next=e.Rx,e.Rx=t,e=e.next}while(e!==this.head);return this},u.prototype.reduce=function(e,t,r){for(var i=this.head,n=i.next;n!==i;)t=e.call(r,t,n.value,n,this),n=n.next;return t},u.prototype.reduceRight=function(e,t,r){for(var i=this.head,n=i.Rx;n!==i;)t=e.call(r,t,n.value,n,this),n=n.Rx;return t},u.prototype.Kx=function(){if(this.head===this.head.next)throw Error("Can't get one value from empty list");return this.head.next.value},u.prototype.bx=function(){return new c(this.head)},c.prototype.next=function(){if(this.kx===this.head)throw StopIteration;var e=this.kx.value;return this.kx=this.kx.next,e},u.prototype.Node=l,l.prototype["delete"]=function(){this.Rx.next=this.next,this.next.Rx=this.Rx},l.prototype.XU=function(e){var t=this.Rx;this.Rx=e,e.Rx=t,t.next=e,e.next=this},l.prototype.$U=function(e){var t=this.next;this.next=e,e.next=t,t.Rx=e,e.Rx=this},me.Ux&&(me=me.Ux);var we={},Ie=me;we.Ux=p,p.prototype.eH=function(){return this.tH||(this.tH={vU:new Ie,mU:new Ie}),this.tH},p.prototype.rH=function(e,t){this.makeObservable&&!this.dispatchMapChanges&&this.makeObservable();var r=this.eH();(t?r.vU:r.mU).push(e),this.iH=!0},p.prototype.nH=function(e,t){var r=this.eH(),r=(t?r.vU:r.mU).zU(e);if(!r)throw Error("Can't remove listener: does not exist.");r["delete"]()},p.prototype.sH=function(e,t,r){var i=this.eH(),n="handleMap"+((r?"Will":"")+"Change");(r?i.vU:i.mU).forEach(function(r){var i=r,r=r[n]||r;r.call&&r.call(i,t,e,this)},this)},p.prototype.oH=function(e){return this.rH(e,!0)},p.prototype.aH=function(e){return this.nH(e,!0)},p.prototype.hH=function(e,t){return this.sH(e,t,!0)},we.Ux&&(we=we.Ux);var Se={},be=se,Re=we,Pe=$;Se.Ux=f,be.addEach(f.prototype,Re.prototype),be.addEach(f.prototype,Pe.prototype),f.prototype.addEach=function(e){e&&be(e)===e&&("function"==typeof e.forEach?"function"==typeof e.keys?e.forEach(function(e,t){this.set(t,e)},this):e.forEach(function(e){this.set(e[0],e[1])},this):be.keys(e).forEach(function(t){this.set(t,e[t])},this))},f.prototype.get=function(e,t){var r=this.RD.get(new this.uH(e));return r?r.value:1<arguments.length?t:this.content(e)},f.prototype.set=function(e,t){var r=new this.uH(e,t),i=this.RD.get(r),n=!1;return i?(this.iH&&this.hH(e,i.value),i.value=t):(this.iH&&this.hH(e,void 0),this.RD.add(r)&&(this.length++,n=!0)),this.iH&&this.sH(e,t),n},f.prototype.add=function(e,t){return this.set(t,e)},f.prototype.has=function(e){return this.RD.has(new this.uH(e))},f.prototype["delete"]=function(e){var t=new this.uH(e);if(this.RD.has(t)){var r=this.RD.get(t).value;return this.iH&&this.hH(e,r),this.RD["delete"](t),this.length--,this.iH&&this.sH(e,void 0),!0}return!1},f.prototype.clear=function(){this.RD.clear(),this.length=0},f.prototype.reduce=function(e,t,r){return this.RD.reduce(function(t,i){return e.call(r,t,i.value,i.key,this)},t,this)},f.prototype.reduceRight=function(e,t,r){return this.RD.reduceRight(function(t,i){return e.call(r,t,i.value,i.key,this)},t,this)},f.prototype.keys=function(){return this.map(function(e,t){return t})},f.prototype.values=function(){return this.map(Function.identity)},f.prototype.cH=function(){return this.map(function(e,t){return[t,e]})},f.prototype.qR=function(e,t){return t=t||be.qR,this===e||(be.$x(e,"every")?e.length===this.length&&e.every(function(e,r){return t(this.get(r),e)},this):be.keys(e).length===this.length&&be.keys(e).every(function(r){return t(this.get(r),e[r])},this))},f.prototype.uH=function(e,t){this.key=e,this.value=t},Se.Ux&&(Se=Se.Ux);var Ae={},ke=_,Ce=Se,Oe=$;Ae.Ux=d,Object.addEach(d.prototype,ke.prototype),
Object.addEach(d.prototype,Ce.prototype),Object.addEach(d.prototype,Oe.prototype),d.prototype.Vx=function(e){return new this.constructor(e,this.mangle,this.content)},d.prototype.lH=function(e){if("string"!=typeof e)throw new TypeError("key must be a string.")},d.prototype.get=function(e,t){this.lH(e);var r="~"+e;return r in this.RD?this.RD[r]:1<arguments.length?t:this.content()},d.prototype.set=function(e,t){this.lH(e);var r="~"+e;return r in this.RD?(this.RD[r]=t,!1):(this.length++,this.RD[r]=t,!0)},d.prototype.has=function(e){return this.lH(e),"~"+e in this.RD},d.prototype["delete"]=function(e){return this.lH(e),"~"+e in this.RD&&(delete this.RD["~"+e],this.length--,!0)},d.prototype.clear=function(){for(var e in this.RD)delete this.RD[e];this.length=0},d.prototype.reduce=function(e,t,r){for(var i in this.RD)t=e.call(r,t,this.RD[i],i.slice(1),this);return t},d.prototype.Kx=function(){for(var e in this.RD)return this.RD[e];throw Error("Can't get one value from empty dictionary.")},Ae.Ux&&(Ae=Ae.Ux);var Ne={},_e=Ae,Fe=me,Le=_,De=F,Me=B,Be=$;Ne.Ux=g,Object.addEach(g.prototype,Le.prototype),Object.addEach(g.prototype,De.prototype),Object.addEach(g.prototype,Be.prototype),g.prototype.Nx=_e,g.prototype._x=Fe,g.prototype.Vx=function(e){return new this.constructor(e,this.Px,this.Cx,this.content)},g.prototype.has=function(e){var t=this.Cx(e);return this.Ox.get(t).has(e)},g.prototype.get=function(e){var t=this.Cx(e),r=this.Ox;return r.has(t)?r.get(t).get(e):this.content(e)},g.prototype["delete"]=function(e){var t=this.Cx(e),r=this.Ox;if(r.has(t)){var i=r.get(t);if(i["delete"](e))return this.length--,0===i.length&&r["delete"](t),!0}return!1},g.prototype.clear=function(){this.Ox.clear(),this.length=0},g.prototype.add=function(e){var t=this.Cx(e),r=this.Ox;return r.has(t)||r.set(t,new this._x(null,this.Px)),!r.get(t).has(e)&&(r.get(t).add(e),this.length++,!0)},g.prototype.reduce=function(e,t,r){return this.Ox.reduce(function(t,i){return i.reduce(function(t,i){return e.call(r,t,i,i,this)},t,this)},t,this)},g.prototype.Kx=function(){if(0===this.length)throw Error("Can't get one value from empty set.");return this.Ox.Kx().Kx()},g.prototype.bx=function(){return this.Ox.values().Gx().bx()},g.prototype.log=function(e,t,r,i){e=e||Me.hU,t=t||this.pH,r||(r=console.log,i=console);var r=r.bind(i),n=this.Ox,s=n.keys();s.forEach(function(o,a){var h,u;a===s.length-1?(h=e.nU,u=" "):(h=0===a?e.rU:e.sU,u=e.oU);var c=n.get(o);r.call(i,h+e.eU+e.rU+" "+o),c.forEach(function(n,s){var o,a;s===c.head.Rx?(o=e.nU,a=" "):(o=e.sU,a=e.oU);var h;t(s,function(t){h?r.call(i,u+" "+a+"  "+t):(r.call(i,u+" "+o+e.eU+e.eU+t),h=!0)},function(t){r.call(i,u+" "+e.oU+"  "+t)})})})},g.prototype.pH=function(e,t){var r=e.value;Object(r)===r?JSON.stringify(r,null,4).split("\n").forEach(function(e){t(" "+e)}):t(" "+r)},Ne.Ux&&(Ne=Ne.Ux);var xe={},Ue=Ne,He=_,qe=Se,Ve=$;xe.Ux=y,Object.addEach(y.prototype,He.prototype),Object.addEach(y.prototype,qe.prototype),Object.addEach(y.prototype,Ve.prototype),y.prototype.Vx=function(e){return new this.constructor(e,this.Px,this.Cx,this.content)},y.prototype.log=function(e,t){t=t||this.stringify,this.RD.log(e,t)},y.prototype.stringify=function(e,t){return t+JSON.stringify(e.key)+": "+JSON.stringify(e.value)},xe.Ux&&(xe=xe.Ux);var je={},Ge=me,Qe=Ne,Ye=_,Ke=F,Je=$,ze=ie;je.Ux=v,Object.addEach(v.prototype,Ye.prototype),Object.addEach(v.prototype,Ke.prototype),Object.addEach(v.prototype,Je.prototype),Object.addEach(v.prototype,ze.prototype),v.prototype.Fx=Ge,v.prototype.bD=Qe,v.prototype.Vx=function(e){return new this.constructor(e,this.Px,this.Cx,this.content)},v.prototype.has=function(e){return e=new this.order.Node(e),this.RD.has(e)},v.prototype.get=function(e){var t=new this.order.Node(e);return(t=this.RD.get(t))?t.value:this.content(e)},v.prototype.add=function(e){var t=new this.order.Node(e);return!this.RD.has(t)&&(this.OU&&this.xU([e],[],0),this.order.add(e),t=this.order.head.Rx,this.RD.add(t),this.length++,this.OU&&this._U([e],[],0),!0)},v.prototype["delete"]=function(e){var t=new this.order.Node(e);return!!this.RD.has(t)&&(this.OU&&this.xU([],[e],0),t=this.RD.get(t),this.RD["delete"](t),t["delete"](),this.length--,this.OU&&this._U([],[e],0),!0)},v.prototype.Kx=function(){if(0===this.length)throw Error("Can't get one value from empty set.");return this.RD.Kx().value},v.prototype.clear=function(){this.RD.clear(),this.order.clear(),this.length=0},v.prototype.reduce=function(e,t,r){return this.order.reduce(function(t,i){return e.call(r,t,i,i,this)},t,this)},v.prototype.reduceRight=function(e,t,r){return this.order.reduceRight(function(t,i){return e.call(r,t,i,i,this)},t,this)},v.prototype.bx=function(){return this.order.bx()},v.prototype.log=function(){var e=this.RD;return e.log.apply(e,arguments)},je.Ux&&(je=je.Ux);var We={},Xe=je,$e=_,Ze=F,et=$;We.Ux=m,Object.addEach(m.prototype,$e.prototype),Object.addEach(m.prototype,Ze.prototype),Object.addEach(m.prototype,et.prototype),m.prototype.Vx=function(e){return new this.constructor(e,this.maxLength,this.Px,this.Cx,this.content)},m.prototype.has=function(e){return this.RD.has(e)},m.prototype.get=function(e){return e=this.RD.get(e),void 0!==e?(this.RD["delete"](e),this.RD.add(e)):e=this.content(),e},m.prototype.add=function(e){return this.RD.has(e)&&(this.RD["delete"](e),this.length--),this.RD.add(e),this.length++,!(this.RD.length>this.maxLength)||(this.RD["delete"](this.RD.order.head.next.value),this.length--,!1)},m.prototype["delete"]=function(e){return!!this.RD["delete"](e)&&(this.length--,!0)},m.prototype.Kx=function(){if(0===this.length)throw Error("Can't get one value from empty collection.");return this.RD.Kx()},m.prototype.clear=function(){this.RD.clear(),this.length=0},m.prototype.reduce=function(e,t,r){return this.RD.reduce(function(t,i){return e.call(r,t,i,i,this)},t,this)},m.prototype.reduceRight=function(e,t,r){return this.RD.reduceRight(function(e,t){return callback.call(r,e,t,t,this)},basis,this)},m.prototype.bx=function(){return this.RD.bx()},We.Ux&&(We=We.Ux);var tt={},rt=We,it=_,nt=Se,st=$;tt.Ux=T,Object.addEach(T.prototype,it.prototype),Object.addEach(T.prototype,nt.prototype),Object.addEach(T.prototype,st.prototype),T.prototype.Vx=function(e){return new this.constructor(e,this.maxLength,this.Px,this.Cx,this.content)},T.prototype.log=function(e,t){t=t||this.stringify,this.RD.log(e,t)},T.prototype.stringify=function(e,t){return t+JSON.stringify(e.key)+": "+JSON.stringify(e.value)},tt.Ux&&(tt=tt.Ux);var ot={},at=je,ht=_,ut=Se,ct=$;ot.Ux=E,Object.addEach(E.prototype,ht.prototype),Object.addEach(E.prototype,ut.prototype),Object.addEach(E.prototype,ct.prototype),E.prototype.Vx=function(e){return new this.constructor(e,this.Px,this.Cx,this.content)},E.prototype.log=function(e,t){t=t||this.stringify,this.RD.log(e,t)},E.prototype.stringify=function(e,t){return t+JSON.stringify(e.key)+": "+JSON.stringify(e.value)},ot.Ux&&(ot=ot.Ux);var lt={},pt=ot;lt.Ux=w,w.prototype=Object.create(pt.prototype),w.prototype.constructor=w,w.prototype.Vx=function(e){return new this.constructor(e,this.Lx,this.Px,this.Cx)},w.prototype.set=function(e,t){var r=this.get(e);r.WU(0,r.length,t)},w.prototype.Lx=function(){return[]},lt.Ux&&(lt=lt.Ux);var ft={};ft.Ux=I;var dt=$,gt=ie;Object.addEach(I.prototype,_.prototype),Object.addEach(I.prototype,dt.prototype),Object.addEach(I.prototype,gt.prototype),I.prototype.Vx=function(e){return new this.constructor(e,this.Px,this.Dx,this.content)},I.prototype.has=function(e){var t=S(this.fp,e,this.Dx);return 0<=t&&this.Px(this.fp[t],e)},I.prototype.get=function(e){var t=b(this.fp,e,this.Dx,this.Px);return-1!==t?this.fp[t]:this.content(e)},I.prototype.add=function(e){var t;t=this.fp;var r=this.Dx,i=S(t,e,r);if(0>i)t=-i-1;else{for(var n=t.length-1;i<n&&0===r(e,t[i+1]);)i++;t=i}return this.OU&&this.xU([e],[],t),this.fp.splice(t,0,e),this.length++,this.OU&&this._U([e],[],t),!0},I.prototype["delete"]=function(e){var t=b(this.fp,e,this.Dx,this.Px);return-1!==t&&(this.OU&&this.xU([],[e],t),this.fp.splice(t,1),this.length--,this.OU&&this._U([],[e],t),!0)},I.prototype.indexOf=function(e){return b(this.fp,e,this.Dx,this.Px)},I.prototype.lastIndexOf=function(e){return R(this.fp,e,this.Dx,this.Px)},I.prototype.find=function(e){return b(this.fp,e,this.Dx,this.Px)},I.prototype.zU=function(e){return R(this.fp,e,this.Dx,this.Px)},I.prototype.push=function(){this.addEach(arguments)},I.prototype.unshift=function(){this.addEach(arguments)},I.prototype.pop=function(){return this.fp.pop()},I.prototype.shift=function(){return this.fp.shift()},I.prototype.slice=function(){return this.fp.slice.apply(this.fp,arguments)},I.prototype.splice=function(e,t){return this.WU(e,t,Array.prototype.slice.call(arguments,2))},I.prototype.WU=function(e,t,r){if(void 0===e&&void 0===t)return[];e=e||0,0>e&&(e+=this.length),void 0===t&&(t=1/0);var i=this.slice(e,e+t);return this.OU&&this.xU(r,i,e),this.fp.splice(e,t),this.addEach(r),this.OU&&this._U(r,i,e),i},I.prototype.reduce=function(e,t,r){return this.fp.reduce(function(t,i,n){return e.call(r,t,i,n,this)},t,this)},I.prototype.reduceRight=function(e,t,r){return this.fp.reduceRight(function(e,t,i){return callback.call(r,e,t,i,this)},basis,this)},I.prototype.min=function(){if(this.length)return this.fp[0]},I.prototype.max=function(){if(this.length)return this.fp[this.length-1]},I.prototype.Kx=function(){return this.fp.Kx()},I.prototype.clear=function(){var e;this.OU&&(e=this.fp.slice(),this.xU([],e,0)),this.length=0,this.fp.clear(),this.OU&&this._U([],e,0)},I.prototype.qR=function(e,t){return this.fp.qR(e,t)},I.prototype.$k=function(e,t){return this.fp.$k(e,t)},I.prototype.bx=function(e,t){return new this.Iterator(this.fp,e,t)},I.prototype.Iterator=Array.prototype.Iterator,ft.Ux&&(ft=ft.Ux);var yt={};yt.Ux=P;var vt=ft,mt=F,Tt=$;P.prototype=Object.create(vt.prototype),P.prototype.constructor=P,Object.addEach(P.prototype,mt.prototype),Object.addEach(P.prototype,Tt.prototype),P.prototype.add=function(e){return!this.has(e)&&(vt.prototype.add.call(this,e),!0)},P.prototype.reduce=function(e,t,r){var i=this;return this.fp.reduce(function(t,n,s){return e.call(r,t,n,n,i,s)},t)},P.prototype.reduceRight=function(e,t,r){var i=this;return this.fp.reduceRight(function(t,n,s){return e.call(r,t,n,n,i,s)},t)},yt.Ux&&(yt=yt.Ux);var Et={},wt=yt,It=_,St=Se,bt=$;Et.Ux=A,Object.addEach(A.prototype,It.prototype),Object.addEach(A.prototype,St.prototype),Object.addEach(A.prototype,bt.prototype),A.prototype.Vx=function(e){return new this.constructor(e,this.Px,this.Dx,this.content)},Et.Ux&&(Et=Et.Ux);var Rt={};Rt.Ux=k;var Pt=F,At=$,kt=ie,Ct=B;Object.addEach(k.prototype,_.prototype),Object.addEach(k.prototype,Pt.prototype),Object.addEach(k.prototype,At.prototype),Object.addEach(k.prototype,kt.prototype),k.prototype.Vx=function(e){return new this.constructor(e,this.Px,this.Dx,this.content)},k.prototype.has=function(e){return!!this.root&&(this.Bx(e),this.Px(e,this.root.value))},k.prototype.get=function(e){return this.root&&(this.Bx(e),this.Px(e,this.root.value))?this.root.value:this.content(e)},k.prototype.add=function(e){var t=new this.Node(e);return this.root?(this.Bx(e),!this.Px(e,this.root.value)&&(this.OU&&this.xU([e],[],this.root.index),0>this.Dx(e,this.root.value)?(t.right=this.root,t.left=this.root.left,this.root.left=null):(t.left=this.root,t.right=this.root.right,this.root.right=null),this.root.fH(),t.fH(),this.root=t,this.length++,this.OU&&this._U([e],[],this.root.index),!0)):(this.OU&&this.xU([e],[],0),this.root=t,this.length++,this.OU&&this._U([e],[],0),!0)},k.prototype["delete"]=function(e){if(this.root&&(this.Bx(e),this.Px(e,this.root.value))){var t=this.root.index;if(this.OU&&this.xU([],[e],t),this.root.left){var r=this.root.right;this.root=this.root.left,this.Bx(e),this.root.right=r}else this.root=this.root.right;return this.length--,this.root&&this.root.fH(),this.OU&&this._U([],[e],t),!0}return!1},k.prototype.indexOf=function(e){return this.root&&(this.Bx(e),this.Px(e,this.root.value))?this.root.index:-1},k.prototype.find=function(e){if(this.root&&(this.Bx(e),this.Px(e,this.root.value)))return this.root},k.prototype.dH=function(e){if(this.root){for(e=e||this.root;e.right;)e=e.right;return e}},k.prototype.gH=function(e){if(this.root){for(e=e||this.root;e.left;)e=e.left;return e}},k.prototype.yH=function(e){if(this.root)return this.Bx(e),this.root},k.prototype.vH=function(e){if(this.root)return this.Bx(e),this.root.xx()},k.prototype.Mx=function(e){if(this.root)return this.Bx(e),0===this.Dx(e,this.root.value)?this.root:this.root.mH()},k.prototype.TH=function(e){if(this.root)return this.Bx(e),this.Dx(e,this.root.value),this.root.mH()},k.prototype.pop=function(){if(this.root){var e=this.dH();return this["delete"](e.value),e.value}},k.prototype.shift=function(){if(this.root){var e=this.gH();return this["delete"](e.value),e.value}},k.prototype.push=function(){this.addEach(arguments)},k.prototype.unshift=function(){this.addEach(arguments)},k.prototype.slice=function(e,t){e=e||0,t=t||this.length,0>e&&(e+=this.length),0>t&&(t+=this.length);var r=[];if(this.root)for(this.EH(e);this.root.index<t&&(r.push(this.root.value),this.root.right);)this.Bx(this.root.mH().value);return r},k.prototype.splice=function(e,t){return this.WU(e,t,Array.prototype.slice.call(arguments,2))},k.prototype.WU=function(e,t,r){if(void 0===e&&void 0===t)return[];e=e||0,0>e&&(e+=this.length),void 0===t&&(t=1/0);var i=[];if(this.root)for(this.EH(e),e=0;e<t;e++){i.push(this.root.value);var n=this.root.mH();if(this["delete"](this.root.value),!n)break;this.Bx(n.value)}return this.addEach(r),i},k.prototype.Bx=function(e){var t,r,i,n,s,o;if(this.root){for(t=r=i=new this.Node,o=new this.Node,s=this.root;;)if(n=this.Dx(e,s.value),0>n){if(!s.left)break;if(0>this.Dx(e,s.left.value)&&(n=s.left,s.left=n.right,s.fH(),n.right=s,n.fH(),s=n,!s.left))break;n=new C,n.right=s,n.left=o.left,o.left=n,i.left=s,i.fH(),i=s,s=s.left}else{if(!(0<n))break;if(!s.right)break;if(0<this.Dx(e,s.right.value)&&(n=s.right,s.right=n.left,s.fH(),n.left=s,n.fH(),s=n,!s.right))break;n=new C,n.left=s,n.right=o.right,o.right=n,r.right=s,r.fH(),r=s,s=s.right}for(r.right=s.left,r.fH(),i.left=s.right,i.fH(),s.left=t.right,s.right=t.left;o.left;)o.left.right.fH(),o.left=o.left.left;for(;o.right;)o.right.left.fH(),o.right=o.right.right;s.fH(),this.root=s}},k.prototype.EH=function(e){if(this.root){for(var t=this.root,r=this.root.index;r!==e;)if(r>e&&t.left)t=t.left,r-=1+(t.right?t.right.length:0);else{if(!(r<e&&t.right))break;t=t.right,r+=1+(t.left?t.left.length:0)}return this.Bx(t.value),this.root.index===e}return!1},k.prototype.reduce=function(e,t,r){return this.root&&(t=this.root.reduce(e,t,r,this)),t},k.prototype.reduceRight=function(e,t,r){return this.root&&(t=this.root.reduceRight(e,t,r,this)),t},k.prototype.min=function(e){if(e=this.gH(e))return e.value},k.prototype.max=function(e){if(e=this.dH(e))return e.value},k.prototype.Kx=function(){if(!this.root)throw Error("Can't get one value from empty set");return this.root.value},k.prototype.clear=function(){var e;this.OU&&(e=this.toArray(),this.xU([],e,0)),this.root=null,this.length=0,this.OU&&this._U([],e,0)},k.prototype.bx=function(e,t){return new this.Iterator(this,e,t)},k.prototype.Iterator=O,k.prototype.summary=function(){return this.root?this.root.summary():"()"},k.prototype.log=function(e,t,r,i){e=e||Ct.aU,t=t||this.pH,r||(r=console.log,i=console),r=r.bind(i),this.root&&this.root.log(e,t,r,r)},k.prototype.pH=function(e,t){t(" "+e.value)},k.wH=Ct,k.prototype.Node=C,C.prototype.reduce=function(e,t,r,i,n){return n=n||0,this.left&&(t=this.left.reduce(e,t,r,i,n+1)),t=e.call(r,t,this.value,this.value,i,this,n),this.right&&(t=this.right.reduce(e,t,r,i,n+1)),t},C.prototype.reduceRight=function(e,t,r,i,n){return n=n||0,this.right&&(t=this.right.reduce(e,t,r,i,n+1)),t=e.call(r,t,this.value,this.value,i,this,n),this.left&&(t=this.left.reduce(e,t,r,i,n+1)),t},C.prototype.fH=function(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0),this.index=this.left?this.left.length:0},C.prototype.IH=function(){var e;if(e=1+(this.left?this.left.IH():0),e+=this.right?this.right.IH():0,this.length!==e)throw Error("Integrity check failed: "+this.summary());return e},C.prototype.mH=function(){var e=this;if(e.right){for(e=e.right;e.left;)e=e.left;return e}},C.prototype.xx=function(){var e=this;if(e.left){for(e=e.left;e.right;)e=e.right;return e}},C.prototype.summary=function(){var e=this.value||"-",e=e+(" <"+this.length);return this.left||this.right?"("+e+" "+(this.left?this.left.summary():"()")+", "+(this.right?this.right.summary():"()")+")":"("+e+")"},C.prototype.log=function(e,t,r,i){var n,s=this;n=this.left&&this.right?e.zx:this.left?e.tU:this.right?e.rU:e.eU;var o;this.left&&this.left.log(e,t,function(t){o?i(e.oU+" "+t):(o=!0,i(e.iU+e.eU+t))},function(e){i("  "+e)});var a;t(this,function(t){a?r((s.right?e.oU:" ")+t):(a=!0,r(n+t))},function(t){i((s.left?e.oU:" ")+t)});var h;this.right&&this.right.log(e,t,function(t){h?r("  "+t):(h=!0,r(e.nU+e.eU+t))},function(t){r(e.oU+" "+t)})},O.prototype.next=function(){var e;if(e=this.Rx?this.set.TH(this.Rx.value):this.set.gH(),!e)throw StopIteration;if(void 0!==this.end&&0<=this.set.Dx(e.value,this.end))throw StopIteration;return this.Rx=e,e.value},Rt.Ux&&(Rt=Rt.Ux);var Ot={},Nt=Rt,_t=_,Ft=Se,Lt=$;Ot.Ux=N,Object.addEach(N.prototype,_t.prototype),Object.addEach(N.prototype,Ft.prototype),Object.addEach(N.prototype,Lt.prototype),N.prototype.Vx=function(e){return new this.constructor(e,this.Px,this.Dx,this.content)},N.prototype.log=function(e,t){t=t||this.stringify,this.RD.log(e,t)},N.prototype.SH=function(e,t,r,i){i=i||this.stringify,this.RD.SH(e,t,r,i)},N.prototype.stringify=function(e,t,r,i){e.call(t,i+" "+r.value.key+": "+r.value.value)},Ot.Ux&&(Ot=Ot.Ux),e.bH=me,e.Set=je,e.Map=ot,e.RH=lt,e.WeakMap=U,e.PH=Rt,e.Mt=Ot,e.AH=We,e.kH=tt,e.CH=ft,e.Bt=yt,e.OH=Et,e.NH=Ne,e._H=xe,e.FH=Ae,e.Iterator=le}(this)},function(e,t){e.i=function(){return new Function}},function(e,t){e.i={"package":"HiveMsgs",messages:[{name:"Chunk",fields:[{rule:"required",type:"int32",name:"transferId",id:1},{rule:"required",type:"int32",name:"totalSize",id:2},{rule:"required",type:"int32",name:"chunkSize",id:3},{rule:"required",type:"bytes",name:"data",id:4},{rule:"optional",type:"string",name:"headers",id:5}]},{name:"Haves",fields:[{rule:"repeated",type:"Have",name:"have",id:1}]},{name:"Have",fields:[{rule:"required",type:"string",name:"fragmentId",id:1},{rule:"required",type:"int32",name:"size",id:2},{rule:"required",type:"int32",name:"type",id:3},{rule:"required",type:"int32",name:"id",id:4},{rule:"required",type:"int32",name:"bitrate",id:5},{rule:"required",type:"int32",name:"duration",id:6},{rule:"required",type:"float",name:"uploadScore",id:7}]},{name:"Ping",fields:[{rule:"required",type:"string",name:"id",id:1},{rule:"required",type:"uint64",name:"startTs",id:2}]},{name:"Pong",fields:[{rule:"required",type:"string",name:"id",id:1},{rule:"required",type:"bytes",name:"data",id:2},{rule:"required",type:"int32",name:"dataSize",id:3},{rule:"required",type:"uint64",name:"startTs",id:4}]},{name:"Request",fields:[{rule:"required",type:"string",name:"fragmentId",id:1},{rule:"required",type:"int32",name:"transferId",id:2}]},{name:"DoNotHave",fields:[{rule:"required",type:"int32",name:"transferId",id:1}]},{name:"Cancel",fields:[{rule:"required",type:"int32",name:"transferId",id:1}]},{name:"Ack",fields:[{rule:"optional",type:"int32",name:"transferId",id:1}]},{name:"Close",fields:[{rule:"required",type:"int32",name:"type",id:1}]},{name:"OutPartnershipRequest",fields:[{rule:"required",type:"string",name:"guid",id:1},{rule:"required",type:"string",name:"contextId",id:2},{rule:"required",type:"string",name:"p2pProtocolVersion",id:3},{rule:"optional",type:"int32",name:"internalAs",id:4},{rule:"optional",type:"int32",name:"externalAs",id:5},{rule:"optional",type:"string",name:"publicIpString",id:6},{rule:"optional",type:"string",name:"privateIpString",id:7},{rule:"required",type:"string",name:"reportingGuid",id:8}]},{name:"OutPartnershipResponse",fields:[{rule:"required",type:"int32",name:"accept",id:1},{rule:"optional",type:"int32",name:"internalAs",id:2},{rule:"optional",type:"int32",name:"externalAs",id:3},{rule:"optional",type:"string",name:"publicIpString",id:4},{rule:"optional",type:"string",name:"privateIpString",id:5},{rule:"optional",type:"string",name:"reportingGuid",id:6}]},{name:"PeerInfoMessage",fields:[{rule:"required",type:"string",name:"guid",id:1},{rule:"optional",type:"string",name:"publicIpString",id:2},{rule:"optional",type:"string",name:"privateIpString",id:3},{rule:"optional",type:"int32",name:"internalAs",id:4},{rule:"optional",type:"int32",name:"externalAs",id:5}]},{name:"UDPHandshakeMessage",fields:[{rule:"required",type:"string",name:"uuid",id:1},{rule:"required",type:"string",name:"streamId",id:2},{rule:"required",type:"float",name:"udpScore",id:3},{rule:"required",type:"bool",name:"isLeader",id:4}]},{name:"UDPHandshakeResponse",fields:[{rule:"required",type:"string",name:"accept",id:1}]},{name:"UDPSwitchLeadershipRequest",fields:[{rule:"required",type:"string",name:"uuid",id:1},{rule:"required",type:"float",name:"udpScore",id:2}]},{name:"UDPSwitchLeadershipAck",fields:[{rule:"required",type:"bool",name:"ok",id:1}]},{name:"Bitrate",fields:[{rule:"required",type:"string",name:"guid",id:1},{rule:"required",type:"int32",name:"bitrate",id:2}]}]}},function(e,t,r){var i,n,s;(function(e){/**
	 * @license ProtoBuf.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
	 * Released under the Apache License, Version 2.0
	 * see: https://github.com/dcodeIO/ProtoBuf.js for details
	 */
!function(o){"use strict";function a(e){var t={};return t.qm=e,t.Ky=e.Ky||null,t.VERSION="4.0.0-b3",t.LH={},t.LH.DH=0,t.LH.MH=1,t.LH.BH=2,t.LH.xH=3,t.LH.UH=4,t.LH.HH=5,t.qH=[t.LH.DH,t.LH.MH,t.LH.HH],t.VH={int32:{name:"int32",jH:t.LH.DH,defaultValue:0},uint32:{name:"uint32",jH:t.LH.DH,defaultValue:0},sint32:{name:"sint32",jH:t.LH.DH,defaultValue:0},int64:{name:"int64",jH:t.LH.DH,defaultValue:t.Ky?t.Ky.ZERO:void 0},uint64:{name:"uint64",jH:t.LH.DH,defaultValue:t.Ky?t.Ky.Fk:void 0},sint64:{name:"sint64",jH:t.LH.DH,defaultValue:t.Ky?t.Ky.ZERO:void 0},bool:{name:"bool",jH:t.LH.DH,defaultValue:!1},"double":{name:"double",jH:t.LH.MH,defaultValue:0},string:{name:"string",jH:t.LH.BH,defaultValue:""},bytes:{name:"bytes",jH:t.LH.BH,defaultValue:null},fixed32:{name:"fixed32",jH:t.LH.HH,defaultValue:0},sfixed32:{name:"sfixed32",jH:t.LH.HH,defaultValue:0},fixed64:{name:"fixed64",jH:t.LH.MH,defaultValue:t.Ky?t.Ky.Fk:void 0},sfixed64:{name:"sfixed64",jH:t.LH.MH,defaultValue:t.Ky?t.Ky.ZERO:void 0},"float":{name:"float",jH:t.LH.HH,defaultValue:0},"enum":{name:"enum",jH:t.LH.DH,defaultValue:0},message:{name:"message",jH:t.LH.BH,defaultValue:null},group:{name:"group",jH:t.LH.xH,defaultValue:null}},t.GH=[t.VH.int32,t.VH.sint32,t.VH.sfixed32,t.VH.uint32,t.VH.fixed32,t.VH.int64,t.VH.sint64,t.VH.sfixed64,t.VH.uint64,t.VH.fixed64,t.VH.bool,t.VH.string,t.VH.bytes],t.QH=1,t.YH=536870911,t.KH=!1,t.JH=!0,t.zH=!0,t.yc=function(){Object.create||(Object.create=function(e){function t(){}if(arguments.length>1)throw Error("Object.create polyfill only accepts the first parameter.");return t.prototype=e,new t});var e={};e.WH=!1;try{e.WH="function"==typeof r(5).readFileSync&&"function"==typeof r(39).resolve}catch(t){}return e.XH=function(){for(var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=null,r=0;r<e.length;r++){try{t=e[r]()}catch(i){continue}break}if(!t)throw Error("XMLHttpRequest is not supported");return t},e.fetch=function(t,i){if(i&&"function"!=typeof i&&(i=null),e.WH)if(i)r(5).readFile(t,function(e,t){i(e?null:""+t)});else try{return r(5).readFileSync(t)}catch(n){return null}else{var s=e.XH();if(s.open("GET",t,!!i),s.setRequestHeader("Accept","text/plain"),"function"==typeof s.overrideMimeType&&s.overrideMimeType("text/plain"),!i)return s.send(null),200==s.status||0==s.status&&"string"==typeof s.responseText?s.responseText:null;if(s.onreadystatechange=function(){4==s.readyState&&i(200==s.status||0==s.status&&"string"==typeof s.responseText?s.responseText:null)},4==s.readyState)return;s.send(null)}},e.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},e}(),t.Lang={OPEN:"{",$H:"}",ZH:"[",eq:"]",tq:",",EQUAL:"=",rq:";",iq:",",nq:'"',sq:'"',oq:"'",aq:"'",hq:"(",uq:")",cq:"<",lq:">",pq:/[\s\{\}=;\[\],'"\(\)<>]/g,fq:/^(?:required|optional|repeated|map)$/,JA:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,VA:/^[a-zA-Z_][a-zA-Z_0-9]*$/,dq:/^[a-zA-Z][a-zA-Z_0-9]*$/,gq:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,yq:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,vq:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,mq:/^(?:[1-9][0-9]*|0)$/,Tq:/^0[xX][0-9a-fA-F]+$/,Eq:/^0[0-7]+$/,wq:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,Iq:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,Sq:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,bq:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,BOOL:/^(?:true|false)$/i},t.Rq=function(e,t){var r={},i=function(e){this.source=""+e,this.index=0,this.line=1,this.stack=[],this.Pq=!1,this.Aq=t.sq},n=i.prototype;n.IM=function(){t.STRING.lastIndex=this.index-1;var e;if(null!==(e=t.STRING.exec(this.source))){var r="undefined"!=typeof e[1]?e[1]:e[2];return this.index=t.STRING.lastIndex,this.stack.push(this.Aq),r}throw Error("Unterminated string at line "+this.line+", index "+this.index)},n.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(this.Pq)return this.Pq=!1,this.IM();var e,r;do{for(e=!1;t.bq.test(r=this.source.charAt(this.index));)if(this.index++,"\n"===r&&this.line++,this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if("/"===this.source.charAt(++this.index)){for(;"\n"!==this.source.charAt(this.index);)if(this.index++,this.index==this.source.length)return null;this.index++,this.line++,e=!0}else{if("*"!==this.source.charAt(this.index))throw Error("Unterminated comment at line "+this.line+": /"+this.source.charAt(this.index));for(r="";r+(r=this.source.charAt(this.index))!=="*/";)if(this.index++,"\n"===r&&this.line++,this.index===this.source.length)return null;this.index++,e=!0}}while(e);if(this.index===this.source.length)return null;var i=this.index;t.pq.lastIndex=0;var n=t.pq.test(this.source.charAt(i));if(n)++i;else for(++i;i<this.source.length&&!t.pq.test(this.source.charAt(i));)i++;var s=this.source.substring(this.index,this.index=i);return s===t.nq?(this.Pq=!0,this.Aq=t.sq):s===t.oq&&(this.Pq=!0,this.Aq=t.aq),s},n.kq=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},n.toString=function(){return"Tokenizer("+this.index+"/"+this.source.length+" at line "+this.line+")"},r.Cq=i;var s=function(e){this.Oq=new i(e)},o=s.prototype;return o.parse=function(){for(var e,t={name:"[ROOT]","package":null,messages:[],Nq:[],imports:[],options:{},services:[]},r=!0;e=this.Oq.next();)switch(e){case"package":if(!r||null!==t["package"])throw Error("Unexpected package at line "+this.Oq.line);t["package"]=this._q(e);break;case"import":if(!r)throw Error("Unexpected import at line "+this.Oq.line);t.imports.push(this.Fq(e));break;case"message":this.Lq(t,null,e),r=!1;break;case"enum":this.Dq(t,e),r=!1;break;case"option":this.Mq(t,e);break;case"service":this.Bq(t,e);break;case"extend":this.xq(t,e);break;case"syntax":t.Uq=this.Hq(t);break;default:throw Error("Unexpected token at line "+this.Oq.line+": "+e)}return delete t.name,t},o.qq=function(e){var r=1;if("-"==e.charAt(0)&&(r=-1,e=e.substring(1)),t.mq.test(e))return r*parseInt(e,10);if(t.Tq.test(e))return r*parseInt(e.substring(2),16);if(t.Eq.test(e))return r*parseInt(e.substring(1),8);if(t.wq.test(e))return"inf"===e?r*(1/0):"nan"===e?NaN:r*parseFloat(e);throw Error("Illegal number at line "+this.Oq.line+": "+(r<0?"-":"")+e)},o.Vq=function(){var e,r,i="";do{if(r=this.Oq.next(),i+=this.Oq.next(),e=this.Oq.next(),e!==r)throw Error("Illegal end of string at line "+this.Oq.line+": "+e);e=this.Oq.kq()}while(e===t.nq||e===t.oq);return i},o.jq=function(e,r){var i=-1,n=1;if("-"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.mq.test(e))i=parseInt(e);else if(t.Tq.test(e))i=parseInt(e.substring(2),16);else{if(!t.Eq.test(e))throw Error("Illegal id at line "+this.Oq.line+": "+(n<0?"-":"")+e);i=parseInt(e.substring(1),8)}if(i=n*i|0,!r&&i<0)throw Error("Illegal id at line "+this.Oq.line+": "+(n<0?"-":"")+e);return i},o._q=function(e){if(e=this.Oq.next(),!t.gq.test(e))throw Error("Illegal package name at line "+this.Oq.line+": "+e);var r=e;if(e=this.Oq.next(),e!=t.rq)throw Error("Illegal end of package at line "+this.Oq.line+": "+e);return r},o.Fq=function(e){if(e=this.Oq.kq(),"public"===e&&(this.Oq.next(),e=this.Oq.kq()),e!==t.nq&&e!==t.oq)throw Error("Illegal start of import at line "+this.Oq.line+": "+e);var r=this.Vq();if(e=this.Oq.next(),e!==t.rq)throw Error("Illegal end of import at line "+this.Oq.line+": "+e);return r},o.Mq=function(e,r){r=this.Oq.next();var i=!1;if(r==t.hq&&(i=!0,r=this.Oq.next()),!t.gq.test(r)&&!/google\.protobuf\./.test(r))throw Error("Illegal option name in message "+e.name+" at line "+this.Oq.line+": "+r);var n=r;if(r=this.Oq.next(),i){if(r!==t.uq)throw Error("Illegal end in message "+e.name+", option "+n+" at line "+this.Oq.line+": "+r);n="("+n+")",r=this.Oq.next(),t.yq.test(r)&&(n+=r,r=this.Oq.next())}if(r!==t.EQUAL)throw Error("Illegal operator in message "+e.name+", option "+n+" at line "+this.Oq.line+": "+r);var s;if(r=this.Oq.kq(),r===t.nq||r===t.oq)s=this.Vq();else if(this.Oq.next(),t.vq.test(r))s=this.qq(r,!0);else if(t.BOOL.test(r))s="true"===r;else{if(!t.gq.test(r))throw Error("Illegal option value in message "+e.name+", option "+n+" at line "+this.Oq.line+": "+r);s=r}if(r=this.Oq.next(),r!==t.rq)throw Error("Illegal end of option in message "+e.name+", option "+n+" at line "+this.Oq.line+": "+r);e.options[n]=s},o.Gq=function(e,r){for(var i;;){if(i=this.Oq.next(),null===i)throw Error("Unexpected EOF in "+e.name+", "+r+" at line "+this.Oq.line);if(i===t.rq)break}},o.Bq=function(e,r){if(r=this.Oq.next(),!t.VA.test(r))throw Error("Illegal service name at line "+this.Oq.line+": "+r);var i=r,n={name:i,Qq:{},options:{}};if(r=this.Oq.next(),r!==t.OPEN)throw Error("Illegal start of service "+i+" at line "+this.Oq.line+": "+r);do if(r=this.Oq.next(),"option"===r)this.Mq(n,r);else if("rpc"===r)this.Yq(n,r);else if(r!==t.$H)throw Error("Illegal type of service "+i+" at line "+this.Oq.line+": "+r);while(r!==t.$H);e.services.push(n)},o.Yq=function(e,r){var i=r;if(r=this.Oq.next(),!t.VA.test(r))throw Error("Illegal method name in service "+e.name+" at line "+this.Oq.line+": "+r);var n=r,s={jE:null,response:null,Kq:!1,Jq:!1,options:{}};if(r=this.Oq.next(),r!==t.hq)throw Error("Illegal start of request type in service "+e.name+"#"+n+" at line "+this.Oq.line+": "+r);if(r=this.Oq.next(),"stream"===r.toLowerCase()&&(s.Kq=!0,r=this.Oq.next()),!t.gq.test(r))throw Error("Illegal request type in service "+e.name+"#"+n+" at line "+this.Oq.line+": "+r);if(s.jE=r,r=this.Oq.next(),r!=t.uq)throw Error("Illegal end of request type in service "+e.name+"#"+n+" at line "+this.Oq.line+": "+r);if(r=this.Oq.next(),"returns"!==r.toLowerCase())throw Error("Illegal delimiter in service "+e.name+"#"+n+" at line "+this.Oq.line+": "+r);if(r=this.Oq.next(),r!=t.hq)throw Error("Illegal start of response type in service "+e.name+"#"+n+" at line "+this.Oq.line+": "+r);if(r=this.Oq.next(),"stream"===r.toLowerCase()&&(s.Jq=!0,r=this.Oq.next()),s.response=r,r=this.Oq.next(),r!==t.uq)throw Error("Illegal end of response type in service "+e.name+"#"+n+" at line "+this.Oq.line+": "+r);if(r=this.Oq.next(),r===t.OPEN){do if(r=this.Oq.next(),"option"===r)this.Mq(s,r);else if(r!==t.$H)throw Error("Illegal start of option inservice "+e.name+"#"+n+" at line "+this.Oq.line+": "+r);while(r!==t.$H);this.Oq.kq()===t.rq&&this.Oq.next()}else if(r!==t.rq)throw Error("Illegal delimiter in service "+e.name+"#"+n+" at line "+this.Oq.line+": "+r);"undefined"==typeof e[i]&&(e[i]={}),e[i][n]=s},o.Lq=function(e,r,i){var n={},s="group"===i;if(i=this.Oq.next(),!t.VA.test(i))throw Error("Illegal "+(s?"group":"message")+" name"+(e?" in message "+e.name:"")+" at line "+this.Oq.line+": "+i);if(n.name=i,s){if(i=this.Oq.next(),i!==t.EQUAL)throw Error("Illegal id assignment after group "+n.name+" at line "+this.Oq.line+": "+i);i=this.Oq.next();try{r.id=this.jq(i)}catch(o){throw Error("Illegal field id value for group "+n.name+"#"+r.name+" at line "+this.Oq.line+": "+i)}n.zq=!0}if(n.fields=[],n.Nq=[],n.messages=[],n.options={},n.Wq={},i=this.Oq.next(),i===t.ZH&&r&&(this.Xq(n,r,i),i=this.Oq.next()),i!==t.OPEN)throw Error("Illegal start of "+(s?"group":"message")+" "+n.name+" at line "+this.Oq.line+": "+i);for(;;){if(i=this.Oq.next(),i===t.$H){i=this.Oq.kq(),i===t.rq&&this.Oq.next();break}if(t.fq.test(i))this.$q(n,i);else if("oneof"===i)this.Zq(n,i);else if("enum"===i)this.Dq(n,i);else if("message"===i)this.Lq(n,null,i);else if("option"===i)this.Mq(n,i);else if("extensions"===i)n.extensions=this.eV(n,i);else if("extend"===i)this.xq(n,i);else{if(!t.gq.test(i))throw Error("Illegal token in message "+n.name+" at line "+this.Oq.line+": "+i);this.$q(n,"optional",i)}}return e.messages.push(n),n},o.$q=function(e,r,i){var n={},s=null;if(n.rule=r,n.options={},r="undefined"!=typeof i?i:this.Oq.next(),"map"===n.rule){if(r!==t.cq)throw Error("Illegal token in message "+e.name+" at line "+this.Oq.line+": "+r);if(r=this.Oq.next(),!t.JA.test(r)&&!t.gq.test(r))throw Error("Illegal token in message "+e.name+" at line "+this.Oq.line+": "+r);if(n.keytype=r,r=this.Oq.next(),r!==t.iq)throw Error("Illegal token in message "+e.name+" at line "+this.Oq.line+": "+r);if(r=this.Oq.next(),!t.JA.test(r)&&!t.gq.test(r))throw Error("Illegal token in message "+e.name+" at line "+this.Oq.line+": "+r);if(n.type=r,r=this.Oq.next(),r!==t.lq)throw Error("Illegal token in message "+e.name+" at line "+this.Oq.line+": "+r);if(r=this.Oq.next(),!t.VA.test(r))throw Error("Illegal token in message "+e.name+" at line "+this.Oq.line+": "+r);if(n.name=r,r=this.Oq.next(),r!==t.EQUAL)throw Error("Illegal token in field "+e.name+"#"+n.name+" at line "+this.line+": "+r);r=this.Oq.next();try{n.id=this.jq(r)}catch(o){throw Error("Illegal field id in message "+e.name+"#"+n.name+" at line "+this.Oq.line+": "+r)}if(r=this.Oq.next(),r===t.ZH&&(this.Xq(e,n,r),r=this.Oq.next()),r!==t.rq)throw Error("Illegal delimiter in message "+e.name+"#"+n.name+" at line "+this.Oq.line+": "+r)}else if("group"===r){if(s=this.Lq(e,n,r),!/^[A-Z]/.test(s.name))throw Error("Group names must start with a capital letter");n.type=s.name,n.name=s.name.toLowerCase(),r=this.Oq.kq(),r===t.rq&&this.Oq.next()}else{if(!t.JA.test(r)&&!t.gq.test(r))throw Error("Illegal field type in message "+e.name+" at line "+this.Oq.line+": "+r);if(n.type=r,r=this.Oq.next(),!t.VA.test(r))throw Error("Illegal field name in message "+e.name+" at line "+this.Oq.line+": "+r);if(n.name=r,r=this.Oq.next(),r!==t.EQUAL)throw Error("Illegal token in field "+e.name+"#"+n.name+" at line "+this.Oq.line+": "+r);r=this.Oq.next();try{n.id=this.jq(r)}catch(o){throw Error("Illegal field id in message "+e.name+"#"+n.name+" at line "+this.Oq.line+": "+r)}if(r=this.Oq.next(),r===t.ZH&&(this.Xq(e,n,r),r=this.Oq.next()),r!==t.rq)throw Error("Illegal delimiter in message "+e.name+"#"+n.name+" at line "+this.Oq.line+": "+r)}return e.fields.push(n),n},o.Zq=function(e,r){if(r=this.Oq.next(),!t.VA.test(r))throw Error("Illegal oneof name in message "+e.name+" at line "+this.Oq.line+": "+r);var i,n=r,s=[];if(r=this.Oq.next(),r!==t.OPEN)throw Error("Illegal start of oneof "+n+" at line "+this.Oq.line+": "+r);for(;this.Oq.kq()!==t.$H;)i=this.$q(e,"optional"),i.tV=n,s.push(i.id);this.Oq.next(),e.Wq[n]=s},o.Xq=function(e,r,i){for(var n=!0;;){if(i=this.Oq.next(),i===t.eq)break;if(i===t.tq){if(n)throw Error("Illegal start of options in message "+e.name+"#"+r.name+" at line "+this.Oq.line+": "+i);i=this.Oq.next()}this.rV(e,r,i),n=!1}},o.rV=function(e,r,i){var n=!1;if(i===t.hq&&(i=this.Oq.next(),n=!0),!t.gq.test(i))throw Error("Illegal field option in "+e.name+"#"+r.name+" at line "+this.Oq.line+": "+i);var s=i;if(i=this.Oq.next(),n){if(i!==t.uq)throw Error("Illegal delimiter in "+e.name+"#"+r.name+" at line "+this.Oq.line+": "+i);s="("+s+")",i=this.Oq.next(),t.yq.test(i)&&(s+=i,i=this.Oq.next())}if(i!==t.EQUAL)throw Error("Illegal token in "+e.name+"#"+r.name+" at line "+this.Oq.line+": "+i);var o;if(i=this.Oq.kq(),i===t.nq||i===t.oq)o=this.Vq();else if(t.vq.test(i,!0))o=this.qq(this.Oq.next(),!0);else if(t.BOOL.test(i))o="true"===this.Oq.next().toLowerCase();else{if(!t.gq.test(i))throw Error("Illegal value in message "+e.name+"#"+r.name+", option "+s+" at line "+this.Oq.line+": "+i);o=this.Oq.next()}r.options[s]=o},o.Dq=function(e,r){var i={};if(r=this.Oq.next(),!t.VA.test(r))throw Error("Illegal enum name in message "+e.name+" at line "+this.Oq.line+": "+r);if(i.name=r,r=this.Oq.next(),r!==t.OPEN)throw Error("Illegal start of enum "+i.name+" at line "+this.Oq.line+": "+r);for(i.values=[],i.options={};;){if(r=this.Oq.next(),r===t.$H){r=this.Oq.kq(),r===t.rq&&this.Oq.next();break}if("option"==r)this.Mq(i,r);else{if(!t.VA.test(r))throw Error("Illegal name in enum "+i.name+" at line "+this.Oq.line+": "+r);this.iV(i,r)}}e.Nq.push(i)},o.iV=function(e,r){var i={};if(i.name=r,r=this.Oq.next(),r!==t.EQUAL)throw Error("Illegal token in enum "+e.name+" at line "+this.Oq.line+": "+r);r=this.Oq.next();try{i.id=this.jq(r,!0)}catch(n){throw Error("Illegal id in enum "+e.name+" at line "+this.Oq.line+": "+r)}if(e.values.push(i),r=this.Oq.next(),r===t.ZH){var s={options:{}};this.Xq(e,s,r),r=this.Oq.next()}if(r!==t.rq)throw Error("Illegal delimiter in enum "+e.name+" at line "+this.Oq.line+": "+r)},o.eV=function(r,i){var n=[];if(i=this.Oq.next(),"min"===i?n.push(e.QH):"max"===i?n.push(e.YH):n.push(this.qq(i)),i=this.Oq.next(),"to"!==i)throw Error("Illegal extensions delimiter in message "+r.name+" at line "+this.Oq.line+": "+i);if(i=this.Oq.next(),"min"===i?n.push(e.QH):"max"===i?n.push(e.YH):n.push(this.qq(i)),i=this.Oq.next(),i!==t.rq)throw Error("Illegal extensions delimiter in message "+r.name+" at line "+this.Oq.line+": "+i);return n},o.xq=function(e,r){if(r=this.Oq.next(),!t.gq.test(r))throw Error("Illegal message name at line "+this.Oq.line+": "+r);var i={};if(i.nV=r,i.fields=[],r=this.Oq.next(),r!==t.OPEN)throw Error("Illegal start of extend "+i.name+" at line "+this.Oq.line+": "+r);for(;;){if(r=this.Oq.next(),r===t.$H){r=this.Oq.kq(),r==t.rq&&this.Oq.next();break}if(t.fq.test(r))this.$q(i,r);else{if(!t.gq.test(r))throw Error("Illegal token in extend "+i.name+" at line "+this.Oq.line+": "+r);this.$q(i,"optional",r)}}return e.messages.push(i),i},o.Hq=function(e){var r=this.Oq.next();if(r!==t.EQUAL)throw Error("Illegal token at line "+this.Oq.line+": "+r);if(r=this.Oq.kq(),r!==t.nq&&r!==t.oq)throw Error("Illegal token at line "+this.Oq.line+": "+r);var i=this.Vq();if(r=this.Oq.next(),r!==t.rq)throw Error("Illegal token at line "+this.Oq.line+": "+r);return i},o.toString=function(){return"Parser"},r.Ex=s,r}(t,t.Lang),t.sV=function(t){function r(r){if("string"==typeof r&&(r=t.VH[r]),"undefined"==typeof r.defaultValue)throw Error("default value for type "+r.name+" is not supported");return r==t.VH.bytes?new e(0):r.defaultValue}function i(e,r){if(e&&"number"==typeof e.low&&"number"==typeof e.high&&"boolean"==typeof e.Yv&&e.low===e.low&&e.high===e.high)return new t.Ky(e.low,e.high,"undefined"==typeof r?e.Yv:r);if("string"==typeof e)return t.Ky.Au(e,r||!1,10);if("number"==typeof e)return t.Ky.Pu(e,r||!1);throw Error("not convertible to Long")}function n(e,r){var i=r.xv(),s=7&i,o=i>>>3;switch(s){case t.LH.DH:do i=r.av();while(128===(128&i));break;case t.LH.MH:r.offset+=8;break;case t.LH.BH:i=r.xv(),r.offset+=i;break;case t.LH.xH:n(o,r);break;case t.LH.UH:if(o===e)return!1;throw Error("Illegal GROUPEND after unknown group: "+o+" ("+e+" expected)");case t.LH.HH:r.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+e+": "+s)}return!0}var s={},o=function(e,t,r){this.oV=e,this.parent=t,this.name=r,this.className},a=o.prototype;a.aV=function(){for(var e=this.name,t=this;;){if(t=t.parent,null==t)break;e=t.name+"."+e}return e},a.toString=function(e){return(e?this.className+" ":"")+this.aV()},a.ga=function(){throw Error(this.toString(!0)+" cannot be built directly")},s.hV=o;var h=function(e,t,r,i,n){o.call(this,e,t,r),this.className="Namespace",this.children=[],this.options=i||{},this.Uq=n||"proto2"},u=h.prototype=Object.create(o.prototype);u.uV=function(e){if(e=e||null,null==e)return this.children.slice();for(var t=[],r=0,i=this.children.length;r<i;++r)this.children[r]instanceof e&&t.push(this.children[r]);return t},u.cV=function(e){var t;if(t=this.lV(e.name))if(t instanceof p.pV&&t.name!==t.fV&&null===this.lV(t.fV))t.name=t.fV;else{if(!(e instanceof p.pV&&e.name!==e.fV&&null===this.lV(e.fV)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.fV}this.children.push(e)},u.lV=function(e){for(var t="number"==typeof e?"id":"name",r=0,i=this.children.length;r<i;++r)if(this.children[r][t]===e)return this.children[r];return null},u.resolve=function(e,t){var r="string"==typeof e?e.split("."):e,i=this,n=0;if(""===r[n]){for(;null!==i.parent;)i=i.parent;n++}var o;do{do{if(o=i.lV(r[n]),!o||!(o instanceof s.hV)||t&&o instanceof s.pu.pV){i=null;break}i=o,n++}while(n<r.length);if(null!=i)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=i);return i},u.dV=function(e){var t=[],r=e;do t.unshift(r.name),r=r.parent;while(null!==r);for(var i=1;i<=t.length;i++){var n=t.slice(t.length-i);if(e===this.resolve(n,!(e instanceof s.pu.pV)))return n.join(".")}return e.aV()},u.ga=function(){for(var e,t={},r=this.children,i=0,n=r.length;i<n;++i)e=r[i],e instanceof h&&(t[e.name]=e.ga());return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.gV()}),t},u.gV=function(){for(var e={},t=Object.keys(this.options),r=0,i=t.length;r<i;++r){var n=t[r],s=this.options[t[r]];e[n]=s}return e},u.yV=function(e){return"undefined"==typeof e?this.options:"undefined"!=typeof this.options[e]?this.options[e]:null},s.vV=h;var c=function(e,r,i,n){if(this.type=e,this.mV=r,this.TV=i,this.Uq=n,i&&t.GH.indexOf(e)<0)throw Error("Invalid map key type: "+e.name)},l=c.prototype;l.EV=r,l.wV=function(r){var n=function(e,t){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+e+" ("+t+")")}.bind(this);switch(this.type){case t.VH.int32:case t.VH.sint32:case t.VH.sfixed32:return("number"!=typeof r||r===r&&r%1!==0)&&n(typeof r,"not an integer"),r>4294967295?0|r:r;case t.VH.uint32:case t.VH.fixed32:return("number"!=typeof r||r===r&&r%1!==0)&&n(typeof r,"not an integer"),r<0?r>>>0:r;case t.VH.int64:case t.VH.sint64:case t.VH.sfixed64:if(t.Ky)try{return i(r,!1)}catch(s){n(typeof r,s.message)}else n(typeof r,"requires Long.js");case t.VH.uint64:case t.VH.fixed64:if(t.Ky)try{return i(r,!0)}catch(s){n(typeof r,s.message)}else n(typeof r,"requires Long.js");case t.VH.bool:return"boolean"!=typeof r&&n(typeof r,"not a boolean"),r;case t.VH["float"]:case t.VH["double"]:return"number"!=typeof r&&n(typeof r,"not a number"),r;case t.VH.string:return"string"==typeof r||r&&r instanceof String||n(typeof r,"not a string"),""+r;case t.VH.bytes:return e.zy(r)?r:e.wrap(r,"base64");case t.VH["enum"]:var o=this.mV.uV(t.sV.bV.SV);for(h=0;h<o.length;h++){if(o[h].name==r)return o[h].id;if(o[h].id==r)return o[h].id}if("proto3"===this.Uq)return("number"!=typeof r||r===r&&r%1!==0)&&n(typeof r,"not an integer"),(r>4294967295||r<0)&&n(typeof r,"not in range for uint32"),r;n(r,"not a valid enum value");case t.VH.group:case t.VH.message:if(r&&"object"==typeof r||n(typeof r,"object expected"),r instanceof this.mV.RV)return r;if(r instanceof t.PV.pu){var a={};for(var h in r)r.hasOwnProperty(h)&&(a[h]=r[h]);r=a}return new this.mV.RV(r)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+r+" (undefined type "+this.type+")")},l.AV=function(r,i){if(null===i)return 0;var n;switch(this.type){case t.VH.int32:return i<0?e.Vv(i):e.Fv(i);case t.VH.uint32:return e.Fv(i);case t.VH.sint32:return e.Fv(e.Lv(i));case t.VH.fixed32:case t.VH.sfixed32:case t.VH["float"]:return 4;case t.VH.int64:case t.VH.uint64:return e.Vv(i);case t.VH.sint64:return e.Vv(e.Qv(i));case t.VH.fixed64:case t.VH.sfixed64:return 8;case t.VH.bool:return 1;case t.VH["enum"]:return e.Fv(i);case t.VH["double"]:return 8;case t.VH.string:return n=e.pm(i),e.Fv(n)+n;case t.VH.bytes:if(i.Cm()<0)throw Error("Illegal value for "+this.toString(!0)+": "+i.Cm()+" bytes remaining");return e.Fv(i.Cm())+i.Cm();case t.VH.message:return n=this.mV.kV(i),e.Fv(n)+n;case t.VH.group:return n=this.mV.kV(i),n+e.Fv(r<<3|t.LH.UH)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+i+" (unknown type)")},l.CV=function(r,i,n){if(null===i)return n;switch(this.type){case t.VH.int32:i<0?n.$v(i):n.Mv(i);break;case t.VH.uint32:n.Mv(i);break;case t.VH.sint32:n.Bv(i);break;case t.VH.fixed32:n.yv(i);break;case t.VH.sfixed32:n.dv(i);break;case t.VH.int64:case t.VH.uint64:n.$v(i);break;case t.VH.sint64:n.Zv(i);break;case t.VH.fixed64:n.Iv(i);break;case t.VH.sfixed64:n.mv(i);break;case t.VH.bool:"string"==typeof i?n.Mv("false"===i.toLowerCase()?0:!!i):n.Mv(i?1:0);break;case t.VH["enum"]:n.Mv(i);break;case t.VH["float"]:n.bv(i);break;case t.VH["double"]:n.kv(i);break;case t.VH.string:n.vm(i);break;case t.VH.bytes:if(i.Cm()<0)throw Error("Illegal value for "+this.toString(!0)+": "+i.Cm()+" bytes remaining");var s=i.offset;n.Mv(i.Cm()),n.append(i),i.offset=s;break;case t.VH.message:var o=(new e).Sm();this.mV.encode(i,o),n.Mv(o.offset),n.append(o.sa());break;case t.VH.group:this.mV.encode(i,n),n.Mv(r<<3|t.LH.UH);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+i+" (unknown type)")}return n},l.decode=function(e,r,i){if(r!=this.type.jH)throw Error("Unexpected wire type for element");var n,s;switch(this.type){case t.VH.int32:return 0|e.xv();case t.VH.uint32:return e.xv()>>>0;case t.VH.sint32:return 0|e.Hv();case t.VH.fixed32:return e.vv()>>>0;case t.VH.sfixed32:return 0|e.gv();case t.VH.int64:return e.em();case t.VH.uint64:return e.em().Jv();case t.VH.sint64:return e.tm();case t.VH.fixed64:return e.Sv();case t.VH.sfixed64:return e.Ev();case t.VH.bool:return!!e.xv();case t.VH["enum"]:return e.xv();case t.VH["float"]:return e.Av();case t.VH["double"]:return e.Nv();case t.VH.string:return e.mm();case t.VH.bytes:if(s=e.xv(),e.Cm()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+e.Cm());return n=e.clone(),n.Vy=n.offset+s,e.offset+=s,n;case t.VH.message:return s=e.xv(),this.mV.decode(e,s);case t.VH.group:return this.mV.decode(e,-1,i)}throw Error("[INTERNAL] Illegal decode type")},l.OV=function(r){if(!this.TV)throw Error("valueFromString() called on non-map-key element");switch(this.type){case t.VH.int32:case t.VH.sint32:case t.VH.sfixed32:case t.VH.uint32:case t.VH.fixed32:return this.wV(parseInt(r));case t.VH.int64:case t.VH.sint64:case t.VH.sfixed64:case t.VH.uint64:case t.VH.fixed64:return this.wV(r);case t.VH.bool:return"true"===r;case t.VH.string:return this.wV(r);case t.VH.bytes:return e.$y(r)}},l.NV=function(e){if(!this.TV)throw Error("valueToString() called on non-map-key element");return this.type===t.VH.bytes?e.toString("binary"):e.toString()},s.Element=c;var p=function(e,r,i,n,s,o){h.call(this,e,r,i,n,o),this.className="Message",this.extensions=[t.QH,t.YH],this.RV=null,this.zq=!!s,this._V=null,this.FV=null,this.LV=null},f=p.prototype=Object.create(h.prototype);f.ga=function(r){if(this.RV&&!r)return this.RV;var i=function(t,r){function i(r,n,s,o,a){var h=void 0;if(null===r||"object"!=typeof r){if(o==t.VH["enum"])for(var u=a.uV(t.sV.bV.SV),c=0;c<u.length;c++)if(u[c].id===r){r=u[c].name;break}h=r}else if(r instanceof e)h=n?r.Fm():r.Nm();else if(t.yc.isArray(r)){var l=r;h=[];for(var p=0;p<l.length;p++)h.push(i(l[p],n,s,o,a))}else if(r instanceof t.Map){var f=r.entries();h={};for(var d=f.next();!d.done;d=f.next())h[r.DV.NV(d.value[0])]=i(d.value[1],n,s,r.MV.type,r.MV.mV)}else if(r instanceof t.Ky)h=s?r.toString():new t.Ky(r);else{h={};var g=r.$type,y=void 0;for(var c in r)if(r.hasOwnProperty(c)){var v=r[c];g&&(y=g.lV(c)),h[c]=i(v,n,s,y.type,y.mV)}}return h}var n=r.uV(t.sV.pu.pV),s=r.uV(t.sV.pu.BV),o=function(i,o){t.PV.pu.call(this);for(var a=0,h=s.length;a<h;++a)this[s[a].name]=null;for(a=0,h=n.length;a<h;++a){var u=n[a];this[u.name]=u.repeated?[]:u.map?new t.Map(u):null,!u.required&&"proto3"!==r.Uq||null===u.defaultValue||(this[u.name]=u.defaultValue)}if(arguments.length>0){var c;if(1!==arguments.length||"object"!=typeof i||"function"==typeof i.encode||t.yc.isArray(i)||i instanceof t.Map||i instanceof e||i instanceof ArrayBuffer||t.Ky&&i instanceof t.Ky)for(a=0,h=arguments.length;a<h;++a)"undefined"!=typeof(c=arguments[a])&&this.xV(n[a].name,c);else this.xV(i)}},a=o.prototype=Object.create(t.PV.pu.prototype);a.add=function(e,i,n){var s=r.LV[e];if(!n){if(!s)throw Error(this+"#"+e+" is undefined");if(!(s instanceof t.sV.pu.pV))throw Error(this+"#"+e+" is not a field: "+s.toString(!0));if(!s.repeated)throw Error(this+"#"+e+" is not a repeated field")}null===this[s.name]&&(this[s.name]=[]),this[s.name].push(n?i:s.wV(i,!0))},a.UV=a.add,a.set=function(e,i,n){if(e&&"object"==typeof e){n=i;for(var s in e)e.hasOwnProperty(s)&&"undefined"!=typeof(i=e[s])&&this.xV(s,i,n);return this}var o=r.LV[e];if(n)this[o.name]=i;else{if(!o)throw Error(this+"#"+e+" is not a field: undefined");if(!(o instanceof t.sV.pu.pV))throw Error(this+"#"+e+" is not a field: "+o.toString(!0));this[o.name]=i=o.wV(i)}return o.tV&&(null!==i?(null!==this[o.tV.name]&&(this[this[o.tV.name]]=null),this[o.tV.name]=o.name):o.tV.name===e&&(this[o.tV.name]=null)),this},a.xV=a.set,a.get=function(e,i){if(i)return this[e];var n=r.LV[e];if(!(n&&n instanceof t.sV.pu.pV))throw Error(this+"#"+e+" is not a field: undefined");if(!(n instanceof t.sV.pu.pV))throw Error(this+"#"+e+" is not a field: "+n.toString(!0));return this[n.name]},a.HV=a.get;for(var h=0;h<n.length;h++){var u=n[h];u instanceof t.sV.pu.qV||r.oV.options.JH&&function(e){var t=e.fV.replace(/(_[a-zA-Z])/g,function(e){return e.toUpperCase().replace("_","")});t=t.substring(0,1).toUpperCase()+t.substring(1);var i=e.fV.replace(/([A-Z])/g,function(e){return"_"+e}),n=function(t,r){return this[e.name]=r?t:e.wV(t),this},s=function(){return this[e.name]};null===r.lV("set"+t)&&(a["set"+t]=n),null===r.lV("set_"+i)&&(a["set_"+i]=n),null===r.lV("get"+t)&&(a["get"+t]=s),null===r.lV("get_"+i)&&(a["get_"+i]=s)}(u)}a.encode=function(t,i){"boolean"==typeof t&&(i=t,t=void 0);var n=!1;t||(t=new e,n=!0);var s=t.jy;try{return r.encode(this,t.Sm(),i),(n?t.sa():t).Sm(s)}catch(o){throw t.Sm(s),o}},a.kV=function(){return r.kV(this)},a.VV=function(t){var i=!1;t||(t=new e,i=!0);var n=(new e).Sm();return r.encode(this,n).sa(),t.Mv(n.Cm()),t.append(n),i?t.sa():t},a.jV=function(){try{return this.encode().Zo()}catch(e){throw e.GV&&(e.GV=e.GV.Zo()),e}},a.Zo=a.jV,a.QV=function(){try{return this.encode().Nm()}catch(e){throw e.GV&&(e.GV=e.GV.Nm()),e}},a.Nm=a.QV,a.YV=function(){try{return this.encode().Fm()}catch(e){throw e.GV&&(e.GV=e.GV.Fm()),e}},a.Fm=a.YV,a.KV=function(){try{return this.encode().Lm()}catch(e){throw e.GV&&(e.GV=e.GV.Lm()),e}},a.Lm=a.KV,a.JV=function(e,r){return i(this,!!e,!!r,t.VH.message,this.$type)},a.zV=function(){return JSON.stringify(i(this,!0,!0,t.VH.message,this.$type))},o.decode=function(t,i){"string"==typeof t&&(t=e.wrap(t,i?i:"base64")),t=t instanceof e?t:e.wrap(t);var n=t.jy;try{var s=r.decode(t.Sm());return t.Sm(n),s}catch(o){throw t.Sm(n),o}},o.WV=function(t,i){if("string"==typeof t&&(t=e.wrap(t,i?i:"base64")),t=t instanceof e?t:e.wrap(t),t.Cm()<1)return null;var n=t.offset,s=t.xv();if(t.Cm()<s)return t.offset=n,null;try{var o=r.decode(t.slice(t.offset,t.offset+s).Sm());return t.offset+=s,o}catch(a){throw t.offset+=s,a}},o.XV=function(e){return o.decode(e,"base64")},o.$V=function(e){return o.decode(e,"hex")},o.ZV=function(e){return new o(JSON.parse(e))},a.toString=function(){return r.toString()};return Object.defineProperty&&(Object.defineProperty(o,"$options",{value:r.gV()}),Object.defineProperty(a,"$options",{value:o.$options}),Object.defineProperty(o,"$type",{value:r}),Object.defineProperty(a,"$type",{value:r})),o}(t,this);this._V=[],this.FV={},this.LV={};for(var n,s=0,o=this.children.length;s<o;s++)if(n=this.children[s],n instanceof m)i[n.name]=n.ga();else if(n instanceof p)i[n.name]=n.ga();else if(n instanceof p.pV)n.ga(),this._V.push(n),this.FV[n.id]=n,this.LV[n.name]=n;else if(!(n instanceof p.BV||n instanceof w))throw Error("Illegal reflect child of "+this.toString(!0)+": "+children[s].toString(!0));return this.RV=i},f.encode=function(e,t,r){for(var i,n,s=null,o=0,a=this._V.length;o<a;++o)i=this._V[o],n=e[i.name],i.required&&null===n?null===s&&(s=i):i.encode(r?n:i.wV(n),t);if(null!==s){var h=Error("Missing at least one required field for "+this.toString(!0)+": "+s);throw h.GV=t,h}return t},f.kV=function(e){for(var t,r,i=0,n=0,s=this._V.length;n<s;++n){if(t=this._V[n],r=e[t.name],t.required&&null===r)throw Error("Missing at least one required field for "+this.toString(!0)+": "+t);
i+=t.kV(r)}return i},f.decode=function(e,r,i){r="number"==typeof r?r:-1;for(var s,o,a,h,u=e.offset,c=new this.RV;e.offset<u+r||r===-1&&e.Cm()>0;){if(s=e.xv(),o=7&s,a=s>>>3,o===t.LH.UH){if(a!==i)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+a+" ("+(i?i+" expected":"not a group")+")");break}if(h=this.FV[a])if(h.repeated&&!h.options.packed)c[h.name].push(h.decode(o,e));else if(h.map){var l=h.decode(o,e);c[h.name].set(l[0],l[1])}else c[h.name]=h.decode(o,e),h.tV&&(null!==this[h.tV.name]&&(this[this[h.tV.name]]=null),c[h.tV.name]=h.name);else switch(o){case t.LH.DH:e.xv();break;case t.LH.HH:e.offset+=4;break;case t.LH.MH:e.offset+=8;break;case t.LH.BH:var p=e.xv();e.offset+=p;break;case t.LH.xH:for(;n(a,e););break;default:throw Error("Illegal wire type for unknown field "+a+" in "+this.toString(!0)+"#decode: "+o)}}for(var f=0,d=this._V.length;f<d;++f)if(h=this._V[f],null===c[h.name]){if(h.required){var g=Error("Missing at least one required field for "+this.toString(!0)+": "+h.name);throw g.ej=c,g}t.zH&&null!==h.defaultValue&&(c[h.name]=h.defaultValue)}return c},s.pu=p;var d=function(e,t,r,i,n,s,a,h,u,c){o.call(this,e,t,s),this.className="Message.Field",this.required="required"===r,this.repeated="repeated"===r,this.map="map"===r,this.tj=i||null,this.type=n,this.mV=null,this.id=a,this.options=h||{},this.defaultValue=null,this.tV=u||null,this.Uq=c||"proto2",this.fV=this.name,this.rj=null,this.ij=null,!this.oV.options.KH||this instanceof p.qV||(this.name=d.nj(this.name))};d.nj=function(e){return e.replace(/_([a-zA-Z])/g,function(e,t){return t.toUpperCase()})};var g=d.prototype=Object.create(o.prototype);g.ga=function(){this.rj=new c(this.type,this.mV,(!1),this.Uq),this.map&&(this.ij=new c(this.tj,(void 0),(!0),this.Uq)),this.defaultValue="undefined"!=typeof this.options["default"]?this.wV(this.options["default"]):null,"proto3"!==this.Uq||this.repeated||this.map||(this.defaultValue=this.rj.EV(this.type))},g.wV=function(e,r){r=r||!1;var i=function(e,t){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+e+" ("+t+")")}.bind(this);if(null===e)return this.required&&i(typeof e,"required"),"proto3"===this.Uq&&this.type!==t.VH.message&&i(typeof e,"proto3 field without field presence cannot be null"),null;var n;if(this.repeated&&!r){t.yc.isArray(e)||(e=[e]);var s=[];for(n=0;n<e.length;n++)s.push(this.rj.wV(e[n]));return s}return this.map&&!r?e instanceof t.Map?e:(e instanceof Object||i(typeof e,"expected ProtoBuf.Map or raw object for map field"),new t.Map(this,e)):(!this.repeated&&t.yc.isArray(e)&&i(typeof e,"no array expected"),this.rj.wV(e))},g.sj=function(e){if("proto3"!==this.Uq)return null!==e;switch(this.type){case t.VH.int32:case t.VH.sint32:case t.VH.sfixed32:case t.VH.uint32:case t.VH.fixed32:return 0!==e;case t.VH.int64:case t.VH.sint64:case t.VH.sfixed64:case t.VH.uint64:case t.VH.fixed64:return 0!==e.low||0!==e.high;case t.VH.bool:return e;case t.VH["float"]:case t.VH["double"]:return 0!==e;case t.VH.string:return e.length>0;case t.VH.bytes:return e.Cm()>0;case t.VH["enum"]:return 0!==e;case t.VH.message:return null!==e;default:return!0}},g.encode=function(r,i){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===r||this.repeated&&0==r.length)return i;try{if(this.repeated){var n;if(this.options.packed&&t.qH.indexOf(this.type.jH)>=0){i.Mv(this.id<<3|t.LH.BH),i.Im(i.offset+=1);var s=i.offset;for(n=0;n<r.length;n++)this.rj.CV(this.id,r[n],i);var o=i.offset-s,a=e.Fv(o);if(a>1){var h=i.slice(s,i.offset);s+=a-1,i.offset=s,i.append(h)}i.Mv(o,s-a)}else for(n=0;n<r.length;n++)i.Mv(this.id<<3|this.type.jH),this.rj.CV(this.id,r[n],i)}else this.map?r.forEach(function(r,n,s){var o=e.Fv(8|this.tj.jH)+this.ij.AV(1,n)+e.Fv(16|this.type.jH)+this.rj.AV(2,r);i.Mv(this.id<<3|t.LH.BH),i.Mv(o),i.Mv(8|this.tj.jH),this.ij.CV(1,n,i),i.Mv(16|this.type.jH),this.rj.CV(2,r,i)},this):this.sj(r)&&(i.Mv(this.id<<3|this.type.jH),this.rj.CV(this.id,r,i))}catch(u){throw Error("Illegal value for "+this.toString(!0)+": "+r+" ("+u+")")}return i},g.kV=function(r){if(r=this.wV(r),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===r||this.repeated&&0==r.length)return 0;var i=0;try{if(this.repeated){var n,s;if(this.options.packed&&t.qH.indexOf(this.type.jH)>=0){for(i+=e.Fv(this.id<<3|t.LH.BH),s=0,n=0;n<r.length;n++)s+=this.rj.AV(this.id,r[n]);i+=e.Fv(s),i+=s}else for(n=0;n<r.length;n++)i+=e.Fv(this.id<<3|this.type.jH),i+=this.rj.AV(this.id,r[n])}else this.map?r.forEach(function(r,n,s){var o=e.Fv(8|this.tj.jH)+this.ij.AV(1,n)+e.Fv(16|this.type.jH)+this.rj.AV(2,r);i+=e.Fv(this.id<<3|t.LH.BH),i+=e.Fv(o),i+=o},this):this.sj(r)&&(i+=e.Fv(this.id<<3|this.type.jH),i+=this.rj.AV(this.id,r))}catch(o){throw Error("Illegal value for "+this.toString(!0)+": "+r+" ("+o+")")}return i},g.decode=function(e,r,i){var n,s,o=!this.map&&e==this.type.jH||!i&&this.repeated&&this.options.packed&&e==t.LH.BH||this.map&&e==t.LH.BH;if(!o)throw Error("Illegal wire type for field "+this.toString(!0)+": "+e+" ("+this.type.jH+" expected)");if(e==t.LH.BH&&this.repeated&&this.options.packed&&t.qH.indexOf(this.type.jH)>=0&&!i){s=r.xv(),s=r.offset+s;for(var a=[];r.offset<s;)a.push(this.decode(this.type.jH,r,!0));return a}if(this.map){var h=this.ij.EV(this.tj);if(n=this.rj.EV(this.type),s=r.xv(),r.Cm()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+r.Cm());var u=r.clone();for(u.Vy=u.offset+s,r.offset+=s;u.Cm()>0;){var c=u.xv();e=7&c;var l=c>>>3;if(1===l)h=this.ij.decode(u,e,l);else{if(2!==l)throw Error("Unexpected tag in map field key/value submessage");n=this.rj.decode(u,e,l)}}return[h,n]}return this.rj.decode(r,e,this.id)},s.pu.pV=d;var y=function(e,t,r,i,n,s,o){d.call(this,e,t,r,null,i,n,s,o),this.oj};y.prototype=Object.create(d.prototype),s.pu.qV=y;var v=function(e,t,r){o.call(this,e,t,r),this.fields=[]};s.pu.BV=v;var m=function(e,t,r,i,n){h.call(this,e,t,r,i,n),this.className="Enum",this.object=null},T=m.prototype=Object.create(h.prototype);T.ga=function(){for(var e={},t=this.uV(m.SV),r=0,i=t.length;r<i;++r)e[t[r].name]=t[r].id;return Object.defineProperty&&Object.defineProperty(e,"$options",{value:this.gV()}),this.object=e},s.bV=m;var E=function(e,t,r,i){o.call(this,e,t,r),this.className="Enum.Value",this.id=i};E.prototype=Object.create(o.prototype),s.bV.SV=E;var w=function(e,t,r,i){o.call(this,e,t,r),this.aj=i};w.prototype=Object.create(o.prototype),s.hj=w;var I=function(e,t,r,i){h.call(this,e,t,r,i),this.className="Service",this.RV=null},S=I.prototype=Object.create(h.prototype);S.ga=function(r){return this.RV&&!r?this.RV:this.RV=function(t,r){for(var i=function(e){t.PV.uj.call(this),this.cj=e||function(e,t,r){setTimeout(r.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},n=i.prototype=Object.create(t.PV.uj.prototype),s=r.uV(t.sV.uj.lj),o=0;o<s.length;o++)!function(t){n[t.name]=function(i,n){try{try{i=t.pj.RV.decode(e.wrap(i))}catch(s){if(!(s instanceof TypeError))throw s}if(!(i&&i instanceof t.pj.RV))return void setTimeout(n.bind(this,Error("Illegal request type provided to service method "+r.name+"#"+t.name)),0);this.cj(t.aV(),i,function(e,i){if(e)return void n(e);try{i=t.fj.RV.decode(i)}catch(s){}return i&&i instanceof t.fj.RV?void n(null,i):void n(Error("Illegal response type received in service method "+r.name+"#"+t.name))})}catch(s){setTimeout(n.bind(this,s),0)}},i[t.name]=function(e,r,n){new i(e)[t.name](r,n)},Object.defineProperty&&(Object.defineProperty(i[t.name],"$options",{value:t.gV()}),Object.defineProperty(n[t.name],"$options",{value:i[t.name].$options}))}(s[o]);return Object.defineProperty&&(Object.defineProperty(i,"$options",{value:r.gV()}),Object.defineProperty(n,"$options",{value:i.$options}),Object.defineProperty(i,"$type",{value:r}),Object.defineProperty(n,"$type",{value:r})),i}(t,this)},s.uj=I;var b=function(e,t,r,i){o.call(this,e,t,r),this.className="Service.Method",this.options=i||{}},R=b.prototype=Object.create(o.prototype);R.gV=u.gV,s.uj.dj=b;var P=function(e,t,r,i,n,s,o,a){b.call(this,e,t,r,a),this.className="Service.RPCMethod",this.gj=i,this.yj=n,this.vj=s,this.mj=o,this.pj=null,this.fj=null};return P.prototype=Object.create(b.prototype),s.uj.lj=P,s}(t),t.PV=function(e,t,i){function n(e,t){t.Uq=e,t.messages&&t.messages.forEach(function(t){n(e,t)}),t.Nq&&t.Nq.forEach(function(t){n(e,t)})}var s=function(e){this.Tj=new i.vV(this,null,""),this.Ej=this.Tj,this.wj=!1,this.result=null,this.files={},this.Ij=null,this.options=e||{},this.Uq="proto3"===this.options.Uq?"proto3":"proto2"},o=s.prototype;return o.reset=function(){this.Ej=this.Tj},o.Sj=function(e){if("string"!=typeof e||!t.gq.test(e))throw Error("Illegal package: "+e);var r,n,s=e.split(".");for(r=0;r<s.length;r++)if(!t.VA.test(s[r]))throw Error("Illegal package: "+s[r]);for(r=0;r<s.length;r++)n=this.Ej.lV(s[r]),null===n&&this.Ej.cV(n=new i.vV(this,this.Ej,s[r])),this.Ej=n;return this},s.bj=function(r){if("string"!=typeof r.name||!t.VA.test(r.name))return!1;if("undefined"!=typeof r.values||"undefined"!=typeof r.Qq)return!1;var i;if("undefined"!=typeof r.fields){if(!e.yc.isArray(r.fields))return!1;var n,o=[];for(i=0;i<r.fields.length;i++){if(!s.Rj(r.fields[i]))return!1;if(n=parseInt(r.fields[i].id,10),o.indexOf(n)>=0)return!1;o.push(n)}o=null}if("undefined"!=typeof r.Nq){if(!e.yc.isArray(r.Nq))return!1;for(i=0;i<r.Nq.length;i++)if(!s.Pj(r.Nq[i]))return!1}if("undefined"!=typeof r.messages){if(!e.yc.isArray(r.messages))return!1;for(i=0;i<r.messages.length;i++)if(!s.bj(r.messages[i])&&!s.Aj(r.messages[i]))return!1}if("undefined"!=typeof r.extensions&&(!e.yc.isArray(r.extensions)||2!==r.extensions.length||"number"!=typeof r.extensions[0]||"number"!=typeof r.extensions[1]))return!1;if("proto3"===r.Uq){for(i=0;i<r.fields.length;i++){var a=r.fields[i];if("required"===a.rule)return!1;if(a["default"])return!1;if(a.options)for(var h=Object.keys(a.options),u=0;u<h.length;u++)if("default"===h[u])return!1}if(r.extensions)return!1}return!0},s.Rj=function(e){if("string"!=typeof e.rule||"string"!=typeof e.name||"string"!=typeof e.type||"undefined"==typeof e.id)return!1;if(!(t.fq.test(e.rule)&&t.VA.test(e.name)&&t.gq.test(e.type)&&t.Iq.test(""+e.id)))return!1;if("undefined"!=typeof e.options){if("object"!=typeof e.options)return!1;for(var r,i=Object.keys(e.options),n=0;n<i.length;n++)if("string"!=typeof(r=i[n])||"string"!=typeof e.options[r]&&"number"!=typeof e.options[r]&&"boolean"!=typeof e.options[r])return!1}return!0},s.Pj=function(r){if("string"!=typeof r.name||!t.VA.test(r.name))return!1;if("undefined"==typeof r.values||!e.yc.isArray(r.values)||0==r.values.length)return!1;for(var i=0;i<r.values.length;i++){if("object"!=typeof r.values[i])return!1;if("string"!=typeof r.values[i].name||"undefined"==typeof r.values[i].id)return!1;if(!t.VA.test(r.values[i].name)||!t.Sq.test(""+r.values[i].id))return!1}return"proto3"!==r.Uq||0===r.values[0].id},o.create=function(t){if(!t)return this;if(e.yc.isArray(t)||(t=[t]),0===t.length)return this;var r=[];for(r.push(t);r.length>0;){if(t=r.pop(),!e.yc.isArray(t))throw Error("Not a valid namespace: "+JSON.stringify(t));for(;t.length>0;){var n=t.shift();if(s.bj(n)){var o=new i.pu(this,this.Ej,n.name,n.options,n.zq,n.Uq),a={};if(n.Wq)for(var h=Object.keys(n.Wq),u=0,c=h.length;u<c;++u)o.cV(a[h[u]]=new i.pu.BV(this,o,h[u]));if(n.fields&&n.fields.length>0)for(u=0,c=n.fields.length;u<c;++u){var l=n.fields[u];if(null!==o.lV(l.id))throw Error("Duplicate field id in message "+o.name+": "+l.id);if(l.options)for(var p=Object.keys(l.options),f=0,d=p.length;f<d;++f){if("string"!=typeof p[f])throw Error("Illegal field option name in message "+o.name+"#"+l.name+": "+p[f]);if("string"!=typeof l.options[p[f]]&&"number"!=typeof l.options[p[f]]&&"boolean"!=typeof l.options[p[f]])throw Error("Illegal field option value in message "+o.name+"#"+l.name+"#"+p[f]+": "+l.options[p[f]])}var g=null;if("string"==typeof l.tV&&(g=a[l.tV],"undefined"==typeof g))throw Error("Illegal oneof in message "+o.name+"#"+l.name+": "+l.tV);l=new i.pu.pV(this,o,l.rule,l.keytype,l.type,l.name,l.id,l.options,g,n.Uq),g&&g.fields.push(l),o.cV(l)}var y=[];if("undefined"!=typeof n.Nq&&n.Nq.length>0)for(u=0;u<n.Nq.length;u++)y.push(n.Nq[u]);if(n.messages&&n.messages.length>0)for(u=0;u<n.messages.length;u++)y.push(n.messages[u]);if(n.extensions&&(o.extensions=n.extensions,o.extensions[0]<e.QH&&(o.extensions[0]=e.QH),o.extensions[1]>e.YH&&(o.extensions[1]=e.YH)),this.Ej.cV(o),y.length>0){r.push(t),t=y,y=null,this.Ej=o,o=null;continue}y=null,o=null}else if(s.Pj(n)){for(o=new i.bV(this,this.Ej,n.name,n.options,n.Uq),u=0;u<n.values.length;u++)o.cV(new i.bV.SV(this,o,n.values[u].name,n.values[u].id));this.Ej.cV(o),o=null}else if(s.kj(n)){o=new i.uj(this,this.Ej,n.name,n.options);for(u in n.Qq)n.Qq.hasOwnProperty(u)&&o.cV(new i.uj.lj(this,o,u,n.Qq[u].jE,n.Qq[u].response,n.Qq[u].Kq,n.Qq[u].Jq,n.Qq[u].options));this.Ej.cV(o),o=null}else{if(!s.Aj(n))throw Error("Not a valid definition: "+JSON.stringify(n));if(o=this.Ej.resolve(n.nV))for(u=0;u<n.fields.length;u++){if(null!==o.lV(n.fields[u].id))throw Error("Duplicate extended field id in message "+o.name+": "+n.fields[u].id);if(n.fields[u].id<o.extensions[0]||n.fields[u].id>o.extensions[1])throw Error("Illegal extended field id in message "+o.name+": "+n.fields[u].id+" ("+o.extensions.join(" to ")+" expected)");var v=n.fields[u].name;this.options.KH&&(v=i.pu.pV.nj(n.fields[u].name)),l=new i.pu.qV(this,o,n.fields[u].rule,n.fields[u].type,this.Ej.aV()+"."+v,n.fields[u].id,n.fields[u].options);var m=new i.hj(this,this.Ej,n.fields[u].name,l);l.oj=m,this.Ej.cV(m),o.cV(l)}else if(!/\.?google\.protobuf\./.test(n.nV))throw Error("Extended message "+n.nV+" is not defined")}n=null}t=null,this.Ej=this.Ej.parent}return this.wj=!1,this.result=null,this},o["Cj"]=function(t,i){if("string"==typeof i){if(e.yc.WH&&(i=r(39).resolve(i)),this.files[i]===!0)return this.reset(),this;this.files[i]=!0}else if("object"==typeof i){var s=i.root;e.yc.WH&&(s=r(39).resolve(s));var o=[s,i.Oj].join("/");if(this.files[o]===!0)return this.reset(),this;this.files[o]=!0}if(t.imports&&t.imports.length>0){var a,h="/",u=!1;"object"==typeof i?(this.Ij=i.root,u=!0,a=this.Ij,i=i.Oj,(a.indexOf("\\")>=0||i.indexOf("\\")>=0)&&(h="\\")):"string"==typeof i?this.Ij?a=this.Ij:i.indexOf("/")>=0?(a=i.replace(/\/[^\/]*$/,""),""===a&&(a="/")):i.indexOf("\\")>=0?(a=i.replace(/\\[^\\]*$/,""),h="\\"):a=".":a=null;for(var c=0;c<t.imports.length;c++)if("string"==typeof t.imports[c]){if(!a)throw Error("Cannot determine import root: File name is unknown");var l=t.imports[c];if(/^google\/protobuf\//.test(l))continue;if(l=a+h+l,this.files[l]===!0)continue;/\.proto$/i.test(l)&&!e.Rq&&(l=l.replace(/\.proto$/,".json"));var p=e.yc.fetch(l);if(null===p)throw Error("Failed to import '"+l+"' in '"+i+"': File not found");/\.json$/i.test(l)?this["Cj"](JSON.parse(p+""),l):this["Cj"](new e.Rq.Ex(p+"").parse(),l)}else i?/\.(\w+)$/.test(i)?this["Cj"](t.imports[c],i.replace(/^(.+)\.(\w+)$/,function(e,t,r){return t+"_import"+c+"."+r})):this["Cj"](t.imports[c],i+"_import"+c):this["Cj"](t.imports[c]);u&&(this.Ij=null)}t["package"]&&this.Sj(t["package"]),t.Uq&&n(t.Uq,t);var f=this.Ej;return t.options&&Object.keys(t.options).forEach(function(e){f.options[e]=t.options[e]}),t.messages&&(this.create(t.messages),this.Ej=f),t.Nq&&(this.create(t.Nq),this.Ej=f),t.services&&(this.create(t.services),this.Ej=f),t["extends"]&&this.create(t["extends"]),this.reset(),this},s.kj=function(e){return!("string"!=typeof e.name||!t.VA.test(e.name)||"object"!=typeof e.Qq)},s.Aj=function(r){if("string"!=typeof r.nV||!t.gq.test(r.nV))return!1;var i;if("undefined"!=typeof r.fields){if(!e.yc.isArray(r.fields))return!1;var n,o=[];for(i=0;i<r.fields.length;i++){if(!s.Rj(r.fields[i]))return!1;if(n=parseInt(r.id,10),o.indexOf(n)>=0)return!1;o.push(n)}o=null}return!0},o.Nj=function(){var r;if(null!=this.Ej&&"object"!=typeof this.Ej.type){if(this.Ej instanceof i.vV)for(var n=this.Ej.children,s=0,o=n.length;s<o;++s)this.Ej=n[s],this.Nj();else if(this.Ej instanceof i.pu.pV){if(t.JA.test(this.Ej.type))this.Ej.type=e.VH[this.Ej.type];else{if(!t.gq.test(this.Ej.type))throw Error("Illegal type reference in "+this.Ej.toString(!0)+": "+this.Ej.type);if(r=(this.Ej instanceof i.pu.qV?this.Ej.oj.parent:this.Ej.parent).resolve(this.Ej.type,!0),!r)throw Error("Unresolvable type reference in "+this.Ej.toString(!0)+": "+this.Ej.type);if(this.Ej.mV=r,r instanceof i.bV){if(this.Ej.type=e.VH["enum"],"proto3"===this.Ej.Uq&&"proto3"!==r.Uq)throw Error("Proto3 message refers to proto2 enum; this is not allowed due to differing enum semantics in proto3")}else{if(!(r instanceof i.pu))throw Error("Illegal type reference in "+this.Ej.toString(!0)+": "+this.Ej.type);this.Ej.type=r.zq?e.VH.group:e.VH.message}}if(this.Ej.map){if(!t.JA.test(this.Ej.tj))throw Error("Illegal key type for map field in "+this.Ej.toString(!0)+": "+this.Ej.type);this.Ej.tj=e.VH[this.Ej.tj]}}else if(this.Ej instanceof e.sV.bV.SV);else if(this.Ej instanceof e.sV.uj.dj){if(!(this.Ej instanceof e.sV.uj.lj))throw Error("Illegal service type in "+this.Ej.toString(!0));if(r=this.Ej.parent.resolve(this.Ej.gj),!(r&&r instanceof e.sV.pu))throw Error("Illegal type reference in "+this.Ej.toString(!0)+": "+this.Ej.gj);if(this.Ej.pj=r,r=this.Ej.parent.resolve(this.Ej.yj),!(r&&r instanceof e.sV.pu))throw Error("Illegal type reference in "+this.Ej.toString(!0)+": "+this.Ej.yj);this.Ej.fj=r}else if(!(this.Ej instanceof e.sV.pu.BV||this.Ej instanceof e.sV.hj))throw Error("Illegal object in namespace: "+typeof this.Ej+":"+this.Ej);this.reset()}},o.ga=function(e){if(this.reset(),this.wj||(this.Nj(),this.wj=!0,this.result=null),null===this.result&&(this.result=this.Tj.ga()),e){for(var t="string"==typeof e?e.split("."):e,r=this.result,i=0;i<t.length;i++){if(!r[t[i]]){r=null;break}r=r[t[i]]}return r}return this.result},o._j=function(e){return e?this.Tj.resolve(e):this.Tj},o.toString=function(){return"Builder"},s.pu=function(){},s.uj=function(){},s}(t,t.Lang,t.sV),t.Map=function(e){function t(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}var r=function(t,r){if(!t.map)throw Error("field is not a map");if(this.aj=t,this.DV=new e.sV.Element(t.tj,null,(!0),t.Uq),this.MV=new e.sV.Element(t.type,t.mV,(!1),t.Uq),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),r)for(var i=Object.keys(r),n=0;n<i.length;n++){var s=this.DV.OV(i[n]),o=this.MV.wV(r[i[n]]);this.map[this.DV.NV(s)]={key:s,value:o}}},i=r.prototype;return i.clear=function(){this.map={}},i["delete"]=function(e){var t=this.DV.NV(this.DV.wV(e)),r=t in this.map;return delete this.map[t],r},i.entries=function(){for(var e,r=[],i=Object.keys(this.map),n=0;n<i.length;n++)r.push([(e=this.map[i[n]]).key,e.value]);return t(r)},i.keys=function(){for(var e=[],r=Object.keys(this.map),i=0;i<r.length;i++)e.push(this.map[r[i]].key);return t(e)},i.values=function(){for(var e=[],r=Object.keys(this.map),i=0;i<r.length;i++)e.push(this.map[r[i]].value);return t(e)},i.forEach=function(e,t){for(var r,i=Object.keys(this.map),n=0;n<i.length;n++)e.call(t,(r=this.map[i[n]]).value,r.key,this)},i.set=function(e,t){var r=this.DV.wV(e),i=this.MV.wV(t);return this.map[this.DV.NV(r)]={key:r,value:i},this},i.get=function(e){var t=this.DV.NV(this.DV.wV(e));if(t in this.map)return this.map[t].value},i.has=function(e){var t=this.DV.NV(this.DV.wV(e));return t in this.map},r}(t),t.Fj=function(e,r,i){return("string"==typeof r||r&&"string"==typeof r.Oj&&"string"==typeof r.root)&&(i=r,r=void 0),t.ya(new t.Rq.Ex(e).parse(),r,i)},t.Lj=t.Fj,t.Dj=function(e,r,i){if(r&&"object"==typeof r?(i=r,r=null):r&&"function"==typeof r||(r=null),r)return t.yc.fetch("string"==typeof e?e:e.root+"/"+e.Oj,function(n){if(null===n)return void r(Error("Failed to fetch file"));try{r(null,t.Fj(n,i,e))}catch(s){r(s)}});var n=t.yc.fetch("object"==typeof e?e.root+"/"+e.Oj:e);return null===n?null:t.Fj(n,i,e)},t.Mj=t.Dj,t.Bj=function(e){return e=e||{},"undefined"==typeof e.KH&&(e.KH=t.KH),"undefined"==typeof e.JH&&(e.JH=t.JH),new t.PV(e)},t.ya=function(e,r,i){return("string"==typeof r||r&&"string"==typeof r.Oj&&"string"==typeof r.root)&&(i=r,r=null),r&&"object"==typeof r||(r=t.Bj()),"string"==typeof e&&(e=JSON.parse(e)),r["Cj"](e,i),r.Nj(),r},t.xj=function(e,r,i){if(r&&"object"==typeof r?(i=r,r=null):r&&"function"==typeof r||(r=null),r)return t.yc.fetch("string"==typeof e?e:e.root+"/"+e.Oj,function(n){if(null===n)return void r(Error("Failed to fetch file"));try{r(null,t.ya(JSON.parse(n),i,e))}catch(s){r(s)}});var n=t.yc.fetch("object"==typeof e?e.root+"/"+e.Oj:e);return null===n?null:t.ya(JSON.parse(n),i,e)},t}"object"==typeof e&&e&&"object"==typeof t&&t?e.i=a(r(22)):r(27).amd?(n=[r(80)],i=a,s="function"==typeof i?i.apply(t,n):i,!(void 0!==s&&(e.i=s))):(o.Vm=o.Vm||{}).Uj=a(o.Vm.qm)}(this)}).call(t,r(28)(e))},function(e,t){"use strict";var r={};r.Hj=function(){return Math.random().toString(36).substr(2,10)},r.qj=r.Hj(),r.Vj=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.jj=function(e){var t=e.split("\nm=");return t.map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.Gj=function(e,t){return r.Vj(e).filter(function(e){return 0===e.indexOf(t)})},r.qD=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var r={Qj:t[0],Yj:t[1],protocol:t[2].toLowerCase(),Kj:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":r.Jj=t[i+1];break;case"rport":r.zj=parseInt(t[i+1],10);break;case"tcptype":r.Wj=t[i+1];break;default:r[t[i]]=t[i+1]}return r},r.Xj=function(e){var t=[];t.push(e.Qj),t.push(e.Yj),t.push(e.protocol.toUpperCase()),t.push(e.Kj),t.push(e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.Jj&&e.zj&&(t.push("raddr"),t.push(e.Jj),t.push("rport"),t.push(e.zj)),e.Wj&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.Wj)),"candidate:"+t.join(" ")},r.$j=function(e){return e.substr(14).split(" ")},r.Zj=function(e){var t=e.substr(9).split(" "),r={eG:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.tG=parseInt(t[1],10),r.rG=3===t.length?parseInt(t[2],10):1,r},r.iG=function(e){var t=e.eG;return void 0!==e.nG&&(t=e.nG),"a=rtpmap:"+t+" "+e.name+"/"+e.tG+(1!==e.rG?"/"+e.rG:"")+"\r\n"},r.sG=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.oG=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.aG=function(e){for(var t,r={},i=e.substr(e.indexOf(" ")+1).split(";"),n=0;n<i.length;n++)t=i[n].trim().split("="),r[t[0].trim()]=t[1];return r},r.hG=function(e){var t="",r=e.eG;if(void 0!==e.nG&&(r=e.nG),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach(function(t){i.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+r+" "+i.join(";")+"\r\n"}return t},r.uG=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),cG:t.join(" ")}},r.lG=function(e){var t="",r=e.eG;return void 0!==e.nG&&(r=e.nG),e.pG&&e.pG.length&&e.pG.forEach(function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.cG&&e.cG.length?" "+e.cG:"")+"\r\n"}),t},r.fG=function(e){var t=e.indexOf(" "),r={dG:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(r.gG=e.substr(t+1,i-t-1),r.value=e.substr(i+1)):r.gG=e.substr(t+1),r},r.yG=function(e){var t=r.Gj(e,"a=mid:")[0];if(t)return t.substr(6)},r.vG=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.mG=function(e,t){var i=r.Gj(e+t,"a=fingerprint:");return{TG:"auto",EG:i.map(r.vG)}},r.wG=function(e,t){var r="a=setup:"+t+"\r\n";return e.EG.forEach(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),r},r.IG=function(e,t){var i=r.Vj(e);i=i.concat(r.Vj(t));var n={SG:i.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:i.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)};return n},r.bG=function(e){return"a=ice-ufrag:"+e.SG+"\r\na=ice-pwd:"+e.password+"\r\n"},r.RG=function(e){for(var t={PG:[],AG:[],kG:[],CG:[]},i=r.Vj(e),n=i[0].split(" "),s=3;s<n.length;s++){var o=n[s],a=r.Gj(e,"a=rtpmap:"+o+" ")[0];if(a){var h=r.Zj(a),u=r.Gj(e,"a=fmtp:"+o+" ");switch(h.parameters=u.length?r.aG(u[0]):{},h.pG=r.Gj(e,"a=rtcp-fb:"+o+" ").map(r.uG),t.PG.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":t.kG.push(h.name.toUpperCase())}}}return r.Gj(e,"a=extmap:").forEach(function(e){t.AG.push(r.sG(e))}),t},r.OG=function(e,t){var i="";i+="m="+e+" ",i+=t.PG.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=t.PG.map(function(e){return void 0!==e.nG?e.nG:e.eG}).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.PG.forEach(function(e){i+=r.iG(e),i+=r.hG(e),i+=r.lG(e)});var n=0;return t.PG.forEach(function(e){e.NG>n&&(n=e.NG)}),n>0&&(i+="a=maxptime:"+n+"\r\n"),i+="a=rtcp-mux\r\n",t.AG.forEach(function(e){i+=r.oG(e)}),i},r._G=function(e){var t,i=[],n=r.RG(e),s=n.kG.indexOf("RED")!==-1,o=n.kG.indexOf("ULPFEC")!==-1,a=r.Gj(e,"a=ssrc:").map(function(e){return r.fG(e)}).filter(function(e){return"cname"===e.gG}),h=a.length>0&&a[0].dG,u=r.Gj(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===h&&(t=u[0][1]),n.PG.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={dG:h,FG:parseInt(e.parameters.apt,10),LG:{dG:t}};i.push(r),s&&(r=JSON.parse(JSON.stringify(r)),r.DG={dG:t,MG:o?"red+ulpfec":"red"},i.push(r))}}),0===i.length&&h&&i.push({dG:h});var c=r.Gj(e,"b=");return c.length&&(0===c[0].indexOf("b=TIAS:")?c=parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")&&(c=parseInt(c[0].substr(5),10)),i.forEach(function(e){e.BG=c})),i},r.xG=function(e){var t={},i=r.Gj(e,"a=ssrc:").map(function(e){return r.fG(e)}).filter(function(e){return"cname"===e.gG})[0];i&&(t.UG=i.value,t.dG=i.dG);var n=r.Gj(e,"a=rtcp-rsize");t.HG=n.length>0,t.qG=0===n.length;var s=r.Gj(e,"a=rtcp-mux");return t.VG=s.length>0,t},r.jG=function(e){var t,i=r.Gj(e,"a=msid:");if(1===i.length)return t=i[0].substr(7).split(" "),{stream:t[0],track:t[1]};var n=r.Gj(e,"a=ssrc:").map(function(e){return r.fG(e)}).filter(function(e){return"msid"===e.gG});return n.length>0?(t=n[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},r.GG=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.QG=function(e,t,i,n){var s=r.OG(e.kind,t);if(s+=r.bG(e.YG.getLocalParameters()),s+=r.wG(e.KG.getLocalParameters(),"offer"===i?"actpass":"active"),s+="a=mid:"+e.JG+"\r\n",s+=e.direction?"a="+e.direction+"\r\n":e.zG&&e.WG?"a=sendrecv\r\n":e.zG?"a=sendonly\r\n":e.WG?"a=recvonly\r\n":"a=inactive\r\n",e.zG){var o="msid:"+n.id+" "+e.zG.track.id+"\r\n";s+="a="+o,s+="a=ssrc:"+e.XG[0].dG+" "+o,e.XG[0].LG&&(s+="a=ssrc:"+e.XG[0].LG.dG+" "+o,s+="a=ssrc-group:FID "+e.XG[0].dG+" "+e.XG[0].LG.dG+"\r\n")}return s+="a=ssrc:"+e.XG[0].dG+" cname:"+r.qj+"\r\n",e.zG&&e.XG[0].LG&&(s+="a=ssrc:"+e.XG[0].LG.dG+" cname:"+r.qj+"\r\n"),s},r.$G=function(e,t){for(var i=r.Vj(e),n=0;n<i.length;n++)switch(i[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[n].substr(2)}return t?r.$G(t):"sendrecv"},r.ZG=function(e){var t=r.Vj(e),i=t[0].split(" ");return i[0].substr(2)},r.pr=function(e){return"0"===e.split(" ",2)[1]},e.i=r},function(e,t,r){"use strict";var i=r(3),n=r(18),s=function(){function e(e,t){this.msg=e,this.eQ=Date.now()+t,this.tQ=i.defer()}return e.prototype.rQ=function(){return Date.now()>=this.eQ},e}(),o=function(){function e(e,t,r,i,n,s,o){void 0===t&&(t=3e4),void 0===r&&(r=100),void 0===i&&(i=3e4),void 0===n&&(n=15e3),void 0===s&&(s=Date),void 0===o&&(o=!1),this.iQ=1,this.nQ=-1,this.sQ=-1,this.P_={},this.oQ=[],this.aQ=[],this.hQ=!1,this.uQ=!0,this.cQ=e,this.lQ=Array(),this.WE=t,this.XE=r,this.$E=i,this.pQ=n,this.fQ=s,this.hQ=o||/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge./i.test(navigator.userAgent)}return e.prototype.Jt=function(e){var t=e.service+"_"+e.msgId,r=this.P_[t];null!=r?r(e):n.R().error(n.P+"Could not find a dispatcher for ",e,t,this.P_)},e.prototype.on=function(e,t,r){this.P_[e+"_"+t]=r},e.prototype.onerror=function(e){this.oQ.push(e)},e.prototype.QL=function(e){this.aQ.push(e)},e.prototype.dQ=function(){var e=this;if(!window.WebSocket)return void this.oQ.forEach(function(e){return e("WebSocket not defined")});var t=new WebSocket(this.cQ);return t.binaryType="arraybuffer",t.onopen=function(t){e.gQ(),n.R().debug(n.P+"HiveServicesConnection established to "+e.cQ),e.sQ=(new e.fQ).getTime(),e.yQ(),e.aQ.forEach(function(t){return t(e)}),e.vQ(),e.mQ()},t.onclose=function(t){e.close(e.uQ),e.connect()},t.onmessage=function(t){e.Jt(n.pu.Sg(t.data))},t.onerror=function(t){e.close(!0),e.oQ.forEach(function(e){return e(t.toString())})},t},e.prototype.isOpen=function(){return null!=this.rb&&this.rb.readyState==this.rb.OPEN},e.prototype.connect=function(e){var t=this;e&&(this.uQ=!0),this.uQ&&1!=this.isOpen()&&(this.nQ>0||(this.sQ>-1&&(new this.fQ).getTime()-this.sQ>this.WE?(this.iQ=n.ct.wg,this.sQ=-1):this.iQ=Math.min(2*this.iQ,this.WE),this.nQ=window.setTimeout(function(){t.nQ=-1,n.R().debug(n.P+"Connection attempt to "+t.cQ+" [t:"+t.iQ+" hb:"+t.hQ+"]"),t.rb=t.dQ(),t.iQ=Math.max(t.iQ,n.ct.wg)},this.iQ)))},e.prototype.gQ=function(){this.nQ>-1&&(clearTimeout(this.nQ),this.nQ=-1)},e.prototype.close=function(e){this.uQ=void 0!=e&&e,n.R().debug(n.P+"Closing connection [reconnect:"+this.uQ+"]"),this.gQ(),null!=this.rb&&(this.rb.close(),this.rb=null)},e.prototype.yQ=function(){for(;this.lQ.length>0;){var e=this.lQ.pop();try{e.rQ()?e.tQ.reject(new Error("Message expired")):(this.vQ(),this.rb.send(e.msg.Ig()))}catch(t){if(t.code===DOMException.INVALID_STATE_ERR){this.lQ.push(e);break}n.R().error(n.P+"Failed to send the message, dropped: ",t.code,t.name),e.tQ.reject(t)}}this.mQ()},e.prototype.vQ=function(){this.TQ&&(clearTimeout(this.TQ),this.TQ=null)},e.prototype.mQ=function(){var e=this;this.hQ&&!this.TQ&&(this.TQ=window.setInterval(function(){e.send(new n.pu(Services.iM,0,""))},this.pQ))},e.prototype.send=function(e,t){if(void 0===t&&(t=this.$E),this.lQ.length>=this.XE)throw new Error("HiveServices connection cannot queue more messages");var r=new s(e,t);return this.lQ.push(r),this.rb&&this.yQ(),r.tQ.Vt},e.prototype.EQ=function(e){this.hQ=e,this.hQ&&this.mQ()},e.prototype.wQ=function(){return null!=this.rb},e}();t.GL=o},function(e,t,r){"use strict";var i=r(55),n=r(56),s=r(1),o=function(){function e(){this.Vw=null,this.zo=s.Framework.resolve(s.Framework.Tt.pt)}return e.prototype.init=function(e){this.R=s.Framework.resolve(s.Framework.Tt.rt).log(e.sessionId),this.$O=e,this.Vw=e.Vw},e.prototype.Qw=function(e,t){var r=null,s=e.RS();return n.Ke.zC(s)?this.IQ=r=new n.Ke.VO(e,t,this.$O):i.DASH.zC(s)?this.IQ=r=new i.DASH.mO(e,this.$O):this.R.warn("COULD NOT FIND A CONTEXT FOR "+s),null!=r&&this.SQ(this.IQ),r},e.prototype.SQ=function(e){var t=this;null!=this.Vw?this.Vw.stop().then(function(r){t.Vw.start(e)}):this.Vw.start(e)},e.prototype.bQ=function(e){if(null==this.IQ)this.R.warn("FIRST REQUEST, COULD NOT FIND RIGHT CONTEXT "+e.url);else if(!this.IQ.ZP(e))return this.R.warn("REQUEST DOES NOT BELONG TO THE CURRENT CONTEXT "+e.url),null;return this.IQ},e}();t.RQ=o},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=r(19),o=r(51),a=r(8),h=r(4),u=r(1),c=r(9),l=function(){function e(){this.PQ=new n,this.Qn=new a.gs.es}return e.prototype.init=function(e){this.R=u.Framework.resolve(u.Framework.Tt.rt).log(e.sessionId),this.AQ=e.Uw},e.prototype.jE=function(e){var t=this,r=u.Framework.resolve(u.Framework.Tt.gt),i=!1,n=e.iy(),s=e.zg,l=e.ny();e.xhr=r,
e.Gg.Ug=u.Framework.time(),r.open("GET",l,!0),this.R.debug("FRL ISSUE REQ FOR FRAGMENT "+e.$g.toString()+"-"+e.Gg.Fg+" ["+c.Es[e.ey()]+"] TO FALLBACK "),e.$g.Rw()&&(r.responseType="arraybuffer"),this.kQ(e.type)&&s.range&&e.ey()!=c.Es.ms&&r.setRequestHeader("Range","bytes="+s.range),h.an.wt.Li&&this.CQ(e.type)&&0!=e.Gg.Fg&&(this.R.info("SET RANGE "+("bytes="+e.Gg.Fg+"-")),r.setRequestHeader("Range","bytes="+e.Gg.Fg+"-")),r.onreadystatechange=function(t){e.zg&&r.readyState<4&&(e.zg.readyState=r.readyState,e.zg.onreadystatechange({currentTarget:e.zg}))},r.onprogress=function(i){if(!t.CQ(e.type)){var n=new o.fC;n.lengthComputable=i.lengthComputable,n.total=i.total,n.loaded=i.loaded,s.onprogress(n),r.total=i.total}s.readyState=3,e.Gg.Dg=i.total},r.onload=function(){return i=!0,e.zg.status=r.status,e.responseHeaders=r.getAllResponseHeaders(),r.status<200||r.status>299?(t.R.debug("FRL SERVER RETURNED ERROR CODE "+r.status),void t.error(e,n)):(e.$g.Rw()?t.kQ(e.type)?e.Kg=r.response:t.CQ(e.type)&&(h.an.wt.Li?e.Kg=u.Framework.it()?null:a.gs.appendBuffer(e.Kg,r.response):e.Kg=r.response):e.hO=r.responseText,e.loaded(),t.PQ["delete"](n),e.Gg.Hg=u.Framework.time(),t.OQ(e),t.NQ(e),t.AQ._Q(e),void(r=null))},r.onerror=function(){i||t.error(e,n)},this.PQ.set(n,e),r.send()},e.prototype.error=function(e,t){var r="COULD NOT DOWNLOAD "+e.ny()+" status: "+e.xhr.status;e.type==s.Cg.Pg?this.R.debug(r):this.R.warn(r),this.FQ(e),this.PQ["delete"](t),this.AQ.LQ(e)},e.prototype.cr=function(e){return this.PQ.has(e)},e.prototype.kQ=function(e){return e==s.Cg.Pg||e==s.Cg.Rg||e==s.Cg.bg},e.prototype.CQ=function(e){return e==s.Cg.Ag},e.prototype.DQ=function(e){var t=this.PQ.get(e);this.PQ["delete"](e),t&&(this.R.debug("JSLoaderFragment:abort XHR"),t.xhr&&t.xhr.abort())},e.prototype.NQ=function(e){this.R.info("SUCCESS FROM FALLBACK FOR "+e.ny()+" ["+s.Cg[e.type]+"]["+e.Gg.Dg+"] AFTER "+e.uy()+" [curr:"+e.py().Zn()+" avg:"+this.Qn.Zn()+"]")},e.prototype.FQ=function(e){},e.prototype.MQ=function(){return this.Qn},e.prototype.OQ=function(e){e.ey()===c.Es.vs&&this.Qn.Jn(e.py())},e}();t.BQ=l},function(e,t,r){"use strict";var i=r(29),n=r(1),s=r(41),o=r(10),a=r(15),h=r(69),u=r(72),c=r(67),l=r(70),p=r(16),f=r(7),d=r(94),g=r(90),y=r(87),v=r(102),m=r(99),T=r(88),E=r(112),w=r(93),I=r(118),S=r(59),b=r(122),R=r(123),P=r(98),A=r(31),k=r(13),C=r(140),O=r(141),N=r(97),_=r(92),F=r(124),L=r(132),D=r(113),M=r(95),B=r(100),x=r(66),U=r(128),H=r(131);if("undefined"==typeof q)var q=!1;if("undefined"==typeof V)var V=!1;if(q)var j=r(114).xQ,G=r(142).UQ;if(V)var Q=r(58).jN;if("undefined"==typeof Y)var Y=!1;if(Y)var K=r(68).qL;else var J=r(71).VD;var z=function(){function e(e){this.HQ=!1,e&&(this.HQ=e)}return e.prototype.apply=function(e){this.HQ?Y&&e.bind(new i.rw(o.Os.Ss,K,i.iw.uw)):(e.bind(new i.rw(o.Os.Ps,a.th,i.iw.uw)),e.bind(new i.rw(o.Os.vt,h.YL,i.iw.uw)),e.bind(new i.rw(o.Os.Is,u.JD,i.iw.uw)),e.bind(new i.rw(o.Os.lt,c.UL,i.iw.uw)),e.bind(new i.rw(n.Framework.Tt.rt,s.dA.fA,i.iw.uw)),e.bind(new i.rw(o.Os.ws,l.Stats.La,i.iw.yw)),e.bind(new i.rw(o.Os.ks,p.ce.ru,i.iw.yw)),e.bind(new i.rw(o.Os.Cs,p.ce.La,i.iw.yw)),Y?e.bind(new i.rw(o.Os.Ss,K,i.iw.uw)):e.bind(new i.rw(o.Os.Ss,J,i.iw.uw))),e.bind(new i.rw(o.Os.bs,x.LL,i.iw.uw)),e.bind(new i.rw(f.Un.Fn,M.qQ,i.iw.uw)),e.bind(new i.rw(f.Un.bn,d.VQ,i.iw.uw)),e.bind(new i.rw(f.Un.En,g.jQ,i.iw.yw)),e.bind(new i.rw(f.Un.Rn,y.RQ,i.iw.yw)),e.bind(new i.rw(f.Un.gn,m.Pi,i.iw.yw)),e.bind(new i.rw(f.Un.yn,v.GQ,i.iw.yw)),e.bind(new i.rw(f.Un.In,T.BQ,i.iw.yw)),e.bind(new i.rw(n.Framework.Tt.gt,XMLHttpRequest)),e.bind(new i.rw(f.Un._n,D.QQ,i.iw.uw)),e.bind(new i.rw(f.Un.Cn,E.YQ,i.iw.yw)),e.bind(new i.rw(n.Framework.Tt.pt,C.KQ,i.iw.uw)),e.bind(new i.rw(f.Un.yt,O.JQ,i.iw.uw)),e.bind(new i.rw(f.Un.Tn,B.zQ,i.iw.yw)),e.bind(new i.rw(f.Un.mn,w.WQ,i.iw.yw)),e.bind(new i.rw(f.Un.ln,I.Ji,i.iw.yw)),e.bind(new i.rw(f.Un.pn,S.fF,i.iw.yw)),e.bind(new i.rw(f.Un.fn,H.XQ,i.iw.yw)),e.bind(new i.rw(f.Un.dn,H.$Q,i.iw.yw)),e.bind(new i.rw(f.Un.xn,U.ti,i.iw.yw)),e.bind(new i.rw(f.Un.Sn,b.ZQ,i.iw.yw)),e.bind(new i.rw(f.Un.wn,R.eY,i.iw.yw)),e.bind(new i.rw(f.Un.On,P.tY,i.iw.yw)),e.bind(new i.rw(f.Un.kn,F.rY,i.iw.yw)),e.bind(new i.rw(f.Un.Pn,A.GI,i.iw.yw)),e.bind(new i.rw(f.Un.An,L.iY,i.iw.yw)),e.bind(new i.rw(n.Framework.Tt.ft,k.va.Ui,i.iw.yw)),e.bind(new i.rw(f.Un.Nn,N.nY,i.iw.yw)),q&&(e.bind(new i.rw(f.Un.Dn,j,i.iw.yw)),e.bind(new i.rw(f.Un.Ln,G,i.iw.yw))),V&&e.bind(new i.rw(f.Un.Mn,Q,i.iw.yw)),e.bind(new i.rw(f.Un.Bn,_.sY,i.iw.yw))},e}();t.oY=z},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=r(3),o=r(19),a=r(8),h=r(4),u=r(51),c=r(1),l=r(9),p=r(30),f=r(7),d=r(6),g=r(32),y=function(){function e(){this.aY=new n,this.hY=!1,this.uY=0,this.cY=5,this.lY=c.Framework.resolve(f.Un.Fn),this.pY=new g.WI}return e.prototype.init=function(e){this.R=c.Framework.resolve(c.Framework.Tt.rt).log(e.sessionId),this.xw=e.xw,this.CT=e.CT,this.Vw=e.Vw,this.Oa=e.Hs.Oa,this.sessionId=e.Hs.ticket.sessionId,this.fY=e.fY,this.Hw=e.Hw,this.dY=e.gY,this.qw=e.qw,this.Gw=e.Gw,this.Oa.tD(this.pY)},e.prototype.jE=function(e){try{var t=e.url;this.R.info("HIVE REQ "+t),e.qg=c.Framework.time();var r=this.dY.bQ(e),i=r.tA(e.url);this.mI(e,i,r,o.Cg.bg)}catch(n){this.R.error("PLAYER REQUEST ERROR ",n)}},e.prototype.mI=function(e,t,r,i){if(t.ay()){if(t.ey()==l.Es.vs){var n=r.PP(t,i);return n.xP?(this.R.debug("DO NOT CONTINUE WITH THE REQUEST "+t.ty()+". ALREADY REQUESTED  "+n._P+" PENDING REQUEST "+n.BP),null):n.BP&&i==o.Cg.bg?this.yY(e,t,r,i)?null:(this.R.info("PREFETCH UPGRADE FAILED. THIS SHOULD NOT HAPPEN. CHECK FOR MULTIPLE PLAYER REQUESTS FOR THE SAME FRAGMENT"),this.vY(e,t,r,i)):this.vY(e,t,r,i)}return this.vY(e,t,r,i)}var s=a.gs.qn.next(),h=new o.gy(e,s,i,t,r);return this.aY.set(e,h),h.type=o.Cg.Rg,this.mY(h),h},e.prototype.vY=function(e,t,r,i){var n=this,s=a.gs.qn.next(),h=new o.gy(e,s,i,t,r);if(t.ey()==l.Es.vs&&(r.HP(h),i!==o.Cg.Pg&&i!==o.Cg.kg)){var u=t.bitrate,c=this.qw.TY();this.qw.EY(u),u!=c&&(this.hY=!0,this.uY=0),this.hY&&this.uY++,this.uY==this.cY&&(this.Vw.rF(),this.hY=!1,this.uY=0)}return this.wY(t.ty()).then(function(e){null!=e?(n.IY(h,e),r.qP(h.ty(),h.iy()),r.QP(t.bitrate)):(n.SY(t,h),h.ey()==l.Es.vs&&(r.jP(h),h.type==o.Cg.bg&&n.pY.add(0)))}),h},e.prototype.yY=function(e,t,r,i){return r.UP(e,t,i)},e.prototype.wY=function(e){return this.CT.get(e)},e.prototype.SY=function(e,t){this.xw.contains(e.ty())?(this.R.debug("OBJ IDX CONTAINS "+t.ty()),t.Zg()==o.Cg.Pg&&(t.type=o.Cg.kg),this.Og(t)):t.Zg()!=o.Cg.kg?this.mY(t):t.Xg.qP(t.ty(),t.iy())},e.prototype.abort=function(e){if(this.aY.has(e)){var t=this.aY.get(e),r=t.iy();this.R.debug("REQUEST "+r+" ABORTED "),this.Hw.cr(r)?this.Hw.DQ(r):this.fY.cr(r)&&this.fY.DQ(r)}},e.prototype.Og=function(e){e.type==o.Cg.bg&&(e.type=o.Cg.va,e.jg=!0),this.Oa.OL().reqN++,this.Oa.vD().reqN++;var t=this.bY(e);t&&e.ey()===l.Es.vs&&(this.Oa.mD(t).reqN++,this.Oa.kL(t).reqN++),e.type==o.Cg.kg&&(e.Yg=!0),this.Hw.jE(e)},e.prototype.RY=function(e){0!=e.Jg&&(e.Gg.Fg=e.Jg,this.R.info("ALREADY DOWNLOADED "+e.Gg.Fg+" BYTES")),!h.an.wt.Li&&e.Jg&&(e.Gg.Fg=0),e.type=o.Cg.Ag,this.mY(e)},e.prototype.bY=function(e){var t=null;if(e.$g instanceof p.Pw){var r=e.$g;r.bitrate&&(t=r.bitrate)}return t},e.prototype.PY=function(e){var t=this;this.R.info("SUCCESS FROM P2P FOR "+e.ny()+" [REQ "+e.Wg+"] ["+o.Cg[e.type]+"] AFTER "+e.ly()+" [bw:"+e.py().Zn()+"]"),this.AY(e,this.AP(e.type)),this.Gw.kY(e),this.CY(e).then(function(){e.Xg.iA(e),t.nL(e),t.AP(e.type)&&t.OY(e)})},e.prototype.mY=function(e){this.fY.jE(e)},e.prototype.LQ=function(e){e.Zg()!=o.Cg.Pg&&this.nL(e),e.ey()==l.Es.vs&&(e.Xg.VP(e.ty()),e.Xg.qP(e.ty(),e.iy())),this.NY(e)},e.prototype._Q=function(e){var t=this;this.AY(e,this.AP(e.type)),e.type==o.Cg.Ag&&this.R.debug("CDN COMPENSATION TIME "+(e.Gg.Hg-e.zg.qg)+" / "+(e.Gg.Hg-e.Gg.Bg)+" P2P TIME "+(e.Gg.Ug-e.Gg.xg)),[l.Es.ms,l.Es.Ts].indexOf(e.ey())==-1&&this.Gw.kY(e),this.CY(e).then(function(){e.ey()==l.Es.ms&&e.Xg.rA(e),[l.Es.ms,l.Es.Ts].indexOf(e.ey())==-1&&e.Xg.iA(e),t.nL(e),t.AP(e.type)&&t.OY(e)})["catch"](function(e){t.R.error(e)})},e.prototype.AY=function(e,t){if(e.type==o.Cg.kg&&(e.Gg.p2pAgenTrafficSuccessQt=e.Gg.Fg,e.Qg&&(e.Gg.srcOtherRespQt=e.Gg.Fg)),e.type==o.Cg.Pg&&(e.Gg.Mg=e.Gg.Dg,e.Qg&&(e.Gg.srcOtherRespQt=e.Gg.Dg)),e.Gg._g=e.Gg.Dg+e.Gg.Fg,e.zg.total=e.Gg._g,t){var r=new u.fC;r.lengthComputable=!0,r.total=e.Gg._g,r.loaded=e.Gg._g,e.zg.onprogress(r)}this._Y(e),e.$g.Rw()?e.zg.response=c.Framework.it()?null:a.gs.ns(e.Kg):(e.zg.response=e.hO,e.zg.responseText=e.hO),this.aY["delete"](e.zg)},e.prototype.OY=function(e){var t=e.zg;this.R.info("RESPOND TO THE PLAYER "+e.ty()+" SIZE "+(c.Framework.it()?t.total:e.Kg.byteLength)),e.zg.status=200,e.zg.readyState=4;var r={currentTarget:t};e.zg.onreadystatechange(r),t.onload();var i={target:t,currentTarget:t,type:"loadend",bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:t.total,total:0};t.onloadend(i)},e.prototype.NY=function(e){this.aY["delete"](e.zg),e.xhr.status&&e.xhr.status>0?(e.zg.status=e.xhr.status,e.zg.responseHeaders=e.responseHeaders,e.zg.readyState=4,e.zg.onreadystatechange(),e.zg.onload()):(e.zg.status=404,e.zg.readyState=4,e.zg.onreadystatechange(),e.zg.onload())},e.prototype.CY=function(e){var t=this;return e.$g.ay()?this.CT.put(e).then(function(r){r&&t.Vw.FY(e.$g,e.Gg._g,e.LY)}):s.resolve(!0)},e.prototype.IY=function(e,t){var r=this;e.Kg=t.data,e.responseHeaders=t.headers,e.DY=t.DY,e.Gg=t.Gg;var i=e.Xg.eA().kC(t.length);this.R.info("SCHEDULE DELIVERY OF "+e.ty()+" IN "+i+" SIZE "+(c.Framework.it()?t.length:e.Kg.byteLength)+" BYTES"),c.Framework.setTimeout(function(){r.MY(e)},i)},e.prototype.MY=function(e){this.R.debug("DELIVERY OF "+e.ty()),this.AY(e,!0);var t=e.zg.qg-e.Gg.Hg;this.R.info("FRAGMENT PREFETCHED "+t+" MSECS BEFORE PLAYER REQUEST"),t>0&&e.ey()==l.Es.vs&&this.pY.add(t);var r=0;r=e.Gg.xg>0?e.zg.qg-e.Gg.xg:e.zg.qg-e.Gg.Ug,this.R.info("FRAGMENT REQUESTED "+r+" MSECS BEFORE PLAYER REQUEST"),this.OY(e)},e.prototype.AP=function(e){return e!=o.Cg.kg&&e!=o.Cg.Pg},e.prototype._Y=function(e){if(e.type!==o.Cg.Ag)e.responseHeaders=e.zg.responseHeaders=e.responseHeaders;else{var t="\nContent-Range: bytes=0-"+(e.size-1)+"/"+e.size+"\n";t+="Content-Length: "+e.size+"\n",e.responseHeaders=e.zg.responseHeaders=t}null!=e.responseHeaders&&e.responseHeaders.indexOf("Access-Control-Allow-Origin")!=-1||(e.responseHeaders+="\nAccess-Control-Allow-Origin:*")},e.prototype.nL=function(e){this.Oa.ZL=this.qw.G_(),this.Oa.$L=this.qw.LI(),this.Oa.fD=this.qw.getPublicIp(),this.BY(e,this.Oa.OL()),this.BY(e,this.Oa.vD());var t=this.bY(e);t&&e.ey()===l.Es.vs&&(this.BY(e,this.Oa.mD(t)),this.BY(e,this.Oa.kL(t)));var r=this.fY.MQ().Wn();isNaN(r)||(this.Oa.kP.metrics.srcThroughput=r),c.Framework.it()||this.lY.render()},e.prototype.BY=function(e,t){var r=e.Gg._g,i=e.Gg.Dg,n=e.Gg.Fg,s=e.Gg.Lg;if(e.ey()!=l.Es.ms&&(e.Gg.Og&&t.p2pSubReqN++,e.Gg.Og&&n<r&&t.p2pSubRespErrN++,0!=s&&(s==r&&t.lCacheRespN++,t.lCacheRespQt+=e.Gg.Lg),0!=n))if(n==r&&(t.respP2pN++,t.p2pSubRespN++,t.srcOtherRespQt+=e.Gg.srcOtherRespQt),t.p2pSubRespQt+=n,t.p2pAgenTrafficSuccessQt+=e.Gg.p2pAgenTrafficSuccessQt,t.p2pDirectQt+=n,e.LY.DI.peerInfo.type==d.un.St)t.p2pUdpbQt+=n,t.p2pNatQt+=n;else{var o=this.qw.LI();if(o&&o>0)if(null!=e.DY){var a=e.DY.internalAs;o===a&&(t.p2pNatQt+=n)}else this.R.warn("Missing partner info")}if(0!=i){if(t.srcReqN++,i==r)t.srcOtherRespQt+=e.Gg.srcOtherRespQt,t.srcRespN++,t.respFallbackN++;else{t.srcRespErrN++;var h=i/(n+i);t.respFallbackN=h,t.respP2pN=1-h}t.srcRespQt+=e.Gg.Dg,t.srcOverQt+=e.Gg.Dg,t.fallAgenTrafficSuccessQt+=e.Gg.Mg}},e}();t.jQ=y},function(e,t){"use strict";var r=function(){function e(e){this.Yw=e}return e.prototype.hD=function(){var e=new hive.snapshots.StreamInfo;return e.streamType=this.Yw.isLive()?StreamType.LIVE:StreamType.wx,e.streamProtocol=this.Yw.Qe(),e.url=this.Yw.nA(),e},e}();t.xY=r},function(e,t,r){"use strict";var i=r(4),n=r(17),s=n.Po,o=function(){function e(){this.udpScore=0,this.UY=0,this.watchingBitrate=-1,this.HY=!1,this.qY=!1,this.VY=!1,this.jY=!1}return e.prototype.setId=function(e){this.GY=e},e.prototype.Pt=function(){return this.GY},e.prototype.QY=function(e){this.udpScore=e},e.prototype.HN=function(){return this.udpScore},e.prototype.YY=function(e){this.UY=e},e.prototype.KY=function(){return this.UY},e.prototype.JY=function(e){var t=s.Vl(e+"_"+i.an.Xr.zr).toString(s.El.wl);this.contextId=t},e.prototype.RP=function(){return this.contextId},e.prototype.AN=function(e){this.HY=e},e.prototype.AI=function(){return this.HY},e.prototype.VN=function(e){this.VY=e},e.prototype.MI=function(){return this.VY},e.prototype.J_=function(e){this.jY=e},e.prototype.xI=function(){return this.jY},e.prototype.zY=function(e){this.WY=e},e.prototype.LI=function(){return this.WY},e.prototype.XY=function(e){this.$Y=e},e.prototype.G_=function(){return this.$Y},e.prototype.RN=function(e){this.ZY=e},e.prototype.PN=function(){return this.ZY},e.prototype.eK=function(e){this.qY=e},e.prototype.BI=function(){return this.qY},e.prototype.EY=function(e){this.watchingBitrate=e},e.prototype.TY=function(){return this.watchingBitrate},e.prototype.NN=function(e){this.XO=e},e.prototype.tK=function(){return this.XO},e.prototype.xD=function(e){this.privateIp=e},e.prototype.getPrivateIp=function(){return this.privateIp},e.prototype.UD=function(e){this.publicIp=e},e.prototype.getPublicIp=function(){return this.publicIp},e.prototype.K_=function(e){this.reportingGuid=e},e.prototype.Q_=function(){return this.reportingGuid},e}();t.sY=o},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=r(1),o=r(8),a=function(){function e(e,t){this.id=e,this.size=t}return e}(),h=function(){function e(){this.rK=new n,this.iK=new n,this.R=s.Framework.resolve(s.Framework.Tt.rt).log()}return e.prototype.put=function(e,t){var r=e.fragmentId,i=e.size;e.bitrate;this.rK.has(r)||(this.rK.set(r,new a(r,i)),this.iK.set(r,new Array)),this.iK.get(r).push(t)},e.prototype.contains=function(e){return this.iK.has(e)},e.prototype.FI=function(e){return this.iK.get(e)},e.prototype.nK=function(e){return this.rK.get(e)},e.prototype.X_=function(e){var t=this;this.iK.forEach(function(r,i){o.gs.ss(r,e,!1),0===r.length&&(t.iK["delete"](i),t.rK["delete"](i))})},e.prototype.sK=function(){var e=this;this.iK.forEach(function(t,r){e.R.debug("OBJIDX FR "+r+" PS "+t.map(function(e){return e.P_.Do.Ho}).reduce(function(e,t){return e+","+t}))})},e}();t.WQ=h},function(e,t,r){"use strict";var i=r(3),n=r(17),s=n.Po,o=r(1),a=r(32),h=r(7),u=r(4),c=r(15),l=r(2),p=r(91),f=r(33),d=r(10);if("undefined"==typeof g)var g=!1;if("undefined"==typeof y)var y=!1;var v=function(){function e(e){this.state=c.ka.Aa,this.requestTimeout=-1,this.R=o.Framework.resolve(o.Framework.Tt.rt).log(e.ticket.sessionId),this.zo=o.Framework.resolve(o.Framework.Tt.pt),this.sessionId=e.ticket.sessionId,this.Hs=e,this.Uw=o.Framework.resolve(h.Un.En),this.CT=o.Framework.resolve(h.Un.gn),this.ZO=o.Framework.resolve(h.Un.ln),this.fY=o.Framework.resolve(h.Un.In),this.xw=o.Framework.resolve(h.Un.mn),this.Vw=o.Framework.resolve(h.Un.pn),this.uploadScore=o.Framework.resolve(h.Un.On),this.oK=o.Framework.resolve(h.Un.wn),this.aK=o.Framework.resolve(h.Un.Cn),this.Hw=o.Framework.resolve(h.Un.Sn),this.gY=o.Framework.resolve(h.Un.Rn),this.mP=o.Framework.resolve(h.Un.Nn),this.qw=o.Framework.resolve(h.Un.Bn),this.EP=o.Framework.resolve(h.Un.Pn),this.jw=o.Framework.resolve(h.Un.An),this.Gw=o.Framework.resolve(h.Un.Tn),this.n_=o.Framework.resolve(h.Un.xn),(g||o.Framework.it()&&f.lS.hS)&&(this.hK=o.Framework.resolve(h.Un.Ln),this.uK=o.Framework.resolve(h.Un.Dn)),(y||o.Framework.it()&&f.lS.uS)&&(this.cK=o.Framework.resolve(h.Un.Mn)),this.swarmId=this.lK(e.ticket.$h()),this.fY.init(this),this.Gw.init(this),this.n_.init(this),this.Vw.init(this),this.oK.init(this),this.aK.init(this),this.Hw.init(this),this.gY.init(this),this.Uw.init(this),this.ZO.init(this),this.EP.init(this),this.jw.init(this),this.mP.init(this),(y||o.Framework.it()&&f.lS.uS)&&this.cK.init(this),(g||o.Framework.it()&&f.lS.hS)&&this.uK.init(this)}return e.prototype.init=function(e,t){g?this.pK(!0):this.pK(!1),this.qw.K_(this.Hs.identity.Ka()),this.CT.init(u.an.Pi.Ii,u.an.Pi.Si);var r=this.gY.Qw(e,t);this.qw.JY(this.gY.IQ.RP());var i=new p.xY(r);this.Hs.PL=i,this.Hs.Oa.PL=i,this.aK.start(this.gY,this.ZO),(g||o.Framework.it()&&f.lS.hS)&&this.uK.fK(this.ZO);var n=[this.ZO,this.Vw,this.aK,this.Hs.Oa,this.Hs._a];(g||o.Framework.it()&&f.lS.hS)&&n.push(this.uK),(y||o.Framework.it()&&f.lS.uS)&&n.push(this.cK),(s=this.zo).start.apply(s,[e.sessionId].concat(n)),this.Hs.Oa.SD(this.Vw);var s},e.prototype.pK=function(e){e?(this.qw.QY(1|window.cpuNum),this.qw.YY(1|window.cpuNum)):(this.qw.QY(1),this.qw.YY(1))},e.prototype.lK=function(e){return s.Vl(e).toString(s.El.wl)},e.prototype.jE=function(e){this.dK(),this.Uw.jE(e)},e.prototype.Vs=function(e){if(this.state!=e)switch(this.R.info("Switching state "+c.ka[this.state]+" -> "+c.ka[e]),this.state=e,this.state){case c.ka.IDLE:this.ZO.stop(),this.Vw.stop(),this.jw.gK(),this.jw.yK(),this.aK.vK(),this.uK&&this.uK.mK(),this.Hs.Vs(c.ka.IDLE);break;case c.ka.Aa:this.ZO.start(),this.Vw.start(this.gY.IQ),this.jw.TK(),this.aK.EK(),this.uK&&this.uK.wK(),this.Hs.Vs(c.ka.Aa)}},e.prototype.dK=function(){var e=this;try{o.Framework.clearTimeout(this.requestTimeout),this.Vs(c.ka.Aa),this.requestTimeout=o.Framework.setTimeout(function(){e.Vs(c.ka.IDLE)},3e4)}catch(t){this.R.error("Error on request timeout",t)}},e}();t.IK=v;var m=function(){function e(){this.Ko=new a.Counter,this.SK=!1,this.Ha=new l.Ze,this.bK=new l.Ze,this.RK=!1,this.PK=o.Framework.resolve(h.Un._n),this.lY=o.Framework.resolve(h.Un.Fn),this.kh=o.Framework.resolve(d.Os.Ss),this.lY.init(this)}return e.prototype.start=function(e,t){this.R=o.Framework.resolve(o.Framework.Tt.rt).log(e.ticket.sessionId);var r=e.ticket,n=r.sessionId;if(this.Ha.has(n))this.R.warn("SESSION ALREADY ACTIVE "+n);else{var s=new v(e);s.init(r,t),this.kh.getConnectivityInfo().then(function(e){var t=e.getNetworkChanged(),r=t.getPrivateIp();r&&s.qw.xD(r)}).done(),e.Oa.ID(this.kh),this.R.info("PEER CONTEXT STARTED"),this.Ha.set(n,s),this.bK.set(s.swarmId,n)}return 1!=this.Ha.length||o.Framework.it()||this.PK.init(),i.resolve(r.SourceURL)},e.prototype.AK=function(){},e.prototype.Bo=function(e){if(this.bK.has(e)){var t=this.bK.get(e);return this.Ha.get(t)}return null},e.prototype.kK=function(e){return this.Ha.get(e)},e.prototype.CK=function(e){return this.Ha.has(e)?this.Ha.get(e).Uw:null},e.prototype.jE=function(e,t){this.kK(t).jE(e)},e.prototype.Vs=function(e,t){o.Framework.it()&&this.kK(e).Vs(t)},e.prototype.abort=function(e,t){this.CK(t).abort(e)},e}();t.VQ=m},function(e,t,r){"use strict";var i=r(24),n=function(){function e(){this.p2pReceivedBytes=0,this.cdnReceivedBytes=0,this.savings=0,this.cdnRequests=0,this.cdnResponses=0,this.cdnResponseErrors=0,this.cdnResponseBytes=0,this.p2pRequests=0,this.p2pResponses=0,this.p2pResponseErrors=0,this.p2pResponseBytes=0,this.partners={}}return e}();t.OK=n;var s=function(){function e(){this.uuid="",this.sentBytes=0,this.receivedBytes=0,this.successTransfers=0,this.failedTransfers=0}return e}();t.NK=s;var o=function(){function e(){}return e.prototype.init=function(e){this.peer=e},e.prototype._K=function(e){var t=this;this.peer.Ha.forEach(function(r,i){e[i]||(e[i]=new n);var s=e[i];s.uuid=r.Hs.Oa.Fh;var o=r.Hs.Oa.iD.KL,a=t.FK(o.p2pSubRespQt),h=t.FK(o.srcRespQt);s.p2pReceivedBytes+=a,s.cdnReceivedBytes+=h,s.cdnRequests+=t.FK(o.srcReqN),s.cdnResponses+=t.FK(o.srcRespN),s.cdnResponseErrors+=t.FK(o.srcRespErrN),s.cdnResponseBytes+=t.FK(o.srcRespQt),s.p2pRequests+=t.FK(o.p2pSubReqN),s.p2pResponses+=t.FK(o.p2pSubRespN),s.p2pResponseErrors+=t.FK(o.p2pSubRespErrN),s.p2pResponseBytes+=t.FK(o.p2pSubRespQt),s.savings=a/(h+a)*100})},e.prototype.FK=function(e){return e?e:0},e.prototype.LK=function(e){var t=this;this.peer.Ha.forEach(function(r,i){e[i]||(e[i]=new n);var o=e[i];o.uuid=r.Hs.Oa.Fh;var a=r.Hs.Oa.iD.zL;a.forEach(function(e,r){o.partners[r]||(o.partners[r]=new s);var i=o.partners[r];i.uuid=r,i.sentBytes+=t.FK(e.p2pSuccSent),i.receivedBytes+=t.FK(e.p2pSuccReceived),i.successTransfers+=t.FK(e.p2pSuccReq),i.failedTransfers+=t.FK(e.p2pFailReq)})})},e.prototype.render=function(){var e={};this._K(e),this.LK(e);try{i.HiveConfig.Stats.render&&i.HiveConfig.Stats.render(e)}catch(t){console.warn("error in rendering local stats",t)}},e}();t.qQ=o},function(e,t){"use strict";var r=function(){function e(){this._P=!1,this.BP=!1,this.xP=!1}return e}();t.OP=r},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=r(4),o=r(1),a=function(){function e(){this._P=new n,this.DK=[],this.MK=new n,this.BK=new n}return e.prototype.init=function(e){this.R=o.Framework.resolve(o.Framework.Tt.rt).log(e.sessionId)},e.prototype.HP=function(e){this.xK(e.ty(),e.iy()),this.MK.set(e.iy(),e)},e.prototype.qP=function(e,t){this.MK["delete"](t),this.UK(e,t)},e.prototype.GP=function(e){this.HK(e)},e.prototype.VP=function(e){this._P["delete"](e)},e.prototype.HK=function(e){if(this._P.set(e.ty(),e.Zg()),this.DK.push(e.ty()),this._P.length>s.an.wi.fi){var t=this.DK[0];this._P["delete"](t),this.DK.splice(0,1)}},e.prototype.NP=function(e){return this._P.has(e)},e.prototype.FP=function(e){return this._P.get(e)},e.prototype.xK=function(e,t){if(this.BK.has(e))this.BK.get(e).push(t);else{var r=[];r.push(t),this.BK.set(e,r)}},e.prototype.UK=function(e,t){if(this.BK.has(e)){var r=this.BK.get(e),i=r.indexOf(t);i==-1?this.R.warn("I CANNOT FIND THE REQUEST ID "+t):r.splice(i,1),0==r.length&&this.BK["delete"](e)}else this.R.warn("TRIED TO REMOVE AN OBJECT THAT DOES NOT EXIST")},e.prototype.MP=function(e){var t=[];if(this.qK(e))for(var r=this.BK.get(e),i=0;i<r.length;i++)this.MK.has(r[i])&&t.push(this.MK.get(r[i]));return t},e.prototype.qK=function(e){return this.BK.has(e)},e.prototype.YP=function(){return 0!=this.MK.length},e.prototype.DP=function(e){return this.BK.has(e)},e}();t.nY=a},function(e,t,r){"use strict";var i,n=r(2),s=n.Mt,o=r(1),a=r(4);!function(e){e[e.VK=0]="S",e[e.jK=1]="F",e[e.GK=2]="PF"}(i||(i={}));var h=function(){function e(e){this.ts=e}return e}(),u=function(){function e(){this.QK=0,this.YK=0,this.KK=0,this.JK=0,this.zK=0,this.WK=0}return e}(),c=function(){function e(){this.XK=new s}return e.prototype.success=function(e){this.event(i.VK,e,e)},e.prototype.Ws=function(){this.event(i.jK,0,0)},e.prototype.$K=function(e,t){this.event(i.GK,e,t)},e.prototype.event=function(e,t,r){var i=new h(o.Framework.time());i.t=e,i.ZK=t,i.eJ=t/r,i.tJ=(r-t)/r,this.XK.set(i.ts,i),this.rJ()},e.prototype.rJ=function(){var e=this,t=o.Framework.time(),r=t-2*a.an.Fi.Ci;if(r>0){var i=[];this.XK.forEach(function(e,t){t<r&&i.push(t)}),i.forEach(function(t){e.XK["delete"](t)})}},e.prototype.iJ=function(e){var t=0,r=this.nJ(e,a.an.Fi.Ci);if(null!=r){var i=r.YK+r.KK+r.JK;t=0==i?0:(r.YK+r.JK*a.an.Fi.Oi)/i}return t},e.prototype.sJ=function(e){var t=0,r=this.nJ(e,a.an.Fi.Ci);if(null!=r){var i=r.YK+r.KK+r.JK;t=0==i?0:(r.KK+r.JK*a.an.Fi.Ni)/i}return t},e.prototype.oJ=function(e){var t=this.nJ(!1,e);return null!=t?t.QK:0},e.prototype.nJ=function(e,t){if(0!=this.XK.keys().length){var r=new u,n=o.Framework.time(),a=n-t;a<0&&(a=0);var h=new s;return this.XK.forEach(function(e,t){t>=a&&h.set(t,e)}),h.forEach(function(e,t){switch(r.QK+=e.ZK,e.t){case i.VK:r.YK++;break;case i.jK:r.KK++;break;default:r.JK++,r.zK+=e.eJ,r.WK+=e.tJ}}),r}return null},e}();c.Ni=.2,c.Oi=.2,t.tY=c},function(e,t,r){"use strict";var i=r(7),n=r(1),s=(r(4),r(3)),o=function(){function e(){this.R=n.Framework.resolve(n.Framework.Tt.rt).log(),this.aJ=n.Framework.resolve(i.Un.yn)}return e.prototype.init=function(e,t){this.aJ.init(e,t)},e.prototype.put=function(e){var t=this,r=s.defer(),i=!1;return e.Xg.isLive(),this.aJ.put(e).then(function(e){i=e}).fail(function(e){t.R.error(e)})["finally"](function(){r.resolve(i)}),r.Vt},e.prototype.get=function(e){var t=this,r=s.defer(),i=null;return this.contains(e).then(function(n){n?t.aJ.get(e).then(function(e){i=e}).fail(function(e){t.R.error(e)})["finally"](function(){r.resolve(i)}):r.resolve(i)}).fail(function(e){t.R.error(e)})["finally"](function(){r.resolve(i)}),r.Vt},e.prototype.contains=function(e){var t=this,r=s.defer(),i=!1;return this.aJ.contains(e).then(function(e){i=e}).fail(function(e){t.R.error(e)})["finally"](function(){r.resolve(i)}),r.Vt},e.prototype.wI=function(e){var t=[];return t=this.aJ.wI(e)},e.prototype.hJ=function(e){var t=this,r=s.defer(),i=[];return this.aJ.hJ(e).then(function(e){i=e}).fail(function(e){t.R.error(e)})["finally"](function(){r.resolve(i)}),r.Vt},e}();t.Pi=o},function(e,t,r){"use strict";var i=r(22),n=r(2),s=n.Ze,o=r(1),a=r(4),h=function(){function e(){this.uJ=new s,this.cJ=new s}return e.prototype.init=function(e){this.R=o.Framework.resolve(o.Framework.Tt.rt).log(e.sessionId)},e.prototype.kY=function(e){var t=e.ty(),r=e.Kg,n=e.Gg._g,s=Math.ceil(n/a.an.Ui.Di),h=e.$g.bitrate,u=0,c=Math.min(a.an.Ui.Di,n);this.lJ(t,h);for(var l=c-u;s>0;){var p=null;o.Framework.it()||(p=i.wrap(r.slice(u,c))),u+=l,this.uJ.get(t).push(p),s--,c=Math.min(u+a.an.Ui.Di,n),l=c-u}},e.prototype.lJ=function(e,t){if(this.cJ.has(t)&&this.cJ.get(t).length>a.an.Pi.Ri){var r=this.cJ.get(t)[0];this.uJ["delete"](r),this.cJ.get(t).shift()}if(this.cJ.has(t))this.cJ.get(t).push(e),this.uJ.set(e,[]);else{var i=[e];this.cJ.set(t,i),this.uJ.set(e,[])}},e.prototype.pJ=function(e,t){return this.uJ.has(e)?this.uJ.get(e)[t]:null},e.prototype.fJ=function(e){return this.cJ.get(e)},e}();t.zQ=h},function(e,t,r){"use strict";var i=r(52),n=r(2),s=n.Ze,o=function(){function e(e){this.headers=null,this.DY=null,this.totalSize=0,this.dJ=!1,this.$g=e,this.content=new s}return e.prototype.size=function(){var e=0;return this.content.forEach(function(t,r){e+=i.EC.TC(r).size()}),e},e}();t.gJ=o},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=r(3),o=r(1),a=r(103),h=r(52),u=r(101),c=function(){function e(){this.yJ="[CACHE]",this.vJ=new n,this.mJ=-1,this.TJ=[],this.R=o.Framework.resolve(o.Framework.Tt.rt).log()}return e.prototype.init=function(e,t){this.EJ=e,this.wJ=t},e.prototype.put=function(e){var t=s.defer();try{var r=e.ty(),i=e.responseHeaders,n=e.Kg,o=0,c=e.Gg._g-1,l=e.Gg._g;this.mJ==-1&&this.IJ();var p=null,f=!1;if(this.vJ.has(r)){p=this.vJ.get(r);var d=new h.vC(o,c,l);f=!0,p.content.forEach(function(e,t){var r=h.EC.TC(t);if(r.yC(d))return void(f=!1)})}else{var g=new h.vC(o,c,l).toString();p=new u.gJ(e.$g),e.LY&&(p.DY=e.LY.DI.peerInfo),p.content.set(g,new a.SJ(l,n,e.Gg)),this.vJ.set(r,p),f=!0,this.TJ.unshift(r)}null==p.headers&&null!=i&&(p.headers=i),t.resolve(f)}catch(y){t.reject("CACHE PUT ERROR "+y)}return t.Vt},e.prototype.get=function(e){var t=s.defer();try{var r=this.vJ.get(e);if(null!=r){var i=null;r.content.forEach(function(e,t){var n=h.EC.TC(t);if(n.dC())return i=e,i.headers=r.headers,void(i.DY=r.DY)}),t.resolve(i)}else t.resolve(null)}catch(n){t.reject("CACHE GET ERROR "+n)}return t.Vt},e.prototype.wI=function(e){try{return this.vJ.keys()}catch(t){this.R.error(this.yJ+" GET KEYS ERROR "+t)}},e.prototype.hJ=function(e){var t=s.defer();try{t.resolve(this.vJ.values())}catch(r){t.reject("CACHE GET ELEMENTS ERROR "+r)}return t.Vt},e.prototype.contains=function(e){var t=s.defer();try{this.vJ.has(e)?t.resolve(!0):t.resolve(!1)}catch(r){t.reject("CACHE CONTAINS ERROR "+r)}return t.Vt},e.prototype.IJ=function(){var e=this;this.bJ(),this.mJ=o.Framework.setInterval(function(){e.et()},this.wJ)},e.prototype.bJ=function(){this.mJ!=-1&&o.Framework.clearInterval(this.mJ)},e.prototype.et=function(){var e=this;try{var t=0,r=0,i=0;this.R.debug(this.yJ+" RUNNING GC"),this.TJ.every(function(i,n){var s=e.vJ.get(i).size();return t+s>e.EJ?(r=n,!1):(t+=s,!0)})||(i=this.TJ.length-r,this.TJ.splice(r,this.TJ.length-1).forEach(function(t){e.vJ["delete"](t)})),this.R.debug(this.yJ+" GC DONE - REMOVED: "+i+" - CURRENT ITEMS: "+this.vJ.length+" SIZE: "+t+" ")}catch(n){this.R.error(this.yJ+" PURGE FAILED WITH ERROR ",n)}},e.prototype.sK=function(){var e=this;this.vJ.forEach(function(t,r){e.R.debug("EID="+r);var i=t.content;i.forEach(function(t,r){e.R.debug("\tRANGE ",r)})})},e}();t.GQ=c},function(e,t){"use strict";var r=function(){function e(e,t,r){this.length=e,this.data=t,this.Gg=r}return e}();t.SJ=r},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=i.Mt,o=r(3);r(74),r(75);var a=r(46),h=r(1),u=r(106),c=r(9),l=r(53),p=r(107),f=r(108),d=r(55),g=r(24),y=function(){function e(e){this.isLive=!1,this.R=h.Framework&&h.Framework.resolve(h.Framework.Tt.rt)?h.Framework.resolve(h.Framework.Tt.rt).log(e):console,this.RJ=new DashParser,this.reset()}return e.prototype.PJ=function(e){var t="";return e.indexOf("/")!==-1&&(e.indexOf("?")!==-1&&(e=e.substring(0,e.indexOf("?"))),t=e.substring(0,e.lastIndexOf("/")+1)),t},e.prototype.iO=function(){return this.isLive},e.prototype.$P=function(){return this.AJ.values().map(function(e){return e.bandwidth})},e.prototype.reset=function(){this.AJ=new n},e.prototype.kJ=function(){return this.CJ},e.prototype.parse=function(t,r,i){this.reset(),this.aO=t,this.manifest=this.RJ.parse(r,this.PJ(t)),this.isLive="static"!==this.manifest.type;for(var n=this.manifest.BaseURL,s=this.manifest.Period_asArray[0],o=s.AdaptationSet_asArray,a=0;a<o.length;a++){var h=s.AdaptationSet[a],l=h.mimeType.indexOf("audio")!=-1?c.Es.ys:c.Es.vs;l===c.Es.vs&&h.ContentProtection&&this.OJ(h.ContentProtection);for(var p=h.SegmentTemplate.initialization,f=h.SegmentTemplate.media,d=parseInt(h.SegmentTemplate.timescale),g=0;g<h.Representation_asArray.length;g++){var y=h.Representation_asArray[g],v=new u.NJ;v.type=l,v.bandwidth=parseInt(y.bandwidth),v.timescale=d,v.initialization=n+""+p,v.initialization=v.initialization.replace(e._J,""+v.bandwidth),i||this.R.debug("QualityLevel "+c.Es[l]+" "+v.bandwidth);var m=n+""+f;m=m.replace(e._J,""+v.bandwidth),v.FJ=m;var T=parseInt(v.bandwidth+""),E=this.LJ(h.SegmentTemplate.SegmentTimeline_asArray[0].S_asArray,m,T,l);v.DJ=E.MJ,v.BJ=E.xJ;var w=m.substr(0,m.lastIndexOf("="));w=w.substr(0,w.lastIndexOf("=")),this.AJ.set(w,v)}}return this.CJ=!0,this.UJ(r,i)},e.prototype.LJ=function(t,r,i,n){var o,a=new s,h=new s,u=0,c=0;return t.forEach(function(t){if(t.d){t.t?u=parseInt(t.t):u+=c;var s=parseInt(t.d),p=r.replace(e.HJ,u+""),f=new l.IC(u,i,s,p,p);f.type=n,o&&(o.next=f),a.set(p,f),h.set(u,f),o=f;var d=0;t.r&&(d=parseInt(t.r));for(var g=0;g<d;g++){u+=s;var p=r.replace(e.HJ,u+""),f=new l.IC(u,i,s,p,p);f.type=n,o&&(o.next=f),a.set(p,f),h.set(u,f),o=f}c=s}}),{MJ:a,xJ:h}},e.prototype.OJ=function(e){if(e){if(e.CryptoPeriod){var t=e.CryptoPeriod;this.cO&&!this.cO.qJ()&&this.cO instanceof p.VJ||(this.cO=new p.VJ(t.keyUriTemplate,t.IV,this.authenticationToken))}else this.cO&&this.cO instanceof f.jJ||(this.cO=new f.jJ);this.cO&&d.DASH.GC&&this.cO.init()}},e.prototype.GJ=function(e){var t=e.substr(0,e.lastIndexOf("="));return t=t.substr(0,t.lastIndexOf("=")),this.AJ.get(t)},e.prototype.sO=function(e){var t=this.GJ(e);return t.DJ.get(e)},e.prototype.nO=function(e){var t=!1;return this.AJ.forEach(function(r,i){r.initialization===e&&(t=!0)}),t},e.prototype.oO=function(e){var t=this.sO(e);return null!=t?t.next:null},e.prototype._I=function(e,t,r,i){var n;if(this.AJ.forEach(function(e,t){e.bandwidth===i&&(n=e)}),n&&n.BJ.has(e)&&n.BJ.has(r)){for(var s=n.BJ.get(e),o=n.BJ.get(r),a=0,h=s;h&&h!=o;)a+=h.duration,h=h.next;return Math.round(a/(n.timescale/1e3))}return 0},e.prototype.iA=function(t){var r=this,i=o.defer(),n=this.sO(t.ny());if(!n||n.next)return i.resolve(!1),i.Vt;var s=o.defer();if(this.cO)d.DASH.GC?this.cO.lO().then(function(e){e?r.cO.decrypt(t.Kg).then(function(e){s.resolve(r.QJ(e))}).fail(function(e){return s.reject(!0)}):s.reject(!1)}):s.reject(!1);else try{var a=this.QJ(t.Kg);s.resolve(a)}catch(h){this.R.warn("error extracting duration",h),s.reject(!0)}return s.Vt.then(function(t){if(!isNaN(t)){var s=n.id+t;r.R.debug("found next fragment: "+n.id+" -> "+s+" duration: "+t),r.AJ.forEach(function(r,i){if(r.type===n.type){var o=r.FJ.replace(e.HJ,n.id+""),a=r.FJ.replace(e.HJ,s+""),h=r.DJ.get(o);if(!r.DJ.has(a)&&h){h.duration=t;var u=new l.IC(s,r.bandwidth,t,a,a);u.type=h.type,h.next=u,r.DJ.set(a,u),r.BJ.set(s,u);
}}})}i.resolve(!1)}).fail(function(e){r.R.debug("could not extract duration from "+t.ny()+" [reevaluate: "+e+"]"),i.resolve(e)}),i.Vt},e.prototype.QJ=function(e){e instanceof Uint8Array&&(e=e.buffer);var t=ISOBoxer.hM(e),r=t.fetch("tfhd"),i=t.fetch("trun"),n=r?r.default_sample_duration:0;if(i){var s=0;return i.qB.forEach(function(e){s+=e.sample_duration}),isNaN(s)&&n>0&&(s=n*i.qB.length),s}},e.prototype.UJ=function(e,t){var r=this.YJ();if(!t&&(this.isLive||r||g.HiveConfig.Dash.DashRemoveBitrateSize))try{var i=new a({}),n=i.vk(e);this.isLive&&this.KJ(n),(r||g.HiveConfig.Dash.DashRemoveBitrateSize)&&this.JJ(n,r,g.HiveConfig.Dash.DashRemoveBitrateSize);var s=i.mk(n);return s}catch(o){this.R.error(o)}return e},e.prototype.KJ=function(e){var t=this,r=Math.max(1,d.DASH.DASH_METADATA_MIN_FRAGMENTS),i=Math.max(1,d.DASH.KC),n=0,s=0;return e.MPD&&e.MPD.Period&&e.MPD.Period.AdaptationSet.forEach(function(e){if(e._contentType&&"video"===e._contentType&&e.SegmentTemplate&&e.SegmentTemplate.SegmentTimeline){for(var o=e.SegmentTemplate.SegmentTimeline.S_asArray,a=parseInt(e.SegmentTemplate._timescale),h=i*a,u=0,c=0,l=0;l<o.length&&r>0;l++){var p=o[l];u=l;var f=p._r?parseInt(p._r):1;f>r?(c=r,r=0):(r-=f,c=f)}for(var d=o.length-1;d>=0&&(h>0&&d>=u);d--){var p=o[d],f=p._r?parseInt(p._r):1,g=0;if(!p._d)throw new Error("missing segment duration");g=parseInt(p._d);var y=f*g;if((d>u||d==u&&0==c)&&h>=y)h-=y,o.splice(d,1),n+=f,s+=y;else{var v=Math.ceil(h/g);d==u&&(v=Math.min(v,f-c));var m=g*v;p._r=f-v+"",h-=m,n+=v,s+=m}}t.R.debug("DASH trimmed "+n+" segments for total duration: "+s)}}),e},e.prototype.YJ=function(){if(g.HiveConfig.Dash.DashFilterBitrates)try{var e=null;e="string"==typeof g.HiveConfig.Dash.DashFilterBitrates?g.HiveConfig.Dash.DashFilterBitrates.split(","):g.HiveConfig.Dash.DashFilterBitrates;var t=[];return e.forEach(function(e){var r=parseInt(e);isNaN(r)||t.push(r)}),t}catch(r){this.R.warn("[HiveJs] error parsing DashFilterBitrates: "+g.HiveConfig.Dash.DashFilterBitrates)}},e.prototype.JJ=function(e,t,r){var i=this;if(e.MPD&&e.MPD.Period){var n=[];e.MPD.Period.AdaptationSet.forEach(function(e){if(e._contentType&&"video"===e._contentType&&e.Representation_asArray){var s=e.Representation_asArray;s.sort(function(e,t){return isNaN(e._bandwidth)&&(e._bandwidth=parseInt(e._bandwidth)),isNaN(t._bandwidth)&&(t._bandwidth=parseInt(t._bandwidth)),e._bandwidth-t._bandwidth});for(var o=s.length-1;o>=0;o--)r&&(delete s[o]._width,delete s[o]._height),t&&t.indexOf(o)==-1?s.splice(o,1):n.push(s[o]._bandwidth);i.R.debug("DASH filtered-in bitrates: "+n.reverse().join(" "))}})}},e.prototype.yO=function(e,t,r,i){var n;if(this.AJ.forEach(function(e,t){e.bandwidth===i&&(n=e)}),n&&n.BJ.has(e)&&n.BJ.has(r)){for(var s=n.BJ.get(e),o=n.BJ.get(r),a=0,h=s;h&&h!=o;)a+=h.duration,h=h.next;return Math.round(a/(n.timescale/1e3))}return 0},e.prototype.vO=function(e,t){var r;return this.AJ.forEach(function(e,i){e.bandwidth===t&&(r=e)}),r&&r.BJ.has(e)?r.BJ.get(e):null},e}();y._J="$Bandwidth$",y.HJ="$Time$",t.rO=y},function(e,t,r){"use strict";var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(54),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n.DC);t.eO=s},function(e,t){"use strict";var r=function(){function e(){}return e}();t.NJ=r},function(e,t,r){"use strict";var i=r(3),n=r(1),s=function(){function e(e,t){this.name=e,this.iv=t}return e}(),o=function(){function e(e,t,r){this.P="[AES Manager] ",this.zJ="AES-CBC",this.Ws=!1,this.R=n.Framework&&n.Framework.resolve(n.Framework.Tt.rt)?n.Framework.resolve(n.Framework.Tt.rt).log():console,this.WJ=e,this.XJ=t,this.R.debug(this.P+"Starting Dash AES Manager"),r&&(this.$J=r)}return e.prototype.init=function(){var e=this;try{this.ZJ();var t=i.defer();this.ez().then(function(){return t.resolve(!0)}).fail(function(r){e.R.warn(e.P+r),t.resolve(!1)}),this.tz=t.Vt}catch(r){this.R.warn(this.P+"Error initializing AES Manager",r)}},e.prototype.lO=function(){return this.tz?this.tz:i.resolve(!1)},e.prototype.ez=function(){var e=this;if(this.rz)return this.rz;var t=i.defer();return this.iz().then(function(r){window.crypto.subtle.importKey("raw",r,{name:e.zJ},!1,["decrypt"]).then(function(e){t.resolve(e)},function(e){t.reject("error importing key: "+e.toString())})}).fail(function(e){return t.reject(e)}),this.rz=t.Vt,this.rz},e.prototype.ZJ=function(){for(var e=2,t=this.XJ.length,r=[];e<t;e+=2)r.push(parseInt(this.XJ.substr(e,2),16));this.iv=new Uint8Array(r)},e.prototype.decrypt=function(e){var t=this,r=i.defer(),n=new s(this.zJ,this.iv);return this.rz.then(function(t){return window.crypto.subtle.decrypt(n,t,e).then(function(e){r.resolve(e)})})["catch"](function(e){t.R.warn(t.P+"decrypt error",e),t.Ws=!0,t.tz=i.resolve(!1),r.reject(e)}),r.Vt},e.prototype.iz=function(){var e=i.defer(),t=new XMLHttpRequest;return t.responseType="arraybuffer",t.open("GET",this.WJ),this.$J&&t.setRequestHeader("Authorization",this.$J),t.onload=function(){if(200===t.status){var r=new Uint8Array(t.response);e.resolve(r)}else e.reject("error downloading key - status: "+t.status)},t.onerror=function(){e.reject("error downloading key")},t.send(),e.Vt},e.prototype.qJ=function(){return this.Ws},e}();t.VJ=o},function(e,t,r){"use strict";var i=r(3),n=function(){function e(){}return e.prototype.init=function(){},e.prototype.lO=function(){return i.resolve(!1)},e.prototype.decrypt=function(e){return i.reject("unsupported")},e.prototype.qJ=function(){return!1},e}();t.jJ=n},function(e,t,r){"use strict";var i=r(77),n=r(2),s=n.Ze,o=r(111),a=r(53),h=r(1),u=r(8),c=r(56),l=function(){function e(){this.UO=new s,this.nz=null,this.R=(h.Framework.resolve(h.Framework.Tt.rt)||console).log()}return e.prototype.parse=function(e,t){var r=new i.Ex;if(r.push(t),r.manifest.playlists)this.sz(e,r.manifest);else{var n=this.oz(e,r.manifest);if(n&&(this.live=!n.px),this.live)return this.az(r.manifest,t)}return t},e.prototype.vO=function(e,t){if(this.HO.has(t)){var r=this.HO.get(t);return r.BJ.get(e)}return null},e.prototype.$P=function(){return this.UO.values().map(function(e){return e.bitrate})},e.prototype.isLive=function(){return this.live},e.prototype.sO=function(e){return null==this.DJ?null:this.DJ.get(e)},e.prototype.oO=function(e){var t=this.DJ.get(e);if(t){var r=t.bitrate,i=this.HO.get(r);return i.BJ.get(t.id+1)}return null},e.prototype.BO=function(e){return this.UO.has(e)},e.prototype.xO=function(){return this.hz},e.prototype.sz=function(e,t){var r=this;this.hz=e,this.uz=t,this.UO=new s,this.DJ=new s,this.HO=new s,this.uz.playlists.forEach(function(t){var i=u.gs.fs(e,t.uri),n=t.attributes.BANDWIDTH,s=new o.cz(n,t.uri,i);r.UO.set(i,s),r.HO.set(n,s)})},e.prototype.oz=function(e,t){var r=this,i=this.UO.get(e);if(!i)return void this.R.warn("Playlist url doesn't match any playlist in the master file");var n=null!=t.mediaSequence?t.mediaSequence:0,s=new Array;return t.qO.forEach(function(t){var o=u.gs.fs(e,t.uri),h=1e3*t.duration,c=new a.IC(n,i.bitrate,h,t.uri,o);r.DJ.set(o,c),i.BJ.set(n,c),s.push(c),n++}),this.nz=i,i.update(t.mediaSequence,t.discontinuitySequence,t.px,t.gx,s),i},e.prototype.az=function(e,t){for(var r=t.split("\n"),i=Math.max(1,c.Ke.CO),n=null,s=0,o=e.qO.length-1;o>=i-1;o--){var a=e.qO[o];if(n=a.uri,s>=c.Ke.kO)break;s+=a.duration}var h="";for(o=0;o<r.length&&(h=h+r[o]+"\n",r[o].trim()!==n);o++);return h},e}();t.DO=l},function(e,t,r){"use strict";var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(54),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n.DC);t.FO=s},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=function(){function e(e,t,r){this.BJ=new n,this.bitrate=e,this.uri=t,this.wC=r}return e.prototype.update=function(e,t,r,i,n){this.mediaSequence=e,this.discontinuitySequence=t,this.px=r,this.gx=i,this.qO=n,this.updated=!0},e}();t.cz=s},function(e,t,r){"use strict";var i=r(3);r(38);var n=r(1),s=r(4),o=r(7),a=r(31),h=r(40),u=r(6),c=r(57),l=hive.services.protocol.VR.CustomerKey,p=r(10);if("undefined"==typeof f)var f=!1;var d=function(){function e(){this.P="[TRACKER] ",this.ZL=0,this.lz=0,this.pz=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{0,4}){5})/,this.fz=!0,this.zo=n.Framework.resolve(n.Framework.Tt.pt),this.kh=n.Framework.resolve(p.Os.Ss),this.PK=n.Framework.resolve(o.Un._n)}return e.prototype.init=function(e){this.R=n.Framework.resolve(n.Framework.Tt.rt).log(e.sessionId),this.sessionId=e.sessionId,this.fY=e.fY,this.qw=e.qw,this.EP=e.EP,this.dz=e.jw,this.PK.gz(e.sessionId,this),this.yz=c.GO.jO},e.prototype.start=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.context=e,this.streamId=e.IQ.RP(),this.ticket=e.IQ.wP(),this.ho=t},e.prototype.vz=function(e){this.mz=e},e.prototype.EK=function(){var e=this;this.vK(),this.Tz=n.Framework.setInterval(function(){e.Ez()},s.an.ai.si),this.Ez()},e.prototype.vK=function(){this.Tz&&n.Framework.clearInterval(this.Tz)},e.prototype.wz=function(){var e=this,t=i.defer(),r=new hive.services.protocol.VR.TrackerRequest,n=this.context.IQ,s=n.isLive()?StreamType.LIVE:StreamType.wx;r.sessionId=this.sessionId;var o=new l;return this.mz?(o.partnerId=this.mz.partnerId,o.customerId=this.mz.customerId):(o.partnerId=this.ticket.eh(),o.customerId=this.ticket.Za()),r.customerKey=o,r.streamType=s,r.contentId=this.qw.RP(),this.kh.getConnectivityInfo().then(function(t){e.Iz=t.getNetworkChanged().getPrivateIp(),e.qw.xD(e.Iz)}).fail(function(t){e.R.warn(e.P+"Get connectivity info failed with error ",t)})["finally"](function(){try{var i=new hive.snapshots.ConnectivityInfo;i.publicIp=e.fD,i.privateIp=e.Iz,r.info=e.Sz(i,n),r.query=e.bz(n,r.info),t.resolve(r)}catch(s){e.R.error(e.P+"Prepare tracker info and query failed with error ",s),t.reject("ERROR")}}).done(),t.Vt},e.prototype.Rz=function(){var e=new Array;return this.yz==c.GO.jO?e.push(hive.services.protocol.VR.KR.JR):this.yz==c.GO.AS?e.push(hive.services.protocol.VR.KR.WR):this.yz==c.GO.Aw?e.push(hive.services.protocol.VR.KR.zR):this.R.warn("Wrong locality mode"),e},e.prototype.bz=function(e,t){var r=this,i=new hive.services.protocol.VR.TrackerQuery;return i.random=s.an.Zi.zi,t.externalAs&&!this.ZL&&(this.ZL=t.externalAs),t.internalAs&&!this.lz&&(this.lz=t.internalAs),i.rankings=this.Rz(),i.asns=[],this.ZL>0&&this.Pz(i.asns,hive.services.protocol.VR.XR.External,this.ZL,s.an.Zi.Wi),this.lz>0&&(this.Pz(i.asns,hive.services.protocol.VR.XR.$R,this.lz,s.an.Zi.Xi),i.watchers=[],e.$P().forEach(function(e){var t=r.Az(hive.services.protocol.VR.XR.$R,r.lz,e,-1);i.watchers.push({key:t,value:1})}),i.streamers=[],e.IP().Mw.forEach(function(e,t){var n=r.Az(hive.services.protocol.VR.XR.$R,r.lz,t,e.type==a.Ow.Aw?hive.services.protocol.VR.jR.QR:-1);i.streamers.push({key:n,value:s.an.Zi.$i})})),i},e.prototype.Az=function(e,t,r,i){var n=new hive.services.protocol.VR.TrackerAsQuery;n.asType=e,n.asn=t;var s=new hive.services.protocol.VR.TrackerBitrateQuery;return s.bitrate=r,s.asn=n,i!=-1&&s.streamState,s},e.prototype.Pz=function(e,t,r,i){var n=new hive.services.protocol.VR.TrackerAsQuery;n.asType=t,n.asn=r,e.push({key:n,value:i})},e.prototype.Sz=function(e,t){var r=new hive.services.protocol.VR.TrackerPeerInfo;if(n.Framework.it()?r.guid=this.Fh:r.guid=btoa(this.Fh),r.timestamp=n.Framework.time(),r.nat=void 0,this.qw.G_()&&(r.externalAs=this.qw.G_()),this.qw.LI()&&(r.internalAs=this.qw.LI()),null!=e){r.publicIpString=e.publicIp;var i=new InetAddress;i.address=e.publicIp,r.publicIp=i,r.privateIpString=e.privateIp;var s=new InetAddress;s.address=e.privateIp,r.privateIp=s}if(!this.qw.AI()&&this.qw.MI()&&f?r.rankValue=1:r.rankValue=this.qw.KY(),this.context.IQ instanceof h.oA){r.streams=new Array;var o=t.Ww();null!=o&&(r.watchingBitrate=o.bitrate);var u=t.IP();u.Mw.forEach(function(e,t){if(e.mw){var i=new hive.services.protocol.VR.TrackerPeerStreamInfo;switch(i.bitrate=t,e.type){case a.Ow.Cw:i.state=hive.services.protocol.VR.jR.GR;break;case a.Ow.kw:i.state=hive.services.protocol.VR.jR.YR;break;case a.Ow.Aw:i.state=hive.services.protocol.VR.jR.QR}i.delta=u.NI(e.mw.Iw(),t),r.streams.push(i)}})}return r},e.prototype.Ez=function(){var e=this;this.R.debug(this.P+" PREPARE REQUEST");var t=this.wz();t.then(function(t){e.R.debug(e.P+"SENDING TRACKER REQUEST [ privateIp:"+t.info.privateIpString+" rank:"+t.info.rankValue+"]"),e.PK.kz(t)},function(t){e.R.error(e.P+"tracker error1",t)})["catch"](function(t){e.R.error(e.P+"tracker error2",t)})},e.prototype.Cz=function(e){this.yz=e},e.prototype.AY=function(e){var t=this;this.ZL=e.peerInfo.externalAs,this.lz=e.peerInfo.internalAs,this.fD=e.peerInfo.publicIpString,this.Iz=e.peerInfo.privateIpString,this.qw.UD(this.fD),this.qw.zY(this.lz),this.qw.XY(this.ZL),this.R.debug(this.P+"Reporting from tracker public IP:"+this.fD+" private IP: "+e.peerInfo.privateIpString+" ExtAs:"+this.ZL+" inAs:"+this.lz),!this.qw.AI()&&this.qw.MI()&&f?this.dz.CN(!1):this.dz.Oz(e.rankings,e.infos);var r=this.Nz(e);this.ho.forEach(function(e){return e.hN(r,t.fz)}),this.fz=!1},e.prototype.Nz=function(e){for(var t=[],r=0,i=e.infos;r<i.length;r++){var n=i[r],s=new u.cn(u.un.hn,n);t.push(s)}return t},e.prototype.qN=function(e){},e.prototype.tu=function(e){this.Fh=e,this.R.info(this.P+"CONNECTED "+this.Fh),this.dz._z(),this.EK()},e.prototype.u_=function(){},e}();t.YQ=d},function(e,t,r){"use strict";var i=r(1),n=r(2),s=n.Ze,o=r(18),a=r(23);r(38);var h=function(){function e(){this.P="[TRACKER] ",this.Fz=new s,this.Do=new a.TT,this.protocol=new a.KT(this.Do),this.R=i.Framework.resolve(i.Framework.Tt.rt).log(),i.Framework.it()||(this.client=i.Framework.resolve(i.Framework.Tt.vt))}return e.prototype.gz=function(e,t){return this.R.debug("TRACKER CLIENT REGISTERED "+e),this.Fz.has(e)||this.Fz.set(e,t),this.Fz.get(e)},e.prototype.qo=function(e){this.Fz["delete"](e)},e.prototype.Vo=function(e){return this.Fz.get(e)},e.prototype.kz=function(e){var t=this;if(this.client&&this.client.lu()){var r=this.Lz(e),i=new o.pu(Services.tM,1,r),n=this.client.lu().send(i);n.then(function(){return t.R.info("TRACKER REQUEST SENT")}),n.fail(function(e){t.R.warn("TRACKER PROBLEM: ",e)})}else this.R.warn("SERVICES CONNECTION DOWN, CAN'T SEND TRACKER REQUEST ",e)},e.prototype.init=function(){var e=this;this.R.debug("TRACKER MANAGER INIT"),this.client&&this.client.lu()?this.client.lu().on(Services.tM,10,function(t){try{var r=e.Dz(t.msg);if(e.Fz.has(r.sessionId)){var i=e.Fz.get(r.sessionId);i.AY(r)}else e.R.warn("SESSION ID NOT VALID OR NULL "+r.sessionId)}catch(n){e.R.error("ERROR ",n)}}):i.Framework.it()||this.R.warn(this.P+" CANNOT GET ACTIVE CONNECTION")},e.prototype.Dz=function(e){var t='[1, "TRACKER_RESP", 4, 0,'+e+"]";this.Do.PT(t);var r=(this.protocol.gE(),new hive.services.protocol.VR.TrackerResponse);return r.read(this.protocol),r.infos.map(function(e){e.guid=atob(e.guid),e.publicIp=new InetAddress,e.publicIp.address=e.publicIpString,e.privateIp=new InetAddress,e.privateIp.address=e.privateIpString}),r.peerInfo.guid=atob(r.peerInfo.guid),r.peerInfo.publicIp=new InetAddress,r.peerInfo.publicIp.address=r.peerInfo.publicIpString,r.peerInfo.privateIp=new InetAddress,r.peerInfo.privateIp.address=r.peerInfo.privateIpString,this.protocol.EE(),r},e.prototype.Lz=function(e){this.protocol.XT("TRACKER_REQ",a.Gm.ONEWAY,0),e.write(this.protocol),this.protocol.eE();var t=this.Do.LT(),r=this.CD(t,",",4),i=t.slice(r+1,t.length-1);return i},e.prototype.CD=function(e,t,r){return e.split(t,r).join(t).length},e}();t.QQ=h},function(e,t,r){"use strict";var i=r(1),n=r(4),s=r(6),o=r(115),a=r(24),h=function(){function e(){this.Mz=!1,this.P="[UDPBDiscovery] ",this.Bz=-1}return e.prototype.init=function(e){this.R=i.Framework.resolve(i.Framework.Tt.rt).log(e.sessionId),this.xz=e.hK,this.qw=e.qw},e.prototype.fK=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.ho=e,this.contextId=this.qw.RP()},e.prototype.startServer=function(){var e=this;this.R.debug(this.P+"START UDP BROADCAST SERVER"),this.xz.startServer(n.an.UDPBroadcast.Hi,function(t,r){if(e.Bz>-1){var i=o.Uz.Sg(r);if(i.uuid!=e.guid&&i.streamId==e.contextId&&i.p2pProtocolVersion===n.an.Xr.zr){e.R.debug(e.P+"I RECEIVED A MESSAGE FROM "+i.uuid);var a=new s.cn(s.un.St,null,i.isLeader);a.guid=i.uuid,a.privateIpString=t,a.rankValue=i.rankValue,e.ho.forEach(function(e){return e.hN([a],!1)})}}})},e.prototype.wK=function(){var e=this;this.R.info(this.P+"START BROADCAST EVERY "+n.an.UDPBroadcast.qi),this.Bz!=-1&&i.Framework.clearInterval(this.Bz),this.Bz=i.Framework.setInterval(function(){e.Hz()},n.an.UDPBroadcast.qi),this.Hz()},e.prototype.mK=function(){this.Bz!=-1&&i.Framework.clearInterval(this.Bz)},e.prototype.Hz=function(){var e=new o.Uz(this.contextId,this.qw.Pt(),this.qw.HN(),this.qw.AI(),n.an.Xr.zr);this.R.info(this.P+"BROADCAST MESSAGE contextId "+e.streamId+" id "+e.uuid+" udpscore "+e.rankValue+" lan leader "+e.isLeader+" protobufVersion "+e.p2pProtocolVersion),a.HiveConfig.UDPBroadcast.usiz&&(n.an.UDPBroadcast.Vi=a.HiveConfig.UDPBroadcast.usiz),this.xz.broadcast(n.an.UDPBroadcast.Hi,n.an.UDPBroadcast.Vi,e.Ig())},e.prototype.tu=function(e){this.R.info("UDPDISCOVERY SERVER CONNECTED"),this.Mz||(this.guid=e,this.startServer(),this.wK())},e}();t.xQ=h},function(e,t){"use strict";var r=function(){function e(e,t,r,i,n){this.streamId=e,this.uuid=t,this.rankValue=r,this.isLeader=i,this.p2pProtocolVersion=n}return e.prototype.Ig=function(){var e={streamId:this.streamId,uuid:this.uuid,rankValue:this.rankValue,isLeader:this.isLeader,p2pProtocolVersion:this.p2pProtocolVersion},t=JSON.stringify(e,this.qz);return t},e.prototype.qz=function(e,t){if(null!==t)return t},e.Sg=function(t){var r=t,i=JSON.parse(r),n=i.streamId,s=i.uuid,o=i.rankValue,a=i.isLeader,h=i.p2pProtocolVersion;return new e(n,s,o,a,h)},e}();t.Uz=r},function(e,t,r){"use strict";var i=r(4),n=function(){function e(e,t,r,i,n){this.udpScore=0,this.rN=!1,this.streamId="",this.uuid=e,this.udpScore=t,r&&(this.address=r),i&&(this.rN=i),n&&(this.streamId=n)}return e.ju=function(e,t){var r=0;return r=e.udpScore>t.udpScore?1:e.udpScore<t.udpScore?-1:0,0!=r?-r:i.an.UDPBroadcast.ji?t.uuid.localeCompare(e.uuid):e.uuid.localeCompare(t.uuid)},e}();t.tN=n},function(e,t,r){"use strict";var i=r(6),n=function(){function e(e){this.peerInfo=e}return e.prototype.U_=function(){return this.peerInfo.type===i.un.St},e.prototype.vz=function(e){this.peerInfo.type==i.un.hn&&e.type==i.un.St?this.peerInfo.type=i.un.St:this.peerInfo.type==i.un.hn&&e.type==i.un.hn||this.peerInfo.type==i.un.St&&e.type==i.un.St?this.Vz(this.peerInfo,e):this.peerInfo.type==i.un.St&&e.type==i.un.hn&&(this.Vz(this.peerInfo,e),this.peerInfo.type=i.un.St)},e.prototype.sF=function(e){this.peerInfo.watchingBitrate=e},e.prototype.Vz=function(e,t){e.internalAs=this.jz(e.internalAs,t.internalAs),e.externalAs=this.jz(e.externalAs,t.externalAs),e.nat=this.jz(e.nat,t.nat),e.bandwidth=this.jz(e.bandwidth,t.bandwidth),e.watchingBitrate=this.jz(e.watchingBitrate,t.watchingBitrate),e.privateIpString=this.jz(e.privateIpString,t.privateIpString),e.publicIpString=this.jz(e.publicIpString,t.publicIpString),e.rankValue=this.jz(e.rankValue,t.rankValue),e.timestamp=this.jz(e.timestamp,t.timestamp),t.isLeader&&(e.isLeader=this.jz(e.isLeader,t.isLeader))},e.prototype.jz=function(e,t){return e?t&&e!=t&&(e=t):t&&(e=t),e},e}();t.Gz=n},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=r(4),o=r(1),a=r(8),h=r(6),u=r(117),c=r(33),l=r(58);if("undefined"==typeof p)var p=!1;if("undefined"==typeof f)var f=!1;var d=function(){function e(){this.Fh=null,this.Qz=new n,this.V_=new n}return e.prototype.init=function(e){this.R=o.Framework.resolve(o.Framework.Tt.rt).log(e.sessionId),this.Vw=e.Vw,this.qw=e.qw,(f||o.Framework.it()&&c.lS.uS)&&(this.cK=e.cK),this.start()},e.prototype.start=function(){this.Yz=!0},e.prototype.stop=function(){this.Yz=!1},e.prototype.hN=function(e,t){var r=this;try{if(this.Yz){var i=[];e.forEach(function(e){var t=null;r.Kz(),e.guid!=r.Fh&&(e.type==h.un.hn?t=r.Jz(e):f||o.Framework.it()&&c.lS.uS?(t=r.zz(e),r.cK.eN(e).then(function(){r.Vw.c_(r.V_.get(e.guid))}).fail(function(t){t&&t!=l.QN.uN&&(r.V_["delete"](e.guid),r.R.error("LEADER ELECTION FAILED WITH THE ERROR ",t))})):t=r.zz(e)),t&&i.push(t.peerInfo.guid)}),t&&this.Vw.E_(t),i.length>0&&this.R.debug("DISCOVERED NEW "+i.length+"/"+e.length+": ["+i.join(", ")+"]")}}catch(n){this.R.error("DISCOVERED PEERS FAILED WITH ERROR ",n)}},e.prototype.Kz=function(){this.Qz.length>=s.an.Ji.Yi&&this.Wz(this.Qz),this.V_.length>=s.an.Ji.Ki&&this.Wz(this.V_)},e.prototype.Wz=function(e){var t=e.keys()[o.Framework.random()*this.Qz.length];e["delete"](t)},e.prototype.zz=function(e){var t=null;return this.Qz.has(e.guid)?(t=this.Qz.get(e.guid),this.Qz["delete"](e.guid),this.V_.set(e.guid,t)):this.V_.has(e.guid)&&(t=this.V_.get(e.guid)),t?(t.vz(e),null):(t=new u.Gz(e),this.V_.set(e.guid,t),t)},e.prototype.Jz=function(e){var t=null;return this.V_.has(e.guid)?this.zz(e):this.Qz.has(e.guid)?(t=this.Qz.get(e.guid),t.vz(e),t):(t=new u.Gz(e),this.Qz.set(e.guid,t),t)},e.prototype.w_=function(e){if(this.Yz){if(f||o.Framework.it()&&c.lS.uS)return a.gs.us(this.Qz.values()).slice(0,e);var t=this.Qz.values();return this.V_.forEach(function(e,r){t.push(e)}),a.gs.us(t).slice(0,e)}return[]},e.prototype.x_=function(e){return this.Qz.has(e)?this.Qz.get(e):this.V_.has(e)?this.V_.get(e):null},e.prototype.tu=function(e){this.R.info("MEMBERSHIP SERVER CONNECTED"),this.Fh=e,this.qw.setId(this.Fh)},e.prototype.u_=function(){},e.prototype.qN=function(e){this.R.debug("Peer "+e+" disconnected"),this.Qz["delete"](e),this.V_["delete"](e)},e}();t.Ji=d},function(e,t){"use strict";var r=function(){function e(){}return e}();t.ca=r},function(e,t){"use strict";var r=function(){function e(){this.headers=null}return e}();t.Xz=r},function(e,t,r){"use strict";var i=r(2),n=i.Mt,s=r(22),o=r(3),a=r(19),h=r(13),u=r(1),c=r(8),l=r(120),p=r(4),f=r(59),d=function(){function e(e,t,r){this.MK=new n,this.$z=new n,this.Zz=null,this.Ao=h.va.Ao,this.Uo=e,this.Ho=t,this.Hw=r.Hw,this.Oa=r.Hs.Oa,this.zo=u.Framework.resolve(u.Framework.Tt.pt),this.R=u.Framework.resolve(u.Framework.Tt.rt).log(r.sessionId)}return e.prototype.K_=function(e){this.eW=e},e.prototype.Wo=function(){return!(0===this.MK.keys().length&&null===this.Zz)},e.prototype.tW=function(e){var t=new h.va.Ui.da.Request;t.fragmentId=e.ty(),t.transferId=e.jI,this.Ao&&this.R.debug("INITIATING TR-"+e.jI+" TIMEOUT: "+e.rW+" FRAGMENT: "+e.ty()+" FROM: "+this.Ho),this.MK.set(e.jI,e),this.$z.set(e.jI,u.Framework.time()),e.LY.P_.$o(h.va.Fo.Request,t)},e.prototype.iW=function(e){var t=e.transferId,r=e.data.Nm(),i=e.chunkSize,n=e.totalSize,s=e.headers;if(this.Ao&&this.R.debug("RCV Chunk "+r.byteLength),!this.MK.has(t))return void this.R.error("Received chunk of not existing transfer id "+t);null==this.Zz?(this.Ao&&this.R.debug("INITIATED TR-"+t+",SIZE="+n),this.Zz=this.MK.get(t),this.Zz.jI=t,this.nW(t,this.Zz.LY),null!=s?this.Zz.responseHeaders=s:this.R.warn("HEADERS NULL IN FIRST CHUNK"),this.Hw.fz(this.Ho,this.Zz,i,n),this.Zz.Jg=i,u.Framework.it()||(this.Zz.Kg=r)):(this.nW(t,this.Zz.LY),this.Zz.Jg+=i,u.Framework.it()||(this.Zz.Kg=c.gs.appendBuffer(this.Zz.Kg,r))),this.Zz.Zg()==a.Cg.kg&&(this.Oa.ED(this.eW).p2pSuccReceivedLow+=i,this.Oa.wD(this.eW).p2pSuccReceivedLow+=i);var o=u.Framework.it()?this.Zz.Jg:this.Zz.Kg.byteLength;this.Ao&&this.R.debug("RECEIVED "+o+"/"+n+" TRID "+t),o==n&&(this.Ao&&this.R.debug("RCV ALL DATA "+o+" TR-"+this.Zz.Wg),this.Zz.Gg.Fg=o,u.Framework.clearTimeout(this.Zz.fN),this.MK["delete"](t),this.R.debug("RCV ALL DATA FROM "+this.Ho+" AFTER "+(u.Framework.time()-this.$z.get(t))+" mseconds"),this.$z["delete"](t),this.Hw.iI(t,this.Zz),this.Zz=null)},e.prototype.nW=function(e,t){this.Ao&&this.R.debug("SEND ACK "+e+" TO "+this.Ho);var r=new h.va.Ui.da.Ack;r.transferId=e,t.P_.$o(h.va.Fo.Ack,r)},e.prototype.close=function(e){var t=this,r=o.defer();null!=this.Zz&&this.sW(this.Zz.jI);var i=this.MK.keys().slice();return i.forEach(function(e){t.sW(e)}),r.resolve(f.XN.jO),r.Vt},e.prototype.sW=function(e){if(this.MK.has(e)){var t=this.MK.get(e);t.Gg.Fg=t.Jg,this.R.debug("SEND CANCEL FOR "+e+" TO "+this.Ho),this.$z["delete"](e);var r=new h.va.Ui.da.Cancel;r.transferId=e,t.LY.P_.$o(h.va.Fo.Cancel,r),null!==this.Zz&&this.Zz.iy()===t.iy()&&(this.Zz=null),this.MK["delete"](e)}else this.R.warn("CLEAN UP NOT PENDING "+e)},e}();t.oW=d;var g=function(){function e(e,t,r,i){this.Ao=h.va.Ao,this.aW=null,this.hW=new Array,this.uW=new n,this.cW=0,this.close=null,this.Uo=e,this.Ho=t,this.lW=r.oK,this.P_=i,this.Gw=r.Gw,this.R=u.Framework.resolve(u.Framework.Tt.rt).log(r.sessionId),this.zo=u.Framework.resolve(u.Framework.Tt.pt)}return e.prototype.K_=function(e){this.eW=e},e.prototype.pW=function(e,t,r,i,n){var s=this;this.Ao&&this.R.info("SEND FRAGMENT "+e+" TO "+this.Ho);var o=new l.Xz;o.transferId=t,o.fragmentId=e,o.fW=n,o.headers=i,o.dW=r,o.gW=Math.ceil(o.dW/p.an.Ui.Di),o.yW=0,this.hW.push(o),this.Ao&&this.hW.forEach(function(e){s.R.debug(s.Ho+" PENDING OUT "+e)}),null===this.aW?this.vW():this.Ao&&this.R.debug(this.Ho+" OUT MSG NOT NULL")},e.prototype.mW=function(e){this.Ao&&this.R.debug("ONGOING "+e+" GOT ACK"),null!==this.aW&&this.aW.transferId.toString()===e.toString()?this.TW(!1):this.R.warn("RECEIVED ACK FOR UNKNOWN TR-"+e)},e.prototype.EW=function(e){null!=this.aW&&this.aW.transferId===e?(this.R.debug("GOT CANCEL FOR ONGOING TR-"+e),this.R.debug("TRANSPORT CANCEL STATS "+this.Uo+","+this.Ho+","+e),this.uW["delete"](e),0!=this.aW.yW?this.lW.wW(this.Ho,this.eW,this.aW.yW,this.aW.dW):this.lW.IW(this.Ho,this.eW,this.aW.dW),this.aW=null,this.vW()):this.hW=this.hW.filter(function(t){return t.transferId!==e})},e.prototype.vW=function(){try{if(null===this.aW&&0!==this.hW.length){var e=this.hW.shift();this.aW=e,this.Ao&&this.R.debug("DATA TO SEND LENGTH "+this.aW.dW+" IN "+this.aW.gW+" CHUNKS WITH TR-"+this.aW.transferId),this.TW(!0)}}catch(t){this.R.error("ERROR SEND FRAGMENT ",t),this.Xo()}},e.prototype.TW=function(e){e&&(this.uW.set(this.aW.transferId,u.Framework.time()),this.cW=this.aW.gW);try{if(null!=this.aW)if(0===this.aW.gW)this.R.debug("FINISHED SENDING TRANSFER "+this.aW.transferId+" WITH "+this.aW.yW+" BYTES"),this.uW["delete"](this.aW.transferId),this.lW.SW(this.Ho,this.eW,this.aW.dW),this.aW=null,this.bW(),this.vW();else{this.Ao&&this.R.debug("A CHUNK");var t=Math.min(this.aW.yW+p.an.Ui.Di,this.aW.dW),r=t-this.aW.yW,i=new h.va.Ui.da.Chunk;if(i.transferId=this.aW.transferId,i.totalSize=this.aW.dW,i.chunkSize=r,e&&null!=this.aW.headers&&(i.headers=this.aW.headers),u.Framework.it()||null==this.aW.fW)i.data=s.wrap(new ArrayBuffer(0));else if(i.data=this.Gw.pJ(this.aW.fragmentId,this.cW-this.aW.gW),null==i.data){var n=this.aW.fW.slice(this.aW.yW,t);i.data=s.wrap(n)}this.aW.yW=this.aW.yW+r,this.P_.$o(h.va.Fo.Chunk,i),this.Ao&&this.R.debug("SND ["+this.aW.yW+"-"+(this.aW.yW+r)+"/"+this.aW.dW+"] TO "+this.Ho+" OF TR-"+this.aW.transferId),this.aW.gW--}else this.R.debug("NO MESSAGE TO SEND")}catch(o){this.R.error("ERROR SENDING CHUNK ",o),this.Xo()}},e.prototype.Wo=function(){return!(0===this.hW.length&&null===this.aW)},e.prototype.RW=function(){var e=o.defer();return this.hW.length=0,this.Wo()?this.close=e:e.resolve("CLOSE"),e.Vt},e.prototype.bW=function(){this.close&&this.close.resolve("CLOSED")},e.prototype.Xo=function(){this.aW=null},e}();t.PW=g},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=r(32),o=r(1),a=r(7),h=r(9),u=r(6),c=function(){function e(){this.Ko=new s.Counter,this.AW=new n,this.kW=new n,this.OW=o.Framework.resolve(a.Un.kn)}return e.prototype.init=function(e){this.R=o.Framework.resolve(o.Framework.Tt.rt).log(e.sessionId),this.xw=e.xw,this.Vw=e.Vw,this.Uw=e.Uw,this.OW.NW(e.qw)},e.prototype.jE=function(e){this.R.debug("FRL ISSUE REQ FOR FRAGMENT "+e.$g.toString()+"-"+e.Gg.Fg+" ["+h.Es[e.ey()]+"] TO P2P"),this.AW.set(e.iy(),e);var t=this.Ko.next();e.jI=t,this.kW.set(t,e.iy()),this.kz(e)},e.prototype.kz=function(e){var t=e.ty(),r=e.iy(),i=this.xw.FI(t);e.size=this.xw.nK(t).size;var n=this.OW._W(i,e.type);null!=n?(this.R.info("SEND REQUEST FOR "+r+" TO "+n.P_.Ho+" (LAN LEADER "+n.DI.peerInfo.isLeader+" iAS "+n.DI.peerInfo.internalAs+" eAS "+n.DI.peerInfo.externalAs+" ) out of "+i.length+" type "+u.un[n.DI.peerInfo.type]+" size:"+e.size),e.LY=n,e.DY=n.DI.peerInfo,e.LY.FW(e.jI),e.Gg.Og=!0,e.Gg.xg=o.Framework.time(),e.jg?this.qI(e)?n.P_.receiver.tW(e):this.VI(e.jI,"TIMED-OUT"):n.P_.receiver.tW(e)):this.VI(e.jI,"NO PARTNERS FOR REQUEST")},e.prototype.qI=function(e){var t=this,r=!1,i=0;null==e.size?(i=this.xw.nK(e.ty()).size,this.R.warn("request size not set - this should not happen")):i=e.size;var n=e.Xg.eA().RC(e,i);return e.rW=n,n>0&&(r=!0,null==e.fN&&(e.fN=o.Framework.setTimeout(function(){t.VI(e.jI,"TIMED-OUT")},n))),r},e.prototype.VI=function(e,t){this.R.info(t+" "+e);var r=this.LW(e,!1,!0);r&&this.Uw.RY(r)},e.prototype.LW=function(e,t,r){if(this.kW.has(e)){var i=this.kW.get(e);this.kW["delete"](e);var n=this.AW.get(i);return this.AW["delete"](i),t&&clearTimeout(n.fN),r&&this.Vw.z_(n.LY.P_.Ho)&&(n.LY.P_.receiver.sW(e),0!=n.Jg?n.LY.DW(n.jI,n.Jg,n.size,!0):n.LY.VI(n.jI,n.ey()==h.Es.vs,n.size)),n}return this.R.warn("CALLED CANCEL REQUEST ON NON EXISTING SESSION"),null},e.prototype.DQ=function(e){if(this.AW.has(e)){var t=this.AW.get(e).jI;this.LW(t,!0,!0)}},e.prototype.fz=function(e,t,r,i){this.R.debug("FRL DOWNLOADING "+t.iy()+" FROM "+e+" P2P")},e.prototype.iI=function(e,t){this.R.debug("FRL PROMISED FRAGMENT "+t.iy()+" RETURNED FROM P2P SIZE "+t.Gg.Fg),t=this.LW(e,!1,!1),t?(t.Gg.Hg=o.Framework.time(),t.LY.MW(t.jI,t.size,!0),this.Uw.PY(t)):this.R.warn("TRIED TO REMOVE A NON EXISTING REQUEST "+e+" (THIS SHOULD NOT HAPPEN. AT LEAST NOT TOO OFTEN)")},e.prototype.BW=function(e){var t=e.getTransferId();if(this.kW.has(t)){this.R.debug("DO NOT HAVE RECEIVED FOR "+t);var r=this.LW(t,!0,!1);this.Uw.RY(r)}else this.R.warn("UNKNOWN DO NOT HAVE "+t)},e.prototype.cr=function(e){return this.AW.has(e)},e}();t.ZQ=c},function(e,t,r){"use strict";var i=r(1),n=r(13),s=function(){function e(){}return e.prototype.init=function(e){this.R=i.Framework.resolve(i.Framework.Tt.rt).log(e.sessionId),this.$O=e,this.xw=e.xw,this.CT=e.CT,this.Vw=e.Vw,this.uploadScore=e.uploadScore,this.Oa=e.Hs.Oa,this.qw=e.qw},e.prototype.PP=function(e,t){try{if(this.Vw.D_(e)){var r=this.Vw.uF(e);this.xW(e,t,r)}else this.R.warn("GOT REQUEST FROM NON-PARTNER "+e+" FOR "+t.fragmentId)}catch(i){this.R.error("GOT ERROR ON SERVING REQUEST ",i)}},e.prototype.SW=function(e,t,r){if(this.uploadScore.success(r),this.Vw.D_(e)){var i=this.Vw.uF(e);i.UW.success(r),i.HW(r,this.Oa.ED(t)),i.HW(r,this.Oa.wD(t))}},e.prototype.wW=function(e,t,r,i){if(this.uploadScore.$K(r,i),this.Vw.D_(e)){var n=this.Vw.uF(e);n.UW.$K(r,i),n.qW(r,i,this.Oa.ED(t)),n.qW(r,i,this.Oa.wD(t))}},e.prototype.IW=function(e,t,r){if(this.uploadScore.Ws(),this.Vw.D_(e)){var i=this.Vw.uF(e);i.UW.Ws(),i.VW(r,this.Oa.ED(t)),i.VW(r,this.Oa.wD(t))}},e.prototype.xW=function(e,t,r){var i=this;this.CT.get(t.fragmentId).then(function(n){n?(i.R.debug("SENDING TO "+e+","+t.fragmentId+","+t.transferId+","+n.length+" DL "+n.length),r.P_.sender.pW(t.fragmentId,t.transferId,n.length,n.headers,n.data)):(i.R.debug("RECEIVED REQUEST FOR "+t.fragmentId+" FROM "+e+" CAN'T BE SERVED"),i.jW(t.transferId,r))})},e.prototype.jW=function(e,t){this.R.info("SEND DO NOT HAVE "+e+" TO "+t.P_.Uo);var r=new n.va.Ui.da.DoNotHave;r.setTransferId(e),t.P_.$o(n.va.Fo.DoNotHave,r)},e}();t.eY=s},function(e,t,r){"use strict";var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(6),s=r(125),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._W=function(t,r){var i=[],s=[],o=[],a=this.qw.LI();
return t.forEach(function(e){e.DI.peerInfo.type==n.un.St&&i.push(e);var t=e.DI.peerInfo.internalAs;0!=a&&t&&a==t&&s.push(e),e.DI.peerInfo.type==n.un.hn&&o.push(e)}),i.length>0?e.prototype._W.call(this,i,r):s.length>0?e.prototype._W.call(this,s,r):e.prototype._W.call(this,o,r)},t}(s.GW);t.rY=o},function(e,t,r){"use strict";var i=r(1),n=r(4),s=function(){function e(){this.R=i.Framework.resolve(i.Framework.Tt.rt).log()}return e.prototype.NW=function(e){this.qw=e},e.prototype._W=function(e,t){var r=this.QW(e);return r[0]},e.prototype.YW=function(e,t){return n.an.Ui.Bi*(e.KW()/t)+n.an.Ui.xi*(1-e.JW())},e.prototype.QW=function(e){var t=this,r=.1;r+=e.map(function(e){return e.KW()}).reduce(function(e,t){return e+t});var i=e.sort(function(e,i){return t.YW(i,r)-t.YW(e,r)}),n=[];return e.forEach(function(e){n.push(e.guid+":"+t.YW(e,r))}),this.R.debug("SC ["+n.join(", ")+"]"),i},e}();t.GW=s},function(e,t,r){"use strict";var i=r(22),n=r(2),s=n.Ze,o=r(1),a=r(6),h=r(13),u=r(4),c=function(){function e(){this.P="[PART] ",this.y_=new s,this.v_=new s,this.m_=new s,this.T_=new s,this.zW=!1,this.WW=!1,this.XW=!0,this.$W()}return e.prototype.init=function(e){this.R=o.Framework.resolve(o.Framework.Tt.rt).log(e.sessionId),this.qw=e.qw,this.CT=e.CT,this.uploadScore=e.uploadScore,this.xw=e.xw},e.prototype.d_=function(e){return this.D_(e.peerInfo.guid)},e.prototype.D_=function(e){return this.T_.has(e)||this.m_.has(e)},e.prototype.uF=function(e){return this.m_.has(e)?this.m_.get(e):this.T_.get(e)},e.prototype.l_=function(e){return this.z_(e.peerInfo.guid)},e.prototype.z_=function(e){return this.v_.has(e)||this.y_.has(e)},e.prototype.W_=function(e){return this.v_.has(e)?this.v_.get(e):this.y_.get(e)},e.prototype.j_=function(e){var t=this;try{if(this.XW)if(this.D_(e)){var r=this.uF(e),i=this.uploadScore.sJ(!1),n=[];this.CT.hJ(this.context.isLive()).then(function(s){t.R.debug(t.P+"SEND ALL HAVES TO "+e+","+s.length);for(var o=0;o<s.length;o++){var a=0;a=t.context.isLive()?s[o].size():s[o].totalSize;var u=s[o].$g,c=new h.va.Ui.da.Have;c.setFragmentId(u.ty()),c.setSize(a),c.setUploadScore(i);var l=u;c.setId(l.Iw()),c.setBitrate(l.bitrate),c.setDuration(l.duration),c.setType(l.ey()),n.push(c)}if(n.length>0){var p=new h.va.Ui.da.Haves;p.setHave(n),r.P_.$o(h.va.Fo.Haves,p)}})}else this.R.debug(this.P+"NO PEER TO SEND TO "+e)}catch(s){this.R.error("SEND ALL HAVES ERROR ",s)}},e.prototype.FY=function(e,t,r){var i=this;if(this.XW){var n=this.m_.values();this.T_.forEach(function(e,t){n.push(e)});var s=this.uploadScore.sJ(!1);n.forEach(function(n){(!r||r&&n.guid!=r.guid)&&i.ZW(n.P_,e,t,s)})}},e.prototype.ZW=function(e,t,r,i){this.zW&&this.R.debug(this.P+"SEND HAVE TO "+e.Ho+" FOR "+t.ty());var n=new h.va.Ui.da.Have;n.setFragmentId(t.ty()),n.setSize(r),n.setUploadScore(i);var s=t;n.setId(s.Iw()),n.setBitrate(s.bitrate),n.setDuration(s.duration),n.setType(s.ey()),e.$o(h.va.Fo.Have,n)},e.prototype.eX=function(e,t){if(this.z_(e)){this.WW&&this.R.debug(this.P+"HAVE RECEIVED FROM "+e+": "+t.fragmentId);var r=this.W_(e);r.tX(t.getUploadScore()),this.xw.put(t,r),this.context.JP(t)}else this.R.info(this.P+"REC HAVE FROM UNKNOWN PEER "+e)},e.prototype.rX=function(e,t){var r=this;if(this.z_(e)){this.WW&&this.R.debug(this.P+" BATCH HAVES RECEIVED FROM "+e);var i=this.W_(e);t.getHave().forEach(function(e){i.tX(e.getUploadScore()),r.xw.put(e,i)}),this.context.JP(t.getHave()[0])}else this.R.info(this.P+"REC HAVE FROM UNKNOWN PEER "+e)},e.prototype.__=function(e){var t=new h.va.Ui.da.Ping;t.id=this.qw.Pt(),t.startTs=o.Framework.time(),this.R.debug(this.P+"REQUEST PING TO PEER GUID "+e.Ho),e.$o(h.va.Fo.Ping,t)},e.prototype.iX=function(e){var t=e.id;if(!this.D_(t))return void this.R.warn(this.P+"RECEIVED A PING REQUEST FROM AN UNKNOWN PEER "+t);var r=-1;e.startTs&&(r=e.startTs),this.nX(this.uF(t).P_,r)},e.prototype.$W=function(){for(var e="",t=0;t<u.an.Ui.Di;t++)e+=String.fromCharCode(33+93*Math.random());for(var r=new ArrayBuffer(e.length),n=new Uint8Array(r),s=e.length,t=0;t<s;t++)n[t]=e.charCodeAt(t);this.sX=i.wrap(n)},e.prototype.nX=function(e,t){var r=new h.va.Ui.da.Pong;r.id=this.qw.Pt(),r.startTs=t,this.sX||this.$W(),r.data=this.sX,r.dataSize=u.an.Ui.Di,this.R.debug(this.P+"SEND PONG TO PEER GUID "+e.Ho),e.$o(h.va.Fo.Pong,r)},e.prototype.oX=function(e){var t=e.id;if(!this.z_(t))return void this.R.warn(this.P+"RECEIVED A PONG FROM AN UNKNOWN PEER "+t);var r=o.Framework.time();if(e.startTs&&e.startTs>0){var i=r-e.startTs,n=this.W_(t);e.dataSize==e.data.Zo().byteLength?n.aX(e.dataSize,i,!0):this.R.warn(this.P+"I received a pong with wrong data size")}else this.R.warn(this.P+"I received a wrong startTs "+e.startTs+" from "+t)},e.prototype.cD=function(){try{var e=new s;return this.hX(this.v_,e),this.hX(this.y_,e),e}catch(t){this.R.error("GET PARTNERS SNAPSHOTS ERROR ",t)}},e.prototype.hX=function(e,t){var r=this;e.forEach(function(e,i){var n=new hive.snapshots.Partner;n.inPart=!0,n.outPart=r.D_(i),n.connInfo=new hive.snapshots.ConnectivityInfo;var s=void 0;e.DI.peerInfo.publicIpString&&(s=e.DI.peerInfo.publicIpString);var o=void 0;e.DI.peerInfo.privateIpString&&(o=e.DI.peerInfo.privateIpString),n.connInfo.publicIp=s,n.connInfo.privateIp=o,n.connInfo.externalAs=e.DI.peerInfo.externalAs,n.connInfo.internalAs=e.DI.peerInfo.internalAs;var h=new hive.snapshots.PartnerMetrics;h.rateReceived=e.KW(),n.metrics=h,n.udp=e.DI.peerInfo.type==a.un.St,t.set(e.reportingGuid,n)})},e}();t.pF=c},function(e,t){"use strict";var r=function(){function e(e,t){this.uX=e,this.cX=t}return e.prototype.S_=function(){return this.cX},e.prototype.A_=function(){return this.uX},e}();t.lX=r},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=r(4),o=r(1),a=r(17),h=(a.Po,function(){function e(){this.P="[IPSpoofing] ",this.pX=s.an.ti.$r}return e.prototype.init=function(e){this.R=o.Framework.resolve(o.Framework.Tt.rt).log(e.sessionId),this.Vw=e.Vw,this.fX=new n,this.dX=new n,this.pX&&this.gX()},e.prototype.k_=function(e,t,r){if(!this.pX)return!1;if(this.fX.has(e)||!t||!r)return!1;var i=this.yX(t,r);if(i&&this.dX.has(i)){var n=this.dX.get(i);if(n.length>=s.an.ti.Zr)return this.R.debug(this.P+"Spoofing rule violated for "+e+" with privateIp "+t+" publicIp "+r),!0}return!1},e.prototype.N_=function(e,t,r){if(this.pX&&r&&t){var i=this.yX(t,r),n=this.fX.get(e);n&&n!=i&&this.vX(e,n),this.mX(e,i)}},e.prototype.TX=function(e){this.pX&&this.X_(e)},e.prototype.qN=function(e){this.pX&&this.X_(e)},e.prototype.mX=function(e,t){this.fX.set(e,t);var r=[];this.dX.has(t)&&(r=this.dX.get(t),r.indexOf(e)!=-1)||(r.push(e),this.dX.set(t,r))},e.prototype.X_=function(e){var t=this.fX.get(e);t?(this.vX(e,t),this.fX["delete"](e)):this.R.warn(this.P+"no ip pair for guid "+e)},e.prototype.vX=function(e,t){var r=this.dX.get(t),i=r.indexOf(e);i!=-1?(r.splice(i,1),0==r.length?this.dX["delete"](t):this.dX.set(e,r)):this.R.warn(this.P+"pair list "+t+" does not contain guid "+e)},e.prototype.yX=function(e,t){return t+":"+e},e.prototype.gX=function(){var e=this;o.Framework.setInterval(function(){var t=[];e.dX.forEach(function(r,i){if(r.length>s.an.ti.Zr){for(var n=[],o=s.an.ti.Zr;o<r.length;o++)n.push(r[o]);e.R.warn("IpSpoofing violation for "+i+" - closing: "+n),t.concat(n)}}),t.forEach(function(t){e.Vw.F_(t),e.X_(t)})},s.an.ti.ei)},e}());t.ti=h},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=r(1),o=r(4),a=r(7),h=function(){function e(e,t,r,i,o,h){this.EX=0,this.wX=0,this.IX=0,this.SX=new Array,this.bX=new Array,this.MK=new n,this.R=i,this.P_=r,this.guid=e,this.DI=h,this.RX=o,this.Oa=t,this.PX=s.Framework.resolve(a.Un.On),this.UW=s.Framework.resolve(a.Un.On)}return e.prototype.q_=function(e){this.reportingGuid=e,this.P_&&(this.P_.receiver.K_(this.reportingGuid),this.P_.sender.K_(this.reportingGuid))},e.prototype.aX=function(e,t,r){var i=Math.max(1,t);for(r&&(this.wX+=i,this.EX+=e);this.SX.length>o.an.Fi.Ai;)this.SX.pop();var n=e/i;this.SX.unshift(n)},e.prototype.FW=function(e){this.MK.has(e)?this.R.warn(this.guid+" DUPLICATE {} PENDING REQUESTS "+e):this.MK.set(e,s.Framework.time())},e.prototype.MW=function(e,t,r){if(this.MK.has(e)){var i=this.MK.get(e),n=s.Framework.time()-i;this.MK["delete"](e),r&&this.aX(t,n,!0),this.PX.success(t),this.AX(t,this.Oa.ED(this.reportingGuid)),this.AX(t,this.Oa.wD(this.reportingGuid))}else this.R.warn("REQUEST "+e+" DOES NOT EXIST")},e.prototype.DW=function(e,t,r,i){if(this.MK.has(e)){var n=this.MK.get(e);this.MK["delete"](e),o.an.Fi.ki?this.aX(t,n,!0):this.aX(0,n,!0),this.PX.$K(t,r),this.kX(t,r,this.Oa.ED(this.reportingGuid)),this.kX(t,r,this.Oa.wD(this.reportingGuid))}else this.R.warn(this.guid+"{} REQUEST "+e+" DOES NOT EXIST")},e.prototype.VI=function(e,t,r){if(this.MK.has(e)){var i=this.MK.get(e);this.MK["delete"](e),this.aX(0,i,!0),this.PX.Ws(),this.CX(r,this.Oa.wD(this.reportingGuid)),this.CX(r,this.Oa.ED(this.reportingGuid))}else this.R.warn(this.guid+"{} REQUEST "+e+" DOES NOT EXIST")},e.prototype.AX=function(e,t){t.p2pSuccReq++,t.p2pSuccReceived+=e},e.prototype.CX=function(e,t){t.p2pFailReq++,t.p2pFailReceived+=e},e.prototype.kX=function(e,t,r){r.p2pPartReq++,r.p2pSuccReceived+=e,r.p2pFailReceived+=t-e},e.prototype.HW=function(e,t){t.p2pSuccResp++,t.p2pSuccSent+=e},e.prototype.VW=function(e,t){t.p2pFailResp++,t.p2pFailSent+=e},e.prototype.qW=function(e,t,r){r.p2pPartResp++,r.p2pSuccSent+=e,r.p2pFailSent+=t-e},e.prototype.KW=function(){var e=this.SX.reduce(function(e,t){return e+t},0);return this.SX.length>0?e/this.SX.length:0},e.prototype.tX=function(e){this.IX=e},e.prototype.JW=function(){return this.IX},e.prototype.U_=function(){return this.DI.U_()},e}();t.Partner=h},function(e,t,r){"use strict";var i=r(127),n=r(4),s=r(1),o=function(){function e(){this.R=s.Framework.resolve(s.Framework.Tt.rt).log()}return e.prototype.I_=function(e,t,r,s){var o=[],a=[],h=Math.round(e*(1-n.an.Jr.Yr)),u=Math.max(t.length-h,0),c=e-t.length+u;if(u>0){var l=t.filter(function(e){return!e.P_.Do.Wo()}),p=Math.min(l.length,u);a=this.OX(p,l);var f=[],d=[];a.forEach(function(e){f.push(e.guid),d.push(e.PX.iJ(!1))})}return c>0&&(o=this.NX(c,t,r,s)),this.R.debug("[PART] A/R: "+c+"/"+u+" ["+o.map(function(e){return e.peerInfo.guid.substring(0,8)})+"/"+a.map(function(e){return e.guid.substring(0,8)})+"] P:["+t.map(function(e){return e.guid.substring(0,8)})+"] M:["+s.map(function(e){return e.peerInfo.guid.substring(0,8)})+"]"),new i.lX(o,a)},e}();t._X=o},function(e,t,r){"use strict";var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(130),s=r(4),o=function(){function e(){}return e.FX=function(e,t){var r=e.PX.iJ(!1),i=t.PX.iJ(!1);return r>i?1:r<i?0:-1},e}();t.LX=o;var a=function(e){function t(){var t=e.call(this)||this;return t.type="Score",t}return i(t,e),t.prototype.OX=function(e,t){return t.sort(o.FX),t.slice(0,e)},t.prototype.NX=function(e,t,r,i){var n=i.filter(function(e){return t.every(function(t){return t.guid!=e.peerInfo.guid})&&r.indexOf(e.peerInfo.guid)==-1});return n.slice(0,e)},t}(n._X);t.XQ=a;var h=function(){function e(){}return e.FX=function(e,t){var r=e.UW.oJ(s.an.Fi._i),i=t.UW.oJ(s.an.Fi._i);return r>i?1:r<i?-1:0},e}();t.DX=h;var u=function(){function e(){}return e.prototype.H_=function(e){var t=e.filter(function(e){return!e.P_.Do.Wo()});return t.length>0?(t.sort(h.FX),t.slice(0,1)[0]):null},e}();t.$Q=u},function(e,t,r){"use strict";var i=r(31),n=r(2),s=r(2),o=r(8),a=r(4),h=r(1),u=r(33),c=r(57);if("undefined"==typeof l)var l=!1;if("undefined"==typeof p)var p=!1;var f=function(){function e(){this.MX=!1}return e.prototype.init=function(e){this.R=h.Framework.resolve(h.Framework.Tt.rt).log(e.sessionId),this.qw=e.qw,this.aK=e.aK,this.ZO=e.ZO,this.EP=e.EP},e.prototype.Qw=function(e){this.Yw=e},e.prototype._z=function(){this.MX=!0,this.TK()},e.prototype.kN=function(){if(a.an.wi.gi)return void this.BX();var e=!this.qw.MI()||this.qw.AI()||!p;this.R.debug("REQUEST REMOTE ELECTION "+e),e?this.BX():this.xX()},e.prototype.BX=function(){var e=this.qw.LI(),t=e&&0!=e?c.GO.Aw:c.GO.AS;this.aK.Cz(t)},e.prototype.xX=function(){this.aK.Cz(c.GO.jO)},e.prototype.TK=function(){var e=this;this.gK(),this.UX=h.Framework.setInterval(function(){e.kN()},a.an.wi.vi),this.kN()},e.prototype.gK=function(){this.UX&&h.Framework.clearInterval(this.UX)},e.prototype.yK=function(){this.Yw.XP()},e.prototype.CN=function(e){var t=new n.Ze;if(e){var r=this.HX();r.forEach(function(e){t.set(e,i.Ow.kw)});var s=!1,o=i.Ow.kw;this.qw.BI()&&(o=i.Ow.Aw,s=!0),this.EP.zw(t,o,s)}else this.EP.zw(t,i.Ow.Cw,!1)},e.prototype.Oz=function(e,t){var r=this,h=this.qX(t),u=this.EP.Jw().isLive();if(e&&e.length>0){var c=new s.Bt;c.addEach(e);var l=a.an.wi.ci||c.some(function(e){var t=o.gs.ps(hive.services.protocol.VR.KR,e.key.rankType);return r.R.info("GOT RANKING "+t+",CRV "+e.cumulatedRankValue+",RV "+e.ranking+",GS "+e.groupSize),r.VX(e)}),p=null!=h&&0!=h.length;if(this.R.debug("Tracker reports ["+h.keys().join(", ")+"]  bitrates"),this.R.debug("ISLive "+u+" DoElect "+l),a.an.wi.ui&&u){var f=this.HX();if(p&&l){this.qw.eK(!0),this.R.info("BECOMING SITE LEADER");var d=new n.Ze;f.forEach(function(e){d.set(e,i.Ow.kw)}),h.forEach(function(e,t){r.ZO.V_.has(e)||d.set(t,i.Ow.Aw)}),this.EP.zw(d,i.Ow.Aw,!1)}else{this.qw.eK(!1);var g=i.Ow.Cw,y=new n.Ze;this.qw.MI()&&this.qw.AI()&&(g=i.Ow.kw,f.forEach(function(e){y.set(e,i.Ow.kw)})),this.EP.zw(y,g,!1)}}}else if(u){a.an.wi.ci?this.qw.eK(!0):this.qw.eK(!1);var v=new n.Ze,g=i.Ow.Cw;if(this.qw.MI()&&this.qw.AI()){var m=this.HX();m.forEach(function(e){v.set(e,i.Ow.kw)}),g=i.Ow.kw}a.an.wi.ci&&(g=i.Ow.Aw),this.EP.zw(v,g,!1)}},e.prototype.oF=function(){var e=this.HX(),t=new n.Ze;e.forEach(function(e){t.set(e,i.Ow.kw)});var r=!1,s=i.Ow.kw;this.qw.BI()&&(s=i.Ow.Aw,r=!0),this.EP.zw(t,s,r)},e.prototype.HX=function(){var e=new s.Bt;return this.ZO.V_.forEach(function(t,r){t.peerInfo.watchingBitrate&&!e.has(t.peerInfo.watchingBitrate)&&e.add(t.peerInfo.watchingBitrate)}),e.toArray()},e.prototype.qX=function(e){var t=new n.Ze,r=this.qw.LI();return e.forEach(function(e){null!=e.watchingBitrate&&(r>0?r===e.internalAs&&t.set(e.watchingBitrate,e.guid):t.set(e.watchingBitrate,e.guid))}),t},e.prototype.VX=function(e){if(e.groupSize<2)return!1;var t=Math.max(1,Math.round(e.groupSize*a.an.wi.pi));return p||h.Framework.it()&&u.lS.uS?e.ranking<t&&(this.qw.AI()||!this.qw.MI()):e.ranking<t},e.prototype.vI=function(e,t,r,n){var s=1,o=this.Yw.CI(r,t),u=a.an.wi.Ti*h.Framework.random();if(e==i.Ow.kw){var c=this.Yw.WP(),l=c-u;s=Math.max(1,o-l)}else if(e==i.Ow.Aw){var p=a.an.wi.Ei-u;s=Math.max(1,o-p)+n}return s=Math.round(s)},e}();t.iY=f},function(e,t,r){"use strict";var i=r(3),n=r(1),s=r(13),o=r(33),a=r(121);if("undefined"==typeof h)var h=!1;if("undefined"==typeof u)var u=!1;var c=function(){function e(e,t,r,i){this.R=n.Framework.resolve(n.Framework.Tt.rt).log(e.sessionId),this.Uo=t,this.Ho=r,this.swarmId=e.swarmId,this.Do=i,this.receiver=new a.oW(t,r,e),this.sender=new a.PW(t,r,e,this),this.Hw=e.Hw,this.Vw=e.Vw,this.oK=e.oK,(u||n.Framework.it()&&o.lS.uS)&&(this.cK=e.cK)}return e.prototype.Wo=function(){return this.sender.Wo()||this.receiver.Wo()},e.prototype.close=function(){var e=this,t=i.defer();return this.sender.RW().then(function(r){e.receiver.close(r).then(function(r){e.R_(r).then(function(r){e.Do.close(r).then(function(e){t.resolve(e)})})})}),t.Vt},e.prototype.R_=function(e){this.R.debug("SEND CLOSE TO "+this.Ho);var t=new s.va.Ui.da.Close;return t.setType(e),this.$o(s.va.Fo.Close,t),i(this.swarmId)},e.prototype.Jt=function(e){try{switch(h&&this.R.debug("DISPATCH "+e.msgId),e.msgId){case s.va.Fo.Chunk:var t=s.va.Ui.da.Chunk.decode(e.pa);this.receiver.iW(t);break;case s.va.Fo.Ack:var r=s.va.Ui.da.Ack.decode(e.pa);this.sender.mW(r.transferId);break;case s.va.Fo.Cancel:var i=s.va.Ui.da.Cancel.decode(e.pa);this.sender.EW(i.transferId);break;case s.va.Fo.ko:h&&this.R.debug("RECEIVED OUT PART,DECODING ");var n=s.va.Ui.da.OutPartnershipRequest.decode(e.pa);h&&this.R.debug("RECEIVED OUT PART FROM "+n.guid),this.Vw.L_(n,this.Do);break;case s.va.Fo.Co:h&&this.R.debug("RECEIVED OUT PART RESP ");var o=s.va.Ui.da.OutPartnershipResponse.decode(e.pa);h&&this.R.debug("RECEIVED OUT PART RESP FROM "+o.accept),this.Vw.tF(o,this.Do);break;case s.va.Fo.Have:var a=s.va.Ui.da.Have.decode(e.pa);h&&this.R.debug("RECEIVED HAVE FOR "+a.fragmentId+" FROM "+this.Ho),this.Vw.eX(this.Ho,a);break;case s.va.Fo.Close:var u=s.va.Ui.da.Close.decode(e.pa);h&&this.R.debug("RECEIVED CLOSE FROM "+this.Ho),this.Vw.Z_(this.Ho,u);break;case s.va.Fo.Request:var c=s.va.Ui.da.Request.decode(e.pa);h&&this.R.debug("RECEIVED REQUEST FOR "+c.fragmentId+" FROM "+this.Ho),this.oK.PP(this.Ho,c);break;case s.va.Fo.DoNotHave:var l=s.va.Ui.da.DoNotHave.decode(e.pa);h&&this.R.debug("DoNotHave "+l.transferId),this.Hw.BW(l);break;case s.va.Fo.Oo:var p=s.va.Ui.da.UDPHandshakeMessage.decode(e.pa);h&&this.R.debug("UDP HANDSHAKE MESSAGE RECEIVED FROM "+p.uuid),this.cK.gN(p,this.Do);break;case s.va.Fo.UDPHandshakeResponse:var f=s.va.Ui.da.UDPHandshakeResponse.decode(e.pa);h&&this.R.debug("UDP HANDSHAKE MESSAGE RESPONSE RECEIVED FROM "+this.Ho),this.cK.dN(f,this.Do);break;case s.va.Fo.UDPSwitchLeadershipRequest:var d=s.va.Ui.da.UDPSwitchLeadershipRequest.decode(e.pa);h&&this.R.debug("SWITCH LEADERSHIP REQUEST RECEIVED FROM "+this.Ho),this.cK._N(d);break;case s.va.Fo.No:var g=s.va.Ui.da.UDPSwitchLeadershipAck.decode(e.pa);h&&this.R.debug("UDP SWITCH ACKNOWLEDGMENT RESPONSE FROM "+this.Ho),this.cK.xN(g,this.Ho);break;case s.va.Fo.Bitrate:var y=s.va.Ui.da.Bitrate.decode(e.pa);h&&this.R.debug("BITRATE INFO "+y.bitrate+" FROM "+y.guid),this.Vw.nF(y);break;case s.va.Fo.Haves:var v=s.va.Ui.da.Haves.decode(e.pa);h&&this.R.debug("RECEIVED BATCH HAVES FOR FROM "+this.Ho),this.Vw.rX(this.Ho,v);break;case s.va.Fo._o:var m=s.va.Ui.da.PeerInfoMessage.decode(e.pa);h&&this.R.debug("RECEIVED PEER INFO FROM "+this.Ho),this.Vw.aF(m);break;case s.va.Fo.Ping:var T=s.va.Ui.da.Ping.decode(e.pa);h&&this.R.debug("RECEIVED PING FROM "+this.Ho),this.Vw.iX(T);break;case s.va.Fo.Pong:var E=s.va.Ui.da.Pong.decode(e.pa);h&&this.R.debug("RECEIVED PONG FROM "+this.Ho),this.Vw.oX(E);break;default:this.R.warn("UNKNOWN MESSAGE TYPE "+e.msgId)}}catch(w){this.R.error("P2P DISPATCHER ERROR ",w)}},e.prototype.$o=function(e,t){this.Do.$o(e,this.swarmId,t)},e}();t.xo=c},function(e,t,r){"use strict";var i=r(29),n=r(135),s=r(41),o=r(1),a=function(){function e(){}return e.prototype.apply=function(e){e.bind(new i.rw(o.Framework.Tt.tt,n.jX,i.iw.uw)),e.bind(new i.rw(o.Framework.Tt.rt,s.dA.fA))},e}();t.hL=a},function(e,t){(function(e){"use strict";var r=function(){function t(){"undefined"!=typeof e?this.GX=e:this.GX=window}return t.prototype.it=function(){return!1},t.prototype.QX=function(e,t,r){},t.prototype.ot=function(){},t.prototype.time=function(){return+new Date},t.prototype.setTimeout=function(e,t){var r=this.GX.setTimeout(function(){e()},t);return r},t.prototype.clearTimeout=function(e){return this.GX.clearTimeout(e),!0},t.prototype.setInterval=function(e,t){var r=this.GX.setInterval(function(){e()},t);return r},t.prototype.clearInterval=function(e){return this.GX.clearInterval(e),!0},t}();t.jX=r}).call(t,function(){return this}())},function(e,t,r){"use strict";var i=r(2),n=i.Ze,s=r(1),o=function(){function e(){this.ho=new n,this.R=s.Framework.resolve(s.Framework.Tt.rt).log()}return e.prototype.YX=function(e,t){this.R.info("SET LISTENERS FOR "+e+","+t.length),this.ho.set(e,t)},e.prototype.KX=function(e){this.ho["delete"](e)},e.prototype.JX=function(){this.ho.length>0&&this.ho.forEach(function(e,t){e.forEach(function(e){e.u_&&e.u_()})})},e.prototype.zX=function(e,t){var r=this;this.ho.length>0&&(t?this.ho.get(t).forEach(function(t){try{t.tu&&t.tu(e)}catch(i){r.R.error("Cannot fire server connected on "+t)}}):this.ho.forEach(function(t,i){t.forEach(function(t){try{t.tu&&t.tu(e)}catch(i){r.R.error("Cannot fire server connected on "+t)}})}))},e.prototype.WX=function(e){this.ho.length>0&&this.ho.forEach(function(t,r){t.forEach(function(t){t.qN&&t.qN(e)})})},e}();t.XX=o},function(e,t){"use strict";var r=function(){function e(e,t){this.xa=e,this.Ua=t}return e.prototype.Ya=function(){return this.xa},e.prototype.Ka=function(){return this.Ua?this.Ua:this.xa},e}();t.BL=r},function(e,t,r){"use strict";var i=(r(45),r(3)),n=r(1),s=function(){function e(e,t,r,i,s,o){var a=this;this.$X=e,this.ZX=t,this.label=r,this.e$=i,this.t$=s,this.r$=o,this.i$=!1,this.HL=null,this.channel=null,this.n$=null,this.s$=5,this.timeout=5e3,this.open=!1,this.o$=!1,this.a$=new Array,this.h$=function(){return!!this.channel&&"connecting"===this.channel.readyState},this.R=n.Framework.resolve(n.Framework.Tt.rt).log(),this.P="[ch:"+this.label+"] ",this.sN=n.Framework.resolve(n.Framework.Tt.ft),this.sN.init(this.ZX.Fh,o),this.HL=new RTCPeerConnection(this.t$,this.e$),this.HL.onicecandidate=function(e){e&&e.candidate&&(a.a$.push(e.candidate),a.o$&&a.u$())},this.HL.onnegotiationneeded=function(){a.createOffer().then(function(e){return a.c$(e)}).then(function(e){a.i$&&a.R.debug(a.P+"Sending offer to "+a.r$+" [candidates: "+a.a$.length+"]");var t=a.a$;a.a$=new Array;var r=a.$X.l$.offer(a.ZX.Fh,a.r$,a,t,e);return a.o$=!0,r})["catch"](function(e){a.R.error(a.P+" "+e),a.close()})},this.HL.oniceconnectionstatechange=function(e){"disconnected"===a.HL.iceConnectionState&&a.close(),"failed"===a.HL.iceConnectionState&&(a.R.debug(a.P+"Closing channel since it couldnt be established to "+a.r$),a.close())},this.HL.onsignalingstatechange=function(e){"closed"===e.signalingState&&a.close()}}return e.prototype.p$=function(){var e=this;if(this.channel&&"open"!=this.channel.readyState){if(this.i$&&this.R.debug(this.P+"Check connection "+this.r$),this.s$<=0)return this.R.debug(this.P+"Closing channel since it couldnt be established to "+this.r$),void this.close();this.s$-=1,this.n$=n.Framework.setTimeout(function(){return e.p$()},this.timeout)}},e.prototype.close=function(){this.i$&&this.R.debug(this.P+"Closing connection to "+this.r$),this.$X.f$(this),this.HL&&"closed"!==this.HL.signalingState&&(this.HL.close(),this.channel&&this.channel.close())},e.prototype.connect=function(e){var t=this;this.i$&&this.R.debug(this.P+"Connecting to "+e),this.r$=e,this.channel=this.HL.createDataChannel(this.label);var r=this.d$(!0,-1);return this.n$=n.Framework.setTimeout(function(){return t.p$()},this.timeout),r},e.prototype.g$=function(e){var t=i.defer();return this.HL.setRemoteDescription(e,function(){return t.resolve("OK")},t.reject),t.Vt},e.prototype.c$=function(e){var t=this,r=i.defer();return"closed"!==this.HL.signalingState?this.HL.setLocalDescription(e,function(){return r.resolve(t.HL.localDescription)},r.reject):r.reject,r.Vt},e.prototype.createOffer=function(){var e=this,t=i.defer();return this.HL.createOffer(t.resolve,function(t){e.R.error(e.P+" "+t),e.close()}),t.Vt},e.prototype.createAnswer=function(){var e=i.defer();return this.HL.createAnswer(e.resolve,e.reject),e.Vt},e.prototype.offer=function(e,t){var r=this;this.i$&&(this.R.debug(this.P+"Received an offer from "+this.r$),this.R.debug(this.P+"Offer:",e)),this.HL.ondatachannel=function(e){r.channel=e.channel,r.d$(!1,t)};var i=new RTCSessionDescription(e.channel.offer);this.r$=e.peer.guid,this.g$(i).then(function(t){if("closed"!==r.HL.signalingState)return r.update_ice_candidates(e),r.createAnswer()}).then(function(e){return r.c$(e)}).then(function(e){r.R.debug(r.P+"Sending back an answer [candidates: "+r.a$.length+"]");var t=r.a$;r.a$=new Array,r.$X.l$.answer(r,e,t,r.r$),r.o$=!0})["catch"](function(e){r.R.error(r.P+" "+e),r.close()})},e.prototype.answer=function(e){var t=this;this.i$&&this.R.debug(this.P+"Answer: ",e);var r=new RTCSessionDescription(e.answer);this.g$(r).then(function(){"closed"!==t.HL.signalingState&&t.update_ice_candidates(e)})["catch"](function(e){t.close(),t.R.error(t.P+" "+e)})},e.prototype.update_ice_candidates=function(e){var t=this,r=e.channel.ice_candidates;r.forEach(function(e){t.i$&&t.R.debug(t.P+"got ICE cand: ",e);var r=new RTCIceCandidate(e);t.HL.addIceCandidate(r,function(){},function(e){return t.R.warn(t.P+"FAILED UPDATING ICE CANDIDATE",e)})})},e.prototype.d$=function(e,t){var r=this,n=i.defer();return this.channel.onopen=function(i){return r.y$(n,e,t)},this.channel.onclose=function(e){r.close(),n.reject(r)},this.channel.onmessage=function(e){return r.sN.oa(e.data)},this.channel.onerror=function(e){r.R.error(r.P+" -- WebRTC channel error",e),r.close()},n.Vt},e.prototype.y$=function(e,t,r){this.open=!0,e.resolve(this),t||(this.ZX.v$(this.r$,this),r&&n.Framework.clearTimeout(r))},e.prototype.u$=function(){var e=this,t=this.a$;if(this.a$=new Array,t&&t.length>0){var r=t.length;this.$X.l$.m$(this.ZX.Fh,this,t,this.r$).then(function(t){e.i$&&e.R.debug(e.P+"sent "+r+" more candidates")})["catch"](function(t){e.R.error(e.P+" "+t)})}},e}();t.T$=s},function(e,t,r){"use strict";var i=r(3),n=r(1),s=r(138),o=r(60),a=function(){function e(e,t,r){this.R=e,this.l$=t,this.ZX=r,this.t$={iceServers:[{url:"stun:stun.hivestreaming.com:3678"}]},this.Ko=1,this.e$=null,this.E$={},this.w$={}}return e.prototype.I$=function(e,t){var r=null;if(t in this.w$){var n=i.defer();n.reject("OTHER ALREADY TRYING TO CONNECT"),r=n.Vt}else{this.ZX.i$&&this.R.info("Initiating connection to "+t);var s=this.S$(e,t),o=this.b$(s,t);r=o.connect(t)}return r},e.prototype.f$=function(e){var t=e.r$ in this.w$;t&&(delete this.E$[e.label],delete this.w$[e.r$]),e.open&&(this.ZX.R$(e.r$),e.open=!1)},e.prototype.send=function(e,t){this.ZX.i$&&this.R.debug("DATA "+t.byteLength+" "+t);var r=this.w$[e];return!!r&&(r.channel.send(t),!0)},e.prototype.ZB=function(e,t){var r=t.channel;if(r&&r.label&&this.E$[r.label]){var i=this.E$[r.label],n=i[e];n.call(i,t)}else{var s="handle_"+e,n=this[s];n?n.call(this,t):this.R.warn("Handler "+s+" not found or channel "+r.label+" not active")}},e.prototype.handle_offer=function(e){this.ZX.i$&&this.R.info("received an offer from "+e.peer.guid+" on channel "+e.channel.label);var t=this.w$[e.peer.guid],r=t&&e.peer<this.ZX.Fh,i=r;if(i)this.l$.P$(this.ZX.Fh,e.peer.guid,e.channel.label);else{var n=this.b$(e.channel.label,e.peer.guid),s=this.A$(n);n.offer(e,s)}},e.prototype.A$=function(e){var t=this;return n.Framework.setTimeout(function(){t.R.warn("INCOMING CONNECTION FROM "+e.r$+" TIMED OUT"),e.close()},o.mF.vF)},e.prototype.b$=function(e,t){var r=new s.T$(this,this.ZX,e,this.e$,this.t$,t);return this.E$[e]=r,this.w$[t]=r,r},e.prototype.handle_offer_rejected=function(e){this.ZX.i$&&this.R.debug("remote peer rejected ",e);var t=this.w$[e.k$];t&&t.close(),delete this.w$[e.k$],delete this.E$[e.channel]},e.prototype.S$=function(e,t){return e.substring(0,Math.max(8,e.length))+":"+t.substring(0,Math.max(8,t.length))+":"+this.Ko++},e.prototype.disconnect=function(e){var t=this.w$[e];t&&t.close()},e}();t.C$=a},function(e,t,r){"use strict";var i,n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},s=r(2),o=s.Ze,a=r(3),h=r(1),u=r(139),c=r(136),l=r(60);!function(e){}(i=t.O$||(t.O$={}));var p=function(e){function t(){var t=e.call(this)||this;return t.i$=!1,t.N$=new o,t.Ko=1,t.qa=h.Framework.resolve(h.Framework.Tt.lt),t.l$=h.Framework.resolve(h.Framework.Tt.yt),t.$X=new u.C$(t.R,t.l$,t),t.l$.init(t,t.R,t.$X),t._$(),t}return n(t,e),t.prototype.start=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=h.Framework.resolve(h.Framework.Tt.rt).log(e),n=null;return 0==this.ho.keys().length?(i.debug("TRIGGERING CONNECT "),n=this.F$(),this.YX(e,t)):(i.debug("ALREADY CONNECTED "),n=this.qa.ja(),this.YX(e,t),this.l$.wQ()&&this.zX(this.Fh,e)),n},t.prototype.F$=function(){var e=this,t=h.Framework.ct.ut;"localhost"===t&&(t="127.0.0.1:"+location.port),this.R.debug("CONNECTING..");var r=a.defer();return this.qa.ja().then(function(i){var n=i.Ya();return e.R.debug("MY IDENTITY ",n),e.Fh=n,e.l$.start(t,n,r),r.Vt}),null},t.prototype.L$=function(){return a.resolve(new o)},t.prototype.connect=function(e){var t=this,r=a.defer();return this.N$.has(e)?(this.R.debug("Already connected to "+e+", ignoring"),r.resolve(this.N$.get(e))):this.$X.I$(this.Fh,e).then(function(r){return t.connected(e,r)}).then(function(e){return r.resolve(e)}).fail(function(t){r.reject("CONN TO "+e+" CANNOT BE ESTABLISHED ")}),r.Vt},t.prototype.send=function(e,t,r){return!!this.$X.send(e,t)||(this.R$(e),!1)},t.prototype.D$=function(e,t,r){if(this.i$&&this.R.debug("REC BUF "+r.byteLength+" "+r),this.N$.has(e)){this.i$&&this.R.debug("PROC MSG FROM "+e);var i=this.N$.get(e);i.oa(r)}else this.R.warn("RECEIVED MSG FROM PEER "+e+" BUT IT IS NOT CONNECTED")},t.prototype.connected=function(e,t){if(this.N$.has(e))this.R.debug("RECONNECTED TO "+e+", RESETTING STATE"),this.N$.get(e).reset();else{this.R.info("CONNECTED TO "+e);var r=t.sN;r.init(this.Fh,e),this.N$.set(e,r)}return a.resolve(this.N$.get(e))},t.prototype.M$=function(e,t){this.R.debug("FAILED CONN TO "+t),e.reject("CONN TO "+t+" CANNOT BE ESTABLISHED ")},t.prototype.v$=function(e,t){this.R.info(e+" connected to me"),this.connected(e,t)},t.prototype.R$=function(e){this.N$.has(e)?(this.R.info("Connection closed to "+e),this.N$["delete"](e),this.WX(e)):this.R.warn("TRYING TO REMOVE A PEER THAT IS NOT THERE: "+e)},t.prototype._$=function(){var e=this;l.mF.dF&&h.Framework.setInterval(function(){var t=h.Framework.time();e.N$.forEach(function(r,i){var n=t-r.fa();n>l.mF.yF&&(e.R.debug("closing stale connection to "+i+" [unused for: "+n+"ms]"),e.disconnect(i))})},l.mF.gF)},t.prototype.B$=function(){},t.prototype.disconnect=function(e){this.N$.has(e)&&this.$X.disconnect(e)},t}(c.XX);p.rn="availableSendRate",p.in="remoteAddress",p.nn="localAddress",t.KQ=p},function(e,t,r){"use strict";var i=r(3),n=r(1),s=r(18),o=function(){function e(){this.Ko=1,this.client=n.Framework.resolve(n.Framework.Tt.vt)}return e.prototype.init=function(e,t,r){this.ZX=e,this.R=t,this.$X=r},e.prototype.wQ=function(){return this.client.lu().wQ()},e.prototype.start=function(e,t,r){var i=this;this.R.debug("MY ID "+t),this.Fh=t,this.client&&this.client.lu()?this.client.lu().on(Services.nM,1,function(e){i.x$(e.msg)}):this.R.error("error getting active services connection"),this.ZX.zX(this.Fh)},e.prototype.x$=function(e){var t=JSON.parse(e);this.ZX.i$&&this.R.debug("RCV MSG FROM SRV ",t),this.$X.ZB(t.msgName,t.msg)},e.prototype.U$=function(e,t,r){var n=this.wrap(t,e,r);if(this.client&&this.client.lu()){var o=JSON.stringify(n);this.ZX.i$&&this.R.debug(" FORWARDING REQUEST : "+o);var a=new s.pu(Services.nM,0,o);return this.client.lu().send(a)}return i.reject()},e.prototype.wrap=function(e,t,r){return{msgId:this.Ko++,destination:r,msg:e,msgName:t}},e.prototype.m$=function(e,t,r,i){var n={channel:{label:t.label,ice_candidates:r}};return this.U$("update_ice_candidates",n,i)},e.prototype.offer=function(e,t,r,i,s){var o={peer:{guid:e,first_seen:n.Framework.time()},channel:{label:r.label,ice_candidates:i,offer:s}};return this.U$("offer",o,r.r$)},e.prototype.P$=function(e,t,r){this.ZX.i$&&this.R.debug("Discovery service rejects offer from peer "+t+" on channel "+r);var i={k$:e,channel:r};return this.U$("answer",i,t)},e.prototype.answer=function(e,t,r,i){var n={answer:t,H$:this.ZX.Fh,channel:{label:e.label,ice_candidates:r}};return this.U$("answer",n,i)},e}();t.JQ=o},function(e,t,r){"use strict";var i=r(1),n=function(){function e(){this.P="[ProxyUDPB]",this.R=i.Framework.resolve(i.Framework.Tt.rt).log(),this.xz=window.myUdpBroadcaster,this.xz||this.R.error(this.P+" helper undefined")}return e.prototype.startServer=function(e,t){try{this.xz&&this.xz.startServer(e,t)}catch(r){this.R.warn(this.P+r)}},e.prototype.q$=function(){try{this.xz&&this.xz.q$()}catch(e){this.R.warn(this.P+e)}},e.prototype.broadcast=function(e,t,r){try{this.xz&&this.xz.broadcast(e,t,r)}catch(i){this.R.warn(this.P+i)}},e.prototype.mK=function(){try{this.xz&&this.xz.mK()}catch(e){this.R.warn(this.P+e)}},e.prototype.V$=function(e,t){try{this.xz&&this.xz.V$(e,t);
}catch(r){this.R.warn(this.P+r)}},e}();t.UQ=n},function(e,t){"use strict";var r=function(){function e(){var t=this;if(this.j$=new Array,this.callbacks=new Array,e.ao)throw new Error("Error: Instantiation failed: Use KeyHandlerHiveComm.getInstance() instead of new.");var r={};document.addEventListener("keydown",function(e){r[e.keyCode]=!0,t.G$(r)},!0),document.addEventListener("keyup",function(e){r={}},!0)}return e.ee=function(){return void 0===this.ao&&(this.ao=new e),this.ao},e.prototype.Dy=function(e,t){this.j$.push(e),this.callbacks.push(t)},e.prototype.G$=function(e){for(var t=function(t){var i=!0;r.j$[t].forEach(function(t){void 0!=e[t]&&e[t]||(i=!1)}),i&&r.callbacks[t]()},r=this,i=0;i<this.j$.length;i++)t(i)},e}();t.My=r},function(e,t,r){"use strict";var i=r(34),n=r(43),s=r(12),o=function(){function e(e){this.Q$=n.ct.ma?9989:9988,this.Y$=-1,this.vL=e,this.K$()}return e.prototype.K$=function(){var e=this;this.vL.options().silent&&void 0===this.J$&&(this.url="//"+i.Ea.dS+":"+this.Q$+"/feedback",this.vL.R().info("starting periodic alive ping to hive tester ["+this.url+"]"),this.J$=setInterval(function(){e.z$()},n.ct.gA))},e.prototype.z$=function(){var e=this,t=this.vL.getCurrentTime();t>this.Y$?(this.vL.R().info("sending hive tester ping ["+t+" > "+this.Y$+"]"),s.po(this.url).then(function(e){},function(t){e.vL.R().error("error sending hive tester ping",t),clearInterval(e.J$)})):this.vL.R().warn("not sending hive tester ping ["+t+" <= "+this.Y$+"]"),this.Y$=t},e}();t.LF=o},function(e,t,r){"use strict";var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(3),s=r(12),o=r(14),a=r(146),h=r(20),u=r(34),c=r(15),l=r(16),p=r(36),f=r(21),d=a.u.p,g=o.u.p.Pa,y=h.u.HiveTechError,v=h.u.Oy,m=r(44);t.W$=navigator;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(s.Js),E=function(){function e(e,t){this.X$=0,this.vL=e,this.options_=new d.$$,this.Z$(t),s.S(window.location.href,new g,this.options_)}return e.prototype.re=function(){return e.MF},e.prototype.getVersion=function(){return this.version},e.prototype.HF=function(){return!1},e.prototype.mL=function(){var e=this;if(null==this.eZ||Date.now()-this.X$>1e4){var t=new m;t.Jh(navigator.userAgent);var r=t.BA();if("IE"===r.name&&r.version&&parseInt(r.version)<10)return n.reject(new y(v.Ry,"Internet Explorer < v.10 not supported"));this.tZ=Date.now(),this.rZ=0;var i="//"+u.Ea.dS+":"+this.vL.options().monitorPort+"/version.json";this.R().debug(this.id()+"verifying Hive Client version"),this.eZ=s.po(i).then(function(t){var r=JSON.parse(t);return e.state=r.state,e.version=r.version,"ready"===e.state?"developer"===e.version||e.version>=e.options_.minVersion?(e.rZ=Date.now(),e.R().debug(e.id()+"Hive Client ready - version "+e.version+" ["+(e.rZ-e.tZ)+"]"),"ready"):(f.ErrorMonitor.ee().Z(e.id()+"Client version requirement not satisfied: "+e.version+" < "+e.options_.minVersion),e.vL.YF(new l.ce.Su(null,l.ce.Ih.mh)),n.reject(new y(v.ky,"version "+e.version))):(f.ErrorMonitor.ee().Z(e.id()+"Client state: "+e.state),e.vL.YF(new l.ce.Su(null,l.ce.Ih.vh)),n.reject(new y(v.Ry,"state "+e.state)))},function(t){var r="Client not reachable";return void 0!=t&&void 0!=t.status&&t.status!=-1&&(r="Client check returned "+t.status),f.ErrorMonitor.ee().Z(e.id()+r),e.vL.YF(new l.ce.Su(null,l.ce.Ih.yh)),n.reject(new y(v.Ry,r))})["catch"](function(t){if(t instanceof y)return n.reject(t);var r="Error fetching Hive Client version: "+t;return f.ErrorMonitor.ee().Z(e.id()+r),n.reject(new y(v.Ry,r))}),this.X$=Date.now()}return this.eZ},e.prototype.initSession=function(e,t){var r=this;return this.options_.minVersion!=u.Ea.vS?this.mL().then(function(){return r.iZ(e)["catch"](function(e){return n.reject(e)})}):this.iZ(e)["catch"](function(e){return n.reject(e)})},e.prototype.VF=function(){return this.options_.initTimeout},e.prototype.Ge=function(e,t){return e.indexOf(t.nZ)>-1},e.prototype.Gs=function(e,r){var i=this;this.R().debug(this.id()+"Stopping session "+e.id+" [complete close:"+r+"]");var n="//"+u.Ea.dS+":"+this.vL.options().playerPort+"/session?action=stop";n+="&currentSession="+e.id,r&&(n+="&completeStop=true"),r&&t.W$.sendBeacon?(t.W$.sendBeacon(n),this.R().debug(this.id()+"session stopped ["+e.id+"][beacon]")):s.po(n,null,!r).then(function(){i.R().debug(i.id()+"session stopped ["+e.id+"]"+(r?"[sync]":""))},function(t){i.R().warn(i.id()+"session close error ["+e.id+"]"+(r?"[sync]":""),t)})},e.prototype.Vs=function(e,t){this.sZ=t?c.ka.IDLE:c.ka.Aa,this.R().notice("[HiveComm] client state: "+c.ka[this.sZ])},e.prototype.nL=function(e,t){if(this.sZ==c.ka.IDLE)return n.resolve(!0);var r="playing-point="+t.Io;r+="&buffer-length="+t.So,r+="&total-buffering="+t.bo,r+="&width="+t.width,r+="&height="+t.height,r+="&fullscreen="+t.iL;var i=e.nZ+"stats?"+r;return this.R().trace(i),s.po(i)},e.prototype.oL=function(e,t,r){var i=this;if(!(t!==l.ce.ue.gh&&t!==l.ce.ue.HIDDEN||this.version&&("developer"===this.version||this.version>="2017")))return n.resolve(!0);var o=e.nZ+"player-event?type="+l.ce.ue[t];if(void 0!=r)for(var a in r)o+="&"+a+"="+r[a];return this.R().debug(this.id()+"event "+l.ce.ue[t],void 0!=r?r:""),s.po(o).fail(function(e){return i.R().warn(i.id()+"error sending feedback event to Hive Client",e),n.reject(e)})},e.prototype.Qh=function(e,t){return n.resolve(!0)},e.prototype.Dh=function(e){var t=this,r="comm-version="+this.vL.We();r+="&plugin-name="+this.vL.ze(),r+="&plugin-version="+this.vL.O(),r+="&player-tech="+this.vL.Xe(),r+="&player-version="+this.vL.pe();var i=this.vL.QF();i&&(r+="&telemetry-id="+this.vL.QF());var o=e.nZ+"player-info?"+r;return s.po(o).fail(function(e){return t.R().debug(t.id()+"error sending player Info to Hive Client",e),n.reject(e)})},e.prototype.onError=function(e){var t=!0;if(void 0!=this.options_.onError)try{t=this.options_.onError(e)}catch(r){f.ErrorMonitor.ee().Z(this.id()+"exception in user-defined onError callback: "+r)}return t},e.prototype.GF=function(e,t,r){var i={isReadyIn:this.tZ,isReadyOut:this.rZ,leaseIn:this.oZ,leaseOut:this.aZ,resolveIn:this.hZ,resolveOut:this.uZ};"undefined"!=typeof t&&null!=t&&(i.sessionId=t.id),"undefined"!=typeof r&&(i.total=r);var n=JSON.parse(JSON.stringify(i));f.ErrorMonitor.ee().Z(e.message,n),this.vL.YF(new l.ce.Su(null,l.ce.Ih.wh,i)),this.cZ()},e.prototype.onActiveSession=function(e){if(this.Dh(e),s.vo.setItem("hiveActiveSessionId",e.id),void 0!=this.options_.onActiveSession)try{this.options_.onActiveSession(e.Qs())}catch(t){f.ErrorMonitor.ee().Z(this.id()+"exception in user-defined onActiveSession callback: "+t)}},e.prototype.id=function(){return"["+e.MF+"] "},e.prototype.Z$=function(t){void 0!=t[e.MF]&&s.I(t[e.MF],this.options_)},e.prototype.iZ=function(e){var t=this,r=(new Date).getTime();return this.lZ(e).then(function(i){return i?t.pZ(e,i,r):t.te(e).then(function(i){return t.pZ(e,i,r)})})},e.prototype.lZ=function(t){var r=this;if(this.oZ=Date.now(),this.vL.options().useSessionCheck){var i="//"+u.Ea.dS+":"+this.vL.options().playerPort+"/session?&action=check";i+="&hivePluginId="+this.vL.C(),i+="&callback="+t;var o=s.vo.getItem("hiveActiveSessionId");return s.vo.removeItem("hiveActiveSessionId"),o&&(i+="&currentSession="+o),this.fZ(),s.po(i).then(function(e){return r.aZ=Date.now(),e?r.dZ(e,i,t,r.oZ):(r.R().debug(r.id()+"session allowed ["+(r.aZ-r.oZ)+"]"),!1)},function(t){if(400==t.status)return r.gZ("bad request","error resolving ticket",t);if(401==t.status)return r.gZ("unauthorized","error verifying the ticket",t);if(403==t.status){var i=e.yZ(t,void 0,"session"),s=i?{vZ:i}:void 0;return f.ErrorMonitor.ee().Z(r.id()+"reports another active session",s),r.vL.YF(new l.ce.Su(null,l.ce.Ih.Th,s)),n.reject(new y(v.Ay,"another active session"+(s?" ["+s.vZ+"]":"")))}return 404==t.status?(r.R().debug(r.id()+"installed version does not support active session check"),r.aZ=Date.now(),!1):t.status==-1?(clearTimeout(r.mZ),r.TZ()):(f.ErrorMonitor.ee().Z(r.id()+" unhandled error from Java",{error:t.status}),r.vL.YF(new l.ce.Su(null,l.ce.Ih.Eh)),n.reject(new y(v.Py,t)))})["catch"](function(e){return e instanceof y?n.reject(e):(f.ErrorMonitor.ee().Z(r.id()+" unhandled error on requestLeaseDirect",{error:e}),r.vL.YF(new l.ce.Su(null,l.ce.Ih.Eh)),n.reject(new y(v.Py,e)))})["finally"](function(){clearTimeout(r.mZ)})}return this.R().debug(this.id()+"Hive session check disabled - will directly resolve ticket (other active sessions may fail)"),n.resolve(!1)},e.prototype.gZ=function(t,r,i){var s=e.yZ(i,t);return f.ErrorMonitor.ee().Z(""+this.id()+r),this.uZ=Date.now(),n.reject(new y(v.se,s))},e.yZ=function(e,t,r){void 0===r&&(r="status");var i=t;if(e.body)try{var n=JSON.parse(e.body);i=n[r]}catch(s){}return i},e.prototype.te=function(e){var t=this;this.hZ=Date.now(),this.R().debug(this.id()+"resolving ticket: "+e);var r=this.EZ(e);return s.po(r,"application/json").then(function(i){return t.dZ(i,r,e,t.hZ)},function(r){return r&&r.status==-1?t.TZ():(f.ErrorMonitor.ee().Z(t.id()+"error resolving ticket",{ticket:e}),n.reject(new y(v.se,r)))})["catch"](function(e){return f.ErrorMonitor.ee().Z(t.id()+"error parsing ticket response: "+e),n.reject(new y(v.Py,e))})},e.prototype.dZ=function(e,t,r,i){var n=JSON.parse(e),o=s.fs(t,n.location);return n.version&&!this.version&&(this.version=n.version),this.uZ=Date.now(),this.R().debug(this.id()+"resolved ticket "+r+" -> "+o+" ["+(this.uZ-i)+"]"),o},e.prototype.pZ=function(e,t,r){var i=this.TL(e,t);if(null!=i){var n=(new Date).getTime(),s=n-r;return s>=this.options_.warnSlowRespTimeout&&this.GF(new y(v.Cy,this.id()+" The tech initialization took more than "+this.options_.warnSlowRespTimeout+" milliseconds"),i,s),window.HiveRequest=XMLHttpRequest,i}throw new y(v.se,"error generating session")},e.prototype.TL=function(e,t){var r=new p.BS;r.wS(e);var i=new T(e,r,t,null);i.K=!0;var n=u.Ea.yS,s=n.exec(i.manifest);return null!=s?(i.nZ=s[1],i.id=s[5],i):null},e.prototype.EZ=function(e){var t=e.indexOf("?")==-1?"?":"&";return s.yo(u.Ea.gS,u.Ea.dS,this.vL.options().playerPort,e,t,this.vL.C())},e.prototype.fZ=function(){var e=this;this.mZ&&clearTimeout(this.mZ),this.mZ=setTimeout(function(){f.ErrorMonitor.ee().Z(e.id()+" The Lease Request is taking more than "+e.options_.warnSlowRespTimeout+" secs")},this.options_.warnSlowRespTimeout)},e.prototype.cZ=function(){this.oZ=0,this.aZ=0,this.hZ=0,this.uZ=0},e.prototype.R=function(){return this.vL.R()},e.prototype.UF=function(){this.cZ()},e.prototype.TZ=function(){var e=this,t="//"+u.Ea.dS+":"+this.vL.options().monitorPort+"/version.json";return this.R().debug(this.id()+"checking if the monitor port is reachable"),s.po(t).then(function(t){var r=JSON.parse(t);throw e.state=r.state,f.ErrorMonitor.ee().Z(e.id()+"Client state: "+e.state),e.vL.YF(new l.ce.Su(null,l.ce.Ih.vh)),new y(v.Ry,"state "+e.state)}).fail(function(t){if(t instanceof y)return n.reject(t);if(t&&t.status==-1){var r="client not reachable";return e.vL.YF(new l.ce.Su(null,l.ce.Ih.yh)),e.R().warn(e.id()+r),n.reject(new y(v.Ry,r))}var r="VerifyClientState error";return f.ErrorMonitor.ee().Z(e.id()+r,{error:t}),e.vL.YF(new l.ce.Su(null,l.ce.Ih.vh)),n.reject(new y(v.Py,r))})},e}();E.MF="HiveJava",t.HiveJava=E},function(e,t,r){"use strict";var i,n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},s=r(14),o=r(34);!function(e){var t;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minVersion=o.Ea.vS,t.initTimeout=6e4,t.warnSlowRespTimeout=5e3,t}return n(t,e),t}(s.u.p.Ra);e.$$=t}(t=e.p||(e.p={}))}(i=t.u||(t.u={}))},function(e,t,r){"use strict";var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(25),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.send=function(){this.vL.R().debug("Intercepted Manifest Request "+this.url),this.IZ.wZ(this),this.vL.oe(this.url)},t.prototype.resolve=function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.url),t.onreadystatechange=function(){4===t.readyState&&(e.response=t.responseText,e.responseText=t.responseText,e.readyState=4,e.status=t.status,e.onreadystatechange(),e.onload(),e.vL.R().debug("Returned Manifest Request "+e.url))},t.send()},t}(n.HiveRequest);t.SZ=s},function(e,t,r){"use strict";var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(3),s=r(45),o=r(1),a=r(89),h=r(25),u=r(50),c=r(65),l=r(149),p=r(20),f=r(12),d=r(147),g=r(21),y=l.u.p,v=p.u.HiveTechError,m=p.u.Oy,T=function(e){function t(r,i,n){var s=e.call(this,r,i)||this;return s.options_=new y.bZ,void 0!=i[t.MF]&&f.I(i[t.MF],s.options_),s.RZ=n,s}return i(t,e),t.prototype.re=function(){return t.MF},t.prototype.getVersion=function(){return null},t.prototype.HF=function(){return!0},t.prototype.mL=function(){return u.GE.Api?this.HD()?n.resolve(!0):n.reject(new v(m.Ry,"WebRTC DataChannels not supported by browser")):n.reject(new v(m.Ry,"Not included in the page"))},t.prototype.initSession=function(e,t){var r=this;return this.mL().then(function(){var i=t.ticket;r.SL(),d.SZ.prototype.vL=r.vL,d.SZ.prototype.IZ=r,window.HiveRequest=d.SZ;var n=i.OS();return 0===n.indexOf("//")&&(n=location.protocol+n),r.TL(e,i,n,t)})},t.prototype.Ge=function(e,t){var r=t.manifest.toLowerCase(),i=e.toLowerCase(),n=r.indexOf(".ism/manifest");if(n>-1){var s=r.substring(0,n);if(i.indexOf(s)>-1)return i.indexOf(".ism/manifest(format=mpd-time-csf)")>-1?this.PZ?(t.ticket.SourceURL=e,!0):this.AZ(t,"The player does not use HiveRequest, downgrading to StatsJS"):this.AZ(t,"Protocol not supported by HiveJS tech, downgrading to StatsJS")}else if(i===r)return!!this.PZ||this.AZ(t,"The player does not use HiveRequest, downgrading to StatsJS");return!1},t.prototype.AZ=function(e,t){return e.tech=this.RZ,window.HiveRequest=XMLHttpRequest,this.PZ&&this.PZ.resolve(),this.PZ=void 0,this.vL.R().warn("[HiveJS] "+t),this.onError(new v(m.Ay,t)),!0},t.prototype.wZ=function(e){this.PZ=e},t.prototype.onActiveSession=function(e){var t=this;o.Framework.Rt().apply(new a.oY((!0)));var r=u.GE.Api();if(r.start(e.Hs,!1).then(function(i){if(t.SL(),t.bL=e.Hs,t.bL.Da(u.GE.za(),u.GE.getVersion()),t.bL.Na.init(t.bL.Oa,e.ticket.sessionId),e.authenticationToken){var n=r.kK(e.ticket.sessionId);n&&n.gY.IQ.sA(e.authenticationToken)}window.HiveRequest=h.HiveRequest,t.PZ&&r.jE(t.PZ,e.Hs.ticket.sessionId),t.bL._a.Uh(e.ticket.sessionId,t.vL.qe(),200)}),void 0!=this.options().onActiveSession)try{this.options().onActiveSession(e.Qs())}catch(i){g.ErrorMonitor.ee().Z("[HiveJS] exception in user-defined onActiveSession callback: "+i)}},t.prototype.Vs=function(e,t){},t.prototype.TL=function(e,t,r,i){var n=new f.Js(e,t,r,i);return n.K=!0,n.id=n.ticket.sessionId,n},t.prototype.IL=function(){},t.prototype.HD=function(){try{return null!=s._s&&null!=s.nk&&"function"==typeof new RTCPeerConnection(null,null).createDataChannel}catch(e){return!1}},t}(c.StatsJS);T.MF="HiveJS",t.HiveJS=T},function(e,t,r){"use strict";var i,n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},s=r(14);!function(e){var t;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.u.p.Ra);e.bZ=t}(t=e.p||(e.p={}))}(i=t.u||(t.u={}))},function(e,t,r){"use strict";var i=r(3),n=r(12),s=r(152),o=r(20),a=o.u.HiveTechError,h=o.u.Oy,u=r(63),c=r(15),l=r(16),p=r(36),f=r(64),d=r(24),g=r(21),y=r(35),v=r(151),m=(r(44),navigator),T=function(){function e(e,t,r){this.X$=0,this.vL=e,this.options_=new s.u.p.kZ,this.Z$(t),this.mL(),this.RZ=r}return e.prototype.re=function(){return e.MF},e.prototype.getVersion=function(){return this.version},e.prototype.HF=function(){return!1},e.prototype.mL=function(){var e=this;if(null==this.eZ||Date.now()-this.X$>1e4){var t="//"+u.dL.dS+":"+u.dL.cL+"/version.json";this.eZ=n.po(t).then(function(t){var r=JSON.parse(t);return e.state=r.state,e.version=r.version,"ready"===e.state?"ready":(e.R().warn(e.id()+"Client not ready: "+e.state),i.reject(new a(h.Ry,"state "+e.state)))},function(t){var r="Client not reachable";return void 0!=t&&void 0!=t.status&&t.status!=-1&&(r="Client check returned "+t.status),e.R().warn(e.id()+r),i.reject(new a(h.Ry,r))})["catch"](function(e){return e instanceof a?i.reject(e):i.reject(new a(h.Ry,"error parsing response"))}),this.X$=Date.now()}return this.eZ},e.prototype.initSession=function(e,t){var r=this;return this.mL().then(function(){return r.te(e).then(function(t){var i=r.TL(e,t);if(null!=i)return v.CZ.prototype.vL=r.vL,v.CZ.prototype.OZ=r,window.HiveRequest=function(e){return new v.CZ(e)},window.HiveRequest.register=v.CZ.register,i;throw new a(h.se,"error generating session")})})["catch"](function(e){return e instanceof a?i.reject(e):i.reject(new a(h.se,"generic error resolving ticket"))})},e.prototype.wZ=function(e){this.PZ=e},e.prototype.VF=function(){return this.options_.initTimeout},e.prototype.Ge=function(e,t){var r=t.manifest.toLowerCase(),i=e.toLowerCase(),n=r.indexOf(".ism/manifest");if(n>-1){var s=r.substring(0,n);if(i.indexOf(s)>-1)return i.indexOf(".ism/manifest(format=mpd-time-csf)")>-1?this.PZ?(t.ticket.SourceURL=e,!0):this.AZ(t,"The player does not use HiveRequest, downgrading to StatsJS"):this.AZ(t,"Protocol not supported by HiveJsProxy tech, downgrading to StatsJS")}else if(i===r)return!!this.PZ||this.AZ(t,"The player does not use HiveRequest, downgrading to StatsJS");return!1},e.prototype.AZ=function(e,t){var r=this;return e.tech=this.RZ,y.Hive.Reporting().initSession(e.ticket.ticketUrl,!1).then(function(t){e.Ks(t);t.ticket;r.R().debug("[HiveJSProxy] downgrade verified ticket "+e.ticket.ticketUrl),r.vL.Dh(t)}).fail(function(e){console.error(e)}),this.PZ&&this.PZ.NZ(),this.PZ=void 0,window.HiveRequest=XMLHttpRequest,this.vL.R().warn("[HiveJsProxy] "+t),this.onError(new a(h.Ay,t)),!0},e.prototype.Gs=function(e,t){var r=this;this.R().debug(this.id()+"Stopping session "+e.id+" [onUnload:"+t+"]");var i="//"+u.dL.dS+":"+u.dL.cL+"/proxy/"+e.id+"/stop";t&&m.sendBeacon?(m.sendBeacon(i),this.R().debug(this.id()+"session stopped ["+e.id+"][beacon]")):n.po(i,null,!t).then(function(){r.R().debug(r.id()+"session stopped ["+e.id+"]"+(t?"[sync]":""))},function(i){r.R().warn(r.id()+"session close error ["+e.id+"]"+(t?"[sync]":""),i)})},e.prototype.Vs=function(e,t){var r=t?c.ka.IDLE:c.ka.Aa;this.R().debug(this.id()+"idle state: "+c.ka[r])},e.prototype.nL=function(e,t){var r=this,s="playing-point="+t.Io;s+="&buffer-length="+t.So,s+="&total-buffering="+t.bo,s+="&width="+t.width,s+="&height="+t.height,s+="&fullscreen="+t.iL;var o="//"+u.dL.dS+":"+u.dL.cL+"/proxy/"+e.id+"/stats/put?"+s;return n.po(o).fail(function(e){return r.R().warn(r.id()+"error sending feedback to Hive Client",e),i.reject(e)})},e.prototype.oL=function(e,t,r){var s=this,o="//"+u.dL.dS+":"+u.dL.cL+"/proxy/"+e.id+"/event?type="+t;if(void 0!=r)for(var a in r)o+="&"+a+"="+r[a];return this.R().debug(this.id()+"event "+l.ce.ue[t],void 0!=r?r:""),n.po(o).fail(function(e){return s.R().warn(s.id()+"error sending feedback event to Hive Client",e),i.reject(e)})},e.prototype.Qh=function(e,t){return i.resolve(!0)},e.prototype.onError=function(e){var t=!0;if(void 0!=this.options_.onError)try{t=this.options_.onError(e)}catch(r){g.ErrorMonitor.ee().Z(this.id()+"exception in user-defined onError callback: "+r)}return t},e.prototype.onActiveSession=function(e){var t=this.vL.qe();0===t.indexOf("//")&&(t=location.protocol+t);var r=n.yo(u.dL.lL,u.dL.dS,u.dL.cL,e.id,t);if(e.authenticationToken&&this.version>="3.0.1"?n.do(r,JSON.stringify({authenticationToken:e.authenticationToken})):n.po(r),this.Dh(e),f.gL.By(this.R()),window.HiveRequest=function(e){return new f.gL(e)},this.PZ&&this.PZ._Z(),this.FZ(e),void 0!=this.options_.onActiveSession)try{this.options_.onActiveSession(e.Qs())}catch(i){g.ErrorMonitor.ee().Z(this.id()+"exception in user-defined onActiveSession callback: "+i)}},e.prototype.GF=function(){},e.prototype.UF=function(){},e.prototype.id=function(){return"["+e.MF+"] "},e.prototype.Z$=function(t){void 0!=t[e.MF]&&n.I(t[e.MF],this.options_)},e.prototype.te=function(e){var t=this;this.R().debug(this.id()+"resolving ticket: "+e);var r=this.EZ(e),s=JSON.stringify(this.LZ());return n.do(r,s,"application/json").then(function(r){var i=JSON.parse(r);return t.R().debug(t.id()+"resolved ticket "+e+" -> "+i.manifest),i},function(r){return t.R().warn(t.id()+"ticket "+e+" resolve error: "+r),i.reject(new a(h.se,r))})["catch"](function(e){return e instanceof a?i.reject(e):i.reject(new a(h.Py,e))})},e.prototype.EZ=function(e){return e=encodeURIComponent(e),n.yo(u.dL.gS,u.dL.dS,u.dL.cL,e,"&",this.vL.C())},e.prototype.TL=function(e,t){var r=new p.BS;r.wS(e);var i=new n.Js(e,r,t.manifest,null);return i.K=!0,i.id=t.sessionId,i.ticket.sessionId=i.id,i},e.prototype.LZ=function(){var e={};e.HiveConfig={};for(var t in window.HiveConfig){e.HiveConfig[t]={};for(var r in window.HiveConfig[t])e.HiveConfig[t][r]=window.HiveConfig[t][r]}return e},e.prototype.FZ=function(e){var t=this;if(void 0!==d.HiveConfig.Stats.render){var r="//"+u.dL.dS+":"+u.dL.cL+"/proxy/"+e.id+"/stats/get";if("undefined"!=typeof EventSource){var i=new EventSource(r);i.onmessage=function(e){t.DZ(e.data)},i.onerror=function(e){i.close()}}else this.MZ=window.setInterval(function(){n.po(r).then(function(e){t.DZ(e)})},4e3)}},e.prototype.Dh=function(e){var t=this,r="comm-version="+this.vL.We();r+="&plugin-name="+this.vL.ze(),r+="&plugin-version="+this.vL.O(),r+="&player-tech="+this.vL.Xe(),r+="&player-version="+this.vL.pe();var s=this.vL.QF();s&&(r+="&telemetry-id="+this.vL.QF());var o=n.yo(u.dL.fL,u.dL.dS,u.dL.cL,e.id,r);return n.po(o).fail(function(e){return t.R().debug(t.id()+"error sending player Info to Hive Client",e),i.reject(e)})},e.prototype.DZ=function(e){try{var t=JSON.parse(e);for(var r in t)t.hasOwnProperty(r)&&(t[r].human=function(e){return e>1e6?(e/1e6).toFixed(2)+"MB":e>1e3?(e/1e3).toFixed(2)+"KB":e+"B"});d.HiveConfig.Stats.render(t)}catch(i){console.trace(i)}},e.prototype.R=function(){return this.vL.R()},e}();T.MF="HiveJsProxy",t.HiveJsProxy=T},function(e,t,r){"use strict";var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(64),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.send=function(){this.vL.R().debug("Intercepted Manifest Request "+this.url),this.OZ.wZ(this),this.vL.oe(this.url)},t.prototype.NZ=function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.url),t.onreadystatechange=function(){4===t.readyState&&(e.response=t.responseText,e.responseText=t.responseText,e.readyState=4,e.status=t.status,e.onreadystatechange(),e.onload(),e.vL.R().debug("Returned Manifest Request "+e.url))},t.send()},t.prototype._Z=function(){e.prototype.send.call(this)},t}(n.gL);t.CZ=s},function(e,t,r){"use strict";var i,n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},s=r(14);!function(e){var t;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.u.p.Ra);e.kZ=t}(t=e.p||(e.p={}))}(i=t.u||(t.u={}))},function(e,t,r){"use strict";var i,n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},s=r(14);!function(e){var t;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.u.p.Ra);e.yL=t}(t=e.p||(e.p={}))}(i=t.u||(t.u={}))},function(e,t){"use strict";var r;!function(e){var t;!function(e){e[e.HiveJS=0]="HiveJS",e[e.HiveJava=1]="HiveJava",e[e.StatsJS=2]="StatsJS",e[e.HiveJsProxy=3]="HiveJsProxy"}(t=e.EF||(e.EF={}))}(r=t.u||(t.u={}))},function(e,t){"use strict";var r=function(){function e(){}return e.LD=function(e){return e.match(/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/)},e.BZ=function(e){return e.match(/^[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}$/)},e}();t.DD=r},function(e,t,r){"use strict";var i=r(29),n=r(1),s=r(41),o=r(15),a=r(10),h=r(16),u=r(70),c=r(69),l=r(72),p=r(67),f=r(66);if("undefined"==typeof d)var d=!1;if(d)var g=r(68).qL;else var y=r(71).VD;var v=function(){function e(){}return e.prototype.apply=function(e){e.bind(new i.rw(a.Os.Ps,o.th,i.iw.uw)),e.bind(new i.rw(a.Os.vt,c.YL,i.iw.uw)),e.bind(new i.rw(a.Os.Is,l.JD,i.iw.uw)),e.bind(new i.rw(a.Os.lt,p.UL,i.iw.uw)),e.bind(new i.rw(n.Framework.Tt.rt,s.dA.fA,i.iw.uw)),d?e.bind(new i.rw(a.Os.Ss,g,i.iw.uw)):e.bind(new i.rw(a.Os.Ss,y,i.iw.uw)),e.bind(new i.rw(a.Os.bs,f.LL,i.iw.uw)),e.bind(new i.rw(a.Os.As,u.Stats.bD,i.iw.yw)),e.bind(new i.rw(a.Os.ws,u.Stats.La,i.iw.yw)),e.bind(new i.rw(a.Os.ks,h.ce.ru,i.iw.yw)),e.bind(new i.rw(a.Os.Cs,h.ce.La,i.iw.yw))},e}();t.uL=v},function(e,t){"use strict";var r=function(){function e(){}return e.prototype.UD=function(e){this.publicIp=e},e.prototype.getPublicIp=function(){return this.publicIp},e.prototype.xZ=function(e){this.UZ=e},e.prototype.getMacAddress=function(){return this.UZ},e.prototype.HZ=function(e){this.nic=e},e.prototype.getNic=function(){return this.nic},e.prototype.qZ=function(e){this.nicName=e},e.prototype.getNicName=function(){return this.nicName},e.prototype.xD=function(e){this.privateIp=e},e.prototype.getPrivateIp=function(){return this.privateIp},e.prototype.VZ=function(e){this.netmask=e},e.prototype.getNetmask=function(){return this.netmask},e.prototype.jZ=function(e){this.GZ=e},e.prototype.getCidr=function(){return null},e}();t.BD=r},function(e,t){"use strict";var r=function(){function e(e,t,r){this.isLive=e,this.protocol=t,this.aO=r}return e.prototype.hD=function(){var e=new hive.snapshots.StreamInfo;return e.streamType=this.isLive?StreamType.LIVE:StreamType.wx,e.streamProtocol=this.protocol,e.url=this.aO,e},e}();t.RL=r},function(e,t){"function"==typeof Object.create?e.i=function(e,t){e.QZ=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,kk:!1,lU:!0,Ck:!0}})}:e.i=function(e,t){e.QZ=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t){e.i=function(e){return e&&"object"==typeof e&&"function"==typeof e.wm&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,r){(function(e,i){function n(e,r){var i={YZ:[],KZ:o};return arguments.length>=3&&(i.JZ=arguments[2]),arguments.length>=4&&(i.zZ=arguments[3]),g(r)?i.WZ=r:r&&t.XZ(i,r),w(i.WZ)&&(i.WZ=!1),w(i.JZ)&&(i.JZ=2),w(i.zZ)&&(i.zZ=!1),w(i.$Z)&&(i.$Z=!0),i.zZ&&(i.KZ=s),h(i,e,i.JZ)}function s(e,t){var r=n.ZZ[t];return r?"["+n.zZ[r][0]+"m"+e+"["+n.zZ[r][1]+"m":e}function o(e,t){return e}function a(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function h(e,r,i){if(e.$Z&&r&&P(r.qt)&&r.qt!==t.qt&&(!r.constructor||r.constructor.prototype!==r)){var n=r.qt(i,e);return T(n)||(n=h(e,n,i)),n}var s=u(e,r);if(s)return s;var o=Object.keys(r),g=a(o);if(e.WZ&&(o=Object.getOwnPropertyNames(r)),R(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return c(r);if(0===o.length){if(P(r)){var y=r.name?": "+r.name:"";return e.KZ("[Function"+y+"]","special")}if(I(r))return e.KZ(RegExp.prototype.toString.call(r),"regexp");if(b(r))return e.KZ(Date.prototype.toString.call(r),"date");if(R(r))return c(r)}var v="",m=!1,E=["{","}"];if(d(r)&&(m=!0,E=["[","]"]),P(r)){var w=r.name?": "+r.name:"";v=" [Function"+w+"]"}if(I(r)&&(v=" "+RegExp.prototype.toString.call(r)),b(r)&&(v=" "+Date.prototype.toUTCString.call(r)),R(r)&&(v=" "+c(r)),0===o.length&&(!m||0==r.length))return E[0]+v+E[1];if(i<0)return I(r)?e.KZ(RegExp.prototype.toString.call(r),"regexp"):e.KZ("[Object]","special");e.YZ.push(r);var S;return S=m?l(e,r,i,g,o):o.map(function(t){return p(e,r,i,g,t,m)}),e.YZ.pop(),f(S,v,E)}function u(e,t){if(w(t))return e.KZ("undefined","undefined");if(T(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.KZ(r,"string")}return m(t)?e.KZ(""+t,"number"):g(t)?e.KZ(""+t,"boolean"):y(t)?e.KZ("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,i,n){for(var s=[],o=0,a=t.length;o<a;++o)N(t,String(o))?s.push(p(e,t,r,i,String(o),!0)):s.push("");return n.forEach(function(n){n.match(/^\d+$/)||s.push(p(e,t,r,i,n,!0))}),s}function p(e,t,r,i,n,s){var o,a,u;if(u=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},u.get?a=u.set?e.KZ("[Getter/Setter]","special"):e.KZ("[Getter]","special"):u.set&&(a=e.KZ("[Setter]","special")),N(i,n)||(o="["+n+"]"),a||(e.YZ.indexOf(u.value)<0?(a=y(r)?h(e,u.value,null):h(e,u.value,r-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.KZ("[Circular]","special")),w(o)){if(s&&n.match(/^\d+$/))return a;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.KZ(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.KZ(o,"string"))}return o+": "+a}function f(e,t,r){var i=0,n=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function y(e){return null===e}function v(e){return null==e}function m(e){return"number"==typeof e}function T(e){return"string"==typeof e}function E(e){return"symbol"==typeof e}function w(e){return void 0===e}function I(e){return S(e)&&"[object RegExp]"===k(e)}function S(e){return"object"==typeof e&&null!==e}function b(e){return S(e)&&"[object Date]"===k(e)}function R(e){return S(e)&&("[object Error]"===k(e)||e instanceof Error)}function P(e){return"function"==typeof e}function A(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function k(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}function O(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var _=/%[sdj%]/g;t.format=function(e){if(!T(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(n(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,s=i.length,o=String(e).replace(_,function(e){if("%%"===e)return"%";if(r>=s)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return e}}),a=i[r];r<s;a=i[++r])o+=y(a)||!S(a)?" "+a:" "+n(a);return o},t.ew=function(r,n){function s(){if(!o){if(i.throwDeprecation)throw new Error(n);i.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}if(w(e.process))return function(){return t.ew(r,n).apply(this,arguments)};if(i.noDeprecation===!0)return r;var o=!1;return s};var F,L={};t.e0=function(e){if(w(F)&&(F=i.$t.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(F)){var r=i.pid;L[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,i)}}else L[e]=function(){};return L[e]},t.qt=n,n.zZ={bold:[1,22],t0:[3,23],r0:[4,24],inverse:[7,27],i0:[37,39],n0:[90,39],s0:[30,39],
blue:[34,39],o0:[36,39],green:[32,39],a0:[35,39],red:[31,39],h0:[33,39]},n.ZZ={u0:"cyan",number:"yellow",c0:"yellow",undefined:"grey",l0:"bold",string:"green",nf:"magenta",p0:"red"},t.isArray=d,t.$c=g,t.el=y,t.f0=v,t.tl=m,t.il=T,t.d0=E,t.nl=w,t.g0=I,t.rl=S,t.y0=b,t.v0=R,t.Zc=P,t.m0=A,t.isBuffer=r(160);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",O(),t.format.apply(t,arguments))},t.Ym=r(159),t.XZ=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}}).call(t,function(){return this}(),r(5))},function(e,t){(function(t){e.i=t}).call(t,{})},function(e,t,r){"use strict";var i=r(11).log,n=r(11).Bs,s={ak:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},uk:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this.T0},set:function(e){var t=this;this.T0&&(this.removeEventListener("track",this.T0),this.removeEventListener("addstream",this.E0)),this.addEventListener("track",this.T0=e),this.addEventListener("addstream",this.E0=function(e){e.stream.addEventListener("addtrack",function(r){var i=new Event("track");i.track=r.track,i.receiver={track:r.track},i.streams=[e.stream],t.dispatchEvent(i)}),e.stream.getTracks().forEach(function(t){var r=new Event("track");r.track=t,r.receiver={track:t},r.streams=[e.stream],this.dispatchEvent(r)}.bind(this))}.bind(this))}})},ck:function(){if("object"==typeof window&&window.RTCPeerConnection&&!("getSenders"in RTCPeerConnection.prototype)&&"createDTMFSender"in RTCPeerConnection.prototype){RTCPeerConnection.prototype.getSenders=function(){return this.w0};var e=RTCPeerConnection.prototype.addStream,t=RTCPeerConnection.prototype.removeStream;RTCPeerConnection.prototype.addStream=function(t){var r=this;r.w0=r.w0||[],e.apply(r,[t]),t.getTracks().forEach(function(e){r.w0.push({track:e,get I0(){return void 0===this.S0&&("audio"===e.kind?this.S0=r.createDTMFSender(e):this.S0=null),this.S0}})})},RTCPeerConnection.prototype.removeStream=function(e){var r=this;r.w0=r.w0||[],t.apply(r,[e]),e.getTracks().forEach(function(e){var t=r.w0.find(function(t){return t.track===e});t&&r.w0.splice(r.w0.indexOf(t),1)})}}},hk:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.b0},set:function(e){var t=this;return this.b0=e,this.src&&URL.revokeObjectURL(this.src),e?(this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),void e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})):void(this.src="")}}))},ik:function(){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){return i("PeerConnection"),e&&e.R0&&(e.P0=e.R0),new webkitRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}));var e=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(t,r,i){var n=this,s=arguments;if(arguments.length>0&&"function"==typeof t)return e.apply(this,arguments);if(0===e.length&&(0===arguments.length||"function"!=typeof arguments[0]))return e.apply(this,[]);var o=function(e){var t={},r=e.result();return r.forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{A0:"local-candidate",k0:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},a=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){var h=function(e){s[1](a(o(e)))};return e.apply(this,[h,arguments[0]])}return new Promise(function(t,r){e.apply(n,[function(e){t(a(o(e)))},r])}).then(r,i)},n.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){var e=arguments,r=this,i=new Promise(function(i,n){t.apply(r,[e[0],i,n])});return e.length<2?i:i.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),n.version<52&&["createOffer","createAnswer"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var r=1===arguments.length?arguments[0]:void 0;return new Promise(function(i,n){t.apply(e,[i,n,r])})}return t.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var t=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}};e.i={ak:s.ak,uk:s.uk,ck:s.ck,hk:s.hk,ik:s.ik,sk:r(164)}},function(e,t,r){"use strict";var i=r(11).log,n=r(11).Bs;e.i=function(){var e=function(e){if("object"!=typeof e||e.C0||e.optional)return e;var t={};return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var i="object"==typeof e[r]?e[r]:{O0:e[r]};void 0!==i.N0&&"number"==typeof i.N0&&(i.min=i.max=i.N0);var n=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.O0){t.optional=t.optional||[];var s={};"number"==typeof i.O0?(s[n("min",r)]=i.O0,t.optional.push(s),s={},s[n("max",r)]=i.O0,t.optional.push(s)):(s[n("",r)]=i.O0,t.optional.push(s))}void 0!==i.N0&&"number"!=typeof i.N0?(t.C0=t.C0||{},t.C0[n("",r)]=i.N0):["min","max"].forEach(function(e){void 0!==i[e]&&(t.C0=t.C0||{},t.C0[n(e,r)]=i[e])})}}),e._0&&(t.optional=(t.optional||[]).concat(e._0)),t},t=function(t,r){if(t=JSON.parse(JSON.stringify(t)),t&&t.fb&&(t.fb=e(t.fb)),t&&"object"==typeof t.video){var s=t.video.F0;s=s&&("object"==typeof s?s:{O0:s});var o=n.version<59;if(s&&("user"===s.N0||"environment"===s.N0||"user"===s.O0||"environment"===s.O0)&&(!navigator.mediaDevices.L0||!navigator.mediaDevices.L0().F0||o)&&(delete t.video.F0,"environment"===s.N0||"environment"===s.O0))return navigator.mediaDevices.D0().then(function(n){n=n.filter(function(e){return"videoinput"===e.kind});var o=n.find(function(e){return e.label.toLowerCase().indexOf("back")!==-1})||n.length&&n[n.length-1];return o&&(t.video.M0=s.N0?{N0:o.M0}:{O0:o.M0}),t.video=e(t.video),i("chrome: "+JSON.stringify(t)),r(t)});t.video=e(t.video)}return i("chrome: "+JSON.stringify(t)),r(t)},r=function(e){return{name:{B0:"NotAllowedError",x0:"OverconstrainedError"}[e.name]||e.name,message:e.message,U0:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},s=function(e,i,n){t(e,function(e){navigator.webkitGetUserMedia(e,i,function(e){n(r(e))})})};navigator.getUserMedia=s;var o=function(e){return new Promise(function(t,r){navigator.getUserMedia(e,t,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,D0:function(){return new Promise(function(e){var t={fb:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(r){e(r.map(function(e){return{label:e.label,kind:t[e.kind],M0:e.id,H0:""}}))})})},L0:function(){return{M0:!0,q0:!0,F0:!0,V0:!0,height:!0,width:!0}}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return a(e).then(function(t){if(e.fb&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(r(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return o(e)};"undefined"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){i("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){i("Dummy mediaDevices.removeEventListener called.")})}},function(e,t,r){"use strict";function i(e){var t=e.filter(function(e){return"audio"===e.kind}),r=e.filter(function(e){return"video"===e.kind});for(e=[];t.length||r.length;)t.length&&e.push(t.shift()),r.length&&e.push(r.shift());return e}function n(e){var t=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(e){if(e&&(e.j0||e.url)){var r=e.j0||e.url,i="string"==typeof r;return i&&(r=[r]),r=r.filter(function(e){var r=0===e.indexOf("turn:")&&e.indexOf("transport=udp")!==-1&&e.indexOf("turn:[")===-1&&!t;return r?(t=!0,!0):0===e.indexOf("stun:")&&o.version>=14393}),delete e.url,e.j0=i?r[0]:r,!!r.length}return!1})}var s=r(85),o=r(11).Bs,a={ik:function(){if(window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e}),o.version<15025)){var e=Object.getOwnPropertyDescriptor(MediaStreamTrack.prototype,"enabled");Object.defineProperty(MediaStreamTrack.prototype,"enabled",{set:function(t){e.set.call(this,t);var r=new Event("enabled");r.enabled=t,this.dispatchEvent(r)}})}window.RTCPeerConnection=function(e){var t=this,r=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=r[e].bind(r)}),this.onicecandidate=null,this.onaddstream=null,this.G0=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.Q0=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.Y0=[],this.K0=[],this.getLocalStreams=function(){return t.Y0},this.getRemoteStreams=function(){return t.K0},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.J0={z0:"all",iceServers:[]},e&&e.R0)switch(e.R0){case"all":case"relay":this.J0.z0=e.R0}this.W0=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers&&(this.J0.iceServers=n(e.iceServers)),this.X0=e,this.$0=[],this.Z0=[]},window.RTCPeerConnection.prototype.e1=function(){var e=new Event("icegatheringstatechange");this.dispatchEvent(e),null!==this.Q0&&this.Q0(e)},window.RTCPeerConnection.prototype.t1=function(){var e=this,t=s.jj(e.localDescription.sdp);this.Z0.forEach(function(r){var i=!r.candidate||0===Object.keys(r.candidate).length;if(i)for(var n=1;n<t.length;n++)t[n].indexOf("\r\na=end-of-candidates\r\n")===-1&&(t[n]+="a=end-of-candidates\r\n");else t[r.candidate.sdpMLineIndex+1]+="a="+r.candidate.candidate+"\r\n";if(e.localDescription.sdp=t.join(""),e.dispatchEvent(r),null!==e.onicecandidate&&e.onicecandidate(r),!r.candidate&&"complete"!==e.iceGatheringState){var s=e.$0.every(function(e){return e.YG&&"completed"===e.YG.state});s&&"complete"!==e.iceGatheringStateChange&&(e.iceGatheringState="complete",e.e1())}}),this.Z0=[]},window.RTCPeerConnection.prototype.getConfiguration=function(){return this.X0},window.RTCPeerConnection.prototype.addStream=function(e){if(o.version>=15025)this.Y0.push(e);else{var t=e.clone();e.getTracks().forEach(function(e,r){var i=t.getTracks()[r];e.addEventListener("enabled",function(e){i.enabled=e.enabled})}),this.Y0.push(t)}this.i1()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.Y0.indexOf(e);t>-1&&(this.Y0.splice(t,1),this.i1())},window.RTCPeerConnection.prototype.getSenders=function(){return this.$0.filter(function(e){return!!e.zG}).map(function(e){return e.zG})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.$0.filter(function(e){return!!e.WG}).map(function(e){return e.WG})},window.RTCPeerConnection.prototype.n1=function(e,t){var r={PG:[],AG:[],kG:[]},i=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].eG===e||t[r].nG===e)return t[r]},n=function(e,t,r,n){var s=i(e.parameters.apt,r),o=i(t.parameters.apt,n);return s&&o&&s.name.toLowerCase()===o.name.toLowerCase()};return e.PG.forEach(function(i){for(var s=0;s<t.PG.length;s++){var o=t.PG[s];if(i.name.toLowerCase()===o.name.toLowerCase()&&i.tG===o.tG){if("rtx"===i.name.toLowerCase()&&i.parameters&&o.parameters.apt&&!n(i,o,e.PG,t.PG))continue;o=JSON.parse(JSON.stringify(o)),o.rG=Math.min(i.rG,o.rG),r.PG.push(o),o.pG=o.pG.filter(function(e){for(var t=0;t<i.pG.length;t++)if(i.pG[t].type===e.type&&i.pG[t].cG===e.cG)return!0;return!1});break}}}),e.AG.forEach(function(e){for(var i=0;i<t.AG.length;i++){var n=t.AG[i];if(e.uri===n.uri){r.AG.push(n);break}}}),r},window.RTCPeerConnection.prototype.s1=function(e,t){var r=this,i=new RTCIceGatherer(r.J0),n=new RTCIceTransport(i);i.o1=function(o){var a=new Event("icecandidate");a.candidate={sdpMid:e,sdpMLineIndex:t};var h=o.candidate,u=!h||0===Object.keys(h).length;u?void 0===i.state&&(i.state="completed"):(h.Yj="RTCP"===n.Yj?2:1,a.candidate.candidate=s.Xj(h));var c=s.jj(r.localDescription.sdp);u?c[a.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n":c[a.candidate.sdpMLineIndex+1]+="a="+a.candidate.candidate+"\r\n",r.localDescription.sdp=c.join("");var l=r.a1?r.a1:r.$0,p=l.every(function(e){return e.YG&&"completed"===e.YG.state});switch(r.iceGatheringState){case"new":u||r.Z0.push(a),u&&p&&r.Z0.push(new Event("icecandidate"));break;case"gathering":r.t1(),u||(r.dispatchEvent(a),null!==r.onicecandidate&&r.onicecandidate(a)),p&&(r.dispatchEvent(new Event("icecandidate")),null!==r.onicecandidate&&r.onicecandidate(new Event("icecandidate")),r.iceGatheringState="complete",r.e1());break;case"complete":}},n.h1=function(){r.u1()};var o=new RTCDtlsTransport(n);return o.c1=function(){r.u1()},o.onerror=function(){o.state="failed",r.u1()},{YG:i,l1:n,KG:o}},window.RTCPeerConnection.prototype.f1=function(e,t,r){var i=this.n1(e.d1,e.g1);t&&e.zG&&(i.v1=e.XG,i.CG={UG:s.qj},e.m1.length&&(i.CG.dG=e.m1[0].dG),e.zG.send(i)),r&&e.WG&&("video"===e.kind&&e.m1&&o.version<15019&&e.m1.forEach(function(e){delete e.LG}),i.v1=e.m1,i.CG={UG:e.UG},e.XG.length&&(i.CG.dG=e.XG[0].dG),e.WG.receive(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,r,i=this;if("offer"===e.type)this.a1&&(t=s.jj(e.sdp),r=t.shift(),t.forEach(function(e,t){var r=s.RG(e);i.a1[t].d1=r}),this.$0=this.a1,delete this.a1);else if("answer"===e.type){t=s.jj(i.remoteDescription.sdp),r=t.shift();var n=s.Gj(r,"a=ice-lite").length>0;t.forEach(function(e,t){var o=i.$0[t],a=o.YG,h=o.l1,u=o.KG,c=o.d1,l=o.g1,p="0"===e.split("\n",1)[0].split(" ",2)[1];if(!p&&!o.T1){var f=s.IG(e,r),d=s.mG(e,r);n&&(d.TG="server"),i.W0&&0!==t||(h.start(a,f,n?"controlling":"controlled"),u.start(d));var g=i.n1(c,l);i.f1(o,g.PG.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this.E1("have-local-offer");break;case"answer":this.E1("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var o=arguments.length>1&&"function"==typeof arguments[1];if(o){var a=arguments[1];window.setTimeout(function(){a(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering",i.e1()),i.t1()},0)}var h=Promise.resolve();return h.then(function(){o||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering",i.e1()),window.setTimeout(i.t1.bind(i),500))}),h},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,r=new MediaStream,i=[],n=s.jj(e.sdp),a=n.shift(),h=s.Gj(a,"a=ice-lite").length>0;switch(this.W0=s.Gj(a,"a=group:BUNDLE ").length>0,n.forEach(function(n,u){var c=s.Vj(n),l=c[0].substr(2).split(" "),p=l[0],f="0"===l[1],d=s.$G(n,a),g=s.Gj(n,"a=mid:");if(g=g.length?g[0].substr(6):s.Hj(),"application"===p&&"DTLS/SCTP"===l[2])return void(t.$0[u]={JG:g,T1:!0});var y,v,m,T,E,w,I,S,b,R,P,A,k=s.RG(n);f||(P=s.IG(n,a),A=s.mG(n,a),A.TG="client"),S=s._G(n);var C,O=s.Gj(n,"a=ssrc:").map(function(e){return s.fG(e)}).filter(function(e){return"cname"===e.gG})[0];O&&(C=O.value);var N=s.Gj(n,"a=end-of-candidates",a).length>0,_=s.Gj(n,"a=candidate:").map(function(e){return s.qD(e)}).filter(function(e){return"1"===e.Yj});if("offer"!==e.type||f)"answer"!==e.type||f||(y=t.$0[u],v=y.YG,m=y.l1,T=y.KG,E=y.zG,w=y.WG,I=y.XG,b=y.d1,t.$0[u].m1=S,t.$0[u].g1=k,t.$0[u].UG=C,(h||N)&&_.length&&m.setRemoteCandidates(_),t.W0&&0!==u||(m.start(v,P,"controlling"),T.start(A)),t.f1(y,"sendrecv"===d||"recvonly"===d,"sendrecv"===d||"sendonly"===d),!w||"sendrecv"!==d&&"sendonly"!==d?delete y.WG:(R=w.track,i.push([R,w]),r.addTrack(R)));else{var F=t.W0&&u>0?{YG:t.$0[0].YG,l1:t.$0[0].l1,KG:t.$0[0].KG}:t.s1(g,u);if(!N||t.W0&&0!==u||F.l1.setRemoteCandidates(_),b=RTCRtpReceiver.getCapabilities(p),o.version<15019&&(b.PG=b.PG.filter(function(e){return"rtx"!==e.name})),I=[{dG:1001*(2*u+2)}],"sendrecv"!==d&&"sendonly"!==d||(w=new RTCRtpReceiver(F.KG,p),R=w.track,i.push([R,w]),r.addTrack(R)),t.Y0.length>0&&t.Y0[0].getTracks().length>=u){var L;"audio"===p?L=t.Y0[0].getAudioTracks()[0]:"video"===p&&(L=t.Y0[0].getVideoTracks()[0]),L&&(o.version>=15019&&"video"===p&&(I[0].LG={dG:1001*(2*u+2)+1}),E=new RTCRtpSender(L,F.KG))}t.$0[u]={YG:F.YG,l1:F.l1,KG:F.KG,d1:b,g1:k,zG:E,WG:w,kind:p,JG:g,UG:C,XG:I,m1:S},t.f1(t.$0[u],!1,"sendrecv"===d||"sendonly"===d)}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this.E1("have-remote-offer");break;case"answer":this.E1("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return r.getTracks().length&&(t.K0.push(r),window.setTimeout(function(){var e=new Event("addstream");e.stream=r,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),i.forEach(function(e){var i=e[0],n=e[1],s=new Event("track");s.track=i,s.receiver=n,s.streams=[r],t.dispatchEvent(s),null!==t.G0&&window.setTimeout(function(){t.G0(s)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.$0.forEach(function(e){e.l1&&e.l1.stop(),e.KG&&e.KG.stop(),e.zG&&e.zG.stop(),e.WG&&e.WG.stop()}),this.E1("closed")},window.RTCPeerConnection.prototype.E1=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype.i1=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype.u1=function(){var e,t=this,r={w1:0,closed:0,I1:0,S1:0,connected:0,b1:0,Ws:0};if(this.$0.forEach(function(e){r[e.l1.state]++,r[e.KG.state]++}),r.connected+=r.b1,e="new",r.Ws>0?e="failed":r.I1>0||r.S1>0?e="connecting":r.disconnected>0?e="disconnected":r["w1"]>0?e="new":(r.connected>0||r.b1>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this.dispatchEvent(i),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(i)}},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this.a1)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var r=[],n=0,a=0;if(this.Y0.length&&(n=this.Y0[0].getAudioTracks().length,a=this.Y0[0].getVideoTracks().length),t){if(t.C0||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.R1&&(n=t.R1),void 0!==t.P1&&(a=t.P1)}for(this.Y0.length&&this.Y0[0].getTracks().forEach(function(e){r.push({kind:e.kind,track:e,A1:"audio"===e.kind?n>0:a>0}),"audio"===e.kind?n--:"video"===e.kind&&a--});n>0||a>0;)n>0&&(r.push({kind:"audio",A1:!0}),n--),a>0&&(r.push({kind:"video",A1:!0}),a--);r=i(r);var h=s.GG(),u=[];r.forEach(function(t,r){var i=t.track,n=t.kind,a=s.Hj(),h=e.W0&&r>0?{YG:u[0].YG,l1:u[0].l1,KG:u[0].KG}:e.s1(a,r),c=RTCRtpSender.getCapabilities(n);o.version<15019&&(c.PG=c.PG.filter(function(e){return"rtx"!==e.name})),c.PG.forEach(function(e){"H264"===e.name&&void 0===e.parameters["C1"]&&(e.parameters["C1"]="1")});var l,p,f=[{dG:1001*(2*r+1)}];i&&(o.version>=15019&&"video"===n&&(f[0].LG={dG:1001*(2*r+1)+1}),l=new RTCRtpSender(i,h.KG)),t.A1&&(p=new RTCRtpReceiver(h.KG,n)),u[r]={YG:h.YG,l1:h.l1,KG:h.KG,d1:c,g1:null,zG:l,WG:p,kind:n,JG:a,XG:f,m1:null}}),this.W0&&(h+="a=group:BUNDLE "+u.map(function(e){return e.JG}).join(" ")+"\r\n"),r.forEach(function(t,r){var i=u[r];h+=s.QG(i,i.d1,"offer",e.Y0[0])}),this.a1=u;var c=new RTCSessionDescription({type:"offer",sdp:h});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=s.GG();this.W0&&(t+="a=group:BUNDLE "+this.$0.map(function(e){return e.JG}).join(" ")+"\r\n"),this.$0.forEach(function(r){if(r.T1)return void(t+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+r.JG+"\r\n");var i=e.n1(r.d1,r.g1);t+=s.QG(r,i,"answer",e.Y0[0])});var r=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,r),Promise.resolve(r)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(e){var t=e.sdpMLineIndex;if(e.sdpMid)for(var r=0;r<this.$0.length;r++)if(this.$0[r].JG===e.sdpMid){t=r;break}var i=this.$0[t];if(i){var n=Object.keys(e.candidate).length>0?s.qD(e.candidate):{};if("tcp"===n.protocol&&(0===n.port||9===n.port))return Promise.resolve();if("1"!==n.Yj)return Promise.resolve();i.l1.addRemoteCandidate(n);var o=s.jj(this.remoteDescription.sdp);o[t+1]+=(n.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=o.join("")}}else for(var a=0;a<this.$0.length;a++)if(this.$0[a].l1.addRemoteCandidate({}),this.W0)return Promise.resolve();return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.$0.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(r){t[r]&&e.push(t[r].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1],r=function(e){return{O1:"inbound-rtp",N1:"outbound-rtp",_1:"candidate-pair",A0:"local-candidate",k0:"remote-candidate"}[e.type]||e.type};return new Promise(function(i){var n=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){e[t].type=r(e[t]),n.set(t,e[t])})}),t&&window.setTimeout(t,0,n),i(n)})})}}};e.i={ik:a.ik,sk:r(166)}},function(e,t){"use strict";e.i=function(){var e=function(e){return{name:{B0:"NotAllowedError"}[e.name]||e.name,message:e.message,U0:e.U0,toString:function(){return this.name}}},t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(r){return t(r)["catch"](function(t){return Promise.reject(e(t))})}}},function(e,t,r){"use strict";var i=r(11).Bs,n={uk:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this.T0},set:function(e){this.T0&&(this.removeEventListener("track",this.T0),this.removeEventListener("addstream",this.E0)),this.addEventListener("track",this.T0=e),this.addEventListener("addstream",this.E0=function(e){e.stream.getTracks().forEach(function(t){var r=new Event("track");r.track=t,r.receiver={track:t},r.streams=[e.stream],this.dispatchEvent(r)}.bind(this))}.bind(this))}})},hk:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},ik:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(i.version<38&&e&&e.iceServers){for(var r=[],n=0;n<e.iceServers.length;n++){var s=e.iceServers[n];if(s.hasOwnProperty("urls"))for(var o=0;o<s.j0.length;o++){var a={url:s.j0[o]};0===s.j0[o].indexOf("turn")&&(a.username=s.username,a.F1=s.F1),r.push(a)}else r.push(e.iceServers[n])}e.iceServers=r}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var t=function(e){var t=new Map;return Object.keys(e).forEach(function(r){t.set(r,e[r]),t[r]=e[r]}),t},r={O1:"inbound-rtp",N1:"outbound-rtp",_1:"candidate-pair",A0:"local-candidate",k0:"remote-candidate"},n=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,s,o){return n.apply(this,[e||null]).then(function(e){if(i.version<48&&(e=t(e)),i.version<53&&!s)try{e.forEach(function(e){e.type=r[e.type]||e.type})}catch(n){if("TypeError"!==n.name)throw n;e.forEach(function(t,i){e.set(i,Object.assign({},t,{type:r[t.type]||t.type}))})}return e}).then(s,o)}}}};e.i={uk:n.uk,hk:n.hk,ik:n.ik,sk:r(168)}},function(e,t,r){"use strict";var i=r(11).log,n=r(11).Bs;e.i=function(){var e=function(e){return{name:{L1:"NotAllowedError",B0:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,U0:e.U0,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,r,s){var o=function(e){if("object"!=typeof e||e.D1)return e;var t=[];return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var i=e[r]="object"==typeof e[r]?e[r]:{O0:e[r]};if(void 0===i.min&&void 0===i.max&&void 0===i.N0||t.push(r),void 0!==i.N0&&("number"==typeof i.N0?i.min=i.max=i.N0:e[r]=i.N0,delete i.N0),void 0!==i.O0){e._0=e._0||[];var n={};"number"==typeof i.O0?n[r]={min:i.O0,max:i.O0}:n[r]=i.O0,e._0.push(n),delete i.O0,Object.keys(i).length||delete e[r]}}}),t.length&&(e.D1=t),e};return t=JSON.parse(JSON.stringify(t)),n.version<38&&(i("spec: "+JSON.stringify(t)),t.fb&&(t.fb=o(t.fb)),t.video&&(t.video=o(t.video)),i("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,r,function(t){s(e(t))})},r=function(e){return new Promise(function(r,i){t(e,r,i)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:r,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.D0=navigator.mediaDevices.D0||function(){return new Promise(function(e){var t=[{kind:"audioinput",M0:"default",label:"",H0:""},{kind:"videoinput",M0:"default",label:"",H0:""}];e(t)})},n.version<41){var s=navigator.mediaDevices.D0.bind(navigator.mediaDevices);navigator.mediaDevices.D0=function(){return s().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(n.version<49){var o=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return o(t).then(function(e){if(t.fb&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return e},function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,r,i){return n.version<44?t(e,r,i):(console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),void navigator.mediaDevices.getUserMedia(e).then(r,i))}}},function(e,t){"use strict";var r={sk:function(){navigator.getUserMedia||(navigator.webkitGetUserMedia?navigator.getUserMedia=navigator.webkitGetUserMedia.bind(navigator):navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(navigator.getUserMedia=function(e,t,r){navigator.mediaDevices.getUserMedia(e).then(t,r)}.bind(navigator)))}};e.i={sk:r.sk}}]);
//# sourceMappingURL=amp.java.hivejs.hive.min.js.map
//# sourceMappingURL=amp.java.hivejs.hive.min.js.map
